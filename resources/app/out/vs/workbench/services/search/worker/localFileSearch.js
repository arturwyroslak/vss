/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ue=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],oe=function(ie){for(var e=[],C=0,A=ie.length;C<A;C++)e[C]=ue[ie[C]];return e};define(ue[10],oe([0,1]),function(ie,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Td=void 0,e.$Td=Symbol("MicrotaskDelay")}),define(ue[5],oe([0,1,4,2,3,16]),function(ie,e,C,A,O,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$fg=e.$eg=e.$dg=e.$cg=e.$bg=e.$ag=e.$_f=e.$$f=e.$0f=e.$9f=e.$8f=e.$7f=e.$6f=e.$5f=e.$4f=e.$3f=void 0;function $(s){return s===47||s===92}e.$3f=$;function M(s){return s.replace(/[\\/]/g,C.$gc.sep)}e.$4f=M;function F(s){return s.indexOf("/")===-1&&(s=M(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}e.$5f=F;function K(s,h=C.$gc.sep){if(!s)return"";const I=s.length,S=s.charCodeAt(0);if($(S)){if($(s.charCodeAt(1))&&!$(s.charCodeAt(2))){let B=3;const Y=B;for(;B<I&&!$(s.charCodeAt(B));B++);if(Y!==B&&!$(s.charCodeAt(B+1))){for(B+=1;B<I;B++)if($(s.charCodeAt(B)))return s.slice(0,B+1).replace(/[\\/]/g,h)}}return h}else if(j(S)&&s.charCodeAt(1)===58)return $(s.charCodeAt(2))?s.slice(0,2)+h:s.slice(0,2);let Q=s.indexOf("://");if(Q!==-1){for(Q+=3;Q<I;Q++)if($(s.charCodeAt(Q)))return s.slice(0,Q+1)}return""}e.$6f=K;function D(s){if(!A.$i||!s||s.length<5)return!1;let h=s.charCodeAt(0);if(h!==92||(h=s.charCodeAt(1),h!==92))return!1;let I=2;const S=I;for(;I<s.length&&(h=s.charCodeAt(I),h!==92);I++);return!(S===I||(h=s.charCodeAt(I+1),isNaN(h)||h===92))}e.$7f=D;const Z=/[\\/:\*\?"<>\|]/g,w=/[\\/]/g,f=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function i(s,h=A.$i){const I=h?Z:w;return!(!s||s.length===0||/^\s+$/.test(s)||(I.lastIndex=0,I.test(s))||h&&f.test(s)||s==="."||s===".."||h&&s[s.length-1]==="."||h&&s.length!==s.trim().length||s.length>255)}e.$8f=i;function o(s,h,I){const S=s===h;return!I||S?S:!s||!h?!1:(0,O.$bf)(s,h)}e.$9f=o;function m(s,h,I,S=C.sep){if(s===h)return!0;if(!s||!h||h.length>s.length)return!1;if(I){if(!(0,O.$cf)(s,h))return!1;if(h.length===s.length)return!0;let B=h.length;return h.charAt(h.length-1)===S&&B--,s.charAt(B)===S}return h.charAt(h.length-1)!==S&&(h+=S),s.indexOf(h)===0}e.$0f=m;function j(s){return s>=65&&s<=90||s>=97&&s<=122}e.$$f=j;function L(s,h){return A.$i&&s.endsWith(":")&&(s+=C.sep),(0,C.$ic)(s)||(s=(0,C.$jc)(h,s)),s=(0,C.$hc)(s),A.$i?(s=(0,O.$We)(s,C.sep),s.endsWith(":")&&(s+=C.sep)):(s=(0,O.$We)(s,C.sep),s||(s=C.sep)),s}e.$_f=L;function b(s){const h=(0,C.$hc)(s);return A.$i?s.length>3?!1:W(h)&&(s.length===2||h.charCodeAt(2)===92):h===C.$gc.sep}e.$ag=b;function W(s,h=A.$i){return h?j(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}e.$bg=W;function ee(s,h=A.$i){return W(s,h)?s[0]:void 0}e.$cg=ee;function R(s,h,I){return h.length>s.length?-1:s===h?0:(I&&(s=s.toLowerCase(),h=h.toLowerCase()),s.indexOf(h))}e.$dg=R;function U(s){const h=s.split(":");let I,S,Q;for(const B of h){const Y=Number(B);(0,y.$Of)(Y)?S===void 0?S=Y:Q===void 0&&(Q=Y):I=I?[I,B].join(":"):B}if(!I)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:I,line:S!==void 0?S:void 0,column:Q!==void 0?Q:S!==void 0?1:void 0}}e.$eg=U;const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",X="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function J(s,h,I=8){let S="";for(let B=0;B<I;B++){let Y;B===0&&A.$i&&!h&&(I===3||I===4)?Y=X:Y=k,S+=Y.charAt(Math.floor(Math.random()*Y.length))}let Q;return h?Q=`${h}-${S}`:Q=S,s?(0,C.$jc)(s,Q):Q}e.$fg=J}),define(ue[11],oe([0,1,12,2,3,6]),function(ie,e,C,A,O,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$qg=e.$pg=e.$og=e.$ng=e.$mg=e.$lg=e.$kg=e.$jg=e.$ig=e.$hg=e.$gg=e.Schemas=void 0;var $;(function(w){w.inMemory="inmemory",w.vscode="vscode",w.internal="private",w.walkThrough="walkThrough",w.walkThroughSnippet="walkThroughSnippet",w.http="http",w.https="https",w.file="file",w.mailto="mailto",w.untitled="untitled",w.data="data",w.command="command",w.vscodeRemote="vscode-remote",w.vscodeRemoteResource="vscode-remote-resource",w.vscodeManagedRemoteResource="vscode-managed-remote-resource",w.vscodeUserData="vscode-userdata",w.vscodeCustomEditor="vscode-custom-editor",w.vscodeNotebookCell="vscode-notebook-cell",w.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",w.vscodeNotebookCellOutput="vscode-notebook-cell-output",w.vscodeInteractiveInput="vscode-interactive-input",w.vscodeSettings="vscode-settings",w.vscodeWorkspaceTrust="vscode-workspace-trust",w.vscodeTerminal="vscode-terminal",w.vscodeChatSesssion="vscode-chat-editor",w.webviewPanel="webview-panel",w.vscodeWebview="vscode-webview",w.extension="extension",w.aiChat="cursor.aichat",w.aiReader="cursor.aireader",w.vscodeFileResource="vscode-file",w.tmp="tmp",w.vsls="vsls",w.vscodeSourceControl="vscode-scm"})($||(e.Schemas=$={}));function M(w,f){return y.URI.isUri(w)?(0,O.$bf)(w.scheme,f):(0,O.$cf)(w,f+":")}e.$gg=M;function F(w,...f){return f.some(i=>M(w,i))}e.$hg=F,e.$ig="vscode-tkn",e.$jg="tkn";class K{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${$.vscodeRemoteResource}`}setPreferredWebSchema(f){this.d=f}setDelegate(f){this.e=f}setServerRootPath(f){this.f=`${f}/${$.vscodeRemoteResource}`}set(f,i,o){this.a[f]=i,this.b[f]=o}setConnectionToken(f,i){this.c[f]=i}getPreferredWebSchema(){return this.d}rewrite(f){if(this.e)try{return this.e(f)}catch(b){return C.$1(b),f}const i=f.authority;let o=this.a[i];o&&o.indexOf(":")!==-1&&o.indexOf("[")===-1&&(o=`[${o}]`);const m=this.b[i],j=this.c[i];let L=`path=${encodeURIComponent(f.path)}`;return typeof j=="string"&&(L+=`&${e.$jg}=${encodeURIComponent(j)}`),y.URI.from({scheme:A.$o?this.d:$.vscodeRemoteResource,authority:`${o}:${m}`,path:this.f,query:L})}}e.$kg=new K,e.$lg="vs/../../extensions",e.$mg="vs/../../node_modules",e.$ng="vs/../../node_modules.asar",e.$og="vs/../../node_modules.asar.unpacked",e.$pg="vscode-app";class D{static{this.a=e.$pg}asBrowserUri(f){const i=this.b(f,ie);return this.uriToBrowserUri(i)}uriToBrowserUri(f){return f.scheme===$.vscodeRemote?e.$kg.rewrite(f):f.scheme===$.file&&(A.$m||A.$q===`${$.vscodeFileResource}://${D.a}`)?f.with({scheme:$.vscodeFileResource,authority:f.authority||D.a,query:null,fragment:null}):f}asFileUri(f){const i=this.b(f,ie);return this.uriToFileUri(i)}uriToFileUri(f){return f.scheme===$.vscodeFileResource?f.with({scheme:$.file,authority:f.authority!==D.a?f.authority:null,query:null,fragment:null}):f}b(f,i){return y.URI.isUri(f)?f:y.URI.parse(i.toUrl(f))}}e.$qg=new D;var Z;(function(w){const f=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);w.CoopAndCoep=Object.freeze(f.get("3"));const i="vscode-coi";function o(j){let L;typeof j=="string"?L=new URL(j).searchParams:j instanceof URL?L=j.searchParams:y.URI.isUri(j)&&(L=new URL(j.toString(!0)).searchParams);const b=L?.get(i);if(b)return f.get(b)}w.getHeadersFromQuery=o;function m(j,L,b){if(!globalThis.crossOriginIsolated)return;const W=L&&b?"3":b?"2":"1";j instanceof URLSearchParams?j.set(i,W):j[i]=W}w.addSearchParam=m})(Z||(e.COI=Z={}))}),define(ue[7],oe([0,1,5,11,4,2,3,6]),function(ie,e,C,A,O,y,$,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Tg=e.DataUri=e.$Sg=e.$Rg=e.$Qg=e.$Pg=e.$Og=e.$Ng=e.$Mg=e.$Lg=e.$Kg=e.$Jg=e.$Ig=e.$Hg=e.$Gg=e.$Fg=e.$Eg=e.$Dg=e.$Cg=e.$Bg=e.$Ag=e.$zg=e.$yg=e.$xg=void 0;function F(f){return(0,M.$wc)(f,!0)}e.$xg=F;class K{constructor(i){this.a=i}compare(i,o,m=!1){return i===o?0:(0,$.$7e)(this.getComparisonKey(i,m),this.getComparisonKey(o,m))}isEqual(i,o,m=!1){return i===o?!0:!i||!o?!1:this.getComparisonKey(i,m)===this.getComparisonKey(o,m)}getComparisonKey(i,o=!1){return i.with({path:this.a(i)?i.path.toLowerCase():void 0,fragment:o?null:void 0}).toString()}ignorePathCasing(i){return this.a(i)}isEqualOrParent(i,o,m=!1){if(i.scheme===o.scheme){if(i.scheme===A.Schemas.file)return C.$0f(F(i),F(o),this.a(i))&&i.query===o.query&&(m||i.fragment===o.fragment);if((0,e.$Og)(i.authority,o.authority))return C.$0f(i.path,o.path,this.a(i),"/")&&i.query===o.query&&(m||i.fragment===o.fragment)}return!1}joinPath(i,...o){return M.URI.joinPath(i,...o)}basenameOrAuthority(i){return(0,e.$Gg)(i)||i.authority}basename(i){return O.$gc.basename(i.path)}extname(i){return O.$gc.extname(i.path)}dirname(i){if(i.path.length===0)return i;let o;return i.scheme===A.Schemas.file?o=M.URI.file(O.$mc(F(i))).path:(o=O.$gc.dirname(i.path),i.authority&&o.length&&o.charCodeAt(0)!==47&&(console.error(`dirname("${i.toString})) resulted in a relative path`),o="/")),i.with({path:o})}normalizePath(i){if(!i.path.length)return i;let o;return i.scheme===A.Schemas.file?o=M.URI.file(O.$hc(F(i))).path:o=O.$gc.normalize(i.path),i.with({path:o})}relativePath(i,o){if(i.scheme!==o.scheme||!(0,e.$Og)(i.authority,o.authority))return;if(i.scheme===A.Schemas.file){const L=O.$lc(F(i),F(o));return y.$i?C.$4f(L):L}let m=i.path||"/";const j=o.path||"/";if(this.a(i)){let L=0;for(const b=Math.min(m.length,j.length);L<b&&!(m.charCodeAt(L)!==j.charCodeAt(L)&&m.charAt(L).toLowerCase()!==j.charAt(L).toLowerCase());L++);m=j.substr(0,L)+m.substr(L)}return O.$gc.relative(m,j)}resolvePath(i,o){if(i.scheme===A.Schemas.file){const m=M.URI.file(O.$kc(F(i),o));return i.with({authority:m.authority,path:m.path})}return o=C.$5f(o),i.with({path:O.$gc.resolve(i.path,o)})}isAbsolutePath(i){return!!i.path&&i.path[0]==="/"}isEqualAuthority(i,o){return i===o||i!==void 0&&o!==void 0&&(0,$.$bf)(i,o)}hasTrailingPathSeparator(i,o=O.sep){if(i.scheme===A.Schemas.file){const m=F(i);return m.length>C.$6f(m).length&&m[m.length-1]===o}else{const m=i.path;return m.length>1&&m.charCodeAt(m.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(i.fsPath)}}removeTrailingPathSeparator(i,o=O.sep){return(0,e.$Pg)(i,o)?i.with({path:i.path.substr(0,i.path.length-1)}):i}addTrailingPathSeparator(i,o=O.sep){let m=!1;if(i.scheme===A.Schemas.file){const j=F(i);m=j!==void 0&&j.length===C.$6f(j).length&&j[j.length-1]===o}else{o="/";const j=i.path;m=j.length===1&&j.charCodeAt(j.length-1)===47}return!m&&!(0,e.$Pg)(i,o)?i.with({path:i.path+"/"}):i}}e.$yg=K,e.$zg=new K(()=>!1),e.$Ag=new K(f=>f.scheme===A.Schemas.file?!y.$k:!0),e.$Bg=new K(f=>!0),e.$Cg=e.$zg.isEqual.bind(e.$zg),e.$Dg=e.$zg.isEqualOrParent.bind(e.$zg),e.$Eg=e.$zg.getComparisonKey.bind(e.$zg),e.$Fg=e.$zg.basenameOrAuthority.bind(e.$zg),e.$Gg=e.$zg.basename.bind(e.$zg),e.$Hg=e.$zg.extname.bind(e.$zg),e.$Ig=e.$zg.dirname.bind(e.$zg),e.$Jg=e.$zg.joinPath.bind(e.$zg),e.$Kg=e.$zg.normalizePath.bind(e.$zg),e.$Lg=e.$zg.relativePath.bind(e.$zg),e.$Mg=e.$zg.resolvePath.bind(e.$zg),e.$Ng=e.$zg.isAbsolutePath.bind(e.$zg),e.$Og=e.$zg.isEqualAuthority.bind(e.$zg),e.$Pg=e.$zg.hasTrailingPathSeparator.bind(e.$zg),e.$Qg=e.$zg.removeTrailingPathSeparator.bind(e.$zg),e.$Rg=e.$zg.addTrailingPathSeparator.bind(e.$zg);function D(f,i){const o=[];for(let m=0;m<f.length;m++){const j=i(f[m]);f.some((L,b)=>b===m?!1:(0,e.$Dg)(j,i(L)))||o.push(f[m])}return o}e.$Sg=D;var Z;(function(f){f.META_DATA_LABEL="label",f.META_DATA_DESCRIPTION="description",f.META_DATA_SIZE="size",f.META_DATA_MIME="mime";function i(o){const m=new Map;o.path.substring(o.path.indexOf(";")+1,o.path.lastIndexOf(";")).split(";").forEach(b=>{const[W,ee]=b.split(":");W&&ee&&m.set(W,ee)});const L=o.path.substring(0,o.path.indexOf(";"));return L&&m.set(f.META_DATA_MIME,L),m}f.parseMetaData=i})(Z||(e.DataUri=Z={}));function w(f,i,o){if(i){let m=f.path;return m&&m[0]!==O.$gc.sep&&(m=O.$gc.sep+m),f.with({scheme:o,authority:i,path:m})}return f.with({scheme:o})}e.$Tg=w}),define(ue[8],oe([0,1,13,12,17,18,7,2,10,19]),function(ie,e,C,A,O,y,$,M,F,K){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$yh=e.$xh=e.$wh=e.$vh=e.$uh=e.$th=e.Promises=e.$sh=e.$rh=e.$qh=e.$ph=e.$oh=e.$nh=e.$mh=e.$lh=e.$kh=e.$jh=e.$ih=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=e.$7g=e.$6g=e.$5g=e.$4g=e.$3g=e.$2g=e.$1g=e.$Zg=e.$Yg=e.$Xg=e.$Wg=e.$Vg=e.$Ug=void 0;function D(c){return!!c&&typeof c.then=="function"}e.$Ug=D;function Z(c){const t=new C.$7d,n=c(t.token),r=new Promise((a,T)=>{const _=t.token.onCancellationRequested(()=>{_.dispose(),T(new A.$5)});Promise.resolve(n).then(x=>{_.dispose(),t.dispose(),a(x)},x=>{_.dispose(),t.dispose(),T(x)})});return new class{cancel(){t.cancel(),t.dispose()}then(a,T){return r.then(a,T)}catch(a){return this.then(void 0,a)}finally(a){return r.finally(a)}}}e.$Vg=Z;function w(c,t,n){return new Promise((r,a)=>{const T=t.onCancellationRequested(()=>{T.dispose(),r(n)});c.then(r,a).finally(()=>T.dispose())})}e.$Wg=w;function f(c,t){return new Promise((n,r)=>{const a=t.onCancellationRequested(()=>{a.dispose(),r(new A.$5)});c.then(n,r).finally(()=>a.dispose())})}e.$Xg=f;async function i(c){let t=-1;const n=c.map((r,a)=>r.then(T=>(t=a,T)));try{return await Promise.race(n)}finally{c.forEach((r,a)=>{a!==t&&r.cancel()})}}e.$Yg=i;function o(c,t,n){let r;const a=setTimeout(()=>{r?.(void 0),n?.()},t);return Promise.race([c.finally(()=>clearTimeout(a)),new Promise(T=>r=T)])}e.$Zg=o;function m(c){return new Promise((t,n)=>{const r=c();D(r)?r.then(t,n):t(r)})}e.$1g=m;class j{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const n=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(n,n).then(r)})}return new Promise((n,r)=>{this.b.then(n,r)})}return this.a=t(),new Promise((n,r)=>{this.a.then(a=>{this.a=null,n(a)},a=>{this.a=null,r(a)})})}dispose(){this.f=!0}}e.$2g=j;class L{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$3g=L;class b{constructor(){this.a=new Map}queue(t,n){const a=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(n).finally(()=>{this.a.get(t)===a&&this.a.delete(t)});return this.a.set(t,a),a}}e.$4g=b;const W=(c,t)=>{let n=!0;const r=setTimeout(()=>{n=!1,t()},c);return{isTriggered:()=>n,dispose:()=>{clearTimeout(r),n=!1}}},ee=c=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,c())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class R{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,n=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((a,T)=>{this.d=a,this.f=T}).then(()=>{if(this.b=null,this.d=null,this.g){const a=this.g;return this.g=null,a()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=n===F.$Td?ee(r):W(n,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new A.$5),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$5g=R;class U{constructor(t){this.a=new R(t),this.b=new j}trigger(t,n){return this.a.trigger(()=>this.b.queue(t),n)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$6g=U;class k{constructor(){this.a=!1,this.b=new Promise((t,n)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$7g=k;class X extends k{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$8g=X;function J(c,t){return t?new Promise((n,r)=>{const a=setTimeout(()=>{T.dispose(),n()},c),T=t.onCancellationRequested(()=>{clearTimeout(a),T.dispose(),r(new A.$5)})}):Z(n=>J(c,n))}e.$9g=J;function s(c,t=0,n){const r=setTimeout(()=>{c(),n&&a.dispose()},t),a=(0,y.$Rc)(()=>{clearTimeout(r),n?.deleteAndLeak(a)});return n?.add(a),a}e.$0g=s;function h(c){const t=[];let n=0;const r=c.length;function a(){return n<r?c[n++]():null}function T(_){_!=null&&t.push(_);const x=a();return x?x.then(T):Promise.resolve(t)}return Promise.resolve(null).then(T)}e.$$g=h;function I(c,t=r=>!!r,n=null){let r=0;const a=c.length,T=()=>{if(r>=a)return Promise.resolve(n);const _=c[r++];return Promise.resolve(_()).then(fe=>t(fe)?Promise.resolve(fe):T())};return T()}e.$_g=I;function S(c,t=r=>!!r,n=null){if(c.length===0)return Promise.resolve(n);let r=c.length;const a=()=>{r=-1;for(const T of c)T.cancel?.()};return new Promise((T,_)=>{for(const x of c)x.then(fe=>{--r>=0&&t(fe)?(a(),T(fe)):r===0&&T(n)}).catch(fe=>{--r>=0&&(a(),_(fe))})})}e.$ah=S;class Q{constructor(t){this.a=0,this.b=!1,this.f=t,this.g=[],this.d=0,this.h=new O.$Wd}whenIdle(){return this.size>0?O.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(t){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((n,r)=>{this.g.push({factory:t,c:n,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const t=this.g.shift();this.d++;const n=t.factory();n.then(t.c,t.e),n.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$bh=Q;class B extends Q{constructor(){super(1)}}e.$ch=B;class Y{constructor(){this.a=new he,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$dh=Y;class re{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new l;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueSize(t,n=$.$zg){const r=n.getComparisonKey(t);return this.a.get(r)?.size??0}queueFor(t,n,r=$.$zg){const a=r.getComparisonKey(t);let T=this.a.get(a);if(!T){T=new B;const _=this.f++,x=O.Event.once(T.onDrained)(()=>{T?.dispose(),this.a.delete(a),this.h(),this.d?.deleteAndDispose(_),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new y.$3c),this.d.set(_,x),this.a.set(a,T)}return T.queue(n)}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$eh=re;class se{constructor(t,n){this.a=-1,typeof t=="function"&&typeof n=="number"&&this.setIfNotSet(t,n)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,n){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},n)}setIfNotSet(t,n){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},n))}}e.$fh=se;class te{constructor(){this.d=void 0}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,n,r=globalThis){this.cancel();const a=r.setInterval(()=>{t()},n);this.d=(0,y.$Rc)(()=>{r.clearInterval(a),this.d=void 0})}dispose(){this.cancel()}}e.$gh=te;class le{constructor(t,n){this.b=-1,this.a=t,this.d=n,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$hh=le;class N{constructor(t,n){n%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${n}ms is not a multiple of 1000ms.`),this.a=t,this.b=n,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$ih=N;class p extends le{constructor(t,n){super(t,n),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$jh=p;class G extends y.$Tc{constructor(t,n){super(),this.g=t,this.h=n,this.a=[],this.b=this.D(new y.$Uc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const n of t)this.a.push(n);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new le(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$kh=G,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$mh=(c,t)=>{(0,M.$B)(()=>{if(n)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let n=!1;return{dispose(){n||(n=!0)}}}:e.$mh=(c,t,n)=>{const r=c.requestIdleCallback(t,typeof n=="number"?{timeout:n}:void 0);let a=!1;return{dispose(){a||(a=!0,c.cancelIdleCallback(r))}}},e.$lh=c=>(0,e.$mh)(globalThis,c)}();class ne{constructor(t,n){this.g=!1,this.d=()=>{try{this.j=n()}catch(r){this.l=r}finally{this.g=!0}},this.f=(0,e.$mh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$nh=ne;class ae extends ne{constructor(t){super(globalThis,t)}}e.$oh=ae;async function ce(c,t,n){let r;for(let a=0;a<n;a++)try{return await c()}catch(T){r=T,await J(t)}throw r}e.$ph=ce;class he{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,n,r){return this.a={taskId:t,cancel:()=>r?.(),promise:n},n.then(()=>this.d(t),()=>this.d(t)),n}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{let n,r;const a=new Promise((T,_)=>{n=T,r=_});this.b={run:t,promise:a,promiseResolve:n,promiseReject:r}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$qh=he;class u{constructor(t,n=()=>Date.now()){this.d=t,this.f=n,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$rh=u;var g;(function(c){c[c.Resolved=0]="Resolved",c[c.Rejected=1]="Rejected"})(g||(g={}));class l{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,n)=>{this.a=t,this.b=n})}complete(t){return new Promise(n=>{this.a(t),this.d={outcome:0,value:t},n()})}error(t){return new Promise(n=>{this.b(t),this.d={outcome:1,value:t},n()})}cancel(){return this.error(new A.$5)}}e.$sh=l;var v;(function(c){async function t(r){let a;const T=await Promise.all(r.map(_=>_.then(x=>x,x=>{a||(a=x)})));if(typeof a<"u")throw a;return T}c.settled=t;function n(r){return new Promise(async(a,T)=>{try{await r(a,T)}catch(_){T(_)}})}c.withAsyncBody=n})(v||(e.Promises=v={}));class P{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(t){this.a=void 0,this.b=void 0,this.d=!1,this.promise=t.then(n=>(this.a=n,this.d=!0,n),n=>{throw this.b=n,this.d=!0,n})}requireValue(){if(!this.d)throw new A.$cb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$th=P;class z{constructor(t){this.b=t,this.a=new K.$V(()=>new P(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$uh=z;var V;(function(c){c[c.Initial=0]="Initial",c[c.DoneOK=1]="DoneOK",c[c.DoneError=2]="DoneError"})(V||(V={}));class d{static fromArray(t){return new d(n=>{n.emitMany(t)})}static fromPromise(t){return new d(async n=>{n.emitMany(await t)})}static fromPromises(t){return new d(async n=>{await Promise.all(t.map(async r=>n.emitOne(await r)))})}static merge(t){return new d(async n=>{await Promise.all(t.map(async r=>{for await(const a of r)n.emitOne(a)}))})}static{this.EMPTY=d.fromArray([])}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new O.$Wd,queueMicrotask(async()=>{const n={emitOne:r=>this.g(r),emitMany:r=>this.h(r),reject:r=>this.k(r)};try{await Promise.resolve(t(n)),this.j()}catch(r){this.k(r)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await O.Event.toPromise(this.f.event)}while(!0)}}}static map(t,n){return new d(async r=>{for await(const a of t)r.emitOne(n(a))})}map(t){return d.map(this,t)}static filter(t,n){return new d(async r=>{for await(const a of t)n(a)&&r.emitOne(a)})}filter(t){return d.filter(this,t)}static coalesce(t){return d.filter(t,n=>!!n)}coalesce(){return d.coalesce(this)}static async toPromise(t){const n=[];for await(const r of t)n.push(r);return n}toPromise(){return d.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.$vh=d;class E extends d{constructor(t,n){super(n),this.l=t}cancel(){this.l.cancel()}}e.$wh=E;function H(c){const t=new C.$7d,n=c(t.token);return new E(t,async r=>{const a=t.token.onCancellationRequested(()=>{a.dispose(),t.dispose(),r.reject(new A.$5)});try{for await(const T of n){if(t.token.isCancellationRequested)return;r.emitOne(T)}a.dispose(),t.dispose()}catch(T){a.dispose(),t.dispose(),r.reject(T)}})}e.$xh=H;class q{constructor(){this.a=new l,this.b=new d(r=>{if(t){r.reject(t);return}return n&&r.emitMany(n),this.d=a=>r.reject(a),this.f=a=>r.emitOne(a),this.a.p});let t,n;this.f=r=>{n||(n=[]),n.push(r)},this.d=r=>{t||(t=r)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$yh=q}),define(ue[9],oe([0,1,20,8,5,21,4,2,3]),function(ie,e,C,A,O,y,$,M,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Wj=e.$Vj=e.$Uj=e.$Tj=e.$Sj=e.$Rj=e.$Qj=e.$Pj=e.$Oj=e.$Nj=e.$Mj=e.$Lj=void 0;function K(){return Object.create(null)}e.$Lj=K,e.$Mj="**",e.$Nj="/";const D="[/\\\\]",Z="[^/\\\\]",w=/\//g;function f(u,g){switch(u){case 0:return"";case 1:return`${Z}*?`;default:return`(?:${D}|${Z}+${D}${g?`|${D}${Z}+`:""})*?`}}function i(u,g){if(!u)return[];const l=[];let v=!1,P=!1,z="";for(const V of u){switch(V){case g:if(!v&&!P){l.push(z),z="";continue}break;case"{":v=!0;break;case"}":v=!1;break;case"[":P=!0;break;case"]":P=!1;break}z+=V}return z&&l.push(z),l}e.$Oj=i;function o(u){if(!u)return"";let g="";const l=i(u,e.$Nj);if(l.every(v=>v===e.$Mj))g=".*";else{let v=!1;l.forEach((P,z)=>{if(P===e.$Mj){if(v)return;g+=f(2,z===l.length-1)}else{let V=!1,d="",E=!1,H="";for(const q of P){if(q!=="}"&&V){d+=q;continue}if(E&&(q!=="]"||!H)){let c;q==="-"?c=q:(q==="^"||q==="!")&&!H?c="^":q===e.$Nj?c="":c=(0,F.$Qe)(q),H+=c;continue}switch(q){case"{":V=!0;continue;case"[":E=!0;continue;case"}":{const t=`(?:${i(d,",").map(n=>o(n)).join("|")})`;g+=t,V=!1,d="";break}case"]":{g+="["+H+"]",E=!1,H="";break}case"?":g+=Z;continue;case"*":g+=f(1);continue;default:g+=(0,F.$Qe)(q)}}z<l.length-1&&(l[z+1]!==e.$Mj||z+2<l.length)&&(g+=D)}v=P===e.$Mj})}return g}const m=/^\*\*\/\*\.[\w\.-]+$/,j=/^\*\*\/([\w\.-]+)\/?$/,L=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,b=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,W=/^\*\*((\/[\w\.-]+)+)\/?$/,ee=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,R=new y.$Dc(1e4),U=function(){return!1},k=function(){return null};function X(u,g){if(!u)return k;let l;typeof u!="string"?l=u.pattern:l=u,l=l.trim();const v=`${l}_${!!g.trimForExclusions}`;let P=R.get(v);if(P)return J(P,u);let z;return m.test(l)?P=h(l.substr(4),l):(z=j.exec(s(l,g)))?P=I(z[1],l):(g.trimForExclusions?b:L).test(l)?P=S(l,g):(z=W.exec(s(l,g)))?P=Q(z[1].substr(1),l,!0):(z=ee.exec(s(l,g)))?P=Q(z[1],l,!1):P=B(l),R.set(v,P),J(P,u)}function J(u,g){if(typeof g=="string")return u;const l=function(v,P){return(0,O.$0f)(v,g.base,!M.$k)?u((0,F.$Ve)(v.substr(g.base.length),$.sep),P):null};return l.allBasenames=u.allBasenames,l.allPaths=u.allPaths,l.basenames=u.basenames,l.patterns=u.patterns,l}function s(u,g){return g.trimForExclusions&&u.endsWith("/**")?u.substr(0,u.length-2):u}function h(u,g){return function(l,v){return typeof l=="string"&&l.endsWith(u)?g:null}}function I(u,g){const l=`/${u}`,v=`\\${u}`,P=function(V,d){return typeof V!="string"?null:d?d===u?g:null:V===u||V.endsWith(l)||V.endsWith(v)?g:null},z=[u];return P.basenames=z,P.patterns=[g],P.allBasenames=z,P}function S(u,g){const l=G(u.slice(1,-1).split(",").map(d=>X(d,g)).filter(d=>d!==k),u),v=l.length;if(!v)return k;if(v===1)return l[0];const P=function(d,E){for(let H=0,q=l.length;H<q;H++)if(l[H](d,E))return u;return null},z=l.find(d=>!!d.allBasenames);z&&(P.allBasenames=z.allBasenames);const V=l.reduce((d,E)=>E.allPaths?d.concat(E.allPaths):d,[]);return V.length&&(P.allPaths=V),P}function Q(u,g,l){const v=$.sep===$.$gc.sep,P=v?u:u.replace(w,$.sep),z=$.sep+P,V=$.$gc.sep+u;let d;return l?d=function(E,H){return typeof E=="string"&&(E===P||E.endsWith(z)||!v&&(E===u||E.endsWith(V)))?g:null}:d=function(E,H){return typeof E=="string"&&(E===P||!v&&E===u)?g:null},d.allPaths=[(l?"*/":"./")+u],d}function B(u){try{const g=new RegExp(`^${o(u)}$`);return function(l){return g.lastIndex=0,typeof l=="string"&&g.test(l)?u:null}}catch{return k}}function Y(u,g,l){return!u||typeof g!="string"?!1:re(u)(g,void 0,l)}e.$Pj=Y;function re(u,g={}){if(!u)return U;if(typeof u=="string"||se(u)){const l=X(u,g);if(l===k)return U;const v=function(P,z){return!!l(P,z)};return l.allBasenames&&(v.allBasenames=l.allBasenames),l.allPaths&&(v.allPaths=l.allPaths),v}return N(u,g)}e.$Qj=re;function se(u){const g=u;return g?typeof g.base=="string"&&typeof g.pattern=="string":!1}e.$Rj=se;function te(u){return u.allBasenames||[]}e.$Sj=te;function le(u){return u.allPaths||[]}e.$Tj=le;function N(u,g){const l=G(Object.getOwnPropertyNames(u).map(d=>p(d,u[d],g)).filter(d=>d!==k)),v=l.length;if(!v)return k;if(!l.some(d=>!!d.requiresSiblings)){if(v===1)return l[0];const d=function(q,c){let t;for(let n=0,r=l.length;n<r;n++){const a=l[n](q,c);if(typeof a=="string")return a;(0,A.$Ug)(a)&&(t||(t=[]),t.push(a))}return t?(async()=>{for(const n of t){const r=await n;if(typeof r=="string")return r}return null})():null},E=l.find(q=>!!q.allBasenames);E&&(d.allBasenames=E.allBasenames);const H=l.reduce((q,c)=>c.allPaths?q.concat(c.allPaths):q,[]);return H.length&&(d.allPaths=H),d}const P=function(d,E,H){let q,c;for(let t=0,n=l.length;t<n;t++){const r=l[t];r.requiresSiblings&&H&&(E||(E=(0,$.$nc)(d)),q||(q=E.substr(0,E.length-(0,$.$oc)(d).length)));const a=r(d,E,q,H);if(typeof a=="string")return a;(0,A.$Ug)(a)&&(c||(c=[]),c.push(a))}return c?(async()=>{for(const t of c){const n=await t;if(typeof n=="string")return n}return null})():null},z=l.find(d=>!!d.allBasenames);z&&(P.allBasenames=z.allBasenames);const V=l.reduce((d,E)=>E.allPaths?d.concat(E.allPaths):d,[]);return V.length&&(P.allPaths=V),P}function p(u,g,l){if(g===!1)return k;const v=X(u,l);if(v===k)return k;if(typeof g=="boolean")return v;if(g){const P=g.when;if(typeof P=="string"){const z=(V,d,E,H)=>{if(!H||!v(V,d))return null;const q=P.replace("$(basename)",()=>E),c=H(q);return(0,A.$Ug)(c)?c.then(t=>t?u:null):c?u:null};return z.requiresSiblings=!0,z}}return v}function G(u,g){const l=u.filter(d=>!!d.basenames);if(l.length<2)return u;const v=l.reduce((d,E)=>{const H=E.basenames;return H?d.concat(H):d},[]);let P;if(g){P=[];for(let d=0,E=v.length;d<E;d++)P.push(g)}else P=l.reduce((d,E)=>{const H=E.patterns;return H?d.concat(H):d},[]);const z=function(d,E){if(typeof d!="string")return null;if(!E){let q;for(q=d.length;q>0;q--){const c=d.charCodeAt(q-1);if(c===47||c===92)break}E=d.substr(q)}const H=v.indexOf(E);return H!==-1?P[H]:null};z.basenames=v,z.patterns=P,z.allBasenames=v;const V=u.filter(d=>!d.basenames);return V.push(z),V}function ne(u,g){return(0,C.$ub)(u,g,(l,v)=>typeof l=="string"&&typeof v=="string"?l===v:typeof l!="string"&&typeof v!="string"?l.base===v.base&&l.pattern===v.pattern:!1)}e.$Uj=ne;function ae(u){return u.startsWith("{")&&u.endsWith("}")?u.slice(1,-1).split(","):[u]}function ce({globsNewLineSeparated:u,properGlob:g}){const l=[];return u&&l.push(...u.split(`
`)),g&&l.push(...ae(g)),l.filter(v=>v!=="").map(v=>v.match(/^[a-zA-Z0-9]/)?"*"+v:v)}e.$Vj=ce;function he({globsNewLineSeparated:u,properGlob:g}){const l=ce({globsNewLineSeparated:u,properGlob:g});if(l.length!==0)return`{${l.join(",")}}`}e.$Wj=he}),define(ue[14],oe([0,1,22]),function(ie,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$e7c=void 0;const A=(O,y,$)=>{let M;if(O[0]===255&&O[1]===254)M=new TextDecoder("utf-16le").decode(O);else if(O[0]===254&&O[1]===255)M=new TextDecoder("utf-16be").decode(O);else if(M=new TextDecoder("utf8").decode(O),M.slice(0,1e3).includes("\uFFFD")&&O.includes(0))return[];const F=[],K=[];let D=null,Z=$.remainingResultQuota;for(;Z>=0&&(D=y.exec(M));)K.push({matchStartIndex:D.index,matchedText:D[0]}),Z--;if(K.length){const w=new Set,f=new Set,i=[],o=W=>M.slice(i[W].start,i[W].end);let m=0,j=null;const L=/\r?\n/g;for(;j=L.exec(M);)i.push({start:m,end:j.index}),m=j.index+j[0].length;m<M.length&&i.push({start:m,end:M.length});let b=0;for(const{matchStartIndex:W,matchedText:ee}of K){if(Z<0)break;for(;i[b+1]&&W>i[b].end;)b++;let R=b;for(;i[R+1]&&W+ee.length>i[R].end;)R++;if($.beforeContext)for(let h=Math.max(0,b-$.beforeContext);h<b;h++)w.add(h);let U="",k=0;for(let h=b;h<=R;h++){let I=o(h);$.previewOptions?.charsPerLine&&I.length>$.previewOptions.charsPerLine&&(k=Math.max(W-i[b].start-20,0),I=I.substr(k,$.previewOptions.charsPerLine)),U+=`${I}
`,f.add(h)}const X=new C.$2F(b,W-i[b].start,R,W+ee.length-i[R].start),J=new C.$2F(0,W-i[b].start-k,R-b,W+ee.length-i[R].start-(R===b?k:0)),s={ranges:X,preview:{text:U,matches:J}};if(F.push(s),$.afterContext)for(let h=R+1;h<=Math.min(R+$.afterContext,i.length-1);h++)w.add(h)}for(const W of w)f.has(W)||F.push({text:o(W),lineNumber:W+1})}return F};e.$e7c=A}),define(ue[15],oe([0,1,9]),function(ie,e,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$RIb=void 0;class A{constructor(y,$,M){if(this.b=$,this.c=M,$[$.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");$[$.length-1]!=="/"&&($+="/"),this.a=this.e(y,this.b,this.c)}updateContents(y){this.a=this.e(y,this.b,this.c)}isPathIncludedInTraversal(y,$){if(y[0]!=="/"||y[y.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+y);return!this.a(y,$)}isArbitraryPathIgnored(y,$){if(y[0]!=="/"||y[y.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+y);const M=y.split("/").filter(D=>D);let F=!1,K="";for(let D=0;D<M.length;D++){const Z=D===M.length-1,w=M[D];if(K=K+"/"+w,!this.isPathIncludedInTraversal(K,Z?$:!0)){F=!0;break}}return F}d(y,$,M){const F=y.map(D=>this.f(D,$)),K=Object.create(null);for(const D of F)K[D]=!0;return C.$Qj(K,{trimForExclusions:M})}e(y,$,M){const F=y.split(`
`).map(b=>b.trim()).filter(b=>b&&b[0]!=="#"),K=F.filter(b=>!b.endsWith("/")),D=K.filter(b=>!b.includes("!")),Z=this.d(D,$,!0),w=K.filter(b=>b.includes("!")).map(b=>b.replace(/!/g,"")),f=this.d(w,$,!1),i=F.filter(b=>!b.includes("!")),o=this.d(i,$,!0),m=F.filter(b=>b.includes("!")).map(b=>b.replace(/!/g,"")),j=this.d(m,$,!1);return(b,W)=>b.startsWith($)?W&&o(b)&&!j(b)||Z(b)&&!f(b)?!0:M?M.a(b,W):!1:!1}f(y,$){const M=y.indexOf("/");return M===-1||M===y.length-1?y="**/"+y:(M===0?$.slice(-1)==="/"&&(y=y.slice(1)):$.slice(-1)!=="/"&&(y="/"+y),y=$+y),y}}e.$RIb=A}),define(ue[23],oe([0,1,9,6,4,13,14,15,3,8,7]),function(ie,e,C,A,O,y,$,M,F,K,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const Z=!1,w=+new Date,f={},i=async(R,U)=>{if(!Z)return U();const k=Date.now(),X=(f[R]??0)+1;console.info(R,X,"starting",Math.round((k-w)*10)/1e4),f[R]=X;const J=await U(),s=Date.now();return console.info(R,X,"took",s-k),J};function o(R){return new m(R)}e.create=o;class m{constructor(U){this.d=U,this.cancellationTokens=new Map}cancelQuery(U){this.cancellationTokens.get(U)?.cancel()}g(U){const k=new y.$7d;return this.cancellationTokens.set(U,k),k}async listDirectory(U,k,X,J,s){const h=L(X),I=new D.$yg(()=>J),S=this.g(s),Q=[];let B=!1,Y=0;const re=k.maxResults||512,se=k.filePattern?te=>k.filePattern.split("").every(le=>te.includes(le)):te=>!0;return await i("listDirectory",()=>this.h(U,b(k),h,I,te=>{if(se(te.name))return Y++,re&&Y>re&&(B=!0,S.cancel()),Q.push(te.path)},S.token)),{results:Q,limitHit:B}}async searchDirectory(U,k,X,J,s){const h=L(X),I=new D.$yg(()=>J);return i("searchInFiles",async()=>{const S=this.g(s),Q=[],B=j(k.contentPattern),Y=[];let re=0,se=0;const te=!1,le=async N=>{if(S.token.isCancellationRequested)return;re++;const p=await N.resolve();if(S.token.isCancellationRequested)return;const G=new Uint8Array(p),ne=(0,$.$e7c)(G,B,{afterContext:k.afterContext??0,beforeContext:k.beforeContext??0,previewOptions:k.previewOptions,remainingResultQuota:k.maxResults?k.maxResults-se:1e4});if(ne.length){se+=ne.length,k.maxResults&&se>k.maxResults&&S.cancel();const ae={resource:A.URI.joinPath(h.folder,N.path),results:ne};this.d.sendTextSearchMatch(ae,s),Q.push(ae)}};return await i("walkFolderToResolve",()=>this.h(U,b(k),h,I,async N=>Y.push(le(N)),S.token)),await i("resolveOngoingProcesses",()=>Promise.all(Y)),Z&&console.log("Searched in",re,"files"),{results:Q,limitHit:te}})}async h(U,k,X,J,s,h){const I=C.$Qj(X.excludePattern??{},{trimForExclusions:!0}),S=(N,p,G)=>(N=N.slice(1),!!(I(N,p,G)||W(k,N))),Q=(N,p,G)=>(N=N.slice(1),!(I(N,p,G)||!ee(k,N,J))),B=(N,p)=>({type:"file",name:N.name,path:p,resolve:()=>N.getFile().then(ne=>ne.arrayBuffer())}),Y=N=>N.kind==="directory",re=N=>N.kind==="file",se=async(N,p,G)=>{if(!X.disregardIgnoreFiles){const ae=await Promise.all([N.getFileHandle(".gitignore").catch(ce=>{}),N.getFileHandle(".ignore").catch(ce=>{})]);await Promise.all(ae.map(async ce=>{if(!ce)return;const he=new TextDecoder("utf8").decode(new Uint8Array(await(await ce.getFile()).arrayBuffer()));G=new M.$RIb(he,p,G)}))}const ne=K.Promises.withAsyncBody(async ae=>{const ce=[],he=[],u=[],g=new Set;for await(const l of N.entries())u.push(l),g.add(l[0]);for(const[l,v]of u){if(h.isCancellationRequested)break;const P=p+l;if(G&&!G.isPathIncludedInTraversal(P,v.kind==="directory"))continue;const z=V=>g.has(V);Y(v)&&!S(P,l,z)?he.push(se(v,P+"/",G)):re(v)&&Q(P,l,z)&&ce.push(B(v,P))}ae([...await Promise.all(he),...ce])});return{type:"dir",name:N.name,entries:ne}},te=async(N,p)=>{h.isCancellationRequested||await Promise.all((await N.entries).sort((G,ne)=>-(G.type==="dir"?0:1)+(ne.type==="dir"?0:1)).map(async G=>G.type==="dir"?te(G,p):p(G)))},le=await i("process",()=>se(U,"/"));await i("resolve",()=>te(le,s))}}e.LocalFileSearchSimpleWorker=m;function j(R){return(0,F.$Ze)(R.pattern,!!R.isRegExp,{wholeWord:R.isWordMatch,global:!0,matchCase:R.isCaseSensitive,multiline:!0,unicode:!0})}function L(R){return{...R,folder:A.URI.revive(R.folder)}}function b(R){return{...R,extraFileResources:R.extraFileResources?.map(U=>A.URI.revive(U)),folderQueries:R.folderQueries.map(U=>L(U))}}function W(R,U){return!!(R.excludePattern&&C.$Pj(R.excludePattern,U))}function ee(R,U,k){return R.excludePattern&&C.$Pj(R.excludePattern,U)?!1:R.includePattern||R.usingSearchPaths?R.includePattern&&C.$Pj(R.includePattern,U)?!0:R.usingSearchPaths?!!R.folderQueries&&R.folderQueries.some(X=>{const J=X.folder,s=A.URI.file(U);if(k.isEqualOrParent(s,J)){const h=O.$lc(J.path,s.path);return!X.includePattern||!!C.$Pj(X.includePattern,h)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://cursor-sourcemaps.s3.amazonaws.com/sourcemaps/fcd6e551d6f014d13071eac9bd4904e7e0346720/core/vs/workbench/services/search/worker/localFileSearch.js.map
