/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ue=["require","exports","vs/base/common/lifecycle","vs/base/common/event","vs/platform/instantiation/common/instantiation","vs/base/common/platform","vs/base/common/async","vs/base/common/errors","vs/platform/log/common/log","vs/nls!vs/code/node/sharedProcess/sharedProcessMain","vs/base/common/uri","vs/platform/files/common/files","vs/base/common/types","vs/nls","vs/base/common/buffer","vs/platform/environment/common/environment","vs/base/common/path","vs/base/common/arrays","vs/platform/userDataProfile/common/userDataProfile","vs/platform/storage/common/storage","vs/base/common/resources","vs/platform/configuration/common/configuration","vs/platform/telemetry/common/telemetry","vs/platform/product/common/productService","vs/platform/userDataSync/common/userDataSync","vs/base/common/network","vs/base/common/cancellation","vs/base/common/strings","vs/platform/uriIdentity/common/uriIdentity","vs/platform/extensionManagement/common/extensionManagement","vs/base/common/objects","vs/base/common/uuid","vs/base/node/pfs","vs/platform/extensionManagement/common/extensionManagementUtil","vs/base/common/json","vs/base/common/map","os","vs/base/common/process","vs/base/common/errorMessage","vs/platform/userDataSync/common/abstractSynchronizer","vs/base/parts/ipc/common/ipc","vs/platform/registry/common/platform","vs/base/common/jsonFormatter","vs/platform/externalServices/common/serviceMachineId","vs/platform/configuration/common/configurationRegistry","vs/platform/extensions/common/extensions","vs/base/common/stream","vs/base/common/ternarySearchTree","vs/base/common/extpath","vs/base/common/semver/semver","vs/platform/files/common/watcher","vs/platform/telemetry/common/telemetryUtils","vs/platform/extensionManagement/common/extensionsProfileScannerService","vs/base/common/lazy","vs/base/common/hash","child_process","fs","vs/platform/ipc/common/mainProcessService","vs/platform/native/common/native","vs/platform/policy/common/policy","vs/platform/product/common/product","vs/platform/request/common/request","vs/platform/userDataProfile/common/userDataProfileStorageService","vs/base/common/iterator","vs/base/common/jsonEdit","vs/base/common/stopwatch","net","vs/base/common/date","vs/base/common/marshalling","vs/base/parts/ipc/common/ipc.net","vs/base/parts/storage/common/storage","vs/base/node/zip","vs/platform/extensions/common/extensionValidator","vs/platform/instantiation/common/descriptors","crypto","vs/platform/instantiation/common/serviceCollection","vs/platform/languagePacks/common/languagePacks","vs/platform/configuration/common/configurationModels","vs/platform/remote/common/remoteHosts","vs/platform/storage/common/storageIpc","vs/platform/tunnel/common/tunnel","vs/platform/userDataSync/common/content","vs/platform/userDataSync/common/userDataSyncAccount","vs/platform/extensionManagement/common/extensionsScannerService","vs/platform/extensionManagement/common/extensionStorage","vs/platform/userDataSync/common/userDataSyncMachines","vs/base/common/decorators","vs/base/common/functional","vs/base/common/linkedList","vs/base/common/normalization","vs/base/common/severity","vs/base/common/processes","vs/base/common/glob","vs/base/common/uriIpc","vs/base/parts/ipc/node/ipc.cp","vs/platform/contextkey/common/contextkey","vs/platform/diagnostics/common/diagnostics","vs/platform/download/common/download","vs/platform/extensionRecommendations/common/extensionRecommendations","vs/platform/files/common/io","vs/platform/extensionManagement/node/extensionSignatureVerificationService","vs/base/common/performance","vs/platform/lifecycle/node/sharedProcessLifecycleService","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/platform/remote/common/remoteSocketFactoryService","vs/platform/remoteTunnel/common/remoteTunnel","vs/platform/sign/common/sign","vs/platform/telemetry/common/commonProperties","vs/platform/telemetry/common/telemetryIpc","vs/platform/telemetry/common/telemetryLogAppender","vs/platform/telemetry/common/telemetryService","vs/platform/userDataSync/common/ignoredExtensions","vs/platform/workspace/common/workspace","vs/platform/extensionManagement/common/extensionEnablementService","vs/platform/extensionManagement/common/extensionGalleryService","vs/platform/extensionManagement/node/extensionManagementService","vs/platform/userDataSync/common/extensionsSync","vs/platform/userDataSync/common/globalStateSync","vs/platform/userDataSync/common/keybindingsSync","vs/platform/userDataSync/common/settingsSync","vs/platform/userDataSync/common/snippetsSync","vs/platform/userDataSync/common/tasksSync","vs/platform/userDataSync/common/userDataProfilesManifestSync","vs/platform/userDataSync/common/userDataSyncStoreService","vs/base/parts/ipc/node/ipc.net","vs/base/common/arraysFind","vs/base/common/collections","vs/base/common/assert","vs/base/common/skipList","vs/base/common/cache","vs/base/common/symbols","vs/base/node/macAddress","vs/base/node/nodeStreams","vs/base/node/ports","vs/base/parts/sandbox/node/electronTypes","vs/nls!vs/base/common/date","vs/nls!vs/base/common/errorMessage","vs/nls!vs/base/common/jsonErrorMessages","vs/base/common/jsonErrorMessages","vs/nls!vs/base/common/platform","vs/base/common/mime","vs/base/common/console","vs/base/node/id","vs/base/node/extpath","vs/base/node/processes","vs/base/node/ps","vs/base/parts/ipc/node/ipc.mp","vs/nls!vs/base/node/zip","vs/nls!vs/platform/configuration/common/configurationRegistry","vs/nls!vs/platform/contextkey/common/contextkey","vs/nls!vs/platform/contextkey/common/scanner","vs/nls!vs/platform/extensionManagement/common/abstractExtensionManagementService","vs/nls!vs/platform/extensionManagement/common/extensionManagement","vs/nls!vs/platform/extensionManagement/common/extensionNls","vs/nls!vs/platform/extensionManagement/common/extensionsScannerService","vs/nls!vs/platform/extensionManagement/node/extensionManagementService","vs/nls!vs/platform/extensionManagement/node/extensionManagementUtil","vs/nls!vs/platform/extensions/common/extensionValidator","vs/nls!vs/platform/files/common/fileService","vs/nls!vs/platform/files/common/files","vs/nls!vs/platform/files/common/io","vs/nls!vs/platform/files/node/diskFileSystemProvider","vs/nls!vs/platform/languagePacks/common/languagePacks","vs/nls!vs/platform/remoteTunnel/common/remoteTunnel","vs/nls!vs/platform/remoteTunnel/node/remoteTunnelService","vs/nls!vs/platform/request/common/request","vs/nls!vs/platform/telemetry/common/telemetryLogAppender","vs/nls!vs/platform/telemetry/common/telemetryService","vs/nls!vs/platform/userDataProfile/common/userDataProfile","vs/nls!vs/platform/userDataSync/common/abstractSynchronizer","vs/nls!vs/platform/userDataSync/common/keybindingsSync","vs/nls!vs/platform/userDataSync/common/settingsSync","vs/nls!vs/platform/userDataSync/common/userDataAutoSyncService","vs/nls!vs/platform/userDataSync/common/userDataSync","vs/nls!vs/platform/userDataSync/common/userDataSyncLog","vs/nls!vs/platform/userDataSync/common/userDataSyncMachines","vs/nls!vs/platform/userDataSync/common/userDataSyncResourceProvider","vs/nls!vs/platform/workspace/common/workspace","vs/platform/contextkey/common/scanner","vs/platform/environment/common/environmentService","vs/platform/environment/node/userDataPath","vs/platform/environment/node/environmentService","vs/platform/extensionManagement/common/extensionNls","vs/platform/extensionManagement/node/extensionManagementUtil","vs/platform/extensionRecommendations/common/extensionRecommendationsIpc","vs/platform/instantiation/common/extensions","vs/platform/instantiation/common/graph","vs/platform/checksum/common/checksumService","vs/platform/extensionManagement/common/extensionManagementIpc","vs/platform/checksum/node/checksumService","vs/platform/files/common/diskFileSystemProviderClient","vs/platform/files/node/watcher/nodejs/nodejsWatcherLib","vs/platform/files/node/watcher/nodejs/nodejsWatcher","vs/platform/files/node/watcher/nodejs/nodejsClient","vs/platform/files/node/watcher/watcherClient","vs/platform/instantiation/common/instantiationService","vs/code/node/sharedProcess/contrib/localizationsUpdater","vs/code/node/sharedProcess/contrib/logsDataCleaner","vs/platform/files/common/diskFileSystemProvider","vs/platform/files/common/fileService","vs/platform/files/node/diskFileSystemProvider","vs/platform/log/common/logIpc","vs/platform/log/common/logService","vs/platform/native/common/nativeHostService","vs/platform/policy/common/policyIpc","vs/code/node/sharedProcess/contrib/codeCacheCleaner","vs/code/node/sharedProcess/contrib/languagePackCachedDataCleaner","vs/platform/profiling/common/profiling","vs/platform/profiling/node/profilingService","vs/platform/configuration/common/configurations","vs/platform/configuration/common/configurationService","vs/platform/remote/common/managedSocket","vs/platform/remote/common/remoteAuthorityResolver","vs/platform/extensionManagement/node/extensionsManifestCache","vs/platform/remote/common/remoteAgentConnection","vs/platform/remote/common/sharedProcessTunnelService","vs/platform/download/common/downloadService","vs/platform/request/common/requestIpc","vs/platform/sharedProcess/common/sharedProcess","vs/platform/sign/common/abstractSignService","vs/platform/sign/node/signService","vs/platform/telemetry/common/1dsAppender","vs/platform/diagnostics/node/diagnosticsService","vs/platform/extensionManagement/common/extensionTipsService","vs/platform/extensionManagement/common/unsupportedExtensionsMigration","vs/platform/extensionManagement/node/extensionDownloader","vs/platform/extensionManagement/node/extensionsWatcher","vs/platform/externalServices/common/marketplace","vs/platform/languagePacks/node/languagePacks","vs/platform/telemetry/node/1dsAppender","vs/platform/telemetry/node/customEndpointTelemetryService","vs/platform/tunnel/node/sharedProcessTunnelService","vs/platform/uriIdentity/common/uriIdentityService","vs/platform/userData/common/fileUserDataProvider","vs/platform/userDataSync/common/extensionsMerge","vs/platform/userDataSync/common/keybindingsMerge","vs/platform/userDataSync/common/snippetsMerge","vs/platform/userDataSync/common/userDataProfilesManifestMerge","vs/platform/userDataSync/common/globalStateMerge","vs/platform/userDataSync/common/settingsMerge","vs/platform/userDataSync/common/userDataSyncLog","vs/platform/windows/node/windowTracker","vs/code/node/sharedProcess/contrib/userDataProfilesCleaner","vs/platform/extensionManagement/node/extensionLifecycle","vs/platform/extensionManagement/node/extensionsProfileScannerService","vs/platform/extensionManagement/node/extensionsScannerService","vs/platform/extensionManagement/common/abstractExtensionManagementService","vs/code/node/sharedProcess/contrib/extensions","vs/platform/extensionManagement/node/extensionTipsService","vs/platform/remoteTunnel/node/remoteTunnelService","vs/platform/storage/common/storageService","vs/platform/userDataProfile/common/userDataProfileIpc","vs/platform/userDataProfile/node/userDataProfileStorageService","vs/platform/userDataSync/common/userDataSyncEnablementService","vs/platform/userDataSync/common/userDataSyncLocalStoreService","vs/platform/userDataSync/common/userDataAutoSyncService","vs/platform/userDataSync/common/userDataSyncResourceProvider","vs/platform/userDataSync/common/userDataSyncService","vs/platform/userDataSync/common/userDataSyncServiceIpc","vs/platform/userDataSync/common/userDataSyncIpc","vs/platform/userDataSync/node/userDataAutoSyncService","vs/platform/workspaces/node/workspaces","vs/code/node/sharedProcess/contrib/storageDataCleaner","vs/platform/remote/node/nodeSocketFactory","vs/platform/tunnel/node/tunnelService","stream","process","util","path","graceful-fs","https","node-fetch","zlib","vs/code/node/sharedProcess/sharedProcessMain"],de=function(oe){for(var e=[],D=0,N=oe.length;D<N;D++)e[D]=ue[oe[D]];return e};define(ue[125],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$rb=e.$qb=e.$pb=e.$ob=e.$nb=e.$mb=e.$lb=e.$kb=e.$jb=e.$ib=e.$hb=e.$gb=e.$fb=void 0;function D(p,w,h){const f=N(p,w);if(f!==-1)return p[f]}e.$fb=D;function N(p,w,h=p.length-1){for(let f=h;f>=0;f--){const u=p[f];if(w(u))return f}return-1}e.$gb=N;function L(p,w){const h=j(p,w);return h===-1?void 0:p[h]}e.$hb=L;function j(p,w,h=0,f=p.length){let u=h,c=f;for(;u<c;){const b=Math.floor((u+c)/2);w(p[b])?u=b+1:c=b}return u-1}e.$ib=j;function I(p,w){const h=P(p,w);return h===p.length?void 0:p[h]}e.$jb=I;function P(p,w,h=0,f=p.length){let u=h,c=f;for(;u<c;){const b=Math.floor((u+c)/2);w(p[b])?c=b:u=b+1}return u}e.$kb=P;function R(p,w,h=0,f=p.length){const u=P(p,w,h,f);return u===p.length?-1:u}e.$lb=R;class m{static{this.assertInvariants=!1}constructor(w){this.e=w,this.c=0}findLastMonotonous(w){if(m.assertInvariants){if(this.d){for(const f of this.e)if(this.d(f)&&!w(f))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=w}const h=j(this.e,w,this.c);return this.c=h+1,h===-1?void 0:this.e[h]}}e.$mb=m;function C(p,w){if(p.length===0)return;let h=p[0];for(let f=1;f<p.length;f++){const u=p[f];w(u,h)>0&&(h=u)}return h}e.$nb=C;function k(p,w){if(p.length===0)return;let h=p[0];for(let f=1;f<p.length;f++){const u=p[f];w(u,h)>=0&&(h=u)}return h}e.$ob=k;function E(p,w){return C(p,(h,f)=>-w(h,f))}e.$pb=E;function l(p,w){if(p.length===0)return-1;let h=0;for(let f=1;f<p.length;f++){const u=p[f];w(u,p[h])>0&&(h=f)}return h}e.$qb=l;function g(p,w){for(const h of p){const f=w(h);if(f!==void 0)return f}}e.$rb=g}),define(ue[126],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$N=e.$M=e.$L=e.$K=void 0;function D(I,P){const R=Object.create(null);for(const m of I){const C=P(m);let k=R[C];k||(k=R[C]=[]),k.push(m)}return R}e.$K=D;function N(I,P){const R=[],m=[];for(const C of I)P.has(C)||R.push(C);for(const C of P)I.has(C)||m.push(C);return{removed:R,added:m}}e.$L=N;function L(I,P){const R=[],m=[];for(const[C,k]of I)P.has(C)||R.push(k);for(const[C,k]of P)I.has(C)||m.push(k);return{removed:R,added:m}}e.$M=L;function j(I,P){const R=new Set;for(const m of P)I.has(m)&&R.add(m);return R}e.$N=j}),define(ue[86],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Bh=e.$Ah=e.$zh=void 0;function D(I){return(P,R,m)=>{let C=null,k=null;if(typeof m.value=="function"?(C="value",k=m.value):typeof m.get=="function"&&(C="get",k=m.get),!k)throw new Error("not supported");m[C]=I(k,R)}}function N(I,P,R){let m=null,C=null;if(typeof R.value=="function"?(m="value",C=R.value,C.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof R.get=="function"&&(m="get",C=R.get),!C)throw new Error("not supported");const k=`$memoize$${P}`;R[m]=function(...E){return this.hasOwnProperty(k)||Object.defineProperty(this,k,{configurable:!1,enumerable:!1,writable:!1,value:C.apply(this,E)}),this[k]}}e.$zh=N;function L(I,P,R){return D((m,C)=>{const k=`$debounce$${C}`,E=`$debounce$result$${C}`;return function(...l){this[E]||(this[E]=R?R():void 0),clearTimeout(this[k]),P&&(this[E]=P(this[E],...l),l=[this[E]]),this[k]=setTimeout(()=>{m.apply(this,l),this[E]=R?R():void 0},I)}})}e.$Ah=L;function j(I,P,R){return D((m,C)=>{const k=`$throttle$timer$${C}`,E=`$throttle$result$${C}`,l=`$throttle$lastRun$${C}`,g=`$throttle$pending$${C}`;return function(...p){if(this[E]||(this[E]=R?R():void 0),(this[l]===null||this[l]===void 0)&&(this[l]=-Number.MAX_VALUE),P&&(this[E]=P(this[E],...p)),this[g])return;const w=this[l]+I;w<=Date.now()?(this[l]=Date.now(),m.apply(this,[this[E]]),this[E]=R?R():void 0):(this[g]=!0,this[k]=setTimeout(()=>{this[g]=!1,this[l]=Date.now(),m.apply(this,[this[E]]),this[E]=R?R():void 0},w-Date.now()))}})}e.$Bh=j}),define(ue[7],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$cb=e.$bb=e.$ab=e.$_=e.$$=e.$0=e.$9=e.$8=e.$7=e.$6=e.$5=e.$4=e.$3=e.$2=e.$1=e.$Z=e.setUnexpectedErrorHandler=e.$X=e.$W=void 0;class D{constructor(){this.b=[],this.a=function(i){setTimeout(()=>{throw i.stack?u.isErrorNoTelemetry(i)?new u(i.message+`

`+i.stack):new Error(i.message+`

`+i.stack):i},0)}}addListener(i){return this.b.push(i),()=>{this.d(i)}}c(i){this.b.forEach(r=>{r(i)})}d(i){this.b.splice(this.b.indexOf(i),1)}setUnexpectedErrorHandler(i){this.a=i}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(i){this.a(i),this.c(i)}onUnexpectedExternalError(i){this.a(i)}}e.$W=D,e.$X=new D;function N(b){e.$X.setUnexpectedErrorHandler(b)}e.setUnexpectedErrorHandler=N;function L(b){if(!b||typeof b!="object")return!1;const i=b;return i.code==="EPIPE"&&i.syscall?.toUpperCase()==="WRITE"}e.$Z=L;function j(b){m(b)||e.$X.onUnexpectedError(b)}e.$1=j;function I(b){m(b)||e.$X.onUnexpectedExternalError(b)}e.$2=I;function P(b){if(b instanceof Error){const{name:i,message:r}=b,n=b.stacktrace||b.stack;return{$isError:!0,name:i,message:r,stack:n,noTelemetry:u.isErrorNoTelemetry(b)}}return b}e.$3=P;const R="Canceled";function m(b){return b instanceof C?!0:b instanceof Error&&b.name===R&&b.message===R}e.$4=m;class C extends Error{constructor(){super(R),this.name=this.message}}e.$5=C;function k(){const b=new Error(R);return b.name=b.message,b}e.$6=k;function E(b){return b?new Error(`Illegal argument: ${b}`):new Error("Illegal argument")}e.$7=E;function l(b){return b?new Error(`Illegal state: ${b}`):new Error("Illegal state")}e.$8=l;class g extends TypeError{constructor(i){super(i?`${i} is read-only and cannot be changed`:"Cannot change read-only property")}}e.$9=g;function p(b){return b?b.message?b.message:b.stack?b.stack.split(`
`)[0]:String(b):"Error"}e.$0=p;class w extends Error{constructor(i){super("NotImplemented"),i&&(this.message=i)}}e.$$=w;class h extends Error{constructor(i){super("NotSupported"),i&&(this.message=i)}}e.$_=h;class f extends Error{constructor(){super(...arguments),this.isExpected=!0}}e.$ab=f;class u extends Error{constructor(i){super(i),this.name="CodeExpectedError"}static fromError(i){if(i instanceof u)return i;const r=new u;return r.message=i.message,r.stack=i.stack,r}static isErrorNoTelemetry(i){return i.name==="CodeExpectedError"}}e.$bb=u;class c extends Error{constructor(i){super(i||"An unexpected bug occurred."),Object.setPrototypeOf(this,c.prototype)}}e.$cb=c}),define(ue[17],de([0,1,7,125]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ac=e.$_b=e.$$b=e.$0b=e.$9b=e.$8b=e.$7b=e.CompareResult=e.$6b=e.$5b=e.$4b=e.$3b=e.$2b=e.$1b=e.$Zb=e.$Yb=e.$Xb=e.$Wb=e.$Vb=e.$Ub=e.$Tb=e.$Sb=e.$Rb=e.$Qb=e.$Pb=e.$Ob=e.$Nb=e.$Mb=e.$Lb=e.$Kb=e.$Jb=e.$Ib=e.$Hb=e.$Gb=e.top=e.$Eb=e.$Db=e.$Cb=e.$Bb=e.$Ab=e.$zb=e.$yb=e.$xb=e.$wb=e.$vb=e.$ub=e.$tb=e.$sb=void 0;function L(B,_=0){return B[B.length-(1+_)]}e.$sb=L;function j(B){if(B.length===0)throw new Error("Invalid tail call");return[B.slice(0,B.length-1),B[B.length-1]]}e.$tb=j;function I(B,_,ee=(X,ie)=>X===ie){if(B===_)return!0;if(!B||!_||B.length!==_.length)return!1;for(let X=0,ie=B.length;X<ie;X++)if(!ee(B[X],_[X]))return!1;return!0}e.$ub=I;function P(B,_){const ee=B.length-1;_<ee&&(B[_]=B[ee]),B.pop()}e.$vb=P;function R(B,_,ee){return m(B.length,X=>ee(B[X],_))}e.$wb=R;function m(B,_){let ee=0,X=B-1;for(;ee<=X;){const ie=(ee+X)/2|0,ce=_(ie);if(ce<0)ee=ie+1;else if(ce>0)X=ie-1;else return ie}return-(ee+1)}e.$xb=m;function C(B,_,ee){if(B=B|0,B>=_.length)throw new TypeError("invalid index");const X=_[Math.floor(_.length*Math.random())],ie=[],ce=[],fe=[];for(const be of _){const le=ee(be,X);le<0?ie.push(be):le>0?ce.push(be):fe.push(be)}return B<ie.length?C(B,ie,ee):B<ie.length+fe.length?fe[0]:C(B-(ie.length+fe.length),ce,ee)}e.$yb=C;function k(B,_){const ee=[];let X;for(const ie of B.slice(0).sort(_))!X||_(X[0],ie)!==0?(X=[ie],ee.push(X)):X.push(ie);return ee}e.$zb=k;function*E(B,_){let ee,X;for(const ie of B)X!==void 0&&_(X,ie)?ee.push(ie):(ee&&(yield ee),ee=[ie]),X=ie;ee&&(yield ee)}e.$Ab=E;function l(B,_){for(let ee=0;ee<=B.length;ee++)_(ee===0?void 0:B[ee-1],ee===B.length?void 0:B[ee])}e.$Bb=l;function g(B,_){for(let ee=0;ee<B.length;ee++)_(ee===0?void 0:B[ee-1],B[ee],ee+1===B.length?void 0:B[ee+1])}e.$Cb=g;function p(B,_,ee){const X=[];function ie(be,le,re){if(le===0&&re.length===0)return;const me=X[X.length-1];me&&me.start+me.deleteCount===be?(me.deleteCount+=le,me.toInsert.push(...re)):X.push({start:be,deleteCount:le,toInsert:re})}let ce=0,fe=0;for(;;){if(ce===B.length){ie(ce,0,_.slice(fe));break}if(fe===_.length){ie(ce,B.length-ce,[]);break}const be=B[ce],le=_[fe],re=ee(be,le);re===0?(ce+=1,fe+=1):re<0?(ie(ce,1,[]),ce+=1):re>0&&(ie(ce,0,[le]),fe+=1)}return X}e.$Db=p;function w(B,_,ee){const X=p(B,_,ee),ie=[],ce=[];for(const fe of X)ie.push(...B.slice(fe.start,fe.start+fe.deleteCount)),ce.push(...fe.toInsert);return{removed:ie,added:ce}}e.$Eb=w;function h(B,_,ee){if(ee===0)return[];const X=B.slice(0,ee).sort(_);return u(B,_,X,ee,B.length),X}e.top=h;function f(B,_,ee,X,ie){return ee===0?Promise.resolve([]):new Promise((ce,fe)=>{(async()=>{const be=B.length,le=B.slice(0,ee).sort(_);for(let re=ee,me=Math.min(ee+X,be);re<be;re=me,me=Math.min(me+X,be)){if(re>ee&&await new Promise(ye=>setTimeout(ye)),ie&&ie.isCancellationRequested)throw new D.$5;u(B,_,le,re,me)}return le})().then(ce,fe)})}e.$Gb=f;function u(B,_,ee,X,ie){for(const ce=ee.length;X<ie;X++){const fe=B[X];if(_(fe,ee[ce-1])<0){ee.pop();const be=(0,N.$kb)(ee,le=>_(fe,le)<0);ee.splice(be,0,fe)}}}function c(B){return B.filter(_=>!!_)}e.$Hb=c;function b(B){let _=0;for(let ee=0;ee<B.length;ee++)B[ee]&&(B[_]=B[ee],_+=1);B.length=_}e.$Ib=b;function i(B,_,ee){B.splice(ee,0,B.splice(_,1)[0])}e.$Jb=i;function r(B){return!Array.isArray(B)||B.length===0}e.$Kb=r;function n(B){return Array.isArray(B)&&B.length>0}e.$Lb=n;function s(B,_=ee=>ee){const ee=new Set;return B.filter(X=>{const ie=_(X);return ee.has(ie)?!1:(ee.add(ie),!0)})}e.$Mb=s;function t(B){const _=new Set;return ee=>{const X=B(ee);return _.has(X)?!1:(_.add(X),!0)}}e.$Nb=t;function o(B,_){return B.length>0?B[0]:_}e.$Ob=o;function a(B,_){return B.length>0?B[B.length-1]:_}e.$Pb=a;function y(B,_,ee=(X,ie)=>X===ie){let X=0;for(let ie=0,ce=Math.min(B.length,_.length);ie<ce&&ee(B[ie],_[ie]);ie++)X++;return X}e.$Qb=y;function $(B){return[].concat(...B)}e.$Rb=$;function d(B,_){let ee=typeof _=="number"?B:0;typeof _=="number"?ee=B:(ee=0,_=B);const X=[];if(ee<=_)for(let ie=ee;ie<_;ie++)X.push(ie);else for(let ie=ee;ie>_;ie--)X.push(ie);return X}e.$Sb=d;function v(B,_,ee){return B.reduce((X,ie)=>(X[_(ie)]=ee?ee(ie):ie,X),Object.create(null))}e.$Tb=v;function S(B,_){return B.push(_),()=>A(B,_)}e.$Ub=S;function A(B,_){const ee=B.indexOf(_);if(ee>-1)return B.splice(ee,1),_}e.$Vb=A;function T(B,_,ee){const X=B.slice(0,_),ie=B.slice(_);return X.concat(ee,ie)}e.$Wb=T;function q(B,_){let ee;if(typeof _=="number"){let X=_;ee=()=>{const ie=Math.sin(X++)*179426549;return ie-Math.floor(ie)}}else ee=Math.random;for(let X=B.length-1;X>0;X-=1){const ie=Math.floor(ee()*(X+1)),ce=B[X];B[X]=B[ie],B[ie]=ce}}e.$Xb=q;function M(B,_){const ee=B.indexOf(_);ee>-1&&(B.splice(ee,1),B.unshift(_))}e.$Yb=M;function Y(B,_){const ee=B.indexOf(_);ee>-1&&(B.splice(ee,1),B.push(_))}e.$Zb=Y;function G(B,_){for(const ee of _)B.push(ee)}e.$1b=G;function Q(B,_){return Array.isArray(B)?B.map(_):_(B)}e.$2b=Q;function F(B){return Array.isArray(B)?B:[B]}e.$3b=F;function te(B){return B[Math.floor(Math.random()*B.length)]}e.$4b=te;function H(B,_,ee){const X=x(B,_),ie=B.length,ce=ee.length;B.length=ie+ce;for(let fe=ie-1;fe>=X;fe--)B[fe+ce]=B[fe];for(let fe=0;fe<ce;fe++)B[fe+X]=ee[fe]}e.$5b=H;function J(B,_,ee,X){const ie=x(B,_);let ce=B.splice(ie,ee);return ce===void 0&&(ce=[]),H(B,ie,X),ce}e.$6b=J;function x(B,_){return _<0?Math.max(_+B.length,0):Math.min(_,B.length)}var se;(function(B){function _(ce){return ce<0}B.isLessThan=_;function ee(ce){return ce<=0}B.isLessThanOrEqual=ee;function X(ce){return ce>0}B.isGreaterThan=X;function ie(ce){return ce===0}B.isNeitherLessOrGreaterThan=ie,B.greaterThan=1,B.lessThan=-1,B.neitherLessOrGreaterThan=0})(se||(e.CompareResult=se={}));function V(B,_){return(ee,X)=>_(B(ee),B(X))}e.$7b=V;function ne(...B){return(_,ee)=>{for(const X of B){const ie=X(_,ee);if(!se.isNeitherLessOrGreaterThan(ie))return ie}return se.neitherLessOrGreaterThan}}e.$8b=ne;const K=(B,_)=>B-_;e.$9b=K;const z=(B,_)=>(0,e.$9b)(B?1:0,_?1:0);e.$0b=z;function U(B){return(_,ee)=>-B(_,ee)}e.$$b=U;class O{constructor(_){this.g=_,this.c=0,this.d=this.g.length-1}get length(){return this.d-this.c+1}takeWhile(_){let ee=this.c;for(;ee<this.g.length&&_(this.g[ee]);)ee++;const X=ee===this.c?null:this.g.slice(this.c,ee);return this.c=ee,X}takeFromEndWhile(_){let ee=this.d;for(;ee>=0&&_(this.g[ee]);)ee--;const X=ee===this.d?null:this.g.slice(ee+1,this.d+1);return this.d=ee,X}peek(){if(this.length!==0)return this.g[this.c]}peekLast(){if(this.length!==0)return this.g[this.d]}dequeue(){const _=this.g[this.c];return this.c++,_}removeLast(){const _=this.g[this.d];return this.d--,_}takeCount(_){const ee=this.g.slice(this.c,this.c+_);return this.c+=_,ee}}e.$_b=O;class W{static{this.empty=new W(_=>{})}constructor(_){this.iterate=_}forEach(_){this.iterate(ee=>(_(ee),!0))}toArray(){const _=[];return this.iterate(ee=>(_.push(ee),!0)),_}filter(_){return new W(ee=>this.iterate(X=>_(X)?ee(X):!0))}map(_){return new W(ee=>this.iterate(X=>ee(_(X))))}some(_){let ee=!1;return this.iterate(X=>(ee=_(X),!ee)),ee}findFirst(_){let ee;return this.iterate(X=>_(X)?(ee=X,!1):!0),ee}findLast(_){let ee;return this.iterate(X=>(_(X)&&(ee=X),!0)),ee}findLastMaxBy(_){let ee,X=!0;return this.iterate(ie=>((X||se.isGreaterThan(_(ie,ee)))&&(X=!1,ee=ie),!0)),ee}}e.$ac=W}),define(ue[127],de([0,1,7]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$0c=e.$9c=e.$8c=e.$7c=e.$6c=e.ok=void 0;function N(m,C){if(!m)throw new Error(C?`Assertion failed (${C})`:"Assertion Failed")}e.ok=N;function L(m,C="Unreachable"){throw new Error(C)}e.$6c=L;function j(m){if(!m)throw new D.$cb("Assertion Failed")}e.$7c=j;function I(m){m||(0,D.$1)(new D.$cb("Assertion Failed"))}e.$8c=I;function P(m){if(!m()){debugger;m(),(0,D.$1)(new D.$cb("Assertion Failed"))}}e.$9c=P;function R(m,C){let k=0;for(;k<m.length-1;){const E=m[k],l=m[k+1];if(!C(E,l))return!1;k++}return!0}e.$0c=R}),define(ue[87],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$db=void 0;function D(N,L){const j=this;let I=!1,P;return function(){if(I)return P;if(I=!0,L)try{P=N.apply(j,arguments)}finally{L()}else P=N.apply(j,arguments);return P}}e.$db=D}),define(ue[63],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Iterable=void 0;var D;(function(N){function L(i){return i&&typeof i=="object"&&typeof i[Symbol.iterator]=="function"}N.is=L;const j=Object.freeze([]);function I(){return j}N.empty=I;function*P(i){yield i}N.single=P;function R(i){return L(i)?i:P(i)}N.wrap=R;function m(i){return i||j}N.from=m;function*C(i){for(let r=i.length-1;r>=0;r--)yield i[r]}N.reverse=C;function k(i){return!i||i[Symbol.iterator]().next().done===!0}N.isEmpty=k;function E(i){return i[Symbol.iterator]().next().value}N.first=E;function l(i,r){for(const n of i)if(r(n))return!0;return!1}N.some=l;function g(i,r){for(const n of i)if(r(n))return n}N.find=g;function*p(i,r){for(const n of i)r(n)&&(yield n)}N.filter=p;function*w(i,r){let n=0;for(const s of i)yield r(s,n++)}N.map=w;function*h(...i){for(const r of i)yield*r}N.concat=h;function f(i,r,n){let s=n;for(const t of i)s=r(s,t);return s}N.reduce=f;function*u(i,r,n=i.length){for(r<0&&(r+=i.length),n<0?n+=i.length:n>i.length&&(n=i.length);r<n;r++)yield i[r]}N.slice=u;function c(i,r=Number.POSITIVE_INFINITY){const n=[];if(r===0)return[n,i];const s=i[Symbol.iterator]();for(let t=0;t<r;t++){const o=s.next();if(o.done)return[n,N.empty()];n.push(o.value)}return[n,{[Symbol.iterator](){return s}}]}N.consume=c;async function b(i){const r=[];for await(const n of i)r.push(n);return Promise.resolve(r)}N.asyncToArray=b})(D||(e.Iterable=D={}))}),define(ue[34],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$un=e.$tn=e.$sn=e.$rn=e.$qn=e.$pn=e.$on=e.$nn=e.$mn=e.$ln=e.$kn=e.$jn=e.ParseOptions=e.ParseErrorCode=e.SyntaxKind=e.ScanError=void 0;var D;(function(i){i[i.None=0]="None",i[i.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=2]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",i[i.InvalidUnicode=4]="InvalidUnicode",i[i.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",i[i.InvalidCharacter=6]="InvalidCharacter"})(D||(e.ScanError=D={}));var N;(function(i){i[i.OpenBraceToken=1]="OpenBraceToken",i[i.CloseBraceToken=2]="CloseBraceToken",i[i.OpenBracketToken=3]="OpenBracketToken",i[i.CloseBracketToken=4]="CloseBracketToken",i[i.CommaToken=5]="CommaToken",i[i.ColonToken=6]="ColonToken",i[i.NullKeyword=7]="NullKeyword",i[i.TrueKeyword=8]="TrueKeyword",i[i.FalseKeyword=9]="FalseKeyword",i[i.StringLiteral=10]="StringLiteral",i[i.NumericLiteral=11]="NumericLiteral",i[i.LineCommentTrivia=12]="LineCommentTrivia",i[i.BlockCommentTrivia=13]="BlockCommentTrivia",i[i.LineBreakTrivia=14]="LineBreakTrivia",i[i.Trivia=15]="Trivia",i[i.Unknown=16]="Unknown",i[i.EOF=17]="EOF"})(N||(e.SyntaxKind=N={}));var L;(function(i){i[i.InvalidSymbol=1]="InvalidSymbol",i[i.InvalidNumberFormat=2]="InvalidNumberFormat",i[i.PropertyNameExpected=3]="PropertyNameExpected",i[i.ValueExpected=4]="ValueExpected",i[i.ColonExpected=5]="ColonExpected",i[i.CommaExpected=6]="CommaExpected",i[i.CloseBraceExpected=7]="CloseBraceExpected",i[i.CloseBracketExpected=8]="CloseBracketExpected",i[i.EndOfFileExpected=9]="EndOfFileExpected",i[i.InvalidCommentToken=10]="InvalidCommentToken",i[i.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=12]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",i[i.InvalidUnicode=14]="InvalidUnicode",i[i.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",i[i.InvalidCharacter=16]="InvalidCharacter"})(L||(e.ParseErrorCode=L={}));var j;(function(i){i.DEFAULT={allowTrailingComma:!0}})(j||(e.ParseOptions=j={}));function I(i,r=!1){let n=0;const s=i.length;let t="",o=0,a=16,y=0;function $(M){let Y=0,G=0;for(;Y<M;){const Q=i.charCodeAt(n);if(Q>=48&&Q<=57)G=G*16+Q-48;else if(Q>=65&&Q<=70)G=G*16+Q-65+10;else if(Q>=97&&Q<=102)G=G*16+Q-97+10;else break;n++,Y++}return Y<M&&(G=-1),G}function d(M){n=M,t="",o=0,a=16,y=0}function v(){const M=n;if(i.charCodeAt(n)===48)n++;else for(n++;n<i.length&&m(i.charCodeAt(n));)n++;if(n<i.length&&i.charCodeAt(n)===46)if(n++,n<i.length&&m(i.charCodeAt(n)))for(n++;n<i.length&&m(i.charCodeAt(n));)n++;else return y=3,i.substring(M,n);let Y=n;if(n<i.length&&(i.charCodeAt(n)===69||i.charCodeAt(n)===101))if(n++,(n<i.length&&i.charCodeAt(n)===43||i.charCodeAt(n)===45)&&n++,n<i.length&&m(i.charCodeAt(n))){for(n++;n<i.length&&m(i.charCodeAt(n));)n++;Y=n}else y=3;return i.substring(M,Y)}function S(){let M="",Y=n;for(;;){if(n>=s){M+=i.substring(Y,n),y=2;break}const G=i.charCodeAt(n);if(G===34){M+=i.substring(Y,n),n++;break}if(G===92){if(M+=i.substring(Y,n),n++,n>=s){y=2;break}switch(i.charCodeAt(n++)){case 34:M+='"';break;case 92:M+="\\";break;case 47:M+="/";break;case 98:M+="\b";break;case 102:M+="\f";break;case 110:M+=`
`;break;case 114:M+="\r";break;case 116:M+="	";break;case 117:{const F=$(4);F>=0?M+=String.fromCharCode(F):y=4;break}default:y=5}Y=n;continue}if(G>=0&&G<=31)if(R(G)){M+=i.substring(Y,n),y=2;break}else y=6;n++}return M}function A(){if(t="",y=0,o=n,n>=s)return o=s,a=17;let M=i.charCodeAt(n);if(P(M)){do n++,t+=String.fromCharCode(M),M=i.charCodeAt(n);while(P(M));return a=15}if(R(M))return n++,t+=String.fromCharCode(M),M===13&&i.charCodeAt(n)===10&&(n++,t+=`
`),a=14;switch(M){case 123:return n++,a=1;case 125:return n++,a=2;case 91:return n++,a=3;case 93:return n++,a=4;case 58:return n++,a=6;case 44:return n++,a=5;case 34:return n++,t=S(),a=10;case 47:{const Y=n-1;if(i.charCodeAt(n+1)===47){for(n+=2;n<s&&!R(i.charCodeAt(n));)n++;return t=i.substring(Y,n),a=12}if(i.charCodeAt(n+1)===42){n+=2;const G=s-1;let Q=!1;for(;n<G;){if(i.charCodeAt(n)===42&&i.charCodeAt(n+1)===47){n+=2,Q=!0;break}n++}return Q||(n++,y=1),t=i.substring(Y,n),a=13}return t+=String.fromCharCode(M),n++,a=16}case 45:if(t+=String.fromCharCode(M),n++,n===s||!m(i.charCodeAt(n)))return a=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return t+=v(),a=11;default:for(;n<s&&T(M);)n++,M=i.charCodeAt(n);if(o!==n){switch(t=i.substring(o,n),t){case"true":return a=8;case"false":return a=9;case"null":return a=7}return a=16}return t+=String.fromCharCode(M),n++,a=16}}function T(M){if(P(M)||R(M))return!1;switch(M){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function q(){let M;do M=A();while(M>=12&&M<=15);return M}return{setPosition:d,getPosition:()=>n,scan:r?q:A,getToken:()=>a,getTokenValue:()=>t,getTokenOffset:()=>o,getTokenLength:()=>n-o,getTokenError:()=>y}}e.$jn=I;function P(i){return i===32||i===9||i===11||i===12||i===160||i===5760||i>=8192&&i<=8203||i===8239||i===8287||i===12288||i===65279}function R(i){return i===10||i===13||i===8232||i===8233}function m(i){return i>=48&&i<=57}var C;(function(i){i[i.nullCharacter=0]="nullCharacter",i[i.maxAsciiCharacter=127]="maxAsciiCharacter",i[i.lineFeed=10]="lineFeed",i[i.carriageReturn=13]="carriageReturn",i[i.lineSeparator=8232]="lineSeparator",i[i.paragraphSeparator=8233]="paragraphSeparator",i[i.nextLine=133]="nextLine",i[i.space=32]="space",i[i.nonBreakingSpace=160]="nonBreakingSpace",i[i.enQuad=8192]="enQuad",i[i.emQuad=8193]="emQuad",i[i.enSpace=8194]="enSpace",i[i.emSpace=8195]="emSpace",i[i.threePerEmSpace=8196]="threePerEmSpace",i[i.fourPerEmSpace=8197]="fourPerEmSpace",i[i.sixPerEmSpace=8198]="sixPerEmSpace",i[i.figureSpace=8199]="figureSpace",i[i.punctuationSpace=8200]="punctuationSpace",i[i.thinSpace=8201]="thinSpace",i[i.hairSpace=8202]="hairSpace",i[i.zeroWidthSpace=8203]="zeroWidthSpace",i[i.narrowNoBreakSpace=8239]="narrowNoBreakSpace",i[i.ideographicSpace=12288]="ideographicSpace",i[i.mathematicalSpace=8287]="mathematicalSpace",i[i.ogham=5760]="ogham",i[i._=95]="_",i[i.$=36]="$",i[i._0=48]="_0",i[i._1=49]="_1",i[i._2=50]="_2",i[i._3=51]="_3",i[i._4=52]="_4",i[i._5=53]="_5",i[i._6=54]="_6",i[i._7=55]="_7",i[i._8=56]="_8",i[i._9=57]="_9",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.ampersand=38]="ampersand",i[i.asterisk=42]="asterisk",i[i.at=64]="at",i[i.backslash=92]="backslash",i[i.bar=124]="bar",i[i.caret=94]="caret",i[i.closeBrace=125]="closeBrace",i[i.closeBracket=93]="closeBracket",i[i.closeParen=41]="closeParen",i[i.colon=58]="colon",i[i.comma=44]="comma",i[i.dot=46]="dot",i[i.doubleQuote=34]="doubleQuote",i[i.equals=61]="equals",i[i.exclamation=33]="exclamation",i[i.greaterThan=62]="greaterThan",i[i.lessThan=60]="lessThan",i[i.minus=45]="minus",i[i.openBrace=123]="openBrace",i[i.openBracket=91]="openBracket",i[i.openParen=40]="openParen",i[i.percent=37]="percent",i[i.plus=43]="plus",i[i.question=63]="question",i[i.semicolon=59]="semicolon",i[i.singleQuote=39]="singleQuote",i[i.slash=47]="slash",i[i.tilde=126]="tilde",i[i.backspace=8]="backspace",i[i.formFeed=12]="formFeed",i[i.byteOrderMark=65279]="byteOrderMark",i[i.tab=9]="tab",i[i.verticalTab=11]="verticalTab"})(C||(C={}));function k(i,r){const n=[],s=new Object;let t;const o={value:{},offset:0,length:0,type:"object",parent:void 0};let a=!1;function y($,d,v,S){o.value=$,o.offset=d,o.length=v,o.type=S,o.colonOffset=void 0,t=o}try{u(i,{onObjectBegin:($,d)=>{if(r<=$)throw s;t=void 0,a=r>$,n.push("")},onObjectProperty:($,d,v)=>{if(r<d||(y($,d,v,"property"),n[n.length-1]=$,r<=d+v))throw s},onObjectEnd:($,d)=>{if(r<=$)throw s;t=void 0,n.pop()},onArrayBegin:($,d)=>{if(r<=$)throw s;t=void 0,n.push(0)},onArrayEnd:($,d)=>{if(r<=$)throw s;t=void 0,n.pop()},onLiteralValue:($,d,v)=>{if(r<d||(y($,d,v,b($)),r<=d+v))throw s},onSeparator:($,d,v)=>{if(r<=d)throw s;if($===":"&&t&&t.type==="property")t.colonOffset=d,a=!1,t=void 0;else if($===","){const S=n[n.length-1];typeof S=="number"?n[n.length-1]=S+1:(a=!0,n[n.length-1]=""),t=void 0}}})}catch($){if($!==s)throw $}return{path:n,previousNode:t,isAtPropertyKey:a,matches:$=>{let d=0;for(let v=0;d<$.length&&v<n.length;v++)if($[d]===n[v]||$[d]==="*")d++;else if($[d]!=="**")return!1;return d===$.length}}}e.$kn=k;function E(i,r=[],n=j.DEFAULT){let s=null,t=[];const o=[];function a($){Array.isArray(t)?t.push($):s!==null&&(t[s]=$)}return u(i,{onObjectBegin:()=>{const $={};a($),o.push(t),t=$,s=null},onObjectProperty:$=>{s=$},onObjectEnd:()=>{t=o.pop()},onArrayBegin:()=>{const $=[];a($),o.push(t),t=$,s=null},onArrayEnd:()=>{t=o.pop()},onLiteralValue:a,onError:($,d,v)=>{r.push({error:$,offset:d,length:v})}},n),t[0]}e.$ln=E;function l(i,r=[],n=j.DEFAULT){let s={type:"array",offset:-1,length:-1,children:[],parent:void 0};function t($){s.type==="property"&&(s.length=$-s.offset,s=s.parent)}function o($){return s.children.push($),$}u(i,{onObjectBegin:$=>{s=o({type:"object",offset:$,length:-1,parent:s,children:[]})},onObjectProperty:($,d,v)=>{s=o({type:"property",offset:d,length:-1,parent:s,children:[]}),s.children.push({type:"string",value:$,offset:d,length:v,parent:s})},onObjectEnd:($,d)=>{s.length=$+d-s.offset,s=s.parent,t($+d)},onArrayBegin:($,d)=>{s=o({type:"array",offset:$,length:-1,parent:s,children:[]})},onArrayEnd:($,d)=>{s.length=$+d-s.offset,s=s.parent,t($+d)},onLiteralValue:($,d,v)=>{o({type:b($),offset:d,length:v,parent:s,value:$}),t(d+v)},onSeparator:($,d,v)=>{s.type==="property"&&($===":"?s.colonOffset=d:$===","&&t(d))},onError:($,d,v)=>{r.push({error:$,offset:d,length:v})}},n);const y=s.children[0];return y&&delete y.parent,y}e.$mn=l;function g(i,r){if(!i)return;let n=i;for(const s of r)if(typeof s=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let t=!1;for(const o of n.children)if(Array.isArray(o.children)&&o.children[0].value===s){n=o.children[1],t=!0;break}if(!t)return}else{const t=s;if(n.type!=="array"||t<0||!Array.isArray(n.children)||t>=n.children.length)return;n=n.children[t]}return n}e.$nn=g;function p(i){if(!i.parent||!i.parent.children)return[];const r=p(i.parent);if(i.parent.type==="property"){const n=i.parent.children[0].value;r.push(n)}else if(i.parent.type==="array"){const n=i.parent.children.indexOf(i);n!==-1&&r.push(n)}return r}e.$on=p;function w(i){switch(i.type){case"array":return i.children.map(w);case"object":{const r=Object.create(null);for(const n of i.children){const s=n.children[1];s&&(r[n.children[0].value]=w(s))}return r}case"null":case"string":case"number":case"boolean":return i.value;default:return}}e.$pn=w;function h(i,r,n=!1){return r>=i.offset&&r<i.offset+i.length||n&&r===i.offset+i.length}e.$qn=h;function f(i,r,n=!1){if(h(i,r,n)){const s=i.children;if(Array.isArray(s))for(let t=0;t<s.length&&s[t].offset<=r;t++){const o=f(s[t],r,n);if(o)return o}return i}}e.$rn=f;function u(i,r,n=j.DEFAULT){const s=I(i,!1);function t(V){return V?()=>V(s.getTokenOffset(),s.getTokenLength()):()=>!0}function o(V){return V?ne=>V(ne,s.getTokenOffset(),s.getTokenLength()):()=>!0}const a=t(r.onObjectBegin),y=o(r.onObjectProperty),$=t(r.onObjectEnd),d=t(r.onArrayBegin),v=t(r.onArrayEnd),S=o(r.onLiteralValue),A=o(r.onSeparator),T=t(r.onComment),q=o(r.onError),M=n&&n.disallowComments,Y=n&&n.allowTrailingComma;function G(){for(;;){const V=s.scan();switch(s.getTokenError()){case 4:Q(14);break;case 5:Q(15);break;case 3:Q(13);break;case 1:M||Q(11);break;case 2:Q(12);break;case 6:Q(16);break}switch(V){case 12:case 13:M?Q(10):T();break;case 16:Q(1);break;case 15:case 14:break;default:return V}}}function Q(V,ne=[],K=[]){if(q(V),ne.length+K.length>0){let z=s.getToken();for(;z!==17;){if(ne.indexOf(z)!==-1){G();break}else if(K.indexOf(z)!==-1)break;z=G()}}}function F(V){const ne=s.getTokenValue();return V?S(ne):y(ne),G(),!0}function te(){switch(s.getToken()){case 11:{let V=0;try{V=JSON.parse(s.getTokenValue()),typeof V!="number"&&(Q(2),V=0)}catch{Q(2)}S(V);break}case 7:S(null);break;case 8:S(!0);break;case 9:S(!1);break;default:return!1}return G(),!0}function H(){return s.getToken()!==10?(Q(3,[],[2,5]),!1):(F(!1),s.getToken()===6?(A(":"),G(),se()||Q(4,[],[2,5])):Q(5,[],[2,5]),!0)}function J(){a(),G();let V=!1;for(;s.getToken()!==2&&s.getToken()!==17;){if(s.getToken()===5){if(V||Q(4,[],[]),A(","),G(),s.getToken()===2&&Y)break}else V&&Q(6,[],[]);H()||Q(4,[],[2,5]),V=!0}return $(),s.getToken()!==2?Q(7,[2],[]):G(),!0}function x(){d(),G();let V=!1;for(;s.getToken()!==4&&s.getToken()!==17;){if(s.getToken()===5){if(V||Q(4,[],[]),A(","),G(),s.getToken()===4&&Y)break}else V&&Q(6,[],[]);se()||Q(4,[],[4,5]),V=!0}return v(),s.getToken()!==4?Q(8,[4],[]):G(),!0}function se(){switch(s.getToken()){case 3:return x();case 1:return J();case 10:return F(!0);default:return te()}}return G(),s.getToken()===17?n.allowEmptyContent?!0:(Q(4,[],[]),!1):se()?(s.getToken()!==17&&Q(9,[],[]),!0):(Q(4,[],[]),!1)}e.$sn=u;function c(i,r){const n=I(i),s=[];let t,o=0,a;do switch(a=n.getPosition(),t=n.scan(),t){case 12:case 13:case 17:o!==a&&s.push(i.substring(o,a)),r!==void 0&&s.push(n.getTokenValue().replace(/[^\r\n]/g,r)),o=n.getPosition();break}while(t!==17);return s.join("")}e.$tn=c;function b(i){switch(typeof i){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(i){if(Array.isArray(i))return"array"}else return"null";return"object"}default:return"null"}}e.$un=b}),define(ue[42],de([0,1,34]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$yn=e.$xn=e.$wn=e.$vn=void 0;function N(m,C,k){let E,l,g,p,w;if(C){for(p=C.offset,w=p+C.length,g=p;g>0&&!R(m,g-1);)g--;let a=w;for(;a<m.length&&!R(m,a);)a++;l=m.substring(g,a),E=I(l,k)}else l=m,E=0,g=0,p=0,w=m.length;const h=P(k,m);let f=!1,u=0,c;k.insertSpaces?c=j(" ",k.tabSize||4):c="	";const b=(0,D.$jn)(l,!1);let i=!1;function r(){return h+j(c,E+u)}function n(){let a=b.scan();for(f=!1;a===15||a===14;)f=f||a===14,a=b.scan();return i=a===16||b.getTokenError()!==0,a}const s=[];function t(a,y,$){!i&&y<w&&$>p&&m.substring(y,$)!==a&&s.push({offset:y,length:$-y,content:a})}let o=n();if(o!==17){const a=b.getTokenOffset()+g,y=j(c,E);t(y,g,a)}for(;o!==17;){let a=b.getTokenOffset()+b.getTokenLength()+g,y=n(),$="";for(;!f&&(y===12||y===13);){const v=b.getTokenOffset()+g;t(" ",a,v),a=b.getTokenOffset()+b.getTokenLength()+g,$=y===12?r():"",y=n()}if(y===2)o!==1&&(u--,$=r());else if(y===4)o!==3&&(u--,$=r());else{switch(o){case 3:case 1:u++,$=r();break;case 5:case 12:$=r();break;case 13:f?$=r():$=" ";break;case 6:$=" ";break;case 10:if(y===6){$="";break}case 7:case 8:case 9:case 11:case 2:case 4:y===12||y===13?$=" ":y!==5&&y!==17&&(i=!0);break;case 16:i=!0;break}f&&(y===12||y===13)&&($=r())}const d=b.getTokenOffset()+g;t($,a,d),o=y}return s}e.$vn=N;function L(m,C){const k=JSON.stringify(m,void 0,C.insertSpaces?C.tabSize||4:"	");return C.eol!==void 0?k.replace(/\r\n|\r|\n/g,C.eol):k}e.$wn=L;function j(m,C){let k="";for(let E=0;E<C;E++)k+=m;return k}function I(m,C){let k=0,E=0;const l=C.tabSize||4;for(;k<m.length;){const g=m.charAt(k);if(g===" ")E++;else if(g==="	")E+=l;else break;k++}return Math.floor(E/l)}function P(m,C){for(let k=0;k<C.length;k++){const E=C.charAt(k);if(E==="\r")return k+1<C.length&&C.charAt(k+1)===`
`?`\r
`:"\r";if(E===`
`)return`
`}return m&&m.eol||`
`}e.$xn=P;function R(m,C){return`\r
`.indexOf(m.charAt(C))!==-1}e.$yn=R}),define(ue[64],de([0,1,34,42]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Dn=e.$Cn=e.$Bn=e.$An=e.$zn=void 0;function L(m,C,k){return j(m,C,void 0,k)}e.$zn=L;function j(m,C,k,E,l){const g=C.slice(),p=[],w=(0,D.$mn)(m,p);let h,f;for(;g.length>0&&(f=g.pop(),h=(0,D.$nn)(w,g),h===void 0&&k!==void 0);)typeof f=="string"?k={[f]:k}:k=[k];if(h)if(h.type==="object"&&typeof f=="string"&&Array.isArray(h.children)){const u=(0,D.$nn)(h,[f]);if(u!==void 0)if(k===void 0){if(!u.parent)throw new Error("Malformed AST");const c=h.children.indexOf(u.parent);let b,i=u.parent.offset+u.parent.length;if(c>0){const r=h.children[c-1];b=r.offset+r.length}else b=h.offset+1,h.children.length>1&&(i=h.children[1].offset);return I(m,{offset:b,length:i-b,content:""},E)}else return I(m,{offset:u.offset,length:u.length,content:JSON.stringify(k)},E);else{if(k===void 0)return[];const c=`${JSON.stringify(f)}: ${JSON.stringify(k)}`,b=l?l(h.children.map(r=>r.children[0].value)):h.children.length;let i;if(b>0){const r=h.children[b-1];i={offset:r.offset+r.length,length:0,content:","+c}}else h.children.length===0?i={offset:h.offset+1,length:0,content:c}:i={offset:h.offset+1,length:0,content:c+","};return I(m,i,E)}}else if(h.type==="array"&&typeof f=="number"&&Array.isArray(h.children))if(k!==void 0){const u=`${JSON.stringify(k)}`;let c;if(h.children.length===0||f===0)c={offset:h.offset+1,length:0,content:h.children.length===0?u:u+","};else{const b=f===-1||f>h.children.length?h.children.length:f,i=h.children[b-1];c={offset:i.offset+i.length,length:0,content:","+u}}return I(m,c,E)}else{const u=f,c=h.children[u];let b;if(h.children.length===1)b={offset:h.offset+1,length:h.length-2,content:""};else if(h.children.length-1===u){const i=h.children[u-1],r=i.offset+i.length,n=h.offset+h.length;b={offset:r,length:n-2-r,content:""}}else b={offset:c.offset,length:h.children[u+1].offset-c.offset,content:""};return I(m,b,E)}else throw new Error(`Can not add ${typeof f!="number"?"index":"property"} to parent of type ${h.type}`);else{if(k===void 0)throw new Error("Can not delete in empty document");return I(m,{offset:w?w.offset:0,length:w?w.length:0,content:JSON.stringify(k)},E)}}e.$An=j;function I(m,C,k){let E=P(m,C),l=C.offset,g=C.offset+C.content.length;if(C.length===0||C.content.length===0){for(;l>0&&!(0,N.$yn)(E,l-1);)l--;for(;g<E.length&&!(0,N.$yn)(E,g);)g++}const p=(0,N.$vn)(E,{offset:l,length:g-l},k);for(let h=p.length-1;h>=0;h--){const f=p[h];E=P(E,f),l=Math.min(l,f.offset),g=Math.max(g,f.offset+f.length),g+=f.content.length-f.length}const w=m.length-(E.length-g)-l;return[{offset:l,length:w,content:E.substring(l,g)}]}e.$Bn=I;function P(m,C){return m.substring(0,C.offset)+C.content+m.substring(C.offset+C.length)}e.$Cn=P;function R(m,C){const k=C.slice(0).sort((l,g)=>{const p=l.offset-g.offset;return p===0?l.length-g.length:p});let E=m.length;for(let l=k.length-1;l>=0;l--){const g=k[l];if(g.offset+g.length<=E)m=P(m,g);else throw new Error("Overlapping edit");E=g.offset}return m}e.$Dn=R}),define(ue[53],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$V=void 0;class D{constructor(L){this.d=L,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(L){this.c=L}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}}e.$V=D}),define(ue[88],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$4c=void 0;class D{static{this.Undefined=new D(void 0)}constructor(j){this.element=j,this.next=D.Undefined,this.prev=D.Undefined}}class N{constructor(){this.a=D.Undefined,this.b=D.Undefined,this.c=0}get size(){return this.c}get first(){return this.a}isEmpty(){return this.a===D.Undefined}clear(){let j=this.a;for(;j!==D.Undefined;){const I=j.next;j.prev=D.Undefined,j.next=D.Undefined,j=I}this.a=D.Undefined,this.b=D.Undefined,this.c=0}unshift(j){return this.d(j,!1)}push(j){return this.d(j,!0)}d(j,I){const P=new D(j);if(this.a===D.Undefined)this.a=P,this.b=P;else if(I){const m=this.b;this.b=P,P.prev=m,m.next=P}else{const m=this.a;this.a=P,P.next=m,m.prev=P}this.c+=1;let R=!1;return()=>{R||(R=!0,this.e(P))}}shift(){if(this.a!==D.Undefined){const j=this.a.element;return this.e(this.a),j}}pop(){if(this.b!==D.Undefined){const j=this.b.element;return this.e(this.b),j}}remove(j){this.e(j)}e(j){if(j.prev!==D.Undefined&&j.next!==D.Undefined){const I=j.prev;I.next=j.next,j.next.prev=I}else j.prev===D.Undefined&&j.next===D.Undefined?(this.a=D.Undefined,this.b=D.Undefined):j.next===D.Undefined?(this.b=this.b.prev,this.b.next=D.Undefined):j.prev===D.Undefined&&(this.a=this.a.next,this.a.prev=D.Undefined);this.c-=1}*[Symbol.iterator](){let j=this.a;for(;j!==D.Undefined;)yield j.element,j=j.next}}e.$4c=N}),define(ue[35],de([0,1]),function(oe,e){"use strict";var D,N,L;Object.defineProperty(e,"__esModule",{value:!0}),e.$Hc=e.$Gc=e.$Fc=e.$Ec=e.$Dc=e.$Cc=e.Touch=e.$Bc=e.$Ac=e.$zc=e.$yc=e.$xc=void 0;function j(u,c,b){let i=u.get(c);return i===void 0&&(i=b,u.set(c,i)),i}e.$xc=j;function I(u){const c=[];return u.forEach((b,i)=>{c.push(`${i} => ${b}`)}),`Map(${u.size}) {${c.join(", ")}}`}e.$yc=I;function P(u){const c=[];return u.forEach(b=>{c.push(b)}),`Set(${u.size}) {${c.join(", ")}}`}e.$zc=P;class R{constructor(c,b){this.uri=c,this.value=b}}function m(u){return Array.isArray(u)}class C{static{this.c=c=>c.toString()}constructor(c,b){if(this[D]="ResourceMap",c instanceof C)this.d=new Map(c.d),this.e=b??C.c;else if(m(c)){this.d=new Map,this.e=b??C.c;for(const[i,r]of c)this.set(i,r)}else this.d=new Map,this.e=c??C.c}set(c,b){return this.d.set(this.e(c),new R(c,b)),this}get(c){return this.d.get(this.e(c))?.value}has(c){return this.d.has(this.e(c))}get size(){return this.d.size}clear(){this.d.clear()}delete(c){return this.d.delete(this.e(c))}forEach(c,b){typeof b<"u"&&(c=c.bind(b));for(const[i,r]of this.d)c(r.value,r.uri,this)}*values(){for(const c of this.d.values())yield c.value}*keys(){for(const c of this.d.values())yield c.uri}*entries(){for(const c of this.d.values())yield[c.uri,c.value]}*[(D=Symbol.toStringTag,Symbol.iterator)](){for(const[,c]of this.d)yield[c.uri,c.value]}}e.$Ac=C;class k{constructor(c,b){this[N]="ResourceSet",!c||typeof c=="function"?this.c=new C(c):(this.c=new C(b),c.forEach(this.add,this))}get size(){return this.c.size}add(c){return this.c.set(c,c),this}clear(){this.c.clear()}delete(c){return this.c.delete(c)}forEach(c,b){this.c.forEach((i,r)=>c.call(b,r,r,this))}has(c){return this.c.has(c)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(N=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.$Bc=k;var E;(function(u){u[u.None=0]="None",u[u.AsOld=1]="AsOld",u[u.AsNew=2]="AsNew"})(E||(e.Touch=E={}));class l{constructor(){this[L]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(c){return this.c.has(c)}get(c,b=0){const i=this.c.get(c);if(i)return b!==0&&this.l(i,b),i.value}set(c,b,i=0){let r=this.c.get(c);if(r)r.value=b,i!==0&&this.l(r,i);else{switch(r={key:c,value:b,next:void 0,previous:void 0},i){case 0:this.j(r);break;case 1:this.i(r);break;case 2:this.j(r);break;default:this.j(r);break}this.c.set(c,r),this.f++}return this}delete(c){return!!this.remove(c)}remove(c){const b=this.c.get(c);if(b)return this.c.delete(c),this.k(b),this.f--,b.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const c=this.d;return this.c.delete(c.key),this.k(c),this.f--,c.value}forEach(c,b){const i=this.g;let r=this.d;for(;r;){if(b?c.bind(b)(r.value,r.key,this):c(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const c=this,b=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(c.g!==b)throw new Error("LinkedMap got modified during iteration.");if(i){const n={value:i.key,done:!1};return i=i.next,n}else return{value:void 0,done:!0}}};return r}values(){const c=this,b=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(c.g!==b)throw new Error("LinkedMap got modified during iteration.");if(i){const n={value:i.value,done:!1};return i=i.next,n}else return{value:void 0,done:!0}}};return r}entries(){const c=this,b=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(c.g!==b)throw new Error("LinkedMap got modified during iteration.");if(i){const n={value:[i.key,i.value],done:!1};return i=i.next,n}else return{value:void 0,done:!0}}};return r}[(L=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(c){if(c>=this.size)return;if(c===0){this.clear();return}let b=this.d,i=this.size;for(;b&&i>c;)this.c.delete(b.key),b=b.next,i--;this.d=b,this.f=i,b&&(b.previous=void 0),this.g++}i(c){if(!this.d&&!this.e)this.e=c;else if(this.d)c.next=this.d,this.d.previous=c;else throw new Error("Invalid list");this.d=c,this.g++}j(c){if(!this.d&&!this.e)this.d=c;else if(this.e)c.previous=this.e,this.e.next=c;else throw new Error("Invalid list");this.e=c,this.g++}k(c){if(c===this.d&&c===this.e)this.d=void 0,this.e=void 0;else if(c===this.d){if(!c.next)throw new Error("Invalid list");c.next.previous=void 0,this.d=c.next}else if(c===this.e){if(!c.previous)throw new Error("Invalid list");c.previous.next=void 0,this.e=c.previous}else{const b=c.next,i=c.previous;if(!b||!i)throw new Error("Invalid list");b.previous=i,i.next=b}c.next=void 0,c.previous=void 0,this.g++}l(c,b){if(!this.d||!this.e)throw new Error("Invalid list");if(!(b!==1&&b!==2)){if(b===1){if(c===this.d)return;const i=c.next,r=c.previous;c===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),c.previous=void 0,c.next=this.d,this.d.previous=c,this.d=c,this.g++}else if(b===2){if(c===this.e)return;const i=c.next,r=c.previous;c===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),c.next=void 0,c.previous=this.e,this.e.next=c,this.e=c,this.g++}}}toJSON(){const c=[];return this.forEach((b,i)=>{c.push([i,b])}),c}fromJSON(c){this.clear();for(const[b,i]of c)this.set(b,i)}}e.$Cc=l;class g extends l{constructor(c,b=1){super(),this.m=c,this.n=Math.min(Math.max(0,b),1)}get limit(){return this.m}set limit(c){this.m=c,this.o()}get ratio(){return this.n}set ratio(c){this.n=Math.min(Math.max(0,c),1),this.o()}get(c,b=2){return super.get(c,b)}peek(c){return super.get(c,0)}set(c,b){return super.set(c,b,2),this.o(),this}o(){this.size>this.m&&this.h(Math.round(this.m*this.n))}}e.$Dc=g;class p{constructor(){this.c=new Map}add(c){return this.c.set(c,(this.c.get(c)||0)+1),this}delete(c){let b=this.c.get(c)||0;return b===0?!1:(b--,b===0?this.c.delete(c):this.c.set(c,b),!0)}has(c){return this.c.has(c)}}e.$Ec=p;class w{constructor(c){if(this.c=new Map,this.d=new Map,c)for(const[b,i]of c)this.set(b,i)}clear(){this.c.clear(),this.d.clear()}set(c,b){this.c.set(c,b),this.d.set(b,c)}get(c){return this.c.get(c)}getKey(c){return this.d.get(c)}delete(c){const b=this.c.get(c);return b===void 0?!1:(this.c.delete(c),this.d.delete(b),!0)}forEach(c,b){this.c.forEach((i,r)=>{c.call(b,i,r,this)})}keys(){return this.c.keys()}values(){return this.c.values()}}e.$Fc=w;class h{constructor(){this.c=new Map}add(c,b){let i=this.c.get(c);i||(i=new Set,this.c.set(c,i)),i.add(b)}delete(c,b){const i=this.c.get(c);i&&(i.delete(b),i.size===0&&this.c.delete(c))}forEach(c,b){const i=this.c.get(c);i&&i.forEach(b)}get(c){const b=this.c.get(c);return b||new Set}}e.$Gc=h;function f(u,c){if(u===c)return!0;if(u.size!==c.size)return!1;for(const[b,i]of u)if(!c.has(b)||c.get(b)!==i)return!1;for(const[b]of c)if(!u.has(b))return!1;return!0}e.$Hc=f}),define(ue[2],de([0,1,17,126,35,87,63]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3c=e.$2c=e.$1c=e.$Zc=e.$Yc=e.$Xc=e.$Wc=e.$Vc=e.$Uc=e.$Tc=e.$Sc=e.$Rc=e.$Qc=e.$Pc=e.$Oc=e.$Nc=e.$Mc=e.$Lc=e.$Kc=e.$Jc=e.$Ic=void 0;const P=!1;let R=null;class m{constructor(){this.b=new Map}static{this.a=0}c(S){let A=this.b.get(S);return A||(A={parent:null,source:null,isSingleton:!1,value:S,idx:m.a++},this.b.set(S,A)),A}trackDisposable(S){const A=this.c(S);A.source||(A.source=new Error().stack)}setParent(S,A){const T=this.c(S);T.parent=A}markAsDisposed(S){this.b.delete(S)}markAsSingleton(S){this.c(S).isSingleton=!0}f(S,A){const T=A.get(S);if(T)return T;const q=S.parent?this.f(this.c(S.parent),A):S;return A.set(S,q),q}getTrackedDisposables(){const S=new Map;return[...this.b.entries()].filter(([,T])=>T.source!==null&&!this.f(T,S).isSingleton).flatMap(([T])=>T)}computeLeakingDisposables(S=10,A){let T;if(A)T=A;else{const Q=new Map,F=[...this.b.values()].filter(H=>H.source!==null&&!this.f(H,Q).isSingleton);if(F.length===0)return;const te=new Set(F.map(H=>H.value));if(T=F.filter(H=>!(H.parent&&te.has(H.parent))),T.length===0)throw new Error("There are cyclic diposable chains!")}if(!T)return;function q(Q){function F(H,J){for(;H.length>0&&J.some(x=>typeof x=="string"?x===H[0]:H[0].match(x));)H.shift()}const te=Q.source.split(`
`).map(H=>H.trim().replace("at ","")).filter(H=>H!=="");return F(te,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),te.reverse()}const M=new L.$Gc;for(const Q of T){const F=q(Q);for(let te=0;te<=F.length;te++)M.add(F.slice(0,te).join(`
`),Q)}T.sort((0,D.$7b)(Q=>Q.idx,D.$9b));let Y="",G=0;for(const Q of T.slice(0,S)){G++;const F=q(Q),te=[];for(let H=0;H<F.length;H++){let J=F[H];J=`(shared with ${M.get(F.slice(0,H+1).join(`
`)).size}/${T.length} leaks) at ${J}`;const se=M.get(F.slice(0,H).join(`
`)),V=(0,N.$K)([...se].map(ne=>q(ne)[H]),ne=>ne);delete V[F[H]];for(const[ne,K]of Object.entries(V))te.unshift(`    - stacktraces of ${K.length} other leaks continue with ${ne}`);te.unshift(J)}Y+=`


==================== Leaking disposable ${G}/${T.length}: ${Q.value.constructor.name} ====================
${te.join(`
`)}
============================================================

`}return T.length>S&&(Y+=`


... and ${T.length-S} more leaking disposables

`),{leaks:T,details:Y}}}e.$Ic=m;function C(v){R=v}if(e.$Jc=C,P){const v="__is_disposable_tracked__";C(new class{trackDisposable(S){const A=new Error("Potentially leaked disposable").stack;setTimeout(()=>{S[v]||console.log(A)},3e3)}setParent(S,A){if(S&&S!==i.None)try{S[v]=!0}catch{}}markAsDisposed(S){if(S&&S!==i.None)try{S[v]=!0}catch{}}markAsSingleton(S){}})}function k(v){return R?.trackDisposable(v),v}e.$Kc=k;function E(v){R?.markAsDisposed(v)}e.$Lc=E;function l(v,S){R?.setParent(v,S)}function g(v,S){if(R)for(const A of v)R.setParent(A,S)}function p(v){return R?.markAsSingleton(v),v}e.$Mc=p;function w(v){return typeof v.dispose=="function"&&v.dispose.length===0}e.$Nc=w;function h(v){if(I.Iterable.is(v)){const S=[];for(const A of v)if(A)try{A.dispose()}catch(T){S.push(T)}if(S.length===1)throw S[0];if(S.length>1)throw new AggregateError(S,"Encountered errors while disposing of store");return Array.isArray(v)?[]:v}else if(v)return v.dispose(),v}e.$Oc=h;function f(v){for(const S of v)w(S)&&S.dispose();return[]}e.$Pc=f;function u(...v){const S=c(()=>h(v));return g(v,S),S}e.$Qc=u;function c(v){const S=k({dispose:(0,j.$db)(()=>{E(S),v()})});return S}e.$Rc=c;class b{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,k(this)}dispose(){this.g||(E(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{h(this.f)}finally{this.f.clear()}}add(S){if(!S)return S;if(S===this)throw new Error("Cannot register a disposable on itself!");return l(S,this),this.g?b.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(S),S}delete(S){if(S){if(S===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(S),S.dispose()}}deleteAndLeak(S){S&&this.f.has(S)&&(this.f.delete(S),l(S,null))}}e.$Sc=b;class i{static{this.None=Object.freeze({dispose(){}})}constructor(){this.B=new b,k(this),l(this.B,this)}dispose(){E(this),this.B.dispose()}D(S){if(S===this)throw new Error("Cannot register a disposable on itself!");return this.B.add(S)}}e.$Tc=i;class r{constructor(){this.b=!1,k(this)}get value(){return this.b?void 0:this.a}set value(S){this.b||S===this.a||(this.a?.dispose(),S&&l(S,this),this.a=S)}clear(){this.value=void 0}dispose(){this.b=!0,E(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const S=this.a;return this.a=void 0,S&&l(S,null),S}}e.$Uc=r;class n{constructor(S){this.a=new r,this.b=!1,this.a.value=S}get value(){return this.a.value}set value(S){this.b||S===this.a.value||(this.a.value=S)}dispose(){this.b=!0,this.a.dispose()}}e.$Vc=n;class s{constructor(S){this.b=S,this.a=1}acquire(){return this.a++,this}release(){return--this.a===0&&this.b.dispose(),this}}e.$Wc=s;class t{constructor(){this.dispose=()=>{},this.unset=()=>{},this.isset=()=>!1,k(this)}set(S){let A=S;return this.unset=()=>A=void 0,this.isset=()=>A!==void 0,this.dispose=()=>{A&&(A(),A=void 0,E(this))},this}}e.$Xc=t;class o{constructor(){this.a=new Map}acquire(S,...A){let T=this.a.get(S);T||(T={counter:0,object:this.b(S,...A)},this.a.set(S,T));const{object:q}=T,M=(0,j.$db)(()=>{--T.counter===0&&(this.c(S,T.object),this.a.delete(S))});return T.counter++,{object:q,dispose:M}}}e.$Yc=o;class a{constructor(S){this.a=S}async acquire(S,...A){const T=this.a.acquire(S,...A);try{return{object:await T.object,dispose:()=>T.dispose()}}catch(q){throw T.dispose(),q}}}e.$Zc=a;class y{constructor(S){this.object=S}dispose(){}}e.$1c=y;function $(v){const S=new b;try{v(S)}finally{S.dispose()}}e.$2c=$;class d{constructor(){this.a=new Map,this.b=!1,k(this)}dispose(){E(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{h(this.a.values())}finally{this.a.clear()}}has(S){return this.a.has(S)}get size(){return this.a.size}get(S){return this.a.get(S)}set(S,A,T=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),T||this.a.get(S)?.dispose(),this.a.set(S,A)}deleteAndDispose(S){this.a.get(S)?.dispose(),this.a.delete(S)}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}}e.$3c=d}),define(ue[89],de([0,1,35]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ql=e.$Pl=e.$Ol=void 0;const N=new D.$Dc(1e4);function L(m){return R(m,"NFC",N)}e.$Ol=L;const j=new D.$Dc(1e4);function I(m){return R(m,"NFD",j)}e.$Pl=I;const P=/[^\u0000-\u0080]/;function R(m,C,k){if(!m)return m;const E=k.get(m);if(E)return E;let l;return P.test(m)?l=m.normalize(C):l=m,k.set(m,l),l}e.$Ql=function(){const m=/[\u0300-\u036f]/g;return function(C){return I(C).replace(m,"")}}()}),function(){function oe(L){const j=[];typeof L=="number"&&j.push("code/timeOrigin",L);function I(R){j.push(R,Date.now())}function P(){const R=[];for(let m=0;m<j.length;m+=2)R.push({name:j[m],startTime:j[m+1]});return R}return{mark:I,getMarks:P}}function e(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?oe():{mark(L){performance.mark(L)},getMarks(){let L=performance.timeOrigin;typeof L!="number"&&(L=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const j=[{name:"code/timeOrigin",startTime:Math.round(L)}];for(const I of performance.getEntriesByType("mark"))j.push({name:I.name,startTime:Math.round(L+I.startTime)});return j}};if(typeof process=="object"){const L=performance?.timeOrigin??Math.round((require.__$__nodeRequire||require)("perf_hooks").performance.timeOrigin);return oe(L)}else return console.trace("perf-util loaded in UNKNOWN environment"),oe()}function D(L){return L.MonacoPerformanceMarks||(L.MonacoPerformanceMarks=e()),L.MonacoPerformanceMarks}var N;typeof global=="object"?N=global:typeof self=="object"?N=self:N={},typeof define=="function"?define("vs/base/common/performance",[],function(){return D(N)}):typeof module=="object"&&typeof module.exports=="object"?module.exports=D(N):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),N.perf=D(N))}(),function(oe,e){if(typeof exports=="object"&&typeof module=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define("vs/base/common/semver/semver",[],e);else{var D=e();for(var N in D)(typeof exports=="object"?exports:oe)[N]=D[N]}}(typeof self<"u"?self:this,function(){return function(oe){var e={};function D(N){if(e[N])return e[N].exports;var L=e[N]={i:N,l:!1,exports:{}};return oe[N].call(L.exports,L,L.exports,D),L.l=!0,L.exports}return D.m=oe,D.c=e,D.d=function(N,L,j){D.o(N,L)||Object.defineProperty(N,L,{enumerable:!0,get:j})},D.r=function(N){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(N,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(N,"__esModule",{value:!0})},D.t=function(N,L){if(1&L&&(N=D(N)),8&L||4&L&&typeof N=="object"&&N&&N.__esModule)return N;var j=Object.create(null);if(D.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:N}),2&L&&typeof N!="string")for(var I in N)D.d(j,I,function(P){return N[P]}.bind(null,I));return j},D.n=function(N){var L=N&&N.__esModule?function(){return N.default}:function(){return N};return D.d(L,"a",L),L},D.o=function(N,L){return Object.prototype.hasOwnProperty.call(N,L)},D.p="",D(D.s=0)}([function(oe,e,D){(function(N){var L;e=oe.exports=K,L=typeof N=="object"&&N.env&&N.env.NODE_DEBUG&&/\bsemver\b/i.test(N.env.NODE_DEBUG)?function(){var he=Array.prototype.slice.call(arguments,0);he.unshift("SEMVER"),console.log.apply(console,he)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var j=256,I=Number.MAX_SAFE_INTEGER||9007199254740991,P=e.re=[],R=e.src=[],m=0,C=m++;R[C]="0|[1-9]\\d*";var k=m++;R[k]="[0-9]+";var E=m++;R[E]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var l=m++;R[l]="("+R[C]+")\\.("+R[C]+")\\.("+R[C]+")";var g=m++;R[g]="("+R[k]+")\\.("+R[k]+")\\.("+R[k]+")";var p=m++;R[p]="(?:"+R[C]+"|"+R[E]+")";var w=m++;R[w]="(?:"+R[k]+"|"+R[E]+")";var h=m++;R[h]="(?:-("+R[p]+"(?:\\."+R[p]+")*))";var f=m++;R[f]="(?:-?("+R[w]+"(?:\\."+R[w]+")*))";var u=m++;R[u]="[0-9A-Za-z-]+";var c=m++;R[c]="(?:\\+("+R[u]+"(?:\\."+R[u]+")*))";var b=m++,i="v?"+R[l]+R[h]+"?"+R[c]+"?";R[b]="^"+i+"$";var r="[v=\\s]*"+R[g]+R[f]+"?"+R[c]+"?",n=m++;R[n]="^"+r+"$";var s=m++;R[s]="((?:<|>)?=?)";var t=m++;R[t]=R[k]+"|x|X|\\*";var o=m++;R[o]=R[C]+"|x|X|\\*";var a=m++;R[a]="[v=\\s]*("+R[o]+")(?:\\.("+R[o]+")(?:\\.("+R[o]+")(?:"+R[h]+")?"+R[c]+"?)?)?";var y=m++;R[y]="[v=\\s]*("+R[t]+")(?:\\.("+R[t]+")(?:\\.("+R[t]+")(?:"+R[f]+")?"+R[c]+"?)?)?";var $=m++;R[$]="^"+R[s]+"\\s*"+R[a]+"$";var d=m++;R[d]="^"+R[s]+"\\s*"+R[y]+"$";var v=m++;R[v]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var S=m++;R[S]="(?:~>?)";var A=m++;R[A]="(\\s*)"+R[S]+"\\s+",P[A]=new RegExp(R[A],"g");var T=m++;R[T]="^"+R[S]+R[a]+"$";var q=m++;R[q]="^"+R[S]+R[y]+"$";var M=m++;R[M]="(?:\\^)";var Y=m++;R[Y]="(\\s*)"+R[M]+"\\s+",P[Y]=new RegExp(R[Y],"g");var G=m++;R[G]="^"+R[M]+R[a]+"$";var Q=m++;R[Q]="^"+R[M]+R[y]+"$";var F=m++;R[F]="^"+R[s]+"\\s*("+r+")$|^$";var te=m++;R[te]="^"+R[s]+"\\s*("+i+")$|^$";var H=m++;R[H]="(\\s*)"+R[s]+"\\s*("+r+"|"+R[a]+")",P[H]=new RegExp(R[H],"g");var J=m++;R[J]="^\\s*("+R[a]+")\\s+-\\s+("+R[a]+")\\s*$";var x=m++;R[x]="^\\s*("+R[y]+")\\s+-\\s+("+R[y]+")\\s*$";var se=m++;R[se]="(<|>)?=?\\s*\\*";for(var V=0;V<35;V++)L(V,R[V]),P[V]||(P[V]=new RegExp(R[V]));function ne(he,$e){if(he instanceof K)return he;if(typeof he!="string"||he.length>j||!($e?P[n]:P[b]).test(he))return null;try{return new K(he,$e)}catch{return null}}function K(he,$e){if(he instanceof K){if(he.loose===$e)return he;he=he.version}else if(typeof he!="string")throw new TypeError("Invalid Version: "+he);if(he.length>j)throw new TypeError("version is longer than "+j+" characters");if(!(this instanceof K))return new K(he,$e);L("SemVer",he,$e),this.loose=$e;var we=he.trim().match($e?P[n]:P[b]);if(!we)throw new TypeError("Invalid Version: "+he);if(this.raw=he,this.major=+we[1],this.minor=+we[2],this.patch=+we[3],this.major>I||this.major<0)throw new TypeError("Invalid major version");if(this.minor>I||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>I||this.patch<0)throw new TypeError("Invalid patch version");we[4]?this.prerelease=we[4].split(".").map(function(ke){if(/^[0-9]+$/.test(ke)){var Pe=+ke;if(Pe>=0&&Pe<I)return Pe}return ke}):this.prerelease=[],this.build=we[5]?we[5].split("."):[],this.format()}e.parse=ne,e.valid=function(he,$e){var we=ne(he,$e);return we?we.version:null},e.clean=function(he,$e){var we=ne(he.trim().replace(/^[=v]+/,""),$e);return we?we.version:null},e.SemVer=K,K.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},K.prototype.toString=function(){return this.version},K.prototype.compare=function(he){return L("SemVer.compare",this.version,this.loose,he),he instanceof K||(he=new K(he,this.loose)),this.compareMain(he)||this.comparePre(he)},K.prototype.compareMain=function(he){return he instanceof K||(he=new K(he,this.loose)),U(this.major,he.major)||U(this.minor,he.minor)||U(this.patch,he.patch)},K.prototype.comparePre=function(he){if(he instanceof K||(he=new K(he,this.loose)),this.prerelease.length&&!he.prerelease.length)return-1;if(!this.prerelease.length&&he.prerelease.length)return 1;if(!this.prerelease.length&&!he.prerelease.length)return 0;var $e=0;do{var we=this.prerelease[$e],ke=he.prerelease[$e];if(L("prerelease compare",$e,we,ke),we===void 0&&ke===void 0)return 0;if(ke===void 0)return 1;if(we===void 0)return-1;if(we!==ke)return U(we,ke)}while(++$e)},K.prototype.inc=function(he,$e){switch(he){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",$e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",$e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",$e),this.inc("pre",$e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",$e),this.inc("pre",$e);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var we=this.prerelease.length;--we>=0;)typeof this.prerelease[we]=="number"&&(this.prerelease[we]++,we=-2);we===-1&&this.prerelease.push(0)}$e&&(this.prerelease[0]===$e?isNaN(this.prerelease[1])&&(this.prerelease=[$e,0]):this.prerelease=[$e,0]);break;default:throw new Error("invalid increment argument: "+he)}return this.format(),this.raw=this.version,this},e.inc=function(he,$e,we,ke){typeof we=="string"&&(ke=we,we=void 0);try{return new K(he,we).inc($e,ke).version}catch{return null}},e.diff=function(he,$e){if(_(he,$e))return null;var we=ne(he),ke=ne($e);if(we.prerelease.length||ke.prerelease.length){for(var Pe in we)if((Pe==="major"||Pe==="minor"||Pe==="patch")&&we[Pe]!==ke[Pe])return"pre"+Pe;return"prerelease"}for(var Pe in we)if((Pe==="major"||Pe==="minor"||Pe==="patch")&&we[Pe]!==ke[Pe])return Pe},e.compareIdentifiers=U;var z=/^[0-9]+$/;function U(he,$e){var we=z.test(he),ke=z.test($e);return we&&ke&&(he=+he,$e=+$e),we&&!ke?-1:ke&&!we?1:he<$e?-1:he>$e?1:0}function O(he,$e,we){return new K(he,we).compare(new K($e,we))}function W(he,$e,we){return O(he,$e,we)>0}function B(he,$e,we){return O(he,$e,we)<0}function _(he,$e,we){return O(he,$e,we)===0}function ee(he,$e,we){return O(he,$e,we)!==0}function X(he,$e,we){return O(he,$e,we)>=0}function ie(he,$e,we){return O(he,$e,we)<=0}function ce(he,$e,we,ke){var Pe;switch($e){case"===":typeof he=="object"&&(he=he.version),typeof we=="object"&&(we=we.version),Pe=he===we;break;case"!==":typeof he=="object"&&(he=he.version),typeof we=="object"&&(we=we.version),Pe=he!==we;break;case"":case"=":case"==":Pe=_(he,we,ke);break;case"!=":Pe=ee(he,we,ke);break;case">":Pe=W(he,we,ke);break;case">=":Pe=X(he,we,ke);break;case"<":Pe=B(he,we,ke);break;case"<=":Pe=ie(he,we,ke);break;default:throw new TypeError("Invalid operator: "+$e)}return Pe}function fe(he,$e){if(he instanceof fe){if(he.loose===$e)return he;he=he.value}if(!(this instanceof fe))return new fe(he,$e);L("comparator",he,$e),this.loose=$e,this.parse(he),this.semver===be?this.value="":this.value=this.operator+this.semver.version,L("comp",this)}e.rcompareIdentifiers=function(he,$e){return U($e,he)},e.major=function(he,$e){return new K(he,$e).major},e.minor=function(he,$e){return new K(he,$e).minor},e.patch=function(he,$e){return new K(he,$e).patch},e.compare=O,e.compareLoose=function(he,$e){return O(he,$e,!0)},e.rcompare=function(he,$e,we){return O($e,he,we)},e.sort=function(he,$e){return he.sort(function(we,ke){return e.compare(we,ke,$e)})},e.rsort=function(he,$e){return he.sort(function(we,ke){return e.rcompare(we,ke,$e)})},e.gt=W,e.lt=B,e.eq=_,e.neq=ee,e.gte=X,e.lte=ie,e.cmp=ce,e.Comparator=fe;var be={};function le(he,$e){if(he instanceof le)return he.loose===$e?he:new le(he.raw,$e);if(he instanceof fe)return new le(he.value,$e);if(!(this instanceof le))return new le(he,$e);if(this.loose=$e,this.raw=he,this.set=he.split(/\s*\|\|\s*/).map(function(we){return this.parseRange(we.trim())},this).filter(function(we){return we.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+he);this.format()}function re(he){return!he||he.toLowerCase()==="x"||he==="*"}function me(he,$e,we,ke,Pe,Le,Oe,qe,je,Ne,Me,ae,ge){return(($e=re(we)?"":re(ke)?">="+we+".0.0":re(Pe)?">="+we+"."+ke+".0":">="+$e)+" "+(qe=re(je)?"":re(Ne)?"<"+(+je+1)+".0.0":re(Me)?"<"+je+"."+(+Ne+1)+".0":ae?"<="+je+"."+Ne+"."+Me+"-"+ae:"<="+qe)).trim()}function ye(he,$e){for(var we=0;we<he.length;we++)if(!he[we].test($e))return!1;if($e.prerelease.length){for(we=0;we<he.length;we++)if(L(he[we].semver),he[we].semver!==be&&he[we].semver.prerelease.length>0){var ke=he[we].semver;if(ke.major===$e.major&&ke.minor===$e.minor&&ke.patch===$e.patch)return!0}return!1}return!0}function Re(he,$e,we){try{$e=new le($e,we)}catch{return!1}return $e.test(he)}function Ce(he,$e,we,ke){var Pe,Le,Oe,qe,je;switch(he=new K(he,ke),$e=new le($e,ke),we){case">":Pe=W,Le=ie,Oe=B,qe=">",je=">=";break;case"<":Pe=B,Le=X,Oe=W,qe="<",je="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Re(he,$e,ke))return!1;for(var Ne=0;Ne<$e.set.length;++Ne){var Me=$e.set[Ne],ae=null,ge=null;if(Me.forEach(function(pe){pe.semver===be&&(pe=new fe(">=0.0.0")),ae=ae||pe,ge=ge||pe,Pe(pe.semver,ae.semver,ke)?ae=pe:Oe(pe.semver,ge.semver,ke)&&(ge=pe)}),ae.operator===qe||ae.operator===je||(!ge.operator||ge.operator===qe)&&Le(he,ge.semver)||ge.operator===je&&Oe(he,ge.semver))return!1}return!0}fe.prototype.parse=function(he){var $e=this.loose?P[F]:P[te],we=he.match($e);if(!we)throw new TypeError("Invalid comparator: "+he);this.operator=we[1],this.operator==="="&&(this.operator=""),we[2]?this.semver=new K(we[2],this.loose):this.semver=be},fe.prototype.toString=function(){return this.value},fe.prototype.test=function(he){return L("Comparator.test",he,this.loose),this.semver===be||(typeof he=="string"&&(he=new K(he,this.loose)),ce(he,this.operator,this.semver,this.loose))},fe.prototype.intersects=function(he,$e){if(!(he instanceof fe))throw new TypeError("a Comparator is required");var we;if(this.operator==="")return we=new le(he.value,$e),Re(this.value,we,$e);if(he.operator==="")return we=new le(this.value,$e),Re(he.semver,we,$e);var ke=!(this.operator!==">="&&this.operator!==">"||he.operator!==">="&&he.operator!==">"),Pe=!(this.operator!=="<="&&this.operator!=="<"||he.operator!=="<="&&he.operator!=="<"),Le=this.semver.version===he.semver.version,Oe=!(this.operator!==">="&&this.operator!=="<="||he.operator!==">="&&he.operator!=="<="),qe=ce(this.semver,"<",he.semver,$e)&&(this.operator===">="||this.operator===">")&&(he.operator==="<="||he.operator==="<"),je=ce(this.semver,">",he.semver,$e)&&(this.operator==="<="||this.operator==="<")&&(he.operator===">="||he.operator===">");return ke||Pe||Le&&Oe||qe||je},e.Range=le,le.prototype.format=function(){return this.range=this.set.map(function(he){return he.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(he){var $e=this.loose;he=he.trim(),L("range",he,$e);var we=$e?P[x]:P[J];he=he.replace(we,me),L("hyphen replace",he),he=he.replace(P[H],"$1$2$3"),L("comparator trim",he,P[H]),he=(he=(he=he.replace(P[A],"$1~")).replace(P[Y],"$1^")).split(/\s+/).join(" ");var ke=$e?P[F]:P[te],Pe=he.split(" ").map(function(Le){return function(Oe,qe){return L("comp",Oe),Oe=function(je,Ne){return je.trim().split(/\s+/).map(function(Me){return function(ae,ge){L("caret",ae,ge);var pe=ge?P[Q]:P[G];return ae.replace(pe,function(ve,Ee,Ie,Ae,Te){var Fe;return L("caret",ae,ve,Ee,Ie,Ae,Te),re(Ee)?Fe="":re(Ie)?Fe=">="+Ee+".0.0 <"+(+Ee+1)+".0.0":re(Ae)?Fe=Ee==="0"?">="+Ee+"."+Ie+".0 <"+Ee+"."+(+Ie+1)+".0":">="+Ee+"."+Ie+".0 <"+(+Ee+1)+".0.0":Te?(L("replaceCaret pr",Te),Te.charAt(0)!=="-"&&(Te="-"+Te),Fe=Ee==="0"?Ie==="0"?">="+Ee+"."+Ie+"."+Ae+Te+" <"+Ee+"."+Ie+"."+(+Ae+1):">="+Ee+"."+Ie+"."+Ae+Te+" <"+Ee+"."+(+Ie+1)+".0":">="+Ee+"."+Ie+"."+Ae+Te+" <"+(+Ee+1)+".0.0"):(L("no pr"),Fe=Ee==="0"?Ie==="0"?">="+Ee+"."+Ie+"."+Ae+" <"+Ee+"."+Ie+"."+(+Ae+1):">="+Ee+"."+Ie+"."+Ae+" <"+Ee+"."+(+Ie+1)+".0":">="+Ee+"."+Ie+"."+Ae+" <"+(+Ee+1)+".0.0"),L("caret return",Fe),Fe})}(Me,Ne)}).join(" ")}(Oe,qe),L("caret",Oe),Oe=function(je,Ne){return je.trim().split(/\s+/).map(function(Me){return function(ae,ge){var pe=ge?P[q]:P[T];return ae.replace(pe,function(ve,Ee,Ie,Ae,Te){var Fe;return L("tilde",ae,ve,Ee,Ie,Ae,Te),re(Ee)?Fe="":re(Ie)?Fe=">="+Ee+".0.0 <"+(+Ee+1)+".0.0":re(Ae)?Fe=">="+Ee+"."+Ie+".0 <"+Ee+"."+(+Ie+1)+".0":Te?(L("replaceTilde pr",Te),Te.charAt(0)!=="-"&&(Te="-"+Te),Fe=">="+Ee+"."+Ie+"."+Ae+Te+" <"+Ee+"."+(+Ie+1)+".0"):Fe=">="+Ee+"."+Ie+"."+Ae+" <"+Ee+"."+(+Ie+1)+".0",L("tilde return",Fe),Fe})}(Me,Ne)}).join(" ")}(Oe,qe),L("tildes",Oe),Oe=function(je,Ne){return L("replaceXRanges",je,Ne),je.split(/\s+/).map(function(Me){return function(ae,ge){ae=ae.trim();var pe=ge?P[d]:P[$];return ae.replace(pe,function(ve,Ee,Ie,Ae,Te,Fe){L("xRange",ae,ve,Ee,Ie,Ae,Te,Fe);var Ve=re(Ie),Ue=Ve||re(Ae),We=Ue||re(Te);return Ee==="="&&We&&(Ee=""),Ve?ve=Ee===">"||Ee==="<"?"<0.0.0":"*":Ee&&We?(Ue&&(Ae=0),We&&(Te=0),Ee===">"?(Ee=">=",Ue?(Ie=+Ie+1,Ae=0,Te=0):We&&(Ae=+Ae+1,Te=0)):Ee==="<="&&(Ee="<",Ue?Ie=+Ie+1:Ae=+Ae+1),ve=Ee+Ie+"."+Ae+"."+Te):Ue?ve=">="+Ie+".0.0 <"+(+Ie+1)+".0.0":We&&(ve=">="+Ie+"."+Ae+".0 <"+Ie+"."+(+Ae+1)+".0"),L("xRange return",ve),ve})}(Me,Ne)}).join(" ")}(Oe,qe),L("xrange",Oe),Oe=function(je,Ne){return L("replaceStars",je,Ne),je.trim().replace(P[se],"")}(Oe,qe),L("stars",Oe),Oe}(Le,$e)}).join(" ").split(/\s+/);return this.loose&&(Pe=Pe.filter(function(Le){return!!Le.match(ke)})),Pe=Pe.map(function(Le){return new fe(Le,$e)})},le.prototype.intersects=function(he,$e){if(!(he instanceof le))throw new TypeError("a Range is required");return this.set.some(function(we){return we.every(function(ke){return he.set.some(function(Pe){return Pe.every(function(Le){return ke.intersects(Le,$e)})})})})},e.toComparators=function(he,$e){return new le(he,$e).set.map(function(we){return we.map(function(ke){return ke.value}).join(" ").trim().split(" ")})},le.prototype.test=function(he){if(!he)return!1;typeof he=="string"&&(he=new K(he,this.loose));for(var $e=0;$e<this.set.length;$e++)if(ye(this.set[$e],he))return!0;return!1},e.satisfies=Re,e.maxSatisfying=function(he,$e,we){var ke=null,Pe=null;try{var Le=new le($e,we)}catch{return null}return he.forEach(function(Oe){Le.test(Oe)&&(ke&&Pe.compare(Oe)!==-1||(Pe=new K(ke=Oe,we)))}),ke},e.minSatisfying=function(he,$e,we){var ke=null,Pe=null;try{var Le=new le($e,we)}catch{return null}return he.forEach(function(Oe){Le.test(Oe)&&(ke&&Pe.compare(Oe)!==1||(Pe=new K(ke=Oe,we)))}),ke},e.validRange=function(he,$e){try{return new le(he,$e).range||"*"}catch{return null}},e.ltr=function(he,$e,we){return Ce(he,$e,"<",we)},e.gtr=function(he,$e,we){return Ce(he,$e,">",we)},e.outside=Ce,e.prerelease=function(he,$e){var we=ne(he,$e);return we&&we.prerelease.length?we.prerelease:null},e.intersects=function(he,$e,we){return he=new le(he,we),$e=new le($e,we),he.intersects($e)},e.coerce=function(he){if(he instanceof K)return he;if(typeof he!="string")return null;var $e=he.match(P[v]);return $e==null?null:ne(($e[1]||"0")+"."+($e[2]||"0")+"."+($e[3]||"0"))}}).call(this,D(1))},function(oe,e){var D,N,L=oe.exports={};function j(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}function P(w){if(D===setTimeout)return setTimeout(w,0);if((D===j||!D)&&setTimeout)return D=setTimeout,setTimeout(w,0);try{return D(w,0)}catch{try{return D.call(null,w,0)}catch{return D.call(this,w,0)}}}(function(){try{D=typeof setTimeout=="function"?setTimeout:j}catch{D=j}try{N=typeof clearTimeout=="function"?clearTimeout:I}catch{N=I}})();var R,m=[],C=!1,k=-1;function E(){C&&R&&(C=!1,R.length?m=R.concat(m):k=-1,m.length&&l())}function l(){if(!C){var w=P(E);C=!0;for(var h=m.length;h;){for(R=m,m=[];++k<h;)R&&R[k].run();k=-1,h=m.length}R=null,C=!1,function(f){if(N===clearTimeout)return clearTimeout(f);if((N===I||!N)&&clearTimeout)return N=clearTimeout,clearTimeout(f);try{N(f)}catch{try{return N.call(null,f)}catch{return N.call(this,f)}}}(w)}}function g(w,h){this.fun=w,this.array=h}function p(){}L.nextTick=function(w){var h=new Array(arguments.length-1);if(arguments.length>1)for(var f=1;f<arguments.length;f++)h[f-1]=arguments[f];m.push(new g(w,h)),m.length!==1||C||P(l)},g.prototype.run=function(){this.fun.apply(null,this.array)},L.title="browser",L.browser=!0,L.env={},L.argv=[],L.version="",L.versions={},L.on=p,L.addListener=p,L.once=p,L.off=p,L.removeListener=p,L.removeAllListeners=p,L.emit=p,L.prependListener=p,L.prependOnceListener=p,L.listeners=function(w){return[]},L.binding=function(w){throw new Error("process.binding is not supported")},L.cwd=function(){return"/"},L.chdir=function(w){throw new Error("process.chdir is not supported")},L.umask=function(){return 0}}])}),define(ue[128],de([0,1]),function(oe,e){"use strict";var D;Object.defineProperty(e,"__esModule",{value:!0}),e.$ks=void 0;class N{constructor(P,R,m){this.level=P,this.key=R,this.value=m,this.forward=[]}}const L=void 0;class j{constructor(P,R=2**16){this.comparator=P,this[D]="SkipList",this.d=0,this.f=0,this.c=Math.max(1,Math.log2(R)|0),this.e=new N(this.c,L,L)}get size(){return this.f}clear(){this.e=new N(this.c,L,L),this.f=0}has(P){return!!j.g(this,P,this.comparator)}get(P){return j.g(this,P,this.comparator)?.value}set(P,R){return j.h(this,P,R,this.comparator)&&(this.f+=1),this}delete(P){const R=j.k(this,P,this.comparator);return R&&(this.f-=1),R}forEach(P,R){let m=this.e.forward[0];for(;m;)P.call(R,m.value,m.key,this),m=m.forward[0]}[(D=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}*entries(){let P=this.e.forward[0];for(;P;)yield[P.key,P.value],P=P.forward[0]}*keys(){let P=this.e.forward[0];for(;P;)yield P.key,P=P.forward[0]}*values(){let P=this.e.forward[0];for(;P;)yield P.value,P=P.forward[0]}toString(){let P="[SkipList]:",R=this.e.forward[0];for(;R;)P+=`node(${R.key}, ${R.value}, lvl:${R.level})`,R=R.forward[0];return P}static g(P,R,m){let C=P.e;for(let k=P.d-1;k>=0;k--)for(;C.forward[k]&&m(C.forward[k].key,R)<0;)C=C.forward[k];if(C=C.forward[0],C&&m(C.key,R)===0)return C}static h(P,R,m,C){const k=[];let E=P.e;for(let l=P.d-1;l>=0;l--){for(;E.forward[l]&&C(E.forward[l].key,R)<0;)E=E.forward[l];k[l]=E}if(E=E.forward[0],E&&C(E.key,R)===0)return E.value=m,!1;{const l=j.j(P);if(l>P.d){for(let g=P.d;g<l;g++)k[g]=P.e;P.d=l}E=new N(l,R,m);for(let g=0;g<l;g++)E.forward[g]=k[g].forward[g],k[g].forward[g]=E;return!0}}static j(P,R=.5){let m=1;for(;Math.random()<R&&m<P.c;)m+=1;return m}static k(P,R,m){const C=[];let k=P.e;for(let E=P.d-1;E>=0;E--){for(;k.forward[E]&&m(k.forward[E].key,R)<0;)k=k.forward[E];C[E]=k}if(k=k.forward[0],!k||m(k.key,R)!==0)return!1;for(let E=0;E<P.d&&C[E].forward[E]===k;E++)C[E].forward[E]=k.forward[E];for(;P.d>0&&P.e.forward[P.d-1]===L;)P.d-=1;return!0}}e.$ks=j}),define(ue[65],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Sd=void 0;const D=globalThis.performance&&typeof globalThis.performance.now=="function";class N{static create(j){return new N(j)}constructor(j){this.c=D&&j===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}}e.$Sd=N}),define(ue[3],de([0,1,7,87,2,88,65]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6d=e.$5d=e.$4d=e.$3d=e.$2d=e.$1d=e.$Zd=e.$Yd=e.$Xd=e.$Wd=e.$Vd=e.$Ud=e.Event=void 0;const P=!1,R=!1;var m;(function($){$.None=()=>L.$Tc.None;function d(ie){if(R){const{onDidAddListener:ce}=ie,fe=g.create();let be=0;ie.onDidAddListener=()=>{++be===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),fe.print()),ce?.()}}}function v(ie,ce){return te(ie,()=>{},0,void 0,!0,void 0,ce)}$.defer=v;function S(ie){return(ce,fe=null,be)=>{let le=!1,re;return re=ie(me=>{if(!le)return re?re.dispose():le=!0,ce.call(fe,me)},null,be),le&&re.dispose(),re}}$.once=S;function A(ie,ce,fe){return Q((be,le=null,re)=>ie(me=>be.call(le,ce(me)),null,re),fe)}$.map=A;function T(ie,ce,fe){return Q((be,le=null,re)=>ie(me=>{ce(me),be.call(le,me)},null,re),fe)}$.forEach=T;function q(ie,ce,fe){return Q((be,le=null,re)=>ie(me=>ce(me)&&be.call(le,me),null,re),fe)}$.filter=q;function M(ie){return ie}$.signal=M;function Y(...ie){return(ce,fe=null,be)=>{const le=(0,L.$Qc)(...ie.map(re=>re(me=>ce.call(fe,me))));return F(le,be)}}$.any=Y;function G(ie,ce,fe,be){let le=fe;return A(ie,re=>(le=ce(le,re),le),be)}$.reduce=G;function Q(ie,ce){let fe;const be={onWillAddFirstListener(){fe=ie(le.fire,le)},onDidRemoveLastListener(){fe?.dispose()}};ce||d(be);const le=new u(be);return ce?.add(le),le.event}function F(ie,ce){return ce instanceof Array?ce.push(ie):ce&&ce.add(ie),ie}function te(ie,ce,fe=100,be=!1,le=!1,re,me){let ye,Re,Ce,he=0,$e;const we={leakWarningThreshold:re,onWillAddFirstListener(){ye=ie(Pe=>{he++,Re=ce(Re,Pe),be&&!Ce&&(ke.fire(Re),Re=void 0),$e=()=>{const Le=Re;Re=void 0,Ce=void 0,(!be||he>1)&&ke.fire(Le),he=0},typeof fe=="number"?(clearTimeout(Ce),Ce=setTimeout($e,fe)):Ce===void 0&&(Ce=0,queueMicrotask($e))})},onWillRemoveListener(){le&&he>0&&$e?.()},onDidRemoveLastListener(){$e=void 0,ye.dispose()}};me||d(we);const ke=new u(we);return me?.add(ke),ke.event}$.debounce=te;function H(ie,ce=0,fe){return $.debounce(ie,(be,le)=>be?(be.push(le),be):[le],ce,void 0,!0,void 0,fe)}$.accumulate=H;function J(ie,ce=(be,le)=>be===le,fe){let be=!0,le;return q(ie,re=>{const me=be||!ce(re,le);return be=!1,le=re,me},fe)}$.latch=J;function x(ie,ce,fe){return[$.filter(ie,ce,fe),$.filter(ie,be=>!ce(be),fe)]}$.split=x;function se(ie,ce=!1,fe=[],be){let le=fe.slice(),re=ie(Re=>{le?le.push(Re):ye.fire(Re)});be&&be.add(re);const me=()=>{le?.forEach(Re=>ye.fire(Re)),le=null},ye=new u({onWillAddFirstListener(){re||(re=ie(Re=>ye.fire(Re)),be&&be.add(re))},onDidAddFirstListener(){le&&(ce?setTimeout(me):me())},onDidRemoveLastListener(){re&&re.dispose(),re=null}});return be&&be.add(ye),ye.event}$.buffer=se;function V(ie,ce){return(be,le,re)=>{const me=ce(new K);return ie(function(ye){const Re=me.evaluate(ye);Re!==ne&&be.call(le,Re)},void 0,re)}}$.chain=V;const ne=Symbol("HaltChainable");class K{constructor(){this.f=[]}map(ce){return this.f.push(ce),this}forEach(ce){return this.f.push(fe=>(ce(fe),fe)),this}filter(ce){return this.f.push(fe=>ce(fe)?fe:ne),this}reduce(ce,fe){let be=fe;return this.f.push(le=>(be=ce(be,le),be)),this}latch(ce=(fe,be)=>fe===be){let fe=!0,be;return this.f.push(le=>{const re=fe||!ce(le,be);return fe=!1,be=le,re?le:ne}),this}evaluate(ce){for(const fe of this.f)if(ce=fe(ce),ce===ne)break;return ce}}function z(ie,ce,fe=be=>be){const be=(...ye)=>me.fire(fe(...ye)),le=()=>ie.on(ce,be),re=()=>ie.removeListener(ce,be),me=new u({onWillAddFirstListener:le,onDidRemoveLastListener:re});return me.event}$.fromNodeEventEmitter=z;function U(ie,ce,fe=be=>be){const be=(...ye)=>me.fire(fe(...ye)),le=()=>ie.addEventListener(ce,be),re=()=>ie.removeEventListener(ce,be),me=new u({onWillAddFirstListener:le,onDidRemoveLastListener:re});return me.event}$.fromDOMEventEmitter=U;function O(ie){return new Promise(ce=>S(ie)(ce))}$.toPromise=O;function W(ie){const ce=new u;return ie.then(fe=>{ce.fire(fe)},()=>{ce.fire(void 0)}).finally(()=>{ce.dispose()}),ce.event}$.fromPromise=W;function B(ie,ce,fe){return ce(fe),ie(be=>ce(be))}$.runAndSubscribe=B;class _{constructor(ce,fe){this._observable=ce,this.f=0,this.g=!1;const be={onWillAddFirstListener:()=>{ce.addObserver(this)},onDidRemoveLastListener:()=>{ce.removeObserver(this)}};fe||d(be),this.emitter=new u(be),fe&&fe.add(this.emitter)}beginUpdate(ce){this.f++}handlePossibleChange(ce){}handleChange(ce,fe){this.g=!0}endUpdate(ce){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function ee(ie,ce){return new _(ie,ce).emitter.event}$.fromObservable=ee;function X(ie){return(ce,fe,be)=>{let le=0,re=!1;const me={beginUpdate(){le++},endUpdate(){le--,le===0&&(ie.reportChanges(),re&&(re=!1,ce.call(fe)))},handlePossibleChange(){},handleChange(){re=!0}};ie.addObserver(me),ie.reportChanges();const ye={dispose(){ie.removeObserver(me)}};return be instanceof L.$Sc?be.add(ye):Array.isArray(be)&&be.push(ye),ye}}$.fromObservableLight=X})(m||(e.Event=m={}));class C{static{this.all=new Set}static{this.f=0}constructor(d){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${d}_${C.f++}`,C.all.add(this)}start(d){this.g=new I.$Sd,this.listenerCount=d}stop(){if(this.g){const d=this.g.elapsed();this.durations.push(d),this.elapsedOverall+=d,this.invocationCount+=1,this.g=void 0}}}e.$Ud=C;let k=-1;function E($){const d=k;return k=$,{dispose(){k=d}}}e.$Vd=E;class l{constructor(d,v=Math.random().toString(18).slice(2,5)){this.threshold=d,this.name=v,this.g=0}dispose(){this.f?.clear()}check(d,v){const S=this.threshold;if(S<=0||v<S)return;this.f||(this.f=new Map);const A=this.f.get(d.value)||0;if(this.f.set(d.value,A+1),this.g-=1,this.g<=0){this.g=S*.5;let T,q=0;for(const[M,Y]of this.f)(!T||q<Y)&&(T=M,q=Y);console.warn(`[${this.name}] potential listener LEAK detected, having ${v} listeners already. MOST frequent listener (${q}):`),console.warn(T)}return()=>{const T=this.f.get(d.value)||0;this.f.set(d.value,T-1)}}}class g{static create(){return new g(new Error().stack??"")}constructor(d){this.value=d}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}let p=0;class w{constructor(d){this.value=d,this.id=p++}}const h=2,f=($,d)=>{if($ instanceof w)d($);else for(let v=0;v<$.length;v++){const S=$[v];S&&d(S)}};class u{constructor(d){this.w=0,this.f=d,this.g=k>0||this.f?.leakWarningThreshold?new l(this.f?.leakWarningThreshold??k):void 0,this.j=this.f?._profName?new C(this.f._profName):void 0,this.u=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.u?.current===this&&this.u.reset(),this.t){if(P){const d=this.t;queueMicrotask(()=>{f(d,v=>v.stack?.print())})}this.t=void 0,this.w=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(d,v,S)=>{if(this.g&&this.w>this.g.threshold*3)return console.warn(`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),L.$Tc.None;if(this.m)return L.$Tc.None;v&&(d=d.bind(v));const A=new w(d);let T,q;this.g&&this.w>=Math.ceil(this.g.threshold*.2)&&(A.stack=g.create(),T=this.g.check(A.stack,this.w+1)),P&&(A.stack=q??g.create()),this.t?this.t instanceof w?(this.u??=new b,this.t=[this.t,A]):this.t.push(A):(this.f?.onWillAddFirstListener?.(this),this.t=A,this.f?.onDidAddFirstListener?.(this)),this.w++;const M=(0,L.$Rc)(()=>{T?.(),this.x(A)});return S instanceof L.$Sc?S.add(M):Array.isArray(S)&&S.push(M),M},this.q}x(d){if(this.f?.onWillRemoveListener?.(this),!this.t)return;if(this.w===1){this.t=void 0,this.f?.onDidRemoveLastListener?.(this),this.w=0;return}const v=this.t,S=v.indexOf(d);if(S===-1)throw console.log("disposed?",this.m),console.log("size?",this.w),console.log("arr?",JSON.stringify(this.t)),new Error("Attempted to dispose unknown listener");this.w--,v[S]=void 0;const A=this.u.current===this;if(this.w*h<=v.length){let T=0;for(let q=0;q<v.length;q++)v[q]?v[T++]=v[q]:A&&(this.u.end--,T<this.u.i&&this.u.i--);v.length=T}}y(d,v){if(!d)return;const S=this.f?.onListenerError||D.$1;if(!S){d.value(v);return}try{d.value(v)}catch(A){S(A)}}z(d){const v=d.current.t;for(;d.i<d.end;)this.y(v[d.i++],d.value);d.reset()}fire(d){if(this.u?.current&&(this.z(this.u),this.j?.stop()),this.j?.start(this.w),this.t)if(this.t instanceof w)this.y(this.t,d);else{const v=this.u;v.enqueue(this,d,this.t.length),this.z(v)}this.j?.stop()}hasListeners(){return this.w>0}}e.$Wd=u;const c=()=>new b;e.$Xd=c;class b{constructor(){this.i=-1,this.end=0}enqueue(d,v,S){this.i=0,this.end=S,this.current=d,this.value=v}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class i extends u{async fireAsync(d,v,S){if(this.t)for(this.h||(this.h=new j.$4c),f(this.t,A=>this.h.push([A.value,d]));this.h.size>0&&!v.isCancellationRequested;){const[A,T]=this.h.shift(),q=[],M={...T,token:v,waitUntil:Y=>{if(Object.isFrozen(q))throw new Error("waitUntil can NOT be called asynchronous");S&&(Y=S(Y,A)),q.push(Y)}};try{A(M)}catch(Y){(0,D.$1)(Y);continue}Object.freeze(q),await Promise.allSettled(q).then(Y=>{for(const G of Y)G.status==="rejected"&&(0,D.$1)(G.reason)})}}}e.$Yd=i;class r extends u{get isPaused(){return this.h!==0}constructor(d){super(d),this.h=0,this.s=new j.$4c,this.A=d?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.A){if(this.s.size>0){const d=Array.from(this.s);this.s.clear(),super.fire(this.A(d))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(d){this.w&&(this.h!==0?this.s.push(d):super.fire(d))}}e.$Zd=r;class n extends r{constructor(d){super(d),this.k=d.delay??100}fire(d){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(d)}}e.$1d=n;class s extends u{constructor(d){super(d),this.h=[],this.k=d?.merge}fire(d){this.hasListeners()&&(this.h.push(d),this.h.length===1&&queueMicrotask(()=>{this.k?super.fire(this.k(this.h)):this.h.forEach(v=>super.fire(v)),this.h=[]}))}}e.$2d=s;class t{constructor(){this.g=!1,this.h=[],this.f=new u({onWillAddFirstListener:()=>this.j(),onDidRemoveLastListener:()=>this.k()})}get event(){return this.f.event}add(d){const v={event:d,listener:null};this.h.push(v),this.g&&this.m(v);const S=()=>{this.g&&this.o(v);const A=this.h.indexOf(v);this.h.splice(A,1)};return(0,L.$Rc)((0,N.$db)(S))}j(){this.g=!0,this.h.forEach(d=>this.m(d))}k(){this.g=!1,this.h.forEach(d=>this.o(d))}m(d){d.listener=d.event(v=>this.f.fire(v))}o(d){d.listener&&d.listener.dispose(),d.listener=null}dispose(){this.f.dispose()}}e.$3d=t;class o{constructor(d,v,S,A){this.f=new L.$Sc;const T=this.f.add(new t),q=this.f.add(new L.$3c);function M(Y){q.set(Y,T.add(A(Y)))}for(const Y of d)M(Y);this.f.add(v(Y=>{M(Y)})),this.f.add(S(Y=>{q.deleteAndDispose(Y)})),this.event=T.event}dispose(){this.f.dispose()}}e.$4d=o;class a{constructor(){this.f=[]}wrapEvent(d){return(v,S,A)=>d(T=>{const q=this.f[this.f.length-1];q?q.push(()=>v.call(S,T)):v.call(S,T)},void 0,A)}bufferEvents(d){const v=[];this.f.push(v);const S=d();return this.f.pop(),v.forEach(A=>A()),S}}e.$5d=a;class y{constructor(){this.f=!1,this.g=m.None,this.h=L.$Tc.None,this.j=new u({onDidAddFirstListener:()=>{this.f=!0,this.h=this.g(this.j.fire,this.j)},onDidRemoveLastListener:()=>{this.f=!1,this.h.dispose()}}),this.event=this.j.event}set input(d){this.g=d,this.f&&(this.h.dispose(),this.h=d(this.j.fire,this.j))}dispose(){this.h.dispose(),this.j.dispose()}}e.$6d=y}),define(ue[26],de([0,1,3]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$7d=e.CancellationToken=void 0;const N=Object.freeze(function(P,R){const m=setTimeout(P.bind(R),0);return{dispose(){clearTimeout(m)}}});var L;(function(P){function R(m){return m===P.None||m===P.Cancelled||m instanceof j?!0:!m||typeof m!="object"?!1:typeof m.isCancellationRequested=="boolean"&&typeof m.onCancellationRequested=="function"}P.isCancellationToken=R,P.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:D.Event.None}),P.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:N})})(L||(e.CancellationToken=L={}));class j{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?N:(this.b||(this.b=new D.$Wd),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}}class I{constructor(R){this.f=void 0,this.g=void 0,this.g=R&&R.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new j),this.f}cancel(){this.f?this.f instanceof j&&this.f.cancel():this.f=L.Cancelled}dispose(R=!1){R&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof j&&this.f.dispose():this.f=L.None}}e.$7d=I}),define(ue[129],de([0,1,26]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ie=e.$He=e.$Ge=void 0;class N{constructor(P){this.b=P,this.a=null}get(){if(this.a)return this.a;const P=new D.$7d,R=this.b(P.token);return this.a={promise:R,dispose:()=>{this.a=null,P.cancel(),P.dispose()}},this.a}}e.$Ge=N;class L{constructor(P){this.c=P,this.a=void 0,this.b=void 0}get(P){const R=JSON.stringify(P);return this.b!==R&&(this.b=R,this.a=this.c(P)),this.a}}e.$He=L;class j{get cachedValues(){return this.a}constructor(P){this.b=P,this.a=new Map}get(P){if(this.a.has(P))return this.a.get(P);const R=this.b(P);return this.a.set(P,R),R}}e.$Ie=j}),define(ue[46],de([0,1,7,2]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$je=e.$ie=e.$he=e.$ge=e.$fe=e.$ee=e.$de=e.$ce=e.$be=e.$ae=e.$_d=e.$$d=e.$0d=e.$9d=e.$8d=void 0;function L(c){const b=c;return b?typeof b.read=="function":!1}e.$8d=L;function j(c){const b=c;return b?[b.on,b.pause,b.resume,b.destroy].every(i=>typeof i=="function"):!1}e.$9d=j;function I(c){const b=c;return b?j(b.stream)&&Array.isArray(b.buffer)&&typeof b.ended=="boolean":!1}e.$0d=I;function P(c,b){return new R(c,b)}e.$$d=P;class R{constructor(b,i){this.e=b,this.f=i,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(b){if(!this.a.destroyed){if(this.a.flowing)this.g(b);else if(this.b.data.push(b),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(i=>this.d.push(i))}}error(b){this.a.destroyed||(this.a.flowing?this.h(b):this.b.error.push(b))}end(b){this.a.destroyed||(typeof b<"u"&&this.write(b),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(b){this.c.data.slice(0).forEach(i=>i(b))}h(b){this.c.error.length===0?(0,D.$1)(b):this.c.error.slice(0).forEach(i=>i(b))}i(){this.c.end.slice(0).forEach(b=>b())}on(b,i){if(!this.a.destroyed)switch(b){case"data":this.c.data.push(i),this.resume();break;case"end":this.c.end.push(i),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(i),this.a.flowing&&this.k();break}}removeListener(b,i){if(this.a.destroyed)return;let r;switch(b){case"data":r=this.c.data;break;case"end":r=this.c.end;break;case"error":r=this.c.error;break}if(r){const n=r.indexOf(i);n>=0&&r.splice(n,1)}}j(){if(this.b.data.length>0){const b=this.e(this.b.data);this.g(b),this.b.data.length=0;const i=[...this.d];this.d.length=0,i.forEach(r=>r())}}k(){if(this.c.error.length>0){for(const b of this.b.error)this.h(b);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function m(c,b){const i=[];let r;for(;(r=c.read())!==null;)i.push(r);return b(i)}e.$_d=m;function C(c,b,i){const r=[];let n;for(;(n=c.read())!==null&&r.length<i;)r.push(n);return n===null&&r.length>0?b(r):{read:()=>{if(r.length>0)return r.shift();if(typeof n<"u"){const s=n;return n=void 0,s}return c.read()}}}e.$ae=C;function k(c,b){return new Promise((i,r)=>{const n=[];E(c,{onData:s=>{b&&n.push(s)},onError:s=>{b?r(s):i(void 0)},onEnd:()=>{i(b?b(n):void 0)}})})}e.$be=k;function E(c,b,i){c.on("error",r=>{i?.isCancellationRequested||b.onError(r)}),c.on("end",()=>{i?.isCancellationRequested||b.onEnd()}),c.on("data",r=>{i?.isCancellationRequested||b.onData(r)})}e.$ce=E;function l(c,b){return new Promise((i,r)=>{const n=new N.$Sc,s=[],t=y=>{if(s.push(y),s.length>b)return n.dispose(),c.pause(),i({stream:c,buffer:s,ended:!1})},o=y=>(n.dispose(),r(y)),a=()=>(n.dispose(),i({stream:c,buffer:s,ended:!0}));n.add((0,N.$Rc)(()=>c.removeListener("error",o))),c.on("error",o),n.add((0,N.$Rc)(()=>c.removeListener("end",a))),c.on("end",a),n.add((0,N.$Rc)(()=>c.removeListener("data",t))),c.on("data",t)})}e.$de=l;function g(c,b){const i=P(b);return i.end(c),i}e.$ee=g;function p(){const c=P(()=>{throw new Error("not supported")});return c.end(),c}e.$fe=p;function w(c){let b=!1;return{read:()=>b?null:(b=!0,c)}}e.$ge=w;function h(c,b,i){const r=P(i);return E(c,{onData:n=>r.write(b.data(n)),onError:n=>r.error(b.error?b.error(n):n),onEnd:()=>r.end()}),r}e.$he=h;function f(c,b,i){let r=!1;return{read:()=>{const n=b.read();return r?n:(r=!0,n!==null?i([c,n]):c)}}}e.$ie=f;function u(c,b,i){let r=!1;const n=P(i);return E(b,{onData:s=>r?n.write(s):(r=!0,n.write(i([c,s]))),onError:s=>n.error(s),onEnd:()=>{r||(r=!0,n.write(c)),n.end()}}),n}e.$je=u}),define(ue[14],de([0,1,53,46]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fe=e.$Ee=e.$De=e.$Ce=e.$Be=e.$Ae=e.$ze=e.$ye=e.$xe=e.$we=e.$ve=e.$ue=e.$te=e.$se=e.$re=e.$qe=e.$pe=e.$oe=e.$ne=e.$me=e.$le=e.$ke=void 0;const L=typeof Buffer<"u",j=new D.$V(()=>new Uint8Array(256));let I,P;class R{static alloc(S){return L?new R(Buffer.allocUnsafe(S)):new R(new Uint8Array(S))}static wrap(S){return L&&!Buffer.isBuffer(S)&&(S=Buffer.from(S.buffer,S.byteOffset,S.byteLength)),new R(S)}static fromString(S,A){return!(A?.dontUseNodeBuffer||!1)&&L?new R(Buffer.from(S)):(I||(I=new TextEncoder),new R(I.encode(S)))}static fromByteArray(S){const A=R.alloc(S.length);for(let T=0,q=S.length;T<q;T++)A.buffer[T]=S[T];return A}static concat(S,A){if(typeof A>"u"){A=0;for(let M=0,Y=S.length;M<Y;M++)A+=S[M].byteLength}const T=R.alloc(A);let q=0;for(let M=0,Y=S.length;M<Y;M++){const G=S[M];T.set(G,q),q+=G.byteLength}return T}constructor(S){this.buffer=S,this.byteLength=this.buffer.byteLength}clone(){const S=R.alloc(this.byteLength);return S.set(this),S}toString(){return L?this.buffer.toString():(P||(P=new TextDecoder),P.decode(this.buffer))}slice(S,A){return new R(this.buffer.subarray(S,A))}set(S,A){if(S instanceof R)this.buffer.set(S.buffer,A);else if(S instanceof Uint8Array)this.buffer.set(S,A);else if(S instanceof ArrayBuffer)this.buffer.set(new Uint8Array(S),A);else if(ArrayBuffer.isView(S))this.buffer.set(new Uint8Array(S.buffer,S.byteOffset,S.byteLength),A);else throw new Error("Unknown argument 'array'")}readUInt32BE(S){return E(this.buffer,S)}writeUInt32BE(S,A){l(this.buffer,S,A)}readUInt32LE(S){return g(this.buffer,S)}writeUInt32LE(S,A){p(this.buffer,S,A)}readUInt8(S){return w(this.buffer,S)}writeUInt8(S,A){h(this.buffer,S,A)}indexOf(S,A=0){return m(this.buffer,S instanceof R?S.buffer:S,A)}}e.$ke=R;function m(v,S,A=0){const T=S.byteLength,q=v.byteLength;if(T===0)return 0;if(T===1)return v.indexOf(S[0]);if(T>q-A)return-1;const M=j.value;M.fill(S.length);for(let F=0;F<S.length;F++)M[S[F]]=S.length-F-1;let Y=A+S.length-1,G=Y,Q=-1;for(;Y<q;)if(v[Y]===S[G]){if(G===0){Q=Y;break}Y--,G--}else Y+=Math.max(S.length-G,M[v[Y]]),G=S.length-1;return Q}e.$le=m;function C(v,S){return v[S+0]<<0>>>0|v[S+1]<<8>>>0}e.$me=C;function k(v,S,A){v[A+0]=S&255,S=S>>>8,v[A+1]=S&255}e.$ne=k;function E(v,S){return v[S]*2**24+v[S+1]*2**16+v[S+2]*2**8+v[S+3]}e.$oe=E;function l(v,S,A){v[A+3]=S,S=S>>>8,v[A+2]=S,S=S>>>8,v[A+1]=S,S=S>>>8,v[A]=S}e.$pe=l;function g(v,S){return v[S+0]<<0>>>0|v[S+1]<<8>>>0|v[S+2]<<16>>>0|v[S+3]<<24>>>0}e.$qe=g;function p(v,S,A){v[A+0]=S&255,S=S>>>8,v[A+1]=S&255,S=S>>>8,v[A+2]=S&255,S=S>>>8,v[A+3]=S&255}e.$re=p;function w(v,S){return v[S]}e.$se=w;function h(v,S,A){v[A]=S}e.$te=h;function f(v){return N.$_d(v,S=>R.concat(S))}e.$ue=f;function u(v){return N.$ge(v)}e.$ve=u;function c(v){return N.$be(v,S=>R.concat(S))}e.$we=c;async function b(v){return v.ended?R.concat(v.buffer):R.concat([...v.buffer,await c(v.stream)])}e.$xe=b;function i(v){return N.$ee(v,S=>R.concat(S))}e.$ye=i;function r(v){return N.$he(v,{data:S=>typeof S=="string"?R.fromString(S):R.wrap(S)},S=>R.concat(S))}e.$ze=r;function n(v){return N.$$d(S=>R.concat(S),v)}e.$Ae=n;function s(v,S){return N.$ie(v,S,A=>R.concat(A))}e.$Be=s;function t(v,S){return N.$je(v,S,A=>R.concat(A))}e.$Ce=t;function o(v){let S=0,A=0,T=0;const q=new Uint8Array(Math.floor(v.length/4*3)),M=G=>{switch(A){case 3:q[T++]=S|G,A=0;break;case 2:q[T++]=S|G>>>2,S=G<<6,A=3;break;case 1:q[T++]=S|G>>>4,S=G<<4,A=2;break;default:S=G<<2,A=1}};for(let G=0;G<v.length;G++){const Q=v.charCodeAt(G);if(Q>=65&&Q<=90)M(Q-65);else if(Q>=97&&Q<=122)M(Q-97+26);else if(Q>=48&&Q<=57)M(Q-48+52);else if(Q===43||Q===45)M(62);else if(Q===47||Q===95)M(63);else{if(Q===61)break;throw new SyntaxError(`Unexpected base64 character ${v[G]}`)}}const Y=T;for(;A>0;)M(0);return R.wrap(q).slice(0,Y)}e.$De=o;function a(v){const S=v.split(".")[1],A=o(S);return JSON.parse(A.toString())}e.$Ee=a;const y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function d({buffer:v},S=!0,A=!1){const T=A?$:y;let q="";const M=v.byteLength%3;let Y=0;for(;Y<v.byteLength-M;Y+=3){const G=v[Y+0],Q=v[Y+1],F=v[Y+2];q+=T[G>>>2],q+=T[(G<<4|Q>>>4)&63],q+=T[(Q<<2|F>>>6)&63],q+=T[F&63]}if(M===1){const G=v[Y+0];q+=T[G>>>2],q+=T[G<<4&63],S&&(q+="==")}else if(M===2){const G=v[Y+0],Q=v[Y+1];q+=T[G>>>2],q+=T[(G<<4|Q>>>4)&63],q+=T[Q<<2&63],S&&(q+="=")}return q}e.$Fe=d}),define(ue[27],de([0,1,129,53]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Jf=e.$If=e.$Hf=e.$Gf=e.GraphemeBreakType=e.$Ff=e.$Ef=e.$Df=e.$Cf=e.$Bf=e.$Af=e.$zf=e.$yf=e.$xf=e.$wf=e.$vf=e.$uf=e.$tf=e.$sf=e.$rf=e.$qf=e.$pf=e.$of=e.$nf=e.$mf=e.$lf=e.$kf=e.$jf=e.$if=e.$hf=e.$gf=e.$ff=e.$ef=e.$df=e.$cf=e.$bf=e.$af=e.$_e=e.$$e=e.$0e=e.$9e=e.$8e=e.$7e=e.$6e=e.$5e=e.$4e=e.$3e=e.$2e=e.$1e=e.$Ze=e.$Ye=e.$Xe=e.$We=e.$Ve=e.$Ue=e.$Te=e.$Se=e.$Re=e.$Qe=e.$Pe=e.$Oe=e.$Ne=e.$Me=e.$Le=void 0;function L(ae){return!ae||typeof ae!="string"?!0:ae.trim().length===0}e.$Le=L;const j=/{(\d+)}/g;function I(ae,...ge){return ge.length===0?ae:ae.replace(j,function(pe,ve){const Ee=parseInt(ve,10);return isNaN(Ee)||Ee<0||Ee>=ge.length?pe:ge[Ee]})}e.$Me=I;const P=/{([^}]+)}/g;function R(ae,ge){return Object.keys(ge).length===0?ae:ae.replace(P,(pe,ve)=>ge[ve]??pe)}e.$Ne=R;function m(ae){return ae.replace(/[<>"'&]/g,ge=>{switch(ge){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return ge})}e.$Oe=m;function C(ae){return ae.replace(/[<>&]/g,function(ge){switch(ge){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return ge}})}e.$Pe=C;function k(ae){return ae.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}e.$Qe=k;function E(ae,ge){let pe=0;const ve=ge.charCodeAt(0);for(let Ee=ae.length-1;Ee>=0;Ee--)ae.charCodeAt(Ee)===ve&&pe++;return pe}e.$Re=E;function l(ae,ge,pe="\u2026"){return ae.length<=ge?ae:`${ae.substr(0,ge)}${pe}`}e.$Se=l;function g(ae,ge,pe="\u2026"){if(ae.length<=ge)return ae;const ve=Math.ceil(ge/2)-pe.length/2,Ee=Math.floor(ge/2)-pe.length/2;return`${ae.substr(0,ve)}${pe}${ae.substr(ae.length-Ee)}`}e.$Te=g;function p(ae,ge=" "){const pe=w(ae,ge);return h(pe,ge)}e.$Ue=p;function w(ae,ge){if(!ae||!ge)return ae;const pe=ge.length;if(pe===0||ae.length===0)return ae;let ve=0;for(;ae.indexOf(ge,ve)===ve;)ve=ve+pe;return ae.substring(ve)}e.$Ve=w;function h(ae,ge){if(!ae||!ge)return ae;const pe=ge.length,ve=ae.length;if(pe===0||ve===0)return ae;let Ee=ve,Ie=-1;for(;Ie=ae.lastIndexOf(ge,Ee-1),!(Ie===-1||Ie+pe!==Ee);){if(Ie===0)return"";Ee=Ie}return ae.substring(0,Ee)}e.$We=h;function f(ae){return ae.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}e.$Xe=f;function u(ae){return ae.replace(/\*/g,"")}e.$Ye=u;function c(ae,ge,pe={}){if(!ae)throw new Error("Cannot create regex from empty string");ge||(ae=k(ae)),pe.wholeWord&&(/\B/.test(ae.charAt(0))||(ae="\\b"+ae),/\B/.test(ae.charAt(ae.length-1))||(ae=ae+"\\b"));let ve="";return pe.global&&(ve+="g"),pe.matchCase||(ve+="i"),pe.multiline&&(ve+="m"),pe.unicode&&(ve+="u"),new RegExp(ae,ve)}e.$Ze=c;function b(ae){return ae.source==="^"||ae.source==="^$"||ae.source==="$"||ae.source==="^\\s*$"?!1:!!(ae.exec("")&&ae.lastIndex===0)}e.$1e=b;function i(ae){return ae.split(/\r\n|\r|\n/)}e.$2e=i;function r(ae){for(let ge=0,pe=ae.length;ge<pe;ge++){const ve=ae.charCodeAt(ge);if(ve!==32&&ve!==9)return ge}return-1}e.$3e=r;function n(ae,ge=0,pe=ae.length){for(let ve=ge;ve<pe;ve++){const Ee=ae.charCodeAt(ve);if(Ee!==32&&Ee!==9)return ae.substring(ge,ve)}return ae.substring(ge,pe)}e.$4e=n;function s(ae,ge=ae.length-1){for(let pe=ge;pe>=0;pe--){const ve=ae.charCodeAt(pe);if(ve!==32&&ve!==9)return pe}return-1}e.$5e=s;function t(ae,ge,pe){const ve=[];let Ee=0;for(const Ie of ae.matchAll(ge)){if(ve.push(ae.slice(Ee,Ie.index)),Ie.index===void 0)throw new Error("match.index should be defined");Ee=Ie.index+Ie[0].length,ve.push(pe(Ie[0],...Ie.slice(1),Ie.index,ae,Ie.groups))}return ve.push(ae.slice(Ee)),Promise.all(ve).then(Ie=>Ie.join(""))}e.$6e=t;function o(ae,ge){return ae<ge?-1:ae>ge?1:0}e.$7e=o;function a(ae,ge,pe=0,ve=ae.length,Ee=0,Ie=ge.length){for(;pe<ve&&Ee<Ie;pe++,Ee++){const Fe=ae.charCodeAt(pe),Ve=ge.charCodeAt(Ee);if(Fe<Ve)return-1;if(Fe>Ve)return 1}const Ae=ve-pe,Te=Ie-Ee;return Ae<Te?-1:Ae>Te?1:0}e.$8e=a;function y(ae,ge){return $(ae,ge,0,ae.length,0,ge.length)}e.$9e=y;function $(ae,ge,pe=0,ve=ae.length,Ee=0,Ie=ge.length){for(;pe<ve&&Ee<Ie;pe++,Ee++){let Fe=ae.charCodeAt(pe),Ve=ge.charCodeAt(Ee);if(Fe===Ve)continue;if(Fe>=128||Ve>=128)return a(ae.toLowerCase(),ge.toLowerCase(),pe,ve,Ee,Ie);v(Fe)&&(Fe-=32),v(Ve)&&(Ve-=32);const Ue=Fe-Ve;if(Ue!==0)return Ue}const Ae=ve-pe,Te=Ie-Ee;return Ae<Te?-1:Ae>Te?1:0}e.$0e=$;function d(ae){return ae>=48&&ae<=57}e.$$e=d;function v(ae){return ae>=97&&ae<=122}e.$_e=v;function S(ae){return ae>=65&&ae<=90}e.$af=S;function A(ae,ge){return ae.length===ge.length&&$(ae,ge)===0}e.$bf=A;function T(ae,ge){const pe=ge.length;return ge.length>ae.length?!1:$(ae,ge,0,pe)===0}e.$cf=T;function q(ae,ge){const pe=Math.min(ae.length,ge.length);let ve;for(ve=0;ve<pe;ve++)if(ae.charCodeAt(ve)!==ge.charCodeAt(ve))return ve;return pe}e.$df=q;function M(ae,ge){const pe=Math.min(ae.length,ge.length);let ve;const Ee=ae.length-1,Ie=ge.length-1;for(ve=0;ve<pe;ve++)if(ae.charCodeAt(Ee-ve)!==ge.charCodeAt(Ie-ve))return ve;return pe}e.$ef=M;function Y(ae){return 55296<=ae&&ae<=56319}e.$ff=Y;function G(ae){return 56320<=ae&&ae<=57343}e.$gf=G;function Q(ae,ge){return(ae-55296<<10)+(ge-56320)+65536}e.$hf=Q;function F(ae,ge,pe){const ve=ae.charCodeAt(pe);if(Y(ve)&&pe+1<ge){const Ee=ae.charCodeAt(pe+1);if(G(Ee))return Q(ve,Ee)}return ve}e.$if=F;function te(ae,ge){const pe=ae.charCodeAt(ge-1);if(G(pe)&&ge>1){const ve=ae.charCodeAt(ge-2);if(Y(ve))return Q(ve,pe)}return pe}class H{get offset(){return this.e}constructor(ge,pe=0){this.c=ge,this.d=ge.length,this.e=pe}setOffset(ge){this.e=ge}prevCodePoint(){const ge=te(this.c,this.e);return this.e-=ge>=65536?2:1,ge}nextCodePoint(){const ge=F(this.c,this.d,this.e);return this.e+=ge>=65536?2:1,ge}eol(){return this.e>=this.d}}e.$jf=H;class J{get offset(){return this.c.offset}constructor(ge,pe=0){this.c=new H(ge,pe)}nextGraphemeLength(){const ge=ke.getInstance(),pe=this.c,ve=pe.offset;let Ee=ge.getGraphemeBreakType(pe.nextCodePoint());for(;!pe.eol();){const Ie=pe.offset,Ae=ge.getGraphemeBreakType(pe.nextCodePoint());if($e(Ee,Ae)){pe.setOffset(Ie);break}Ee=Ae}return pe.offset-ve}prevGraphemeLength(){const ge=ke.getInstance(),pe=this.c,ve=pe.offset;let Ee=ge.getGraphemeBreakType(pe.prevCodePoint());for(;pe.offset>0;){const Ie=pe.offset,Ae=ge.getGraphemeBreakType(pe.prevCodePoint());if($e(Ae,Ee)){pe.setOffset(Ie);break}Ee=Ae}return ve-pe.offset}eol(){return this.c.eol()}}e.$kf=J;function x(ae,ge){return new J(ae,ge).nextGraphemeLength()}e.$lf=x;function se(ae,ge){return new J(ae,ge).prevGraphemeLength()}e.$mf=se;function V(ae,ge){ge>0&&G(ae.charCodeAt(ge))&&ge--;const pe=ge+x(ae,ge);return[pe-se(ae,pe),pe]}e.$nf=V;function ne(ae){const ge=new J(ae);let pe=0;for(;!ge.eol();)pe++,ge.nextGraphemeLength();return pe}e.$of=ne;let K;function z(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function U(ae){return K||(K=z()),K.test(ae)}e.$pf=U;const O=/^[\t\n\r\x20-\x7E]*$/;function W(ae){return O.test(ae)}e.$qf=W,e.$rf=/[\u2028\u2029]/;function B(ae){return e.$rf.test(ae)}e.$sf=B;function _(ae){return ae>=11904&&ae<=55215||ae>=63744&&ae<=64255||ae>=65281&&ae<=65374}e.$tf=_;function ee(ae){return ae>=127462&&ae<=127487||ae===8986||ae===8987||ae===9200||ae===9203||ae>=9728&&ae<=10175||ae===11088||ae===11093||ae>=127744&&ae<=128591||ae>=128640&&ae<=128764||ae>=128992&&ae<=129008||ae>=129280&&ae<=129535||ae>=129648&&ae<=129782}e.$uf=ee;function X(ae,ge,pe=""){const ve=ae.trimStart();if(ve.length<ge)return ve;const Ee=/\b/g;let Ie=0;for(;Ee.test(ve)&&!(ve.length-Ee.lastIndex<ge);)Ie=Ee.lastIndex,Ee.lastIndex+=1;return Ie===0?ve:pe+ve.substring(Ie).trimStart()}e.$vf=X;const ie=/(:?\x1b\[|\x9B)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/g,ce=/\x1b\].*?\x07/g;function fe(ae){return ae&&(ae=ae.replace(ie,"").replace(ce,"")),ae}e.$wf=fe,e.$xf=String.fromCharCode(65279);function be(ae){return!!(ae&&ae.length>0&&ae.charCodeAt(0)===65279)}e.$yf=be;function le(ae){return be(ae)?ae.substr(1):ae}e.$zf=le;function re(ae,ge){if(!ae||!ge||ae.length<ge.length)return!1;const pe=ge.length,ve=ae.toLowerCase();let Ee=0,Ie=-1;for(;Ee<pe;){const Ae=ve.indexOf(ge[Ee],Ie+1);if(Ae<0)return!1;Ie=Ae,Ee++}return!0}e.$Af=re;function me(ae,ge=!1){return ae?(ge&&(ae=ae.replace(/\\./g,"")),ae.toLowerCase()!==ae):!1}e.$Bf=me;function ye(ae){return ae.charAt(0).toUpperCase()+ae.slice(1)}e.$Cf=ye;function Re(ae,ge=1){if(ge===0)return"";let pe=-1;do pe=ae.indexOf(`
`,pe+1),ge--;while(ge>0&&pe>=0);return pe===-1?ae:(ae[pe-1]==="\r"&&pe--,ae.substr(0,pe))}e.$Df=Re;function Ce(ae){return ae=ae%(2*26),ae<26?String.fromCharCode(97+ae):String.fromCharCode(65+ae-26)}e.$Ef=Ce;function he(ae){return ke.getInstance().getGraphemeBreakType(ae)}e.$Ff=he;function $e(ae,ge){return ae===0?ge!==5&&ge!==7:ae===2&&ge===3?!1:ae===4||ae===2||ae===3||ge===4||ge===2||ge===3?!0:!(ae===8&&(ge===8||ge===9||ge===11||ge===12)||(ae===11||ae===9)&&(ge===9||ge===10)||(ae===12||ae===10)&&ge===10||ge===5||ge===13||ge===7||ae===1||ae===13&&ge===14||ae===6&&ge===6)}var we;(function(ae){ae[ae.Other=0]="Other",ae[ae.Prepend=1]="Prepend",ae[ae.CR=2]="CR",ae[ae.LF=3]="LF",ae[ae.Control=4]="Control",ae[ae.Extend=5]="Extend",ae[ae.Regional_Indicator=6]="Regional_Indicator",ae[ae.SpacingMark=7]="SpacingMark",ae[ae.L=8]="L",ae[ae.V=9]="V",ae[ae.T=10]="T",ae[ae.LV=11]="LV",ae[ae.LVT=12]="LVT",ae[ae.ZWJ=13]="ZWJ",ae[ae.Extended_Pictographic=14]="Extended_Pictographic"})(we||(e.GraphemeBreakType=we={}));class ke{static{this.c=null}static getInstance(){return ke.c||(ke.c=new ke),ke.c}constructor(){this.d=Pe()}getGraphemeBreakType(ge){if(ge<32)return ge===10?3:ge===13?2:4;if(ge<127)return 0;const pe=this.d,ve=pe.length/3;let Ee=1;for(;Ee<=ve;)if(ge<pe[3*Ee])Ee=2*Ee;else if(ge>pe[3*Ee+1])Ee=2*Ee+1;else return pe[3*Ee+2];return 0}}function Pe(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function Le(ae,ge){if(ae===0)return 0;const pe=Oe(ae,ge);if(pe!==void 0)return pe;const ve=new H(ge,ae);return ve.prevCodePoint(),ve.offset}e.$Gf=Le;function Oe(ae,ge){const pe=new H(ge,ae);let ve=pe.prevCodePoint();for(;qe(ve)||ve===65039||ve===8419;){if(pe.offset===0)return;ve=pe.prevCodePoint()}if(!ee(ve))return;let Ee=pe.offset;return Ee>0&&pe.prevCodePoint()===8205&&(Ee=pe.offset),Ee}function qe(ae){return 127995<=ae&&ae<=127999}var je;(function(ae){ae[ae.zwj=8205]="zwj",ae[ae.emojiVariantSelector=65039]="emojiVariantSelector",ae[ae.enclosingKeyCap=8419]="enclosingKeyCap"})(je||(je={})),e.$Hf="\xA0";class Ne{static{this.c=new N.$V(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.d=new D.$He(ge=>{function pe(Ue){const We=new Map;for(let He=0;He<Ue.length;He+=2)We.set(Ue[He],Ue[He+1]);return We}function ve(Ue,We){const He=new Map(Ue);for(const[Ye,et]of We)He.set(Ye,et);return He}function Ee(Ue,We){if(!Ue)return We;const He=new Map;for(const[Ye,et]of Ue)We.has(Ye)&&He.set(Ye,et);return He}const Ie=this.c.value;let Ae=ge.filter(Ue=>!Ue.startsWith("_")&&Ue in Ie);Ae.length===0&&(Ae=["_default"]);let Te;for(const Ue of Ae){const We=pe(Ie[Ue]);Te=Ee(Te,We)}const Fe=pe(Ie._common),Ve=ve(Fe,Te);return new Ne(Ve)})}static getInstance(ge){return Ne.d.get(Array.from(ge))}static{this.e=new N.$V(()=>Object.keys(Ne.c.value).filter(ge=>!ge.startsWith("_")))}static getLocales(){return Ne.e.value}constructor(ge){this.f=ge}isAmbiguous(ge){return this.f.has(ge)}getPrimaryConfusable(ge){return this.f.get(ge)}getConfusableCodePoints(){return new Set(this.f.keys())}}e.$If=Ne;class Me{static c(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this.d=void 0}static e(){return this.d||(this.d=new Set(Me.c())),this.d}static isInvisibleCharacter(ge){return Me.e().has(ge)}static get codePoints(){return Me.e()}}e.$Jf=Me}),define(ue[54],de([0,1,27]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2i=e.$1i=e.$Zi=e.$Yi=e.$Xi=e.$Wi=e.$Vi=void 0;function N(h){return L(h,0)}e.$Vi=N;function L(h,f){switch(typeof h){case"object":return h===null?j(349,f):Array.isArray(h)?R(h,f):m(h,f);case"string":return P(h,f);case"boolean":return I(h,f);case"number":return j(h,f);case"undefined":return j(937,f);default:return j(617,f)}}e.$Wi=L;function j(h,f){return(f<<5)-f+h|0}e.$Xi=j;function I(h,f){return j(h?433:863,f)}function P(h,f){f=j(149417,f);for(let u=0,c=h.length;u<c;u++)f=j(h.charCodeAt(u),f);return f}e.$Yi=P;function R(h,f){return f=j(104579,f),h.reduce((u,c)=>L(c,u),f)}function m(h,f){return f=j(181387,f),Object.keys(h).sort().reduce((u,c)=>(u=P(c,u),L(h[c],u)),f)}class C{constructor(){this.g=0}get value(){return this.g}hash(f){return this.g=L(f,this.g),this.g}}e.$Zi=C;var k;(function(h){h[h.BLOCK_SIZE=64]="BLOCK_SIZE",h[h.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(k||(k={}));function E(h,f,u=32){const c=u-f,b=~((1<<c)-1);return(h<<f|(b&h)>>>c)>>>0}function l(h,f=0,u=h.byteLength,c=0){for(let b=0;b<u;b++)h[f+b]=c}function g(h,f,u="0"){for(;h.length<f;)h=u+h;return h}function p(h,f=32){return h instanceof ArrayBuffer?Array.from(new Uint8Array(h)).map(u=>u.toString(16).padStart(2,"0")).join(""):g((h>>>0).toString(16),f/4)}e.$1i=p;class w{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(64+3),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(f){const u=f.length;if(u===0)return;const c=this.p;let b=this.r,i=this.u,r,n;for(i!==0?(r=i,n=-1,i=0):(r=f.charCodeAt(0),n=0);;){let s=r;if(D.$ff(r))if(n+1<u){const t=f.charCodeAt(n+1);D.$gf(t)?(n++,s=D.$hf(r,t)):s=65533}else{i=r;break}else D.$gf(r)&&(s=65533);if(b=this.w(c,b,s),n++,n<u)r=f.charCodeAt(n);else break}this.r=b,this.u=i}w(f,u,c){return c<128?f[u++]=c:c<2048?(f[u++]=192|(c&1984)>>>6,f[u++]=128|(c&63)>>>0):c<65536?(f[u++]=224|(c&61440)>>>12,f[u++]=128|(c&4032)>>>6,f[u++]=128|(c&63)>>>0):(f[u++]=240|(c&1835008)>>>18,f[u++]=128|(c&258048)>>>12,f[u++]=128|(c&4032)>>>6,f[u++]=128|(c&63)>>>0),u>=64&&(this.y(),u-=64,this.t+=64,f[0]=f[64+0],f[1]=f[64+1],f[2]=f[64+2]),u}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),p(this.h)+p(this.l)+p(this.m)+p(this.n)+p(this.o)}x(){this.p[this.r++]=128,l(this.p,this.r),this.r>56&&(this.y(),l(this.p));const f=8*this.t;this.q.setUint32(56,Math.floor(f/4294967296),!1),this.q.setUint32(60,f%4294967296,!1),this.y()}y(){const f=w.g,u=this.q;for(let a=0;a<64;a+=4)f.setUint32(a,u.getUint32(a,!1),!1);for(let a=64;a<320;a+=4)f.setUint32(a,E(f.getUint32(a-12,!1)^f.getUint32(a-32,!1)^f.getUint32(a-56,!1)^f.getUint32(a-64,!1),1),!1);let c=this.h,b=this.l,i=this.m,r=this.n,n=this.o,s,t,o;for(let a=0;a<80;a++)a<20?(s=b&i|~b&r,t=1518500249):a<40?(s=b^i^r,t=1859775393):a<60?(s=b&i|b&r|i&r,t=2400959708):(s=b^i^r,t=3395469782),o=E(c,5)+s+n+t+f.getUint32(a*4,!1)&4294967295,n=r,r=i,i=E(b,30),b=c,c=o;this.h=this.h+c&4294967295,this.l=this.l+b&4294967295,this.m=this.m+i&4294967295,this.n=this.n+r&4294967295,this.o=this.o+n&4294967295}}e.$2i=w}),define(ue[90],de([0,1,27]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var N;(function(L){L[L.Ignore=0]="Ignore",L[L.Info=1]="Info",L[L.Warning=2]="Warning",L[L.Error=3]="Error",L[L.AI=4]="AI"})(N||(N={})),function(L){const j="error",I="warning",P="warn",R="info",m="ignore";function C(E){return E?D.$bf(j,E)?L.Error:D.$bf(I,E)||D.$bf(P,E)?L.Warning:D.$bf(R,E)?L.Info:L.Ignore:L.Ignore}L.fromValue=C;function k(E){switch(E){case L.Error:return j;case L.Warning:return I;case L.Info:return R;default:return m}}L.toString=k}(N||(N={})),e.default=N}),define(ue[130],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Td=void 0,e.$Td=Symbol("MicrotaskDelay")}),define(ue[47],de([0,1,17,27]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$bi=e.$ai=e.$_h=e.$$h=e.$0h=void 0;class L{constructor(){this.b="",this.c=0}reset(l){return this.b=l,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(l){const g=l.charCodeAt(0),p=this.b.charCodeAt(this.c);return g-p}value(){return this.b[this.c]}}e.$0h=L;class j{constructor(l=!0){this.e=l}reset(l){return this.b=l,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let l=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(l)this.c++;else break;else l=!1;return this}cmp(l){return this.e?(0,N.$8e)(l,this.b,0,l.length,this.c,this.d):(0,N.$0e)(l,this.b,0,l.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}}e.$$h=j;class I{constructor(l=!0,g=!0){this.f=l,this.g=g}reset(l){this.d=0,this.e=0,this.b=l,this.c=l.length;for(let g=l.length-1;g>=0;g--,this.c--){const p=this.b.charCodeAt(g);if(!(p===47||this.f&&p===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let l=!0;for(;this.e<this.c;this.e++){const g=this.b.charCodeAt(this.e);if(g===47||this.f&&g===92)if(l)this.d++;else break;else l=!1}return this}cmp(l){return this.g?(0,N.$8e)(l,this.b,0,l.length,this.d,this.e):(0,N.$0e)(l,this.b,0,l.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}}e.$_h=I;var P;(function(E){E[E.Scheme=1]="Scheme",E[E.Authority=2]="Authority",E[E.Path=3]="Path",E[E.Query=4]="Query",E[E.Fragment=5]="Fragment"})(P||(P={}));class R{constructor(l,g){this.f=l,this.g=g,this.d=[],this.e=0}reset(l){return this.c=l,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new I(!1,!this.f(l)),this.b.reset(l.path),this.b.value()&&this.d.push(3)),this.g(l)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(l){if(this.d[this.e]===1)return(0,N.$9e)(l,this.c.scheme);if(this.d[this.e]===2)return(0,N.$9e)(l,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(l);if(this.d[this.e]===4)return(0,N.$7e)(l,this.c.query);if(this.d[this.e]===5)return(0,N.$7e)(l,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}}e.$ai=R;class m{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const l=this.right;return this.right=l.left,l.left=this,this.updateHeight(),l.updateHeight(),l}rotateRight(){const l=this.left;return this.left=l.right,l.right=this,this.updateHeight(),l.updateHeight(),l}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var C;(function(E){E[E.Left=-1]="Left",E[E.Mid=0]="Mid",E[E.Right=1]="Right"})(C||(C={}));class k{static forUris(l=()=>!1,g=()=>!1){return new k(new R(l,g))}static forPaths(l=!1){return new k(new I(void 0,!l))}static forStrings(){return new k(new L)}static forConfigKeys(){return new k(new j)}constructor(l){this.b=l}clear(){this.c=void 0}fill(l,g){if(g){const p=g.slice(0);(0,D.$Xb)(p);for(const w of p)this.set(w,l)}else{const p=l.slice(0);(0,D.$Xb)(p);for(const w of p)this.set(w[0],w[1])}}set(l,g){const p=this.b.reset(l);let w;this.c||(this.c=new m,this.c.segment=p.value());const h=[];for(w=this.c;;){const u=p.cmp(w.segment);if(u>0)w.left||(w.left=new m,w.left.segment=p.value()),h.push([-1,w]),w=w.left;else if(u<0)w.right||(w.right=new m,w.right.segment=p.value()),h.push([1,w]),w=w.right;else if(p.hasNext())p.next(),w.mid||(w.mid=new m,w.mid.segment=p.value()),h.push([0,w]),w=w.mid;else break}const f=w.value;w.value=g,w.key=l;for(let u=h.length-1;u>=0;u--){const c=h[u][1];c.updateHeight();const b=c.balanceFactor();if(b<-1||b>1){const i=h[u][0],r=h[u+1][0];if(i===1&&r===1)h[u][1]=c.rotateLeft();else if(i===-1&&r===-1)h[u][1]=c.rotateRight();else if(i===1&&r===-1)c.right=h[u+1][1]=h[u+1][1].rotateRight(),h[u][1]=c.rotateLeft();else if(i===-1&&r===1)c.left=h[u+1][1]=h[u+1][1].rotateLeft(),h[u][1]=c.rotateRight();else throw new Error;if(u>0)switch(h[u-1][0]){case-1:h[u-1][1].left=h[u][1];break;case 1:h[u-1][1].right=h[u][1];break;case 0:h[u-1][1].mid=h[u][1];break}else this.c=h[0][1]}}return f}get(l){return this.d(l)?.value}d(l){const g=this.b.reset(l);let p=this.c;for(;p;){const w=g.cmp(p.segment);if(w>0)p=p.left;else if(w<0)p=p.right;else if(g.hasNext())g.next(),p=p.mid;else break}return p}has(l){const g=this.d(l);return!(g?.value===void 0&&g?.mid===void 0)}delete(l){return this.e(l,!1)}deleteSuperstr(l){return this.e(l,!0)}e(l,g){const p=this.b.reset(l),w=[];let h=this.c;for(;h;){const f=p.cmp(h.segment);if(f>0)w.push([-1,h]),h=h.left;else if(f<0)w.push([1,h]),h=h.right;else if(p.hasNext())p.next(),w.push([0,h]),h=h.mid;else break}if(h){if(g?(h.left=void 0,h.mid=void 0,h.right=void 0,h.height=1):(h.key=void 0,h.value=void 0),!h.mid&&!h.value)if(h.left&&h.right){const f=this.f(h.right);if(f.key){const{key:u,value:c,segment:b}=f;this.e(f.key,!1),h.key=u,h.value=c,h.segment=b}}else{const f=h.left??h.right;if(w.length>0){const[u,c]=w[w.length-1];switch(u){case-1:c.left=f;break;case 0:c.mid=f;break;case 1:c.right=f;break}}else this.c=f}for(let f=w.length-1;f>=0;f--){const u=w[f][1];u.updateHeight();const c=u.balanceFactor();if(c>1?(u.right.balanceFactor()>=0||(u.right=u.right.rotateRight()),w[f][1]=u.rotateLeft()):c<-1&&(u.left.balanceFactor()<=0||(u.left=u.left.rotateLeft()),w[f][1]=u.rotateRight()),f>0)switch(w[f-1][0]){case-1:w[f-1][1].left=w[f][1];break;case 1:w[f-1][1].right=w[f][1];break;case 0:w[f-1][1].mid=w[f][1];break}else this.c=w[0][1]}}}f(l){for(;l.left;)l=l.left;return l}findSubstr(l){const g=this.b.reset(l);let p=this.c,w;for(;p;){const h=g.cmp(p.segment);if(h>0)p=p.left;else if(h<0)p=p.right;else if(g.hasNext())g.next(),w=p.value||w,p=p.mid;else break}return p&&p.value||w}findSuperstr(l){return this.g(l,!1)}g(l,g){const p=this.b.reset(l);let w=this.c;for(;w;){const h=p.cmp(w.segment);if(h>0)w=w.left;else if(h<0)w=w.right;else if(p.hasNext())p.next(),w=w.mid;else return w.mid?this.h(w.mid):g?w.value:void 0}}hasElementOrSubtree(l){return this.g(l,!0)!==void 0}forEach(l){for(const[g,p]of this)l(p,g)}*[Symbol.iterator](){yield*this.h(this.c)}h(l){const g=[];return this.j(l,g),g[Symbol.iterator]()}j(l,g){l&&(l.left&&this.j(l.left,g),l.value&&g.push([l.key,l.value]),l.mid&&this.j(l.mid,g),l.right&&this.j(l.right,g))}_isBalanced(){const l=g=>{if(!g)return!0;const p=g.balanceFactor();return p<-1||p>1?!1:l(g.left)&&l(g.right)};return l(this.c)}}e.$bi=k}),define(ue[12],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2f=e.$1f=e.$Zf=e.$Yf=e.$Xf=e.$Wf=e.$Vf=e.$Uf=e.$Tf=e.$Sf=e.$Rf=e.$Qf=e.$Pf=e.$Of=e.$Nf=e.$Mf=e.$Lf=e.$Kf=void 0;function D(b){return typeof b=="string"}e.$Kf=D;function N(b){return Array.isArray(b)&&b.every(i=>D(i))}e.$Lf=N;function L(b){return typeof b=="object"&&b!==null&&!Array.isArray(b)&&!(b instanceof RegExp)&&!(b instanceof Date)}e.$Mf=L;function j(b){const i=Object.getPrototypeOf(Uint8Array);return typeof b=="object"&&b instanceof i}e.$Nf=j;function I(b){return typeof b=="number"&&!isNaN(b)}e.$Of=I;function P(b){return!!b&&typeof b[Symbol.iterator]=="function"}e.$Pf=P;function R(b){return b===!0||b===!1}e.$Qf=R;function m(b){return typeof b>"u"}e.$Rf=m;function C(b){return!k(b)}e.$Sf=C;function k(b){return m(b)||b===null}e.$Tf=k;function E(b,i){if(!b)throw new Error(i?`Unexpected type, expected '${i}'`:"Unexpected type")}e.$Uf=E;function l(b){if(k(b))throw new Error("Assertion Failed: argument is undefined or null");return b}e.$Vf=l;function g(...b){const i=[];for(let r=0;r<b.length;r++){const n=b[r];if(k(n))throw new Error(`Assertion Failed: argument at index ${r} is undefined or null`);i.push(n)}return i}e.$Wf=g;const p=Object.prototype.hasOwnProperty;function w(b){if(!L(b))return!1;for(const i in b)if(p.call(b,i))return!1;return!0}e.$Xf=w;function h(b){return typeof b=="function"}e.$Yf=h;function f(...b){return b.length>0&&b.every(h)}e.$Zf=f;function u(b,i){const r=Math.min(b.length,i.length);for(let n=0;n<r;n++)c(b[n],i[n])}e.$1f=u;function c(b,i){if(D(i)){if(typeof b!==i)throw new Error(`argument does not match constraint: typeof ${i}`)}else if(h(i)){try{if(b instanceof i)return}catch{}if(!k(b)&&b.constructor===i||i.length===1&&i.call(void 0,b)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}e.$2f=c}),define(ue[30],de([0,1,12]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Pn=e.$On=e.$Nn=e.$Mn=e.$Ln=e.$Kn=e.$Jn=e.$In=e.$Hn=e.$Gn=e.$Fn=e.$En=void 0;function N(h){if(!h||typeof h!="object"||h instanceof RegExp)return h;const f=Array.isArray(h)?[]:{};return Object.entries(h).forEach(([u,c])=>{f[u]=c&&typeof c=="object"?N(c):c}),f}e.$En=N;function L(h){if(!h||typeof h!="object")return h;const f=[h];for(;f.length>0;){const u=f.shift();Object.freeze(u);for(const c in u)if(j.call(u,c)){const b=u[c];typeof b=="object"&&!Object.isFrozen(b)&&!(0,D.$Nf)(b)&&f.push(b)}}return h}e.$Fn=L;const j=Object.prototype.hasOwnProperty;function I(h,f){return P(h,f,new Set)}e.$Gn=I;function P(h,f,u){if((0,D.$Tf)(h))return h;const c=f(h);if(typeof c<"u")return c;if(Array.isArray(h)){const b=[];for(const i of h)b.push(P(i,f,u));return b}if((0,D.$Mf)(h)){if(u.has(h))throw new Error("Cannot clone recursive data-structure");u.add(h);const b={};for(const i in h)j.call(h,i)&&(b[i]=P(h[i],f,u));return u.delete(h),b}return h}function R(h,f,u=!0){return(0,D.$Mf)(h)?((0,D.$Mf)(f)&&Object.keys(f).forEach(c=>{c in h?u&&((0,D.$Mf)(h[c])&&(0,D.$Mf)(f[c])?R(h[c],f[c],u):h[c]=f[c]):h[c]=f[c]}),h):f}e.$Hn=R;function m(h,f){if(h===f)return!0;if(h==null||f===null||f===void 0||typeof h!=typeof f||typeof h!="object"||Array.isArray(h)!==Array.isArray(f))return!1;let u,c;if(Array.isArray(h)){if(h.length!==f.length)return!1;for(u=0;u<h.length;u++)if(!m(h[u],f[u]))return!1}else{const b=[];for(c in h)b.push(c);b.sort();const i=[];for(c in f)i.push(c);if(i.sort(),!m(b,i))return!1;for(u=0;u<b.length;u++)if(!m(h[b[u]],f[b[u]]))return!1}return!0}e.$In=m;function C(h){const f=new Set;return JSON.stringify(h,(u,c)=>{if((0,D.$Mf)(c)||Array.isArray(c)){if(f.has(c))return"[Circular]";f.add(c)}return c})}e.$Jn=C;function k(h,f){const u=Object.create(null);return!h||!f||Object.keys(f).forEach(b=>{const i=h[b],r=f[b];m(i,r)||(u[b]=r)}),u}e.$Kn=k;function E(h,f){const u=f.toLowerCase(),c=Object.keys(h).find(b=>b.toLowerCase()===u);return c?h[c]:h[f]}e.$Ln=E;function l(h,f){const u=Object.create(null);for(const[c,b]of Object.entries(h))f(c,b)&&(u[c]=b);return u}e.$Mn=l;function g(h){let f=[];for(;Object.prototype!==h;)f=f.concat(Object.getOwnPropertyNames(h)),h=Object.getPrototypeOf(h);return f}e.$Nn=g;function p(h){const f=[];for(const u of g(h))typeof h[u]=="function"&&f.push(u);return f}e.$On=p;function w(h,f){const u=b=>function(){const i=Array.prototype.slice.call(arguments,0);return f(b,i)},c={};for(const b of h)c[b]=u(b);return c}e.$Pn=w}),define(ue[31],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$sg=e.$rg=void 0;const D=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function N(L){return D.test(L)}e.$rg=N,e.$sg=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let L;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?L=crypto.getRandomValues.bind(crypto):L=function(P){for(let R=0;R<P.length;R++)P[R]=Math.floor(Math.random()*256);return P};const j=new Uint8Array(16),I=[];for(let P=0;P<256;P++)I.push(P.toString(16).padStart(2,"0"));return function(){L(j),j[6]=j[6]&15|64,j[8]=j[8]&63|128;let R=0,m="";return m+=I[j[R++]],m+=I[j[R++]],m+=I[j[R++]],m+=I[j[R++]],m+="-",m+=I[j[R++]],m+=I[j[R++]],m+="-",m+=I[j[R++]],m+=I[j[R++]],m+="-",m+=I[j[R++]],m+=I[j[R++]],m+="-",m+=I[j[R++]],m+=I[j[R++]],m+=I[j[R++]],m+=I[j[R++]],m+=I[j[R++]],m+=I[j[R++]],m}}()}),define(ue[131],de([0,1,36]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$en=void 0;const N=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function L(I){const P=I.replace(/\-/g,":").toLowerCase();return!N.has(P)}function j(){const I=(0,D.networkInterfaces)();for(const P in I){const R=I[P];if(R){for(const{mac:m}of R)if(L(m))return m}}throw new Error("Unable to retrieve mac address (unexpected format)")}e.$en=j}),define(ue[132],de([0,1,265,14]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Idb=void 0;class L extends D.Transform{constructor(I){if(super(),typeof I=="number")this.b=I,this.c=1;else{const P=Buffer.isBuffer(I)?I:Buffer.from(I);this.b=P.length===1?P[0]:P,this.c=P.length}}_transform(I,P,R){this.a?this.a=Buffer.concat([this.a,I]):this.a=I;let m=0;for(;m<this.a.length;){const C=typeof this.b=="number"?this.a.indexOf(this.b,m):(0,N.$le)(this.a,this.b,m);if(C===-1)break;this.push(this.a.slice(m,C+this.c)),m=C+this.c}this.a=m===this.a.length?void 0:this.a.slice(m),R()}_flush(I){this.a&&this.push(this.a),I()}}e.$Idb=L}),define(ue[133],de([0,1,66]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$wg=e.$vg=e.$ug=void 0;function N(P,R,m,C=1){let k=!1;return new Promise(E=>{const l=setTimeout(()=>{if(!k)return k=!0,E(0)},m);L(P,R,C,g=>{if(!k)return k=!0,clearTimeout(l),E(g)})})}e.$ug=N;function L(P,R,m,C){if(R===0)return C(0);const k=new D.Socket;k.once("connect",()=>(I(k),L(P+m,R-1,m,C))),k.once("data",()=>{}),k.once("error",E=>(I(k),E.code!=="ECONNREFUSED"?L(P+m,R-1,m,C):C(P))),k.connect(P,"127.0.0.1")}e.$vg={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function j(P,R,m,C="127.0.0.1"){let k=!1,E,l=1;const g=D.createServer({pauseOnConnect:!0});function p(w,h){k||(k=!0,g.removeAllListeners(),g.close(),E&&clearTimeout(E),h(w))}return new Promise(w=>{E=setTimeout(()=>{p(0,w)},m),g.on("listening",()=>{p(P,w)}),g.on("error",h=>{h&&(h.code==="EADDRINUSE"||h.code==="EACCES")&&l<R?(P++,l++,g.listen(P,C)):p(0,w)}),g.on("close",()=>{p(0,w)}),g.listen(P,C)})}e.$wg=j;function I(P){try{P.removeAllListeners("connect"),P.removeAllListeners("error"),P.end(),P.destroy(),P.unref()}catch(R){console.error(R)}}}),define(ue[134],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ydb=void 0;function D(N){return!!N.parentPort}e.$Ydb=D}),define(ue[135],de([13,9]),function(oe,e){return oe.create("vs/base/common/date",e)}),define(ue[67],de([0,1,135]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Em=e.$Dm=void 0;const N=60,L=N*60,j=L*24,I=j*7,P=j*30,R=j*365;function m(k,E,l,g){typeof k!="number"&&(k=k.getTime());const p=Math.round((new Date().getTime()-k)/1e3);if(p<-30)return(0,D.localize)(0,null,m(new Date().getTime()+p*1e3,!1));if(!g&&p<30)return(0,D.localize)(1,null);let w;return p<N?(w=p,E?w===1?l?(0,D.localize)(2,null,w):(0,D.localize)(3,null,w):l?(0,D.localize)(4,null,w):(0,D.localize)(5,null,w):w===1?l?(0,D.localize)(6,null,w):(0,D.localize)(7,null,w):l?(0,D.localize)(8,null,w):(0,D.localize)(9,null,w)):p<L?(w=Math.floor(p/N),E?w===1?l?(0,D.localize)(10,null,w):(0,D.localize)(11,null,w):l?(0,D.localize)(12,null,w):(0,D.localize)(13,null,w):w===1?l?(0,D.localize)(14,null,w):(0,D.localize)(15,null,w):l?(0,D.localize)(16,null,w):(0,D.localize)(17,null,w)):p<j?(w=Math.floor(p/L),E?w===1?l?(0,D.localize)(18,null,w):(0,D.localize)(19,null,w):l?(0,D.localize)(20,null,w):(0,D.localize)(21,null,w):w===1?l?(0,D.localize)(22,null,w):(0,D.localize)(23,null,w):l?(0,D.localize)(24,null,w):(0,D.localize)(25,null,w)):p<I?(w=Math.floor(p/j),E?w===1?(0,D.localize)(26,null,w):(0,D.localize)(27,null,w):w===1?(0,D.localize)(28,null,w):(0,D.localize)(29,null,w)):p<P?(w=Math.floor(p/I),E?w===1?l?(0,D.localize)(30,null,w):(0,D.localize)(31,null,w):l?(0,D.localize)(32,null,w):(0,D.localize)(33,null,w):w===1?l?(0,D.localize)(34,null,w):(0,D.localize)(35,null,w):l?(0,D.localize)(36,null,w):(0,D.localize)(37,null,w)):p<R?(w=Math.floor(p/P),E?w===1?l?(0,D.localize)(38,null,w):(0,D.localize)(39,null,w):l?(0,D.localize)(40,null,w):(0,D.localize)(41,null,w):w===1?l?(0,D.localize)(42,null,w):(0,D.localize)(43,null,w):l?(0,D.localize)(44,null,w):(0,D.localize)(45,null,w)):(w=Math.floor(p/R),E?w===1?l?(0,D.localize)(46,null,w):(0,D.localize)(47,null,w):l?(0,D.localize)(48,null,w):(0,D.localize)(49,null,w):w===1?l?(0,D.localize)(50,null,w):(0,D.localize)(51,null,w):l?(0,D.localize)(52,null,w):(0,D.localize)(53,null,w))}e.$Dm=m;function C(k){return k.getFullYear()+"-"+String(k.getMonth()+1).padStart(2,"0")+"-"+String(k.getDate()).padStart(2,"0")+"T"+String(k.getHours()).padStart(2,"0")+":"+String(k.getMinutes()).padStart(2,"0")+":"+String(k.getSeconds()).padStart(2,"0")+"."+(k.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}e.$Em=C}),define(ue[136],de([13,9]),function(oe,e){return oe.create("vs/base/common/errorMessage",e)}),define(ue[38],de([0,1,17,12,136]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ui=e.$Ti=e.$Si=void 0;function j(k,E){return E&&(k.stack||k.stacktrace)?L.localize(0,null,P(k),I(k.stack)||I(k.stacktrace)):P(k)}function I(k){return Array.isArray(k)?k.join(`
`):k}function P(k){return k.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${k.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof k.code=="string"&&typeof k.errno=="number"&&typeof k.syscall=="string"?L.localize(1,null,k.message):k.message||L.localize(2,null)}function R(k=null,E=!1){if(!k)return L.localize(3,null);if(Array.isArray(k)){const l=D.$Hb(k),g=R(l[0],E);return l.length>1?L.localize(4,null,g,l.length):g}if(N.$Kf(k))return k;if(k.detail){const l=k.detail;if(l.error)return j(l.error,E);if(l.exception)return j(l.exception,E)}return k.stack?j(k,E):k.message?k.message:L.localize(5,null)}e.$Si=R;function m(k){const E=k;return E instanceof Error&&Array.isArray(E.actions)}e.$Ti=m;function C(k,E){let l;return typeof k=="string"?l=new Error(k):l=k,l.actions=E,l}e.$Ui=C}),define(ue[137],de([13,9]),function(oe,e){return oe.create("vs/base/common/jsonErrorMessages",e)}),define(ue[138],de([0,1,137]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$fq=void 0;function N(L){switch(L){case 1:return(0,D.localize)(0,null);case 2:return(0,D.localize)(1,null);case 3:return(0,D.localize)(2,null);case 4:return(0,D.localize)(3,null);case 5:return(0,D.localize)(4,null);case 6:return(0,D.localize)(5,null);case 7:return(0,D.localize)(6,null);case 8:return(0,D.localize)(7,null);case 9:return(0,D.localize)(8,null);default:return""}}e.$fq=N}),define(ue[139],de([13,9]),function(oe,e){return oe.create("vs/base/common/platform",e)}),define(ue[5],de([0,1,139]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$J=e.$I=e.$H=e.$G=e.$F=e.$E=e.$D=e.OS=e.OperatingSystem=e.$B=e.$A=e.$z=e.$y=e.$x=e.Language=e.$w=e.$v=e.$u=e.$t=e.$s=e.$r=e.$q=e.$p=e.$o=e.$n=e.$m=e.$l=e.$k=e.$j=e.$i=e.$h=e.Platform=e.$g=void 0,e.$g="en";let N=!1,L=!1,j=!1,I=!1,P=!1,R=!1,m=!1,C=!1,k=!1,E=!1,l,g=e.$g,p=e.$g,w,h;const f=globalThis;let u;typeof f.vscode<"u"&&typeof f.vscode.process<"u"?u=f.vscode.process:typeof process<"u"&&(u=process);const c=typeof u?.versions?.electron=="string",b=c&&u?.type==="renderer";if(typeof u=="object"){N=u.platform==="win32",L=u.platform==="darwin",j=u.platform==="linux",I=j&&!!u.env.SNAP&&!!u.env.SNAP_REVISION,m=c,k=!!u.env.CI||!!u.env.BUILD_ARTIFACTSTAGINGDIRECTORY,l=e.$g,g=e.$g;const d=u.env.VSCODE_NLS_CONFIG;if(d)try{const v=JSON.parse(d),S=v.availableLanguages["*"];l=v.locale,p=v.osLocale,g=S||e.$g,w=v._translationsConfigFile}catch{}P=!0}else typeof navigator=="object"&&!b?(h=navigator.userAgent,N=h.indexOf("Windows")>=0,L=h.indexOf("Macintosh")>=0,C=(h.indexOf("Macintosh")>=0||h.indexOf("iPad")>=0||h.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,j=h.indexOf("Linux")>=0,E=h?.indexOf("Mobi")>=0,R=!0,l=D.getConfiguredDefaultLocale(D.localize(0,null))||e.$g,g=l,p=navigator.language):console.error("Unable to resolve platform.");var i;(function(d){d[d.Web=0]="Web",d[d.Mac=1]="Mac",d[d.Linux=2]="Linux",d[d.Windows=3]="Windows"})(i||(e.Platform=i={}));function r(d){switch(d){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}e.$h=r;let n=0;L?n=1:N?n=3:j&&(n=2),e.$i=N,e.$j=L,e.$k=j,e.$l=I,e.$m=P,e.$n=m,e.$o=R,e.$p=R&&typeof f.importScripts=="function",e.$q=e.$p?f.origin:void 0,e.$r=C,e.$s=E,e.$t=k,e.$u=n,e.$v=h,e.$w=g;var s;(function(d){function v(){return e.$w}d.value=v;function S(){return e.$w.length===2?e.$w==="en":e.$w.length>=3?e.$w[0]==="e"&&e.$w[1]==="n"&&e.$w[2]==="-":!1}d.isDefaultVariant=S;function A(){return e.$w==="en"}d.isDefault=A})(s||(e.Language=s={})),e.$x=l,e.$y=p,e.$z=w,e.$A=typeof f.postMessage=="function"&&!f.importScripts,e.$B=(()=>{if(e.$A){const d=[];f.addEventListener("message",S=>{if(S.data&&S.data.vscodeScheduleAsyncWork)for(let A=0,T=d.length;A<T;A++){const q=d[A];if(q.id===S.data.vscodeScheduleAsyncWork){d.splice(A,1),q.callback();return}}});let v=0;return S=>{const A=++v;d.push({id:A,callback:S}),f.postMessage({vscodeScheduleAsyncWork:A},"*")}}return d=>setTimeout(d)})();var t;(function(d){d[d.Windows=1]="Windows",d[d.Macintosh=2]="Macintosh",d[d.Linux=3]="Linux"})(t||(e.OperatingSystem=t={})),e.OS=L||C?2:N?1:3;let o=!0,a=!1;function y(){if(!a){a=!0;const d=new Uint8Array(2);d[0]=1,d[1]=2,o=new Uint16Array(d.buffer)[0]===(2<<8)+1}return o}e.$D=y,e.$E=!!(e.$v&&e.$v.indexOf("Chrome")>=0),e.$F=!!(e.$v&&e.$v.indexOf("Firefox")>=0),e.$G=!!(!e.$E&&e.$v&&e.$v.indexOf("Safari")>=0),e.$H=!!(e.$v&&e.$v.indexOf("Edg/")>=0),e.$I=!!(e.$v&&e.$v.indexOf("Android")>=0);function $(d){return parseFloat(d)>=20}e.$J=$}),define(ue[37],de([0,1,5]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ec=e.$dc=e.env=e.cwd=void 0;let N;const L=globalThis.vscode;if(typeof L<"u"&&typeof L.process<"u"){const j=L.process;N={get platform(){return j.platform},get arch(){return j.arch},get env(){return j.env},cwd(){return j.cwd()}}}else typeof process<"u"?N={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:N={get platform(){return D.$i?"win32":D.$j?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};e.cwd=N.cwd,e.env=N.env,e.$dc=N.platform,e.$ec=N.arch}),define(ue[16],de([0,1,37]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$tc=e.sep=e.$rc=e.$qc=e.$pc=e.$oc=e.$nc=e.$mc=e.$lc=e.$kc=e.$jc=e.$ic=e.$hc=e.$gc=e.$fc=void 0;const N=65,L=97,j=90,I=122,P=46,R=47,m=92,C=58,k=63;class E extends Error{constructor(r,n,s){let t;typeof n=="string"&&n.indexOf("not ")===0?(t="must not be",n=n.replace(/^not /,"")):t="must be";const o=r.indexOf(".")!==-1?"property":"argument";let a=`The "${r}" ${o} ${t} of type ${n}`;a+=`. Received type ${typeof s}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}}function l(i,r){if(i===null||typeof i!="object")throw new E(r,"Object",i)}function g(i,r){if(typeof i!="string")throw new E(r,"string",i)}const p=D.$dc==="win32";function w(i){return i===R||i===m}function h(i){return i===R}function f(i){return i>=N&&i<=j||i>=L&&i<=I}function u(i,r,n,s){let t="",o=0,a=-1,y=0,$=0;for(let d=0;d<=i.length;++d){if(d<i.length)$=i.charCodeAt(d);else{if(s($))break;$=R}if(s($)){if(!(a===d-1||y===1))if(y===2){if(t.length<2||o!==2||t.charCodeAt(t.length-1)!==P||t.charCodeAt(t.length-2)!==P){if(t.length>2){const v=t.lastIndexOf(n);v===-1?(t="",o=0):(t=t.slice(0,v),o=t.length-1-t.lastIndexOf(n)),a=d,y=0;continue}else if(t.length!==0){t="",o=0,a=d,y=0;continue}}r&&(t+=t.length>0?`${n}..`:"..",o=2)}else t.length>0?t+=`${n}${i.slice(a+1,d)}`:t=i.slice(a+1,d),o=d-a-1;a=d,y=0}else $===P&&y!==-1?++y:y=-1}return t}function c(i,r){l(r,"pathObject");const n=r.dir||r.root,s=r.base||`${r.name||""}${r.ext||""}`;return n?n===r.root?`${n}${s}`:`${n}${i}${s}`:s}e.$fc={resolve(...i){let r="",n="",s=!1;for(let t=i.length-1;t>=-1;t--){let o;if(t>=0){if(o=i[t],g(o,"path"),o.length===0)continue}else r.length===0?o=D.cwd():(o=D.env[`=${r}`]||D.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==r.toLowerCase()&&o.charCodeAt(2)===m)&&(o=`${r}\\`));const a=o.length;let y=0,$="",d=!1;const v=o.charCodeAt(0);if(a===1)w(v)&&(y=1,d=!0);else if(w(v))if(d=!0,w(o.charCodeAt(1))){let S=2,A=S;for(;S<a&&!w(o.charCodeAt(S));)S++;if(S<a&&S!==A){const T=o.slice(A,S);for(A=S;S<a&&w(o.charCodeAt(S));)S++;if(S<a&&S!==A){for(A=S;S<a&&!w(o.charCodeAt(S));)S++;(S===a||S!==A)&&($=`\\\\${T}\\${o.slice(A,S)}`,y=S)}}}else y=1;else f(v)&&o.charCodeAt(1)===C&&($=o.slice(0,2),y=2,a>2&&w(o.charCodeAt(2))&&(d=!0,y=3));if($.length>0)if(r.length>0){if($.toLowerCase()!==r.toLowerCase())continue}else r=$;if(s){if(r.length>0)break}else if(n=`${o.slice(y)}\\${n}`,s=d,d&&r.length>0)break}return n=u(n,!s,"\\",w),s?`${r}\\${n}`:`${r}${n}`||"."},normalize(i){g(i,"path");const r=i.length;if(r===0)return".";let n=0,s,t=!1;const o=i.charCodeAt(0);if(r===1)return h(o)?"\\":i;if(w(o))if(t=!0,w(i.charCodeAt(1))){let y=2,$=y;for(;y<r&&!w(i.charCodeAt(y));)y++;if(y<r&&y!==$){const d=i.slice($,y);for($=y;y<r&&w(i.charCodeAt(y));)y++;if(y<r&&y!==$){for($=y;y<r&&!w(i.charCodeAt(y));)y++;if(y===r)return`\\\\${d}\\${i.slice($)}\\`;y!==$&&(s=`\\\\${d}\\${i.slice($,y)}`,n=y)}}}else n=1;else f(o)&&i.charCodeAt(1)===C&&(s=i.slice(0,2),n=2,r>2&&w(i.charCodeAt(2))&&(t=!0,n=3));let a=n<r?u(i.slice(n),!t,"\\",w):"";return a.length===0&&!t&&(a="."),a.length>0&&w(i.charCodeAt(r-1))&&(a+="\\"),s===void 0?t?`\\${a}`:a:t?`${s}\\${a}`:`${s}${a}`},isAbsolute(i){g(i,"path");const r=i.length;if(r===0)return!1;const n=i.charCodeAt(0);return w(n)||r>2&&f(n)&&i.charCodeAt(1)===C&&w(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let r,n;for(let o=0;o<i.length;++o){const a=i[o];g(a,"path"),a.length>0&&(r===void 0?r=n=a:r+=`\\${a}`)}if(r===void 0)return".";let s=!0,t=0;if(typeof n=="string"&&w(n.charCodeAt(0))){++t;const o=n.length;o>1&&w(n.charCodeAt(1))&&(++t,o>2&&(w(n.charCodeAt(2))?++t:s=!1))}if(s){for(;t<r.length&&w(r.charCodeAt(t));)t++;t>=2&&(r=`\\${r.slice(t)}`)}return e.$fc.normalize(r)},relative(i,r){if(g(i,"from"),g(r,"to"),i===r)return"";const n=e.$fc.resolve(i),s=e.$fc.resolve(r);if(n===s||(i=n.toLowerCase(),r=s.toLowerCase(),i===r))return"";let t=0;for(;t<i.length&&i.charCodeAt(t)===m;)t++;let o=i.length;for(;o-1>t&&i.charCodeAt(o-1)===m;)o--;const a=o-t;let y=0;for(;y<r.length&&r.charCodeAt(y)===m;)y++;let $=r.length;for(;$-1>y&&r.charCodeAt($-1)===m;)$--;const d=$-y,v=a<d?a:d;let S=-1,A=0;for(;A<v;A++){const q=i.charCodeAt(t+A);if(q!==r.charCodeAt(y+A))break;q===m&&(S=A)}if(A!==v){if(S===-1)return s}else{if(d>v){if(r.charCodeAt(y+A)===m)return s.slice(y+A+1);if(A===2)return s.slice(y+A)}a>v&&(i.charCodeAt(t+A)===m?S=A:A===2&&(S=3)),S===-1&&(S=0)}let T="";for(A=t+S+1;A<=o;++A)(A===o||i.charCodeAt(A)===m)&&(T+=T.length===0?"..":"\\..");return y+=S,T.length>0?`${T}${s.slice(y,$)}`:(s.charCodeAt(y)===m&&++y,s.slice(y,$))},toNamespacedPath(i){if(typeof i!="string"||i.length===0)return i;const r=e.$fc.resolve(i);if(r.length<=2)return i;if(r.charCodeAt(0)===m){if(r.charCodeAt(1)===m){const n=r.charCodeAt(2);if(n!==k&&n!==P)return`\\\\?\\UNC\\${r.slice(2)}`}}else if(f(r.charCodeAt(0))&&r.charCodeAt(1)===C&&r.charCodeAt(2)===m)return`\\\\?\\${r}`;return i},dirname(i){g(i,"path");const r=i.length;if(r===0)return".";let n=-1,s=0;const t=i.charCodeAt(0);if(r===1)return w(t)?i:".";if(w(t)){if(n=s=1,w(i.charCodeAt(1))){let y=2,$=y;for(;y<r&&!w(i.charCodeAt(y));)y++;if(y<r&&y!==$){for($=y;y<r&&w(i.charCodeAt(y));)y++;if(y<r&&y!==$){for($=y;y<r&&!w(i.charCodeAt(y));)y++;if(y===r)return i;y!==$&&(n=s=y+1)}}}}else f(t)&&i.charCodeAt(1)===C&&(n=r>2&&w(i.charCodeAt(2))?3:2,s=n);let o=-1,a=!0;for(let y=r-1;y>=s;--y)if(w(i.charCodeAt(y))){if(!a){o=y;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return i.slice(0,o)},basename(i,r){r!==void 0&&g(r,"ext"),g(i,"path");let n=0,s=-1,t=!0,o;if(i.length>=2&&f(i.charCodeAt(0))&&i.charCodeAt(1)===C&&(n=2),r!==void 0&&r.length>0&&r.length<=i.length){if(r===i)return"";let a=r.length-1,y=-1;for(o=i.length-1;o>=n;--o){const $=i.charCodeAt(o);if(w($)){if(!t){n=o+1;break}}else y===-1&&(t=!1,y=o+1),a>=0&&($===r.charCodeAt(a)?--a===-1&&(s=o):(a=-1,s=y))}return n===s?s=y:s===-1&&(s=i.length),i.slice(n,s)}for(o=i.length-1;o>=n;--o)if(w(i.charCodeAt(o))){if(!t){n=o+1;break}}else s===-1&&(t=!1,s=o+1);return s===-1?"":i.slice(n,s)},extname(i){g(i,"path");let r=0,n=-1,s=0,t=-1,o=!0,a=0;i.length>=2&&i.charCodeAt(1)===C&&f(i.charCodeAt(0))&&(r=s=2);for(let y=i.length-1;y>=r;--y){const $=i.charCodeAt(y);if(w($)){if(!o){s=y+1;break}continue}t===-1&&(o=!1,t=y+1),$===P?n===-1?n=y:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||t===-1||a===0||a===1&&n===t-1&&n===s+1?"":i.slice(n,t)},format:c.bind(null,"\\"),parse(i){g(i,"path");const r={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return r;const n=i.length;let s=0,t=i.charCodeAt(0);if(n===1)return w(t)?(r.root=r.dir=i,r):(r.base=r.name=i,r);if(w(t)){if(s=1,w(i.charCodeAt(1))){let S=2,A=S;for(;S<n&&!w(i.charCodeAt(S));)S++;if(S<n&&S!==A){for(A=S;S<n&&w(i.charCodeAt(S));)S++;if(S<n&&S!==A){for(A=S;S<n&&!w(i.charCodeAt(S));)S++;S===n?s=S:S!==A&&(s=S+1)}}}}else if(f(t)&&i.charCodeAt(1)===C){if(n<=2)return r.root=r.dir=i,r;if(s=2,w(i.charCodeAt(2))){if(n===3)return r.root=r.dir=i,r;s=3}}s>0&&(r.root=i.slice(0,s));let o=-1,a=s,y=-1,$=!0,d=i.length-1,v=0;for(;d>=s;--d){if(t=i.charCodeAt(d),w(t)){if(!$){a=d+1;break}continue}y===-1&&($=!1,y=d+1),t===P?o===-1?o=d:v!==1&&(v=1):o!==-1&&(v=-1)}return y!==-1&&(o===-1||v===0||v===1&&o===y-1&&o===a+1?r.base=r.name=i.slice(a,y):(r.name=i.slice(a,o),r.base=i.slice(a,y),r.ext=i.slice(o,y))),a>0&&a!==s?r.dir=i.slice(0,a-1):r.dir=r.root,r},sep:"\\",delimiter:";",win32:null,posix:null};const b=(()=>{if(p){const i=/\\/g;return()=>{const r=D.cwd().replace(i,"/");return r.slice(r.indexOf("/"))}}return()=>D.cwd()})();e.$gc={resolve(...i){let r="",n=!1;for(let s=i.length-1;s>=-1&&!n;s--){const t=s>=0?i[s]:b();g(t,"path"),t.length!==0&&(r=`${t}/${r}`,n=t.charCodeAt(0)===R)}return r=u(r,!n,"/",h),n?`/${r}`:r.length>0?r:"."},normalize(i){if(g(i,"path"),i.length===0)return".";const r=i.charCodeAt(0)===R,n=i.charCodeAt(i.length-1)===R;return i=u(i,!r,"/",h),i.length===0?r?"/":n?"./":".":(n&&(i+="/"),r?`/${i}`:i)},isAbsolute(i){return g(i,"path"),i.length>0&&i.charCodeAt(0)===R},join(...i){if(i.length===0)return".";let r;for(let n=0;n<i.length;++n){const s=i[n];g(s,"path"),s.length>0&&(r===void 0?r=s:r+=`/${s}`)}return r===void 0?".":e.$gc.normalize(r)},relative(i,r){if(g(i,"from"),g(r,"to"),i===r||(i=e.$gc.resolve(i),r=e.$gc.resolve(r),i===r))return"";const n=1,s=i.length,t=s-n,o=1,a=r.length-o,y=t<a?t:a;let $=-1,d=0;for(;d<y;d++){const S=i.charCodeAt(n+d);if(S!==r.charCodeAt(o+d))break;S===R&&($=d)}if(d===y)if(a>y){if(r.charCodeAt(o+d)===R)return r.slice(o+d+1);if(d===0)return r.slice(o+d)}else t>y&&(i.charCodeAt(n+d)===R?$=d:d===0&&($=0));let v="";for(d=n+$+1;d<=s;++d)(d===s||i.charCodeAt(d)===R)&&(v+=v.length===0?"..":"/..");return`${v}${r.slice(o+$)}`},toNamespacedPath(i){return i},dirname(i){if(g(i,"path"),i.length===0)return".";const r=i.charCodeAt(0)===R;let n=-1,s=!0;for(let t=i.length-1;t>=1;--t)if(i.charCodeAt(t)===R){if(!s){n=t;break}}else s=!1;return n===-1?r?"/":".":r&&n===1?"//":i.slice(0,n)},basename(i,r){r!==void 0&&g(r,"ext"),g(i,"path");let n=0,s=-1,t=!0,o;if(r!==void 0&&r.length>0&&r.length<=i.length){if(r===i)return"";let a=r.length-1,y=-1;for(o=i.length-1;o>=0;--o){const $=i.charCodeAt(o);if($===R){if(!t){n=o+1;break}}else y===-1&&(t=!1,y=o+1),a>=0&&($===r.charCodeAt(a)?--a===-1&&(s=o):(a=-1,s=y))}return n===s?s=y:s===-1&&(s=i.length),i.slice(n,s)}for(o=i.length-1;o>=0;--o)if(i.charCodeAt(o)===R){if(!t){n=o+1;break}}else s===-1&&(t=!1,s=o+1);return s===-1?"":i.slice(n,s)},extname(i){g(i,"path");let r=-1,n=0,s=-1,t=!0,o=0;for(let a=i.length-1;a>=0;--a){const y=i.charCodeAt(a);if(y===R){if(!t){n=a+1;break}continue}s===-1&&(t=!1,s=a+1),y===P?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||s===-1||o===0||o===1&&r===s-1&&r===n+1?"":i.slice(r,s)},format:c.bind(null,"/"),parse(i){g(i,"path");const r={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return r;const n=i.charCodeAt(0)===R;let s;n?(r.root="/",s=1):s=0;let t=-1,o=0,a=-1,y=!0,$=i.length-1,d=0;for(;$>=s;--$){const v=i.charCodeAt($);if(v===R){if(!y){o=$+1;break}continue}a===-1&&(y=!1,a=$+1),v===P?t===-1?t=$:d!==1&&(d=1):t!==-1&&(d=-1)}if(a!==-1){const v=o===0&&n?1:o;t===-1||d===0||d===1&&t===a-1&&t===o+1?r.base=r.name=i.slice(v,a):(r.name=i.slice(v,t),r.base=i.slice(v,a),r.ext=i.slice(t,a))}return o>0?r.dir=i.slice(0,o-1):n&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null},e.$gc.win32=e.$fc.win32=e.$fc,e.$gc.posix=e.$fc.posix=e.$gc,e.$hc=p?e.$fc.normalize:e.$gc.normalize,e.$ic=p?e.$fc.isAbsolute:e.$gc.isAbsolute,e.$jc=p?e.$fc.join:e.$gc.join,e.$kc=p?e.$fc.resolve:e.$gc.resolve,e.$lc=p?e.$fc.relative:e.$gc.relative,e.$mc=p?e.$fc.dirname:e.$gc.dirname,e.$nc=p?e.$fc.basename:e.$gc.basename,e.$oc=p?e.$fc.extname:e.$gc.extname,e.$pc=p?e.$fc.format:e.$gc.format,e.$qc=p?e.$fc.parse:e.$gc.parse,e.$rc=p?e.$fc.toNamespacedPath:e.$gc.toNamespacedPath,e.sep=p?e.$fc.sep:e.$gc.sep,e.$tc=p?e.$fc.delimiter:e.$gc.delimiter}),define(ue[48],de([0,1,16,5,27,12]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$fg=e.$eg=e.$dg=e.$cg=e.$bg=e.$ag=e.$_f=e.$$f=e.$0f=e.$9f=e.$8f=e.$7f=e.$6f=e.$5f=e.$4f=e.$3f=void 0;function I(o){return o===47||o===92}e.$3f=I;function P(o){return o.replace(/[\\/]/g,D.$gc.sep)}e.$4f=P;function R(o){return o.indexOf("/")===-1&&(o=P(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}e.$5f=R;function m(o,a=D.$gc.sep){if(!o)return"";const y=o.length,$=o.charCodeAt(0);if(I($)){if(I(o.charCodeAt(1))&&!I(o.charCodeAt(2))){let v=3;const S=v;for(;v<y&&!I(o.charCodeAt(v));v++);if(S!==v&&!I(o.charCodeAt(v+1))){for(v+=1;v<y;v++)if(I(o.charCodeAt(v)))return o.slice(0,v+1).replace(/[\\/]/g,a)}}return a}else if(h($)&&o.charCodeAt(1)===58)return I(o.charCodeAt(2))?o.slice(0,2)+a:o.slice(0,2);let d=o.indexOf("://");if(d!==-1){for(d+=3;d<y;d++)if(I(o.charCodeAt(d)))return o.slice(0,d+1)}return""}e.$6f=m;function C(o){if(!N.$i||!o||o.length<5)return!1;let a=o.charCodeAt(0);if(a!==92||(a=o.charCodeAt(1),a!==92))return!1;let y=2;const $=y;for(;y<o.length&&(a=o.charCodeAt(y),a!==92);y++);return!($===y||(a=o.charCodeAt(y+1),isNaN(a)||a===92))}e.$7f=C;const k=/[\\/:\*\?"<>\|]/g,E=/[\\/]/g,l=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function g(o,a=N.$i){const y=a?k:E;return!(!o||o.length===0||/^\s+$/.test(o)||(y.lastIndex=0,y.test(o))||a&&l.test(o)||o==="."||o===".."||a&&o[o.length-1]==="."||a&&o.length!==o.trim().length||o.length>255)}e.$8f=g;function p(o,a,y){const $=o===a;return!y||$?$:!o||!a?!1:(0,L.$bf)(o,a)}e.$9f=p;function w(o,a,y,$=D.sep){if(o===a)return!0;if(!o||!a||a.length>o.length)return!1;if(y){if(!(0,L.$cf)(o,a))return!1;if(a.length===o.length)return!0;let v=a.length;return a.charAt(a.length-1)===$&&v--,o.charAt(v)===$}return a.charAt(a.length-1)!==$&&(a+=$),o.indexOf(a)===0}e.$0f=w;function h(o){return o>=65&&o<=90||o>=97&&o<=122}e.$$f=h;function f(o,a){return N.$i&&o.endsWith(":")&&(o+=D.sep),(0,D.$ic)(o)||(o=(0,D.$jc)(a,o)),o=(0,D.$hc)(o),N.$i?(o=(0,L.$We)(o,D.sep),o.endsWith(":")&&(o+=D.sep)):(o=(0,L.$We)(o,D.sep),o||(o=D.sep)),o}e.$_f=f;function u(o){const a=(0,D.$hc)(o);return N.$i?o.length>3?!1:c(a)&&(o.length===2||a.charCodeAt(2)===92):a===D.$gc.sep}e.$ag=u;function c(o,a=N.$i){return a?h(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}e.$bg=c;function b(o,a=N.$i){return c(o,a)?o[0]:void 0}e.$cg=b;function i(o,a,y){return a.length>o.length?-1:o===a?0:(y&&(o=o.toLowerCase(),a=a.toLowerCase()),o.indexOf(a))}e.$dg=i;function r(o){const a=o.split(":");let y,$,d;for(const v of a){const S=Number(v);(0,j.$Of)(S)?$===void 0?$=S:d===void 0&&(d=S):y=y?[y,v].join(":"):v}if(!y)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:y,line:$!==void 0?$:void 0,column:d!==void 0?d:$!==void 0?1:void 0}}e.$eg=r;const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function t(o,a,y=8){let $="";for(let v=0;v<y;v++){let S;v===0&&N.$i&&!a&&(y===3||y===4)?S=s:S=n,$+=S.charAt(Math.floor(Math.random()*S.length))}let d;return a?d=`${a}-${$}`:d=$,o?(0,D.$jc)(o,d):d}e.$fg=t}),define(ue[140],de([0,1,16]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fs=e.$Es=e.$Ds=e.$Cs=e.$Bs=void 0,e.$Bs=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const N={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},L={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function j(C){const k=(0,D.$oc)(C),E=N[k.toLowerCase()];return E!==void 0?E:I(C)}e.$Cs=j;function I(C){const k=(0,D.$oc)(C);return L[k.toLowerCase()]}e.$Ds=I;function P(C){for(const k in L)if(L[k]===C)return k}e.$Es=P;const R=/^(.+)\/(.+?)(;.+)?$/;function m(C,k){const E=R.exec(C);return E?`${E[1].toLowerCase()}/${E[2].toLowerCase()}${E[3]??""}`:k?void 0:C}e.$Fs=m}),define(ue[91],de([0,1,5]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$1l=e.$Zl=e.TerminateResponseCode=e.Source=void 0;var N;(function(P){P[P.stdout=0]="stdout",P[P.stderr=1]="stderr"})(N||(e.Source=N={}));var L;(function(P){P[P.Success=0]="Success",P[P.Unknown=1]="Unknown",P[P.AccessDenied=2]="AccessDenied",P[P.ProcessNotFound=3]="ProcessNotFound"})(L||(e.TerminateResponseCode=L={}));function j(P,...R){const m=R.reduce((E,l)=>(E[l]=!0,E),{}),C=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(P).filter(E=>!m[E]).forEach(E=>{for(let l=0;l<C.length;l++)if(E.search(C[l])!==-1){delete P[E];break}})}e.$Zl=j;function I(P){P&&(delete P.DEBUG,D.$j&&delete P.DYLD_LIBRARY_PATH,D.$k&&delete P.LD_PRELOAD)}e.$1l=I}),define(ue[10],de([0,1,16,5]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$wc=e.$vc=e.URI=void 0;const L=/^\w[\w\d+.-]*$/,j=/^\//,I=/^\/\//;function P(s,t){if(!s.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${s.authority}", path: "${s.path}", query: "${s.query}", fragment: "${s.fragment}"}`);if(s.scheme&&!L.test(s.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(s.path){if(s.authority){if(!j.test(s.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(I.test(s.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function R(s,t){return!s&&!t?"file":s}function m(s,t){switch(s){case"https":case"http":case"file":t?t[0]!==k&&(t=k+t):t=k;break}return t}const C="",k="/",E=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class l{static isUri(t){return t instanceof l?!0:t?typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function":!1}constructor(t,o,a,y,$,d=!1){typeof t=="object"?(this.scheme=t.scheme||C,this.authority=t.authority||C,this.path=t.path||C,this.query=t.query||C,this.fragment=t.fragment||C):(this.scheme=R(t,d),this.authority=o||C,this.path=m(this.scheme,a||C),this.query=y||C,this.fragment=$||C,P(this,d))}get fsPath(){return c(this,!1)}with(t){if(!t)return this;let{scheme:o,authority:a,path:y,query:$,fragment:d}=t;return o===void 0?o=this.scheme:o===null&&(o=C),a===void 0?a=this.authority:a===null&&(a=C),y===void 0?y=this.path:y===null&&(y=C),$===void 0?$=this.query:$===null&&($=C),d===void 0?d=this.fragment:d===null&&(d=C),o===this.scheme&&a===this.authority&&y===this.path&&$===this.query&&d===this.fragment?this:new w(o,a,y,$,d)}static parse(t,o=!1){const a=E.exec(t);return a?new w(a[2]||C,n(a[4]||C),n(a[5]||C),n(a[7]||C),n(a[9]||C),o):new w(C,C,C,C,C)}static file(t){let o=C;if(N.$i&&(t=t.replace(/\\/g,k)),t[0]===k&&t[1]===k){const a=t.indexOf(k,2);a===-1?(o=t.substring(2),t=k):(o=t.substring(2,a),t=t.substring(a)||k)}return new w("file",o,t,C,C)}static from(t,o){return new w(t.scheme,t.authority,t.path,t.query,t.fragment,o)}static joinPath(t,...o){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let a;return N.$i&&t.scheme==="file"?a=l.file(D.$fc.join(c(t,!0),...o)).path:a=D.$gc.join(t.path,...o),t.with({path:a})}toString(t=!1){return b(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof l)return t;{const o=new w(t);return o._formatted=t.external??null,o._fsPath=t._sep===p?t.fsPath??null:null,o}}else return t}}e.URI=l;function g(s){return!s||typeof s!="object"?!1:typeof s.scheme=="string"&&(typeof s.authority=="string"||typeof s.authority>"u")&&(typeof s.path=="string"||typeof s.path>"u")&&(typeof s.query=="string"||typeof s.query>"u")&&(typeof s.fragment=="string"||typeof s.fragment>"u")}e.$vc=g;const p=N.$i?1:void 0;class w extends l{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=c(this,!1)),this._fsPath}toString(t=!1){return t?b(this,!0):(this._formatted||(this._formatted=b(this,!1)),this._formatted)}toJSON(){const t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=p),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}}const h={[58]:"%3A",[47]:"%2F",[63]:"%3F",[35]:"%23",[91]:"%5B",[93]:"%5D",[64]:"%40",[33]:"%21",[36]:"%24",[38]:"%26",[39]:"%27",[40]:"%28",[41]:"%29",[42]:"%2A",[43]:"%2B",[44]:"%2C",[59]:"%3B",[61]:"%3D",[32]:"%20"};function f(s,t,o){let a,y=-1;for(let $=0;$<s.length;$++){const d=s.charCodeAt($);if(d>=97&&d<=122||d>=65&&d<=90||d>=48&&d<=57||d===45||d===46||d===95||d===126||t&&d===47||o&&d===91||o&&d===93||o&&d===58)y!==-1&&(a+=encodeURIComponent(s.substring(y,$)),y=-1),a!==void 0&&(a+=s.charAt($));else{a===void 0&&(a=s.substr(0,$));const v=h[d];v!==void 0?(y!==-1&&(a+=encodeURIComponent(s.substring(y,$)),y=-1),a+=v):y===-1&&(y=$)}}return y!==-1&&(a+=encodeURIComponent(s.substring(y))),a!==void 0?a:s}function u(s){let t;for(let o=0;o<s.length;o++){const a=s.charCodeAt(o);a===35||a===63?(t===void 0&&(t=s.substr(0,o)),t+=h[a]):t!==void 0&&(t+=s[o])}return t!==void 0?t:s}function c(s,t){let o;return s.authority&&s.path.length>1&&s.scheme==="file"?o=`//${s.authority}${s.path}`:s.path.charCodeAt(0)===47&&(s.path.charCodeAt(1)>=65&&s.path.charCodeAt(1)<=90||s.path.charCodeAt(1)>=97&&s.path.charCodeAt(1)<=122)&&s.path.charCodeAt(2)===58?t?o=s.path.substr(1):o=s.path[1].toLowerCase()+s.path.substr(2):o=s.path,N.$i&&(o=o.replace(/\//g,"\\")),o}e.$wc=c;function b(s,t){const o=t?u:f;let a="",{scheme:y,authority:$,path:d,query:v,fragment:S}=s;if(y&&(a+=y,a+=":"),($||y==="file")&&(a+=k,a+=k),$){let A=$.indexOf("@");if(A!==-1){const T=$.substr(0,A);$=$.substr(A+1),A=T.lastIndexOf(":"),A===-1?a+=o(T,!1,!1):(a+=o(T.substr(0,A),!1,!1),a+=":",a+=o(T.substr(A+1),!1,!0)),a+="@"}$=$.toLowerCase(),A=$.lastIndexOf(":"),A===-1?a+=o($,!1,!0):(a+=o($.substr(0,A),!1,!0),a+=$.substr(A))}if(d){if(d.length>=3&&d.charCodeAt(0)===47&&d.charCodeAt(2)===58){const A=d.charCodeAt(1);A>=65&&A<=90&&(d=`/${String.fromCharCode(A+32)}:${d.substr(3)}`)}else if(d.length>=2&&d.charCodeAt(1)===58){const A=d.charCodeAt(0);A>=65&&A<=90&&(d=`${String.fromCharCode(A+32)}:${d.substr(2)}`)}a+=o(d,!0,!1)}return v&&(a+="?",a+=o(v,!1,!1)),S&&(a+="#",a+=t?S:f(S,!1,!1)),a}function i(s){try{return decodeURIComponent(s)}catch{return s.length>3?s.substr(0,3)+i(s.substr(3)):s}}const r=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function n(s){return s.match(r)?s.replace(r,t=>i(t)):s}}),define(ue[141],de([0,1,10]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.$Iq=e.$Hq=e.$Gq=void 0;function N(m){const C=m;return C&&typeof C.type=="string"&&typeof C.severity=="string"}e.$Gq=N;function L(m){const C=[];let k;try{const E=JSON.parse(m.arguments),l=E[E.length-1];l&&l.__$stack&&(E.pop(),k=l.__$stack),C.push(...E)}catch{C.push("Unable to log remote console arguments",m.arguments)}return{args:C,stack:k}}e.$Hq=L;function j(m){if(typeof m!="string")return j(L(m).stack);const C=m;if(C){const k=I(C),E=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(k||"");if(E&&E.length===4)return{uri:D.URI.file(E[1]),line:Number(E[2]),column:Number(E[3])}}}e.$Iq=j;function I(m){if(!m)return m;const C=m.indexOf(`
`);return C===-1?m:m.substring(0,C)}function P(m,C){const{args:k,stack:E}=L(m),l=typeof k[0]=="string"&&k.length===1;let g=I(E);g&&(g=`(${g.trim()})`);let p=[];if(typeof k[0]=="string"?g&&l?p=[`%c[${C}] %c${k[0]} %c${g}`,R("blue"),R(""),R("grey")]:p=[`%c[${C}] %c${k[0]}`,R("blue"),R(""),...k.slice(1)]:p=[`%c[${C}]%`,R("blue"),...k],g&&!l&&p.push(g),typeof console[m.severity]!="function")throw new Error("Unknown console method");console[m.severity].apply(console,p)}e.log=P;function R(m){return`color: ${m}`}}),define(ue[68],de([0,1,14,10]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Eh=e.$Dh=e.$Ch=void 0;function L(R){return JSON.stringify(R,I)}e.$Ch=L;function j(R){let m=JSON.parse(R);return m=P(m),m}e.$Dh=j;function I(R,m){return m instanceof RegExp?{$mid:2,source:m.source,flags:m.flags}:m}function P(R,m=0){if(!R||m>200)return R;if(typeof R=="object"){switch(R.$mid){case 1:return N.URI.revive(R);case 2:return new RegExp(R.source,R.flags);case 17:return new Date(R.source)}if(R instanceof D.$ke||R instanceof Uint8Array)return R;if(Array.isArray(R))for(let C=0;C<R.length;++C)R[C]=P(R[C],m+1);else for(const C in R)Object.hasOwnProperty.call(R,C)&&(R[C]=P(R[C],m+1))}return R}e.$Eh=P}),define(ue[25],de([0,1,7,5,27,10]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$qg=e.$pg=e.$og=e.$ng=e.$mg=e.$lg=e.$kg=e.$jg=e.$ig=e.$hg=e.$gg=e.Schemas=void 0;var I;(function(E){E.inMemory="inmemory",E.vscode="vscode",E.internal="private",E.walkThrough="walkThrough",E.walkThroughSnippet="walkThroughSnippet",E.http="http",E.https="https",E.file="file",E.mailto="mailto",E.untitled="untitled",E.data="data",E.command="command",E.vscodeRemote="vscode-remote",E.vscodeRemoteResource="vscode-remote-resource",E.vscodeManagedRemoteResource="vscode-managed-remote-resource",E.vscodeUserData="vscode-userdata",E.vscodeCustomEditor="vscode-custom-editor",E.vscodeNotebookCell="vscode-notebook-cell",E.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",E.vscodeNotebookCellOutput="vscode-notebook-cell-output",E.vscodeInteractiveInput="vscode-interactive-input",E.vscodeSettings="vscode-settings",E.vscodeWorkspaceTrust="vscode-workspace-trust",E.vscodeTerminal="vscode-terminal",E.vscodeChatSesssion="vscode-chat-editor",E.webviewPanel="webview-panel",E.vscodeWebview="vscode-webview",E.extension="extension",E.aiChat="cursor.aichat",E.aiReader="cursor.aireader",E.vscodeFileResource="vscode-file",E.tmp="tmp",E.vsls="vsls",E.vscodeSourceControl="vscode-scm"})(I||(e.Schemas=I={}));function P(E,l){return j.URI.isUri(E)?(0,L.$bf)(E.scheme,l):(0,L.$cf)(E,l+":")}e.$gg=P;function R(E,...l){return l.some(g=>P(E,g))}e.$hg=R,e.$ig="vscode-tkn",e.$jg="tkn";class m{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${I.vscodeRemoteResource}`}setPreferredWebSchema(l){this.d=l}setDelegate(l){this.e=l}setServerRootPath(l){this.f=`${l}/${I.vscodeRemoteResource}`}set(l,g,p){this.a[l]=g,this.b[l]=p}setConnectionToken(l,g){this.c[l]=g}getPreferredWebSchema(){return this.d}rewrite(l){if(this.e)try{return this.e(l)}catch(u){return D.$1(u),l}const g=l.authority;let p=this.a[g];p&&p.indexOf(":")!==-1&&p.indexOf("[")===-1&&(p=`[${p}]`);const w=this.b[g],h=this.c[g];let f=`path=${encodeURIComponent(l.path)}`;return typeof h=="string"&&(f+=`&${e.$jg}=${encodeURIComponent(h)}`),j.URI.from({scheme:N.$o?this.d:I.vscodeRemoteResource,authority:`${p}:${w}`,path:this.f,query:f})}}e.$kg=new m,e.$lg="vs/../../extensions",e.$mg="vs/../../node_modules",e.$ng="vs/../../node_modules.asar",e.$og="vs/../../node_modules.asar.unpacked",e.$pg="vscode-app";class C{static{this.a=e.$pg}asBrowserUri(l){const g=this.b(l,oe);return this.uriToBrowserUri(g)}uriToBrowserUri(l){return l.scheme===I.vscodeRemote?e.$kg.rewrite(l):l.scheme===I.file&&(N.$m||N.$q===`${I.vscodeFileResource}://${C.a}`)?l.with({scheme:I.vscodeFileResource,authority:l.authority||C.a,query:null,fragment:null}):l}asFileUri(l){const g=this.b(l,oe);return this.uriToFileUri(g)}uriToFileUri(l){return l.scheme===I.vscodeFileResource?l.with({scheme:I.file,authority:l.authority!==C.a?l.authority:null,query:null,fragment:null}):l}b(l,g){return j.URI.isUri(l)?l:j.URI.parse(g.toUrl(l))}}e.$qg=new C;var k;(function(E){const l=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);E.CoopAndCoep=Object.freeze(l.get("3"));const g="vscode-coi";function p(h){let f;typeof h=="string"?f=new URL(h).searchParams:h instanceof URL?f=h.searchParams:j.URI.isUri(h)&&(f=new URL(h.toString(!0)).searchParams);const u=f?.get(g);if(u)return l.get(u)}E.getHeadersFromQuery=p;function w(h,f,u){if(!globalThis.crossOriginIsolated)return;const c=f&&u?"3":u?"2":"1";h instanceof URLSearchParams?h.set(g,c):h[g]=c}E.addSearchParam=w})(k||(e.COI=k={}))}),define(ue[20],de([0,1,48,25,16,5,27,10]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Tg=e.DataUri=e.$Sg=e.$Rg=e.$Qg=e.$Pg=e.$Og=e.$Ng=e.$Mg=e.$Lg=e.$Kg=e.$Jg=e.$Ig=e.$Hg=e.$Gg=e.$Fg=e.$Eg=e.$Dg=e.$Cg=e.$Bg=e.$Ag=e.$zg=e.$yg=e.$xg=void 0;function R(l){return(0,P.$wc)(l,!0)}e.$xg=R;class m{constructor(g){this.a=g}compare(g,p,w=!1){return g===p?0:(0,I.$7e)(this.getComparisonKey(g,w),this.getComparisonKey(p,w))}isEqual(g,p,w=!1){return g===p?!0:!g||!p?!1:this.getComparisonKey(g,w)===this.getComparisonKey(p,w)}getComparisonKey(g,p=!1){return g.with({path:this.a(g)?g.path.toLowerCase():void 0,fragment:p?null:void 0}).toString()}ignorePathCasing(g){return this.a(g)}isEqualOrParent(g,p,w=!1){if(g.scheme===p.scheme){if(g.scheme===N.Schemas.file)return D.$0f(R(g),R(p),this.a(g))&&g.query===p.query&&(w||g.fragment===p.fragment);if((0,e.$Og)(g.authority,p.authority))return D.$0f(g.path,p.path,this.a(g),"/")&&g.query===p.query&&(w||g.fragment===p.fragment)}return!1}joinPath(g,...p){return P.URI.joinPath(g,...p)}basenameOrAuthority(g){return(0,e.$Gg)(g)||g.authority}basename(g){return L.$gc.basename(g.path)}extname(g){return L.$gc.extname(g.path)}dirname(g){if(g.path.length===0)return g;let p;return g.scheme===N.Schemas.file?p=P.URI.file(L.$mc(R(g))).path:(p=L.$gc.dirname(g.path),g.authority&&p.length&&p.charCodeAt(0)!==47&&(console.error(`dirname("${g.toString})) resulted in a relative path`),p="/")),g.with({path:p})}normalizePath(g){if(!g.path.length)return g;let p;return g.scheme===N.Schemas.file?p=P.URI.file(L.$hc(R(g))).path:p=L.$gc.normalize(g.path),g.with({path:p})}relativePath(g,p){if(g.scheme!==p.scheme||!(0,e.$Og)(g.authority,p.authority))return;if(g.scheme===N.Schemas.file){const f=L.$lc(R(g),R(p));return j.$i?D.$4f(f):f}let w=g.path||"/";const h=p.path||"/";if(this.a(g)){let f=0;for(const u=Math.min(w.length,h.length);f<u&&!(w.charCodeAt(f)!==h.charCodeAt(f)&&w.charAt(f).toLowerCase()!==h.charAt(f).toLowerCase());f++);w=h.substr(0,f)+w.substr(f)}return L.$gc.relative(w,h)}resolvePath(g,p){if(g.scheme===N.Schemas.file){const w=P.URI.file(L.$kc(R(g),p));return g.with({authority:w.authority,path:w.path})}return p=D.$5f(p),g.with({path:L.$gc.resolve(g.path,p)})}isAbsolutePath(g){return!!g.path&&g.path[0]==="/"}isEqualAuthority(g,p){return g===p||g!==void 0&&p!==void 0&&(0,I.$bf)(g,p)}hasTrailingPathSeparator(g,p=L.sep){if(g.scheme===N.Schemas.file){const w=R(g);return w.length>D.$6f(w).length&&w[w.length-1]===p}else{const w=g.path;return w.length>1&&w.charCodeAt(w.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(g.fsPath)}}removeTrailingPathSeparator(g,p=L.sep){return(0,e.$Pg)(g,p)?g.with({path:g.path.substr(0,g.path.length-1)}):g}addTrailingPathSeparator(g,p=L.sep){let w=!1;if(g.scheme===N.Schemas.file){const h=R(g);w=h!==void 0&&h.length===D.$6f(h).length&&h[h.length-1]===p}else{p="/";const h=g.path;w=h.length===1&&h.charCodeAt(h.length-1)===47}return!w&&!(0,e.$Pg)(g,p)?g.with({path:g.path+"/"}):g}}e.$yg=m,e.$zg=new m(()=>!1),e.$Ag=new m(l=>l.scheme===N.Schemas.file?!j.$k:!0),e.$Bg=new m(l=>!0),e.$Cg=e.$zg.isEqual.bind(e.$zg),e.$Dg=e.$zg.isEqualOrParent.bind(e.$zg),e.$Eg=e.$zg.getComparisonKey.bind(e.$zg),e.$Fg=e.$zg.basenameOrAuthority.bind(e.$zg),e.$Gg=e.$zg.basename.bind(e.$zg),e.$Hg=e.$zg.extname.bind(e.$zg),e.$Ig=e.$zg.dirname.bind(e.$zg),e.$Jg=e.$zg.joinPath.bind(e.$zg),e.$Kg=e.$zg.normalizePath.bind(e.$zg),e.$Lg=e.$zg.relativePath.bind(e.$zg),e.$Mg=e.$zg.resolvePath.bind(e.$zg),e.$Ng=e.$zg.isAbsolutePath.bind(e.$zg),e.$Og=e.$zg.isEqualAuthority.bind(e.$zg),e.$Pg=e.$zg.hasTrailingPathSeparator.bind(e.$zg),e.$Qg=e.$zg.removeTrailingPathSeparator.bind(e.$zg),e.$Rg=e.$zg.addTrailingPathSeparator.bind(e.$zg);function C(l,g){const p=[];for(let w=0;w<l.length;w++){const h=g(l[w]);l.some((f,u)=>u===w?!1:(0,e.$Dg)(h,g(f)))||p.push(l[w])}return p}e.$Sg=C;var k;(function(l){l.META_DATA_LABEL="label",l.META_DATA_DESCRIPTION="description",l.META_DATA_SIZE="size",l.META_DATA_MIME="mime";function g(p){const w=new Map;p.path.substring(p.path.indexOf(";")+1,p.path.lastIndexOf(";")).split(";").forEach(u=>{const[c,b]=u.split(":");c&&b&&w.set(c,b)});const f=p.path.substring(0,p.path.indexOf(";"));return f&&w.set(l.META_DATA_MIME,f),w}l.parseMetaData=g})(k||(e.DataUri=k={}));function E(l,g,p){if(g){let w=l.path;return w&&w[0]!==L.$gc.sep&&(w=L.$gc.sep+w),l.with({scheme:p,authority:g,path:w})}return l.with({scheme:p})}e.$Tg=E}),define(ue[6],de([0,1,26,7,3,2,20,5,130,53]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$yh=e.$xh=e.$wh=e.$vh=e.$uh=e.$th=e.Promises=e.$sh=e.$rh=e.$qh=e.$ph=e.$oh=e.$nh=e.$mh=e.$lh=e.$kh=e.$jh=e.$ih=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=e.$7g=e.$6g=e.$5g=e.$4g=e.$3g=e.$2g=e.$1g=e.$Zg=e.$Yg=e.$Xg=e.$Wg=e.$Vg=e.$Ug=void 0;function C(ee){return!!ee&&typeof ee.then=="function"}e.$Ug=C;function k(ee){const X=new D.$7d,ie=ee(X.token),ce=new Promise((fe,be)=>{const le=X.token.onCancellationRequested(()=>{le.dispose(),be(new N.$5)});Promise.resolve(ie).then(re=>{le.dispose(),X.dispose(),fe(re)},re=>{le.dispose(),X.dispose(),be(re)})});return new class{cancel(){X.cancel(),X.dispose()}then(fe,be){return ce.then(fe,be)}catch(fe){return this.then(void 0,fe)}finally(fe){return ce.finally(fe)}}}e.$Vg=k;function E(ee,X,ie){return new Promise((ce,fe)=>{const be=X.onCancellationRequested(()=>{be.dispose(),ce(ie)});ee.then(ce,fe).finally(()=>be.dispose())})}e.$Wg=E;function l(ee,X){return new Promise((ie,ce)=>{const fe=X.onCancellationRequested(()=>{fe.dispose(),ce(new N.$5)});ee.then(ie,ce).finally(()=>fe.dispose())})}e.$Xg=l;async function g(ee){let X=-1;const ie=ee.map((ce,fe)=>ce.then(be=>(X=fe,be)));try{return await Promise.race(ie)}finally{ee.forEach((ce,fe)=>{fe!==X&&ce.cancel()})}}e.$Yg=g;function p(ee,X,ie){let ce;const fe=setTimeout(()=>{ce?.(void 0),ie?.()},X);return Promise.race([ee.finally(()=>clearTimeout(fe)),new Promise(be=>ce=be)])}e.$Zg=p;function w(ee){return new Promise((X,ie)=>{const ce=ee();C(ce)?ce.then(X,ie):X(ce)})}e.$1g=w;class h{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(X){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=X,!this.b){const ie=()=>{if(this.b=null,this.f)return;const ce=this.queue(this.d);return this.d=null,ce};this.b=new Promise(ce=>{this.a.then(ie,ie).then(ce)})}return new Promise((ie,ce)=>{this.b.then(ie,ce)})}return this.a=X(),new Promise((ie,ce)=>{this.a.then(fe=>{this.a=null,ie(fe)},fe=>{this.a=null,ce(fe)})})}dispose(){this.f=!0}}e.$2g=h;class f{constructor(){this.a=Promise.resolve(null)}queue(X){return this.a=this.a.then(()=>X(),()=>X())}}e.$3g=f;class u{constructor(){this.a=new Map}queue(X,ie){const fe=(this.a.get(X)??Promise.resolve()).catch(()=>{}).then(ie).finally(()=>{this.a.get(X)===fe&&this.a.delete(X)});return this.a.set(X,fe),fe}}e.$4g=u;const c=(ee,X)=>{let ie=!0;const ce=setTimeout(()=>{ie=!1,X()},ee);return{isTriggered:()=>ie,dispose:()=>{clearTimeout(ce),ie=!1}}},b=ee=>{let X=!0;return queueMicrotask(()=>{X&&(X=!1,ee())}),{isTriggered:()=>X,dispose:()=>{X=!1}}};class i{constructor(X){this.defaultDelay=X,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(X,ie=this.defaultDelay){this.g=X,this.h(),this.b||(this.b=new Promise((fe,be)=>{this.d=fe,this.f=be}).then(()=>{if(this.b=null,this.d=null,this.g){const fe=this.g;return this.g=null,fe()}}));const ce=()=>{this.a=null,this.d?.(null)};return this.a=ie===R.$Td?b(ce):c(ie,ce),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new N.$5),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$5g=i;class r{constructor(X){this.a=new i(X),this.b=new h}trigger(X,ie){return this.a.trigger(()=>this.b.queue(X),ie)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$6g=r;class n{constructor(){this.a=!1,this.b=new Promise((X,ie)=>{this.d=X})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$7g=n;class s extends n{constructor(X){super(),this.f=setTimeout(()=>this.open(),X)}open(){clearTimeout(this.f),super.open()}}e.$8g=s;function t(ee,X){return X?new Promise((ie,ce)=>{const fe=setTimeout(()=>{be.dispose(),ie()},ee),be=X.onCancellationRequested(()=>{clearTimeout(fe),be.dispose(),ce(new N.$5)})}):k(ie=>t(ee,ie))}e.$9g=t;function o(ee,X=0,ie){const ce=setTimeout(()=>{ee(),ie&&fe.dispose()},X),fe=(0,j.$Rc)(()=>{clearTimeout(ce),ie?.deleteAndLeak(fe)});return ie?.add(fe),fe}e.$0g=o;function a(ee){const X=[];let ie=0;const ce=ee.length;function fe(){return ie<ce?ee[ie++]():null}function be(le){le!=null&&X.push(le);const re=fe();return re?re.then(be):Promise.resolve(X)}return Promise.resolve(null).then(be)}e.$$g=a;function y(ee,X=ce=>!!ce,ie=null){let ce=0;const fe=ee.length,be=()=>{if(ce>=fe)return Promise.resolve(ie);const le=ee[ce++];return Promise.resolve(le()).then(me=>X(me)?Promise.resolve(me):be())};return be()}e.$_g=y;function $(ee,X=ce=>!!ce,ie=null){if(ee.length===0)return Promise.resolve(ie);let ce=ee.length;const fe=()=>{ce=-1;for(const be of ee)be.cancel?.()};return new Promise((be,le)=>{for(const re of ee)re.then(me=>{--ce>=0&&X(me)?(fe(),be(me)):ce===0&&be(ie)}).catch(me=>{--ce>=0&&(fe(),le(me))})})}e.$ah=$;class d{constructor(X){this.a=0,this.b=!1,this.f=X,this.g=[],this.d=0,this.h=new L.$Wd}whenIdle(){return this.size>0?L.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(X){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((ie,ce)=>{this.g.push({factory:X,c:ie,e:ce}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const X=this.g.shift();this.d++;const ie=X.factory();ie.then(X.c,X.e),ie.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$bh=d;class v extends d{constructor(){super(1)}}e.$ch=v;class S{constructor(){this.a=new J,this.b=0}queue(X){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,X())):this.a.run(this.b++,X())}}e.$dh=S;class A{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const X=new V;return this.b.add(X),X.p}g(){for(const[,X]of this.a)if(X.size>0)return!1;return!0}queueSize(X,ie=I.$zg){const ce=ie.getComparisonKey(X);return this.a.get(ce)?.size??0}queueFor(X,ie,ce=I.$zg){const fe=ce.getComparisonKey(X);let be=this.a.get(fe);if(!be){be=new v;const le=this.f++,re=L.Event.once(be.onDrained)(()=>{be?.dispose(),this.a.delete(fe),this.h(),this.d?.deleteAndDispose(le),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new j.$3c),this.d.set(le,re),this.a.set(fe,be)}return be.queue(ie)}h(){this.g()&&this.j()}j(){for(const X of this.b)X.complete();this.b.clear()}dispose(){for(const[,X]of this.a)X.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$eh=A;class T{constructor(X,ie){this.a=-1,typeof X=="function"&&typeof ie=="number"&&this.setIfNotSet(X,ie)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(X,ie){this.cancel(),this.a=setTimeout(()=>{this.a=-1,X()},ie)}setIfNotSet(X,ie){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,X()},ie))}}e.$fh=T;class q{constructor(){this.d=void 0}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(X,ie,ce=globalThis){this.cancel();const fe=ce.setInterval(()=>{X()},ie);this.d=(0,j.$Rc)(()=>{ce.clearInterval(fe),this.d=void 0})}dispose(){this.cancel()}}e.$gh=q;class M{constructor(X,ie){this.b=-1,this.a=X,this.d=ie,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(X=this.d){this.cancel(),this.b=setTimeout(this.f,X)}get delay(){return this.d}set delay(X){this.d=X}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$hh=M;class Y{constructor(X,ie){ie%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${ie}ms is not a multiple of 1000ms.`),this.a=X,this.b=ie,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(X=this.b){X%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${X}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(X/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$ih=Y;class G extends M{constructor(X,ie){super(X,ie),this.j=[]}work(X){this.j.push(X),this.isScheduled()||this.schedule()}h(){const X=this.j;this.j=[],this.a?.(X)}dispose(){this.j=[],super.dispose()}}e.$jh=G;class Q extends j.$Tc{constructor(X,ie){super(),this.g=X,this.h=ie,this.a=[],this.b=this.D(new j.$Uc),this.f=!1}get pending(){return this.a.length}work(X){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+X.length>this.g.maxBufferedWork)return!1}else if(this.pending+X.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const ie of X)this.a.push(ie);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new M(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$kh=Q,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$mh=(ee,X)=>{(0,P.$B)(()=>{if(ie)return;const ce=Date.now()+15;X(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,ce-Date.now())}}))});let ie=!1;return{dispose(){ie||(ie=!0)}}}:e.$mh=(ee,X,ie)=>{const ce=ee.requestIdleCallback(X,typeof ie=="number"?{timeout:ie}:void 0);let fe=!1;return{dispose(){fe||(fe=!0,ee.cancelIdleCallback(ce))}}},e.$lh=ee=>(0,e.$mh)(globalThis,ee)}();class F{constructor(X,ie){this.g=!1,this.d=()=>{try{this.j=ie()}catch(ce){this.l=ce}finally{this.g=!0}},this.f=(0,e.$mh)(X,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$nh=F;class te extends F{constructor(X){super(globalThis,X)}}e.$oh=te;async function H(ee,X,ie){let ce;for(let fe=0;fe<ie;fe++)try{return await ee()}catch(be){ce=be,await t(X)}throw ce}e.$ph=H;class J{isRunning(X){return typeof X=="number"?this.a?.taskId===X:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(X,ie,ce){return this.a={taskId:X,cancel:()=>ce?.(),promise:ie},ie.then(()=>this.d(X),()=>this.d(X)),ie}d(X){this.a&&X===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const X=this.b;this.b=void 0,X.run().then(X.promiseResolve,X.promiseReject)}}queue(X){if(this.b)this.b.run=X;else{let ie,ce;const fe=new Promise((be,le)=>{ie=be,ce=le});this.b={run:X,promise:fe,promiseResolve:ie,promiseReject:ce}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$qh=J;class x{constructor(X,ie=()=>Date.now()){this.d=X,this.f=ie,this.a=0,this.b=0}increment(){const X=this.f();return X-this.a>this.d&&(this.a=X,this.b=0),this.b++,this.b}}e.$rh=x;var se;(function(ee){ee[ee.Resolved=0]="Resolved",ee[ee.Rejected=1]="Rejected"})(se||(se={}));class V{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((X,ie)=>{this.a=X,this.b=ie})}complete(X){return new Promise(ie=>{this.a(X),this.d={outcome:0,value:X},ie()})}error(X){return new Promise(ie=>{this.b(X),this.d={outcome:1,value:X},ie()})}cancel(){return this.error(new N.$5)}}e.$sh=V;var ne;(function(ee){async function X(ce){let fe;const be=await Promise.all(ce.map(le=>le.then(re=>re,re=>{fe||(fe=re)})));if(typeof fe<"u")throw fe;return be}ee.settled=X;function ie(ce){return new Promise(async(fe,be)=>{try{await ce(fe,be)}catch(le){be(le)}})}ee.withAsyncBody=ie})(ne||(e.Promises=ne={}));class K{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(X){this.a=void 0,this.b=void 0,this.d=!1,this.promise=X.then(ie=>(this.a=ie,this.d=!0,ie),ie=>{throw this.b=ie,this.d=!0,ie})}requireValue(){if(!this.d)throw new N.$cb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$th=K;class z{constructor(X){this.b=X,this.a=new m.$V(()=>new K(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$uh=z;var U;(function(ee){ee[ee.Initial=0]="Initial",ee[ee.DoneOK=1]="DoneOK",ee[ee.DoneError=2]="DoneError"})(U||(U={}));class O{static fromArray(X){return new O(ie=>{ie.emitMany(X)})}static fromPromise(X){return new O(async ie=>{ie.emitMany(await X)})}static fromPromises(X){return new O(async ie=>{await Promise.all(X.map(async ce=>ie.emitOne(await ce)))})}static merge(X){return new O(async ie=>{await Promise.all(X.map(async ce=>{for await(const fe of ce)ie.emitOne(fe)}))})}static{this.EMPTY=O.fromArray([])}constructor(X){this.a=0,this.b=[],this.d=null,this.f=new L.$Wd,queueMicrotask(async()=>{const ie={emitOne:ce=>this.g(ce),emitMany:ce=>this.h(ce),reject:ce=>this.k(ce)};try{await Promise.resolve(X(ie)),this.j()}catch(ce){this.k(ce)}finally{ie.emitOne=void 0,ie.emitMany=void 0,ie.reject=void 0}})}[Symbol.asyncIterator](){let X=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(X<this.b.length)return{done:!1,value:this.b[X++]};if(this.a===1)return{done:!0,value:void 0};await L.Event.toPromise(this.f.event)}while(!0)}}}static map(X,ie){return new O(async ce=>{for await(const fe of X)ce.emitOne(ie(fe))})}map(X){return O.map(this,X)}static filter(X,ie){return new O(async ce=>{for await(const fe of X)ie(fe)&&ce.emitOne(fe)})}filter(X){return O.filter(this,X)}static coalesce(X){return O.filter(X,ie=>!!ie)}coalesce(){return O.coalesce(this)}static async toPromise(X){const ie=[];for await(const ce of X)ie.push(ce);return ie}toPromise(){return O.toPromise(this)}g(X){this.a===0&&(this.b.push(X),this.f.fire())}h(X){this.a===0&&(this.b=this.b.concat(X),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(X){this.a===0&&(this.a=2,this.d=X,this.f.fire())}}e.$vh=O;class W extends O{constructor(X,ie){super(ie),this.l=X}cancel(){this.l.cancel()}}e.$wh=W;function B(ee){const X=new D.$7d,ie=ee(X.token);return new W(X,async ce=>{const fe=X.token.onCancellationRequested(()=>{fe.dispose(),X.dispose(),ce.reject(new N.$5)});try{for await(const be of ie){if(X.token.isCancellationRequested)return;ce.emitOne(be)}fe.dispose(),X.dispose()}catch(be){fe.dispose(),X.dispose(),ce.reject(be)}})}e.$xh=B;class _{constructor(){this.a=new V,this.b=new O(ce=>{if(X){ce.reject(X);return}return ie&&ce.emitMany(ie),this.d=fe=>ce.reject(fe),this.f=fe=>ce.emitOne(fe),this.a.p});let X,ie;this.f=ce=>{ie||(ie=[]),ie.push(ce)},this.d=ce=>{X||(X=ce)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(X){this.d(X),this.a.complete()}emitOne(X){this.f(X)}}e.$yh=_}),define(ue[92],de([0,1,17,6,48,35,16,5,27]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Wj=e.$Vj=e.$Uj=e.$Tj=e.$Sj=e.$Rj=e.$Qj=e.$Pj=e.$Oj=e.$Nj=e.$Mj=e.$Lj=void 0;function m(){return Object.create(null)}e.$Lj=m,e.$Mj="**",e.$Nj="/";const C="[/\\\\]",k="[^/\\\\]",E=/\//g;function l(x,se){switch(x){case 0:return"";case 1:return`${k}*?`;default:return`(?:${C}|${k}+${C}${se?`|${C}${k}+`:""})*?`}}function g(x,se){if(!x)return[];const V=[];let ne=!1,K=!1,z="";for(const U of x){switch(U){case se:if(!ne&&!K){V.push(z),z="";continue}break;case"{":ne=!0;break;case"}":ne=!1;break;case"[":K=!0;break;case"]":K=!1;break}z+=U}return z&&V.push(z),V}e.$Oj=g;function p(x){if(!x)return"";let se="";const V=g(x,e.$Nj);if(V.every(ne=>ne===e.$Mj))se=".*";else{let ne=!1;V.forEach((K,z)=>{if(K===e.$Mj){if(ne)return;se+=l(2,z===V.length-1)}else{let U=!1,O="",W=!1,B="";for(const _ of K){if(_!=="}"&&U){O+=_;continue}if(W&&(_!=="]"||!B)){let ee;_==="-"?ee=_:(_==="^"||_==="!")&&!B?ee="^":_===e.$Nj?ee="":ee=(0,R.$Qe)(_),B+=ee;continue}switch(_){case"{":U=!0;continue;case"[":W=!0;continue;case"}":{const X=`(?:${g(O,",").map(ie=>p(ie)).join("|")})`;se+=X,U=!1,O="";break}case"]":{se+="["+B+"]",W=!1,B="";break}case"?":se+=k;continue;case"*":se+=l(1);continue;default:se+=(0,R.$Qe)(_)}}z<V.length-1&&(V[z+1]!==e.$Mj||z+2<V.length)&&(se+=C)}ne=K===e.$Mj})}return se}const w=/^\*\*\/\*\.[\w\.-]+$/,h=/^\*\*\/([\w\.-]+)\/?$/,f=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,u=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,c=/^\*\*((\/[\w\.-]+)+)\/?$/,b=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,i=new j.$Dc(1e4),r=function(){return!1},n=function(){return null};function s(x,se){if(!x)return n;let V;typeof x!="string"?V=x.pattern:V=x,V=V.trim();const ne=`${V}_${!!se.trimForExclusions}`;let K=i.get(ne);if(K)return t(K,x);let z;return w.test(V)?K=a(V.substr(4),V):(z=h.exec(o(V,se)))?K=y(z[1],V):(se.trimForExclusions?u:f).test(V)?K=$(V,se):(z=c.exec(o(V,se)))?K=d(z[1].substr(1),V,!0):(z=b.exec(o(V,se)))?K=d(z[1],V,!1):K=v(V),i.set(ne,K),t(K,x)}function t(x,se){if(typeof se=="string")return x;const V=function(ne,K){return(0,L.$0f)(ne,se.base,!P.$k)?x((0,R.$Ve)(ne.substr(se.base.length),I.sep),K):null};return V.allBasenames=x.allBasenames,V.allPaths=x.allPaths,V.basenames=x.basenames,V.patterns=x.patterns,V}function o(x,se){return se.trimForExclusions&&x.endsWith("/**")?x.substr(0,x.length-2):x}function a(x,se){return function(V,ne){return typeof V=="string"&&V.endsWith(x)?se:null}}function y(x,se){const V=`/${x}`,ne=`\\${x}`,K=function(U,O){return typeof U!="string"?null:O?O===x?se:null:U===x||U.endsWith(V)||U.endsWith(ne)?se:null},z=[x];return K.basenames=z,K.patterns=[se],K.allBasenames=z,K}function $(x,se){const V=Q(x.slice(1,-1).split(",").map(O=>s(O,se)).filter(O=>O!==n),x),ne=V.length;if(!ne)return n;if(ne===1)return V[0];const K=function(O,W){for(let B=0,_=V.length;B<_;B++)if(V[B](O,W))return x;return null},z=V.find(O=>!!O.allBasenames);z&&(K.allBasenames=z.allBasenames);const U=V.reduce((O,W)=>W.allPaths?O.concat(W.allPaths):O,[]);return U.length&&(K.allPaths=U),K}function d(x,se,V){const ne=I.sep===I.$gc.sep,K=ne?x:x.replace(E,I.sep),z=I.sep+K,U=I.$gc.sep+x;let O;return V?O=function(W,B){return typeof W=="string"&&(W===K||W.endsWith(z)||!ne&&(W===x||W.endsWith(U)))?se:null}:O=function(W,B){return typeof W=="string"&&(W===K||!ne&&W===x)?se:null},O.allPaths=[(V?"*/":"./")+x],O}function v(x){try{const se=new RegExp(`^${p(x)}$`);return function(V){return se.lastIndex=0,typeof V=="string"&&se.test(V)?x:null}}catch{return n}}function S(x,se,V){return!x||typeof se!="string"?!1:A(x)(se,void 0,V)}e.$Pj=S;function A(x,se={}){if(!x)return r;if(typeof x=="string"||T(x)){const V=s(x,se);if(V===n)return r;const ne=function(K,z){return!!V(K,z)};return V.allBasenames&&(ne.allBasenames=V.allBasenames),V.allPaths&&(ne.allPaths=V.allPaths),ne}return Y(x,se)}e.$Qj=A;function T(x){const se=x;return se?typeof se.base=="string"&&typeof se.pattern=="string":!1}e.$Rj=T;function q(x){return x.allBasenames||[]}e.$Sj=q;function M(x){return x.allPaths||[]}e.$Tj=M;function Y(x,se){const V=Q(Object.getOwnPropertyNames(x).map(O=>G(O,x[O],se)).filter(O=>O!==n)),ne=V.length;if(!ne)return n;if(!V.some(O=>!!O.requiresSiblings)){if(ne===1)return V[0];const O=function(_,ee){let X;for(let ie=0,ce=V.length;ie<ce;ie++){const fe=V[ie](_,ee);if(typeof fe=="string")return fe;(0,N.$Ug)(fe)&&(X||(X=[]),X.push(fe))}return X?(async()=>{for(const ie of X){const ce=await ie;if(typeof ce=="string")return ce}return null})():null},W=V.find(_=>!!_.allBasenames);W&&(O.allBasenames=W.allBasenames);const B=V.reduce((_,ee)=>ee.allPaths?_.concat(ee.allPaths):_,[]);return B.length&&(O.allPaths=B),O}const K=function(O,W,B){let _,ee;for(let X=0,ie=V.length;X<ie;X++){const ce=V[X];ce.requiresSiblings&&B&&(W||(W=(0,I.$nc)(O)),_||(_=W.substr(0,W.length-(0,I.$oc)(O).length)));const fe=ce(O,W,_,B);if(typeof fe=="string")return fe;(0,N.$Ug)(fe)&&(ee||(ee=[]),ee.push(fe))}return ee?(async()=>{for(const X of ee){const ie=await X;if(typeof ie=="string")return ie}return null})():null},z=V.find(O=>!!O.allBasenames);z&&(K.allBasenames=z.allBasenames);const U=V.reduce((O,W)=>W.allPaths?O.concat(W.allPaths):O,[]);return U.length&&(K.allPaths=U),K}function G(x,se,V){if(se===!1)return n;const ne=s(x,V);if(ne===n)return n;if(typeof se=="boolean")return ne;if(se){const K=se.when;if(typeof K=="string"){const z=(U,O,W,B)=>{if(!B||!ne(U,O))return null;const _=K.replace("$(basename)",()=>W),ee=B(_);return(0,N.$Ug)(ee)?ee.then(X=>X?x:null):ee?x:null};return z.requiresSiblings=!0,z}}return ne}function Q(x,se){const V=x.filter(O=>!!O.basenames);if(V.length<2)return x;const ne=V.reduce((O,W)=>{const B=W.basenames;return B?O.concat(B):O},[]);let K;if(se){K=[];for(let O=0,W=ne.length;O<W;O++)K.push(se)}else K=V.reduce((O,W)=>{const B=W.patterns;return B?O.concat(B):O},[]);const z=function(O,W){if(typeof O!="string")return null;if(!W){let _;for(_=O.length;_>0;_--){const ee=O.charCodeAt(_-1);if(ee===47||ee===92)break}W=O.substr(_)}const B=ne.indexOf(W);return B!==-1?K[B]:null};z.basenames=ne,z.patterns=K,z.allBasenames=ne;const U=x.filter(O=>!O.basenames);return U.push(z),U}function F(x,se){return(0,D.$ub)(x,se,(V,ne)=>typeof V=="string"&&typeof ne=="string"?V===ne:typeof V!="string"&&typeof ne!="string"?V.base===ne.base&&V.pattern===ne.pattern:!1)}e.$Uj=F;function te(x){return x.startsWith("{")&&x.endsWith("}")?x.slice(1,-1).split(","):[x]}function H({globsNewLineSeparated:x,properGlob:se}){const V=[];return x&&V.push(...x.split(`
`)),se&&V.push(...te(se)),V.filter(ne=>ne!=="").map(ne=>ne.match(/^[a-zA-Z0-9]/)?"*"+ne:ne)}e.$Vj=H;function J({globsNewLineSeparated:x,properGlob:se}){const V=H({globsNewLineSeparated:x,properGlob:se});if(V.length!==0)return`{${V.join(",")}}`}e.$Wj=J}),define(ue[93],de([0,1,14,10]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$dn=e.$cn=e.$bn=e.$an=e.$_m=void 0;function L(k){return k.toJSON()}class j{constructor(E){this.a=E}transformIncoming(E){const l=this.a.transformIncoming(E);return l===E?E:L(N.URI.from(l))}transformOutgoing(E){const l=this.a.transformOutgoing(E);return l===E?E:L(N.URI.from(l))}transformOutgoingURI(E){const l=this.a.transformOutgoing(E);return l===E?E:N.URI.from(l)}transformOutgoingScheme(E){return this.a.transformOutgoingScheme(E)}}e.$_m=j,e.$an=new class{transformIncoming(k){return k}transformOutgoing(k){return k}transformOutgoingURI(k){return k}transformOutgoingScheme(k){return k}};function I(k,E,l){if(!k||l>200)return null;if(typeof k=="object"){if(k instanceof N.URI)return E.transformOutgoing(k);for(const g in k)if(Object.hasOwnProperty.call(k,g)){const p=I(k[g],E,l+1);p!==null&&(k[g]=p)}}return null}function P(k,E){const l=I(k,E,0);return l===null?k:l}e.$bn=P;function R(k,E,l,g){if(!k||g>200)return null;if(typeof k=="object"){if(k.$mid===1)return l?N.URI.revive(E.transformIncoming(k)):E.transformIncoming(k);if(k instanceof D.$ke)return null;for(const p in k)if(Object.hasOwnProperty.call(k,p)){const w=R(k[p],E,l,g+1);w!==null&&(k[p]=w)}}return null}function m(k,E){const l=R(k,E,!1,0);return l===null?k:l}e.$cn=m;function C(k,E){const l=R(k,E,!0,0);return l===null?k:l}e.$dn=C}),define(ue[142],de([0,1,36,47,31,131,266,55,5]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$in=e.$hn=e.$gn=e.$fn=void 0,e.$fn=new class{c(u){return this.a||(this.a=N.$bi.forStrings(),this.a.set("00-50-56",!0),this.a.set("00-0C-29",!0),this.a.set("00-05-69",!0),this.a.set("00-03-FF",!0),this.a.set("00-1C-42",!0),this.a.set("00-16-3E",!0),this.a.set("08-00-27",!0),this.a.set("00:50:56",!0),this.a.set("00:0C:29",!0),this.a.set("00:05:69",!0),this.a.set("00:03:FF",!0),this.a.set("00:1C:42",!0),this.a.set("00:16:3E",!0),this.a.set("08:00:27",!0)),!!this.a.findSubstr(u)}value(){if(this.b===void 0){let u=0,c=0;const b=(0,D.networkInterfaces)();for(const i in b){const r=b[i];if(r)for(const{mac:n,internal:s}of r)s||(c+=1,this.c(n.toUpperCase())&&(u+=1))}this.b=c>0?u/c:0}return this.b}};let m;async function C(u){return m||(m=(async()=>await w(!1)||L.$sg())()),m}e.$gn=C;async function k(u){try{const c=await new Promise((i,r)=>{oe(["crypto"],i,r)}),b=(0,j.$en)();return c.createHash("sha256").update(b,"utf8").digest("hex")}catch(c){u(c);return}}const l={darwin:"ioreg -rd1 -c IOPlatformExpertDevice",win32:`${{native:"%windir%\\System32",mixed:"%windir%\\sysnative\\cmd.exe /c %windir%\\System32",notdefined:""}[g()]}\\REG.exe QUERY HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid`,linux:"( cat /var/lib/dbus/machine-id /etc/machine-id 2> /dev/null || hostname ) | head -n 1 || :",freebsd:"kenv -q smbios.system.uuid || sysctl -n kern.hostuuid"};function g(){return I.platform!=="win32"?"notdefined":process.arch==="ia32"&&process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?"mixed":"native"}function p(u){switch(I.platform){case"darwin":return u.split("IOPlatformUUID")[1].split(`
`)[0].replace(/\=|\s+|\"/ig,"").toLowerCase();case"win32":return u.toString().split("REG_SZ")[1].replace(/\r+|\n+|\s+/ig,"").toLowerCase();case"linux":return u.toString().replace(/\r+|\n+|\s+/ig,"").toLowerCase();case"freebsd":return u.toString().replace(/\r+|\n+|\s+/ig,"").toLowerCase();default:throw new Error(`Unsupported platform: ${process.platform}`)}}async function w(u){let c=p((0,P.execSync)(l[I.platform],{timeout:5e3}).toString()),b;try{b=(await new Promise((r,n)=>{oe(["crypto"],r,n)})).createHash("sha256").update(c,"utf8").digest("hex")}catch{b=L.$sg()}return u?c:b}e.$hn=w;const h="Software\\Microsoft\\SQMClient";async function f(u){if(R.$i){const c=await new Promise((b,i)=>{oe(["@vscode/windows-registry"],b,i)});try{return c.GetStringRegKey("HKEY_LOCAL_MACHINE",h,"MachineId")||""}catch(b){return u(b),""}}return""}e.$in=f}),define(ue[32],de([0,1,56,36,267,6,48,89,16,5,20,10]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Promises=e.writeFileSync=e.configureFlushOnWrite=e.SymlinkSupport=e.whenDeleted=e.readdirSync=e.rimrafSync=e.RimRafMode=void 0;var E;(function(G){G[G.UNLINK=0]="UNLINK",G[G.MOVE=1]="MOVE"})(E||(e.RimRafMode=E={}));async function l(G,Q=E.UNLINK,F){if((0,I.$ag)(G))throw new Error("rimraf - will refuse to recursively delete root");return Q===E.UNLINK?p(G):g(G,F)}async function g(G,Q=(0,I.$fg)((0,N.tmpdir)())){try{try{await D.promises.rename(G,Q)}catch(F){return F.code==="ENOENT"?void 0:p(G)}p(Q).catch(F=>{})}catch(F){if(F.code!=="ENOENT")throw F}}async function p(G){return(0,L.promisify)(D.rm)(G,{recursive:!0,force:!0,maxRetries:3})}function w(G){if((0,I.$ag)(G))throw new Error("rimraf - will refuse to recursively delete root");D.rmSync(G,{recursive:!0,force:!0,maxRetries:3})}e.rimrafSync=w;async function h(G,Q){return c(await(Q?f(G):(0,L.promisify)(D.readdir)(G)))}async function f(G){try{return await(0,L.promisify)(D.readdir)(G,{withFileTypes:!0})}catch(te){console.warn("[node.js fs] readdir with filetypes failed with error: ",te)}const Q=[],F=await h(G);for(const te of F){let H=!1,J=!1,x=!1;try{const se=await e.Promises.lstat((0,R.$jc)(G,te));H=se.isFile(),J=se.isDirectory(),x=se.isSymbolicLink()}catch(se){console.warn("[node.js fs] unexpected error from lstat after readdir: ",se)}Q.push({name:te,isFile:()=>H,isDirectory:()=>J,isSymbolicLink:()=>x})}return Q}function u(G){return c(D.readdirSync(G))}e.readdirSync=u;function c(G){return G.map(Q=>typeof Q=="string"?m.$j?(0,P.$Ol)(Q):Q:(Q.name=m.$j?(0,P.$Ol)(Q.name):Q.name,Q))}async function b(G){const Q=await h(G),F=[];for(const te of Q)await r.existsDirectory((0,R.$jc)(G,te))&&F.push(te);return F}function i(G,Q=1e3){return new Promise(F=>{let te=!1;const H=setInterval(()=>{te||(te=!0,D.access(G,J=>{te=!1,J&&(clearInterval(H),F(void 0))}))},Q)})}e.whenDeleted=i;var r;(function(G){async function Q(H){let J;try{if(J=await e.Promises.lstat(H),!J.isSymbolicLink())return{stat:J}}catch{}try{return{stat:await e.Promises.stat(H),symbolicLink:J?.isSymbolicLink()?{dangling:!1}:void 0}}catch(x){if(x.code==="ENOENT"&&J)return{stat:J,symbolicLink:{dangling:!0}};if(m.$i&&x.code==="EACCES")try{return{stat:await e.Promises.stat(await e.Promises.readlink(H)),symbolicLink:{dangling:!1}}}catch(se){if(se.code==="ENOENT"&&J)return{stat:J,symbolicLink:{dangling:!0}};throw se}throw x}}G.stat=Q;async function F(H){try{const{stat:J,symbolicLink:x}=await G.stat(H);return J.isFile()&&x?.dangling!==!0}catch{}return!1}G.existsFile=F;async function te(H){try{const{stat:J,symbolicLink:x}=await G.stat(H);return J.isDirectory()&&x?.dangling!==!0}catch{}return!1}G.existsDirectory=te})(r||(e.SymlinkSupport=r={}));const n=new j.$eh;function s(G,Q,F){return n.queueFor(k.URI.file(G),()=>{const te=$(F);return new Promise((H,J)=>a(G,Q,te,x=>x?J(x):H()))},C.$Ag)}let t=!0;function o(G){t=G}e.configureFlushOnWrite=o;function a(G,Q,F,te){if(!t)return D.writeFile(G,Q,{mode:F.mode,flag:F.flag},te);D.open(G,F.flag,F.mode,(H,J)=>{if(H)return te(H);D.writeFile(J,Q,x=>{if(x)return D.close(J,()=>te(x));D.fdatasync(J,se=>(se&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",se),o(!1)),D.close(J,V=>te(V))))})})}function y(G,Q,F){const te=$(F);if(!t)return D.writeFileSync(G,Q,{mode:te.mode,flag:te.flag});const H=D.openSync(G,te.flag,te.mode);try{D.writeFileSync(H,Q);try{D.fdatasyncSync(H)}catch(J){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",J),o(!1)}}finally{D.closeSync(H)}}e.writeFileSync=y;function $(G){return G?{mode:typeof G.mode=="number"?G.mode:438,flag:typeof G.flag=="string"?G.flag:"w"}:{mode:438,flag:"w"}}async function d(G,Q,F=6e4){if(G!==Q)try{m.$i&&typeof F=="number"?await v(G,Q,Date.now(),F):await(0,L.promisify)(D.rename)(G,Q)}catch(te){if(G.toLowerCase()!==Q.toLowerCase()&&te.code==="EXDEV"||G.endsWith("."))await S(G,Q,{preserveSymlinks:!1}),await l(G,E.MOVE);else throw te}}async function v(G,Q,F,te,H=0){try{return await(0,L.promisify)(D.rename)(G,Q)}catch(J){if(J.code!=="EACCES"&&J.code!=="EPERM"&&J.code!=="EBUSY")throw J;if(Date.now()-F>=te)throw console.error(`[node.js fs] rename failed after ${H} retries with error: ${J}`),J;if(H===0){let x=!1;try{const{stat:se}=await r.stat(Q);se.isFile()||(x=!0)}catch{}if(x)throw J}return await(0,j.$9g)(Math.min(100,H*10)),v(G,Q,F,te,H+1)}}async function S(G,Q,F){return T(G,Q,{root:{source:G,target:Q},options:F,handledSourcePaths:new Set})}const A=511;async function T(G,Q,F){if(F.handledSourcePaths.has(G))return;F.handledSourcePaths.add(G);const{stat:te,symbolicLink:H}=await r.stat(G);if(H){if(F.options.preserveSymlinks)try{return await Y(G,Q,F)}catch{}if(H.dangling)return}return te.isDirectory()?q(G,Q,te.mode&A,F):M(G,Q,te.mode&A)}async function q(G,Q,F,te){await e.Promises.mkdir(Q,{recursive:!0,mode:F});const H=await h(G);for(const J of H)await T((0,R.$jc)(G,J),(0,R.$jc)(Q,J),te)}async function M(G,Q,F){await e.Promises.copyFile(G,Q),await e.Promises.chmod(Q,F)}async function Y(G,Q,F){let te=await e.Promises.readlink(G);(0,I.$0f)(te,F.root.source,!m.$k)&&(te=(0,R.$jc)(F.root.target,te.substr(F.root.source.length+1))),await e.Promises.symlink(te,Q)}e.Promises=new class{get access(){return(0,L.promisify)(D.access)}get stat(){return(0,L.promisify)(D.stat)}get lstat(){return(0,L.promisify)(D.lstat)}get utimes(){return(0,L.promisify)(D.utimes)}get read(){return(G,Q,F,te,H)=>new Promise((J,x)=>{D.read(G,Q,F,te,H,(se,V,ne)=>se?x(se):J({bytesRead:V,buffer:ne}))})}get readFile(){return(0,L.promisify)(D.readFile)}get write(){return(G,Q,F,te,H)=>new Promise((J,x)=>{D.write(G,Q,F,te,H,(se,V,ne)=>se?x(se):J({bytesWritten:V,buffer:ne}))})}get appendFile(){return(0,L.promisify)(D.appendFile)}get fdatasync(){return(0,L.promisify)(D.fdatasync)}get truncate(){return(0,L.promisify)(D.truncate)}get copyFile(){return(0,L.promisify)(D.copyFile)}get open(){return(0,L.promisify)(D.open)}get close(){return(0,L.promisify)(D.close)}get symlink(){return(0,L.promisify)(D.symlink)}get readlink(){return(0,L.promisify)(D.readlink)}get chmod(){return(0,L.promisify)(D.chmod)}get mkdir(){return(0,L.promisify)(D.mkdir)}get unlink(){return(0,L.promisify)(D.unlink)}get rmdir(){return(0,L.promisify)(D.rmdir)}get realpath(){return(0,L.promisify)(D.realpath)}async exists(G){try{return await e.Promises.access(G),!0}catch{return!1}}get readdir(){return h}get readDirsInDir(){return b}get writeFile(){return s}get rm(){return l}get rename(){return d}get copy(){return S}}}),define(ue[143],de([0,1,56,16,5,27,32]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Qq=e.$Pq=e.$Oq=e.$Nq=void 0;function P(E){if(L.$k)return E;const l=(0,N.$mc)(E);if(E===l)return E;const g=((0,N.$nc)(E)||E).toLowerCase();try{const w=(0,I.readdirSync)(l).filter(h=>h.toLowerCase()===g);if(w.length===1){const h=P(l);if(h)return(0,N.$jc)(h,w[0])}else if(w.length>1){const h=w.indexOf(g);if(h>=0){const f=P(l);if(f)return(0,N.$jc)(f,w[h])}}}catch{}return null}e.$Nq=P;async function R(E){if(L.$k)return E;const l=(0,N.$mc)(E);if(E===l)return E;const g=((0,N.$nc)(E)||E).toLowerCase();try{const w=(await I.Promises.readdir(l)).filter(h=>h.toLowerCase()===g);if(w.length===1){const h=await R(l);if(h)return(0,N.$jc)(h,w[0])}else if(w.length>1){const h=w.indexOf(g);if(h>=0){const f=await R(l);if(f)return(0,N.$jc)(f,w[h])}}}catch{}return null}e.$Oq=R;async function m(E){try{return await I.Promises.realpath(E)}catch{const g=k(E);return await I.Promises.access(g,D.constants.R_OK),g}}e.$Pq=m;function C(E){try{return D.realpathSync(E)}catch{const g=k(E);return D.accessSync(g,D.constants.R_OK),g}}e.$Qq=C;function k(E){return(0,j.$We)((0,N.$hc)(E),N.sep)}}),define(ue[144],de([0,1,16,5,37,91,12,32]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.win32=e.$3l=e.$2l=e.TerminateResponseCode=e.Source=void 0,Object.defineProperty(e,"Source",{enumerable:!0,get:function(){return j.Source}}),Object.defineProperty(e,"TerminateResponseCode",{enumerable:!0,get:function(){return j.TerminateResponseCode}});function R(k=L.env){return k.comspec||"cmd.exe"}e.$2l=R;function m(k){let E=[],l=!1;const g=function(p){if(l){E.push(p);return}(!k.send(p,h=>{if(h&&console.error(h),l=!1,E.length>0){const f=E.slice(0);E=[],f.forEach(u=>g(u))}})||N.$i)&&(l=!0)};return{send:g}}e.$3l=m;var C;(function(k){async function E(l,g,p){if(D.$ic(l))return l;if(g===void 0&&(g=L.cwd()),D.$mc(l)!=="."||(p===void 0&&I.$Kf(L.env.PATH)&&(p=L.env.PATH.split(D.$tc)),p===void 0||p.length===0))return D.$jc(g,l);async function h(f){if(await P.Promises.exists(f)){let u;try{u=await P.Promises.stat(f)}catch(c){c.message.startsWith("EACCES")&&(u=await P.Promises.lstat(f))}return u?!u.isDirectory():!1}return!1}for(const f of p){let u;if(D.$ic(f)?u=D.$jc(f,l):u=D.$jc(g,f,l),await h(u))return u;let c=u+".com";if(await h(c)||(c=u+".exe",await h(c)))return c}return D.$jc(g,l)}k.findExecutable=E})(C||(e.win32=C={}))}),define(ue[145],de([0,1,55,25]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$os=void 0;function L(I){return new Promise((P,R)=>{let m;const C=new Map;function k(l,g,p,w,h){const f=C.get(g);if(l===I||f){const u={name:E(p),cmd:p,pid:l,ppid:g,load:w,mem:h};C.set(l,u),l===I&&(m=u),f&&(f.children||(f.children=[]),f.children.push(u),f.children.length>1&&(f.children=f.children.sort((c,b)=>c.pid-b.pid)))}}function E(l){const g=/--utility-sub-type=network/i,p=/--crashes-directory/i,w=/\\pipe\\winpty-control/i,h=/conhost\.exe.+--headless/i,f=/--type=([a-zA-Z-]+)/;if(p.exec(l))return"electron-crash-reporter";if(w.exec(l))return"winpty-agent";if(h.exec(l))return"conpty-agent";let u=f.exec(l);if(u&&u.length===2)return u[1]==="renderer"?"window":u[1]==="utility"?g.exec(l)?"utility-network-service":"utility-process":u[1]==="extensionHost"?"extension-host":u[1];const c=/[a-zA-Z-]+\.js/g;let b="";do u=c.exec(l),u&&(b+=u+" ");while(u);return b&&l.indexOf("node ")<0&&l.indexOf("node.exe")<0?`electron-nodejs (${b})`:l}if(process.platform==="win32"){const l=g=>g.indexOf("\\\\?\\")===0||g.indexOf("\\??\\")===0?g.substring(4):g.indexOf('"\\\\?\\')===0||g.indexOf('"\\??\\')===0?'"'+g.substring(5):g;new Promise((g,p)=>{oe(["@vscode/windows-process-tree"],g,p)}).then(g=>{g.getProcessList(I,p=>{if(!p){R(new Error(`Root process ${I} not found`));return}g.getProcessCpuUsage(p,w=>{const h=new Map;w.forEach(f=>{const u=l(f.commandLine||"");h.set(f.pid,{name:E(u),cmd:u,pid:f.pid,ppid:f.ppid,load:f.cpu||0,mem:f.memory||0})}),m=h.get(I),m?(h.forEach(f=>{const u=h.get(f.ppid);u&&(u.children||(u.children=[]),u.children.push(f))}),h.forEach(f=>{f.children&&(f.children=f.children.sort((u,c)=>u.pid-c.pid))}),P(m)):R(new Error(`Root process ${I} not found`))})},g.ProcessDataFlag.CommandLine|g.ProcessDataFlag.Memory)})}else{let l=function(){let g=[m];const p=[];for(;g.length;){const h=g.shift();h&&(p.push(h.pid),h.children&&(g=g.concat(h.children)))}let w=JSON.stringify(N.$qg.asFileUri("vs/base/node/cpuUsage.sh").fsPath);w+=" "+p.join(" "),(0,D.exec)(w,{},(h,f,u)=>{if(h||u)R(h||new Error(u.toString()));else{const c=f.toString().split(`
`);for(let b=0;b<p.length;b++){const i=C.get(p[b]);i.load=parseFloat(c[b])}if(!m){R(new Error(`Root process ${I} not found`));return}P(m)}})};(0,D.exec)("which ps",{},(g,p,w)=>{if(g||w)if(process.platform!=="linux")R(g||new Error(w.toString()));else{const h=JSON.stringify(N.$qg.asFileUri("vs/base/node/ps.sh").fsPath);(0,D.exec)(h,{},(f,u,c)=>{f||c?R(f||new Error(c.toString())):(j(u,k),l())})}else{const h=p.toString().trim(),f="-ax -o pid=,ppid=,pcpu=,pmem=,command=";(0,D.exec)(`${h} ${f}`,{maxBuffer:1e3*1024,env:{LC_NUMERIC:"en_US.UTF-8"}},(u,c,b)=>{u||b&&!b.includes("screen size is bogus")?R(u||new Error(b.toString())):(j(c,k),process.platform==="linux"?l():m?P(m):R(new Error(`Root process ${I} not found`)))})}})}})}e.$os=L;function j(I,P){const R=/^\s*([0-9]+)\s+([0-9]+)\s+([0-9]+\.[0-9]+)\s+([0-9]+\.[0-9]+)\s+(.+)$/,m=I.toString().split(`
`);for(const C of m){const k=R.exec(C.trim());k&&k.length===6&&P(parseInt(k[1]),parseInt(k[2]),k[5],parseFloat(k[3]),parseFloat(k[4]))}}});var Se=this&&this.__decorate||function(oe,e,D,N){var L=arguments.length,j=L<3?e:N===null?N=Object.getOwnPropertyDescriptor(e,D):N,I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(oe,e,D,N);else for(var P=oe.length-1;P>=0;P--)(I=oe[P])&&(j=(L<3?I(j):L>3?I(e,D,j):I(e,D))||j);return L>3&&j&&Object.defineProperty(e,D,j),j};define(ue[40],de([0,1,17,6,14,26,86,7,3,2,68,27,12]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Qh=e.ProxyChannel=e.$Ph=e.$Oh=e.$Nh=e.$Mh=e.$Lh=e.$Kh=e.RequestInitiator=e.$Jh=e.$Ih=e.$Hh=e.$Gh=e.$Fh=void 0;var l;(function(H){H[H.Promise=100]="Promise",H[H.PromiseCancel=101]="PromiseCancel",H[H.EventListen=102]="EventListen",H[H.EventDispose=103]="EventDispose"})(l||(l={}));function g(H){switch(H){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var p;(function(H){H[H.Initialize=200]="Initialize",H[H.PromiseSuccess=201]="PromiseSuccess",H[H.PromiseError=202]="PromiseError",H[H.PromiseErrorObj=203]="PromiseErrorObj",H[H.EventFire=204]="EventFire"})(p||(p={}));function w(H){switch(H){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var h;(function(H){H[H.Uninitialized=0]="Uninitialized",H[H.Idle=1]="Idle"})(h||(h={}));function f(H){let J=0;for(let x=0;;x+=7){const se=H.read(1);if(J|=(se.buffer[0]&127)<<x,!(se.buffer[0]&128))return J}}const u=n(0);function c(H,J){if(J===0){H.write(u);return}let x=0;for(let V=J;V!==0;V=V>>>7)x++;const se=L.$ke.alloc(x);for(let V=0;J!==0;V++)se.buffer[V]=J&127,J=J>>>7,J>0&&(se.buffer[V]|=128);H.write(se)}class b{constructor(J){this.b=J,this.a=0}read(J){const x=this.b.slice(this.a,this.a+J);return this.a+=x.byteLength,x}}e.$Fh=b;class i{constructor(){this.a=[]}get buffer(){return L.$ke.concat(this.a)}write(J){this.a.push(J)}}e.$Gh=i;var r;(function(H){H[H.Undefined=0]="Undefined",H[H.String=1]="String",H[H.Buffer=2]="Buffer",H[H.VSBuffer=3]="VSBuffer",H[H.Array=4]="Array",H[H.Object=5]="Object",H[H.Int=6]="Int"})(r||(r={}));function n(H){const J=L.$ke.alloc(1);return J.writeUInt8(H,0),J}const s={Undefined:n(r.Undefined),String:n(r.String),Buffer:n(r.Buffer),VSBuffer:n(r.VSBuffer),Array:n(r.Array),Object:n(r.Object),Uint:n(r.Int)},t=typeof Buffer<"u";function o(H,J){if(typeof J>"u")H.write(s.Undefined);else if(typeof J=="string"){const x=L.$ke.fromString(J);H.write(s.String),c(H,x.byteLength),H.write(x)}else if(t&&Buffer.isBuffer(J)){const x=L.$ke.wrap(J);H.write(s.Buffer),c(H,x.byteLength),H.write(x)}else if(J instanceof L.$ke)H.write(s.VSBuffer),c(H,J.byteLength),H.write(J);else if(Array.isArray(J)){H.write(s.Array),c(H,J.length);for(const x of J)o(H,x)}else if(typeof J=="number"&&(J|0)===J)H.write(s.Uint),c(H,J);else{const x=L.$ke.fromString(JSON.stringify(J));H.write(s.Object),c(H,x.byteLength),H.write(x)}}e.$Hh=o;function a(H){switch(H.read(1).readUInt8(0)){case r.Undefined:return;case r.String:return H.read(f(H)).toString();case r.Buffer:return H.read(f(H)).buffer;case r.VSBuffer:return H.read(f(H));case r.Array:{const x=f(H),se=[];for(let V=0;V<x;V++)se.push(a(H));return se}case r.Object:return JSON.parse(H.read(f(H)).toString());case r.Int:return f(H)}}e.$Ih=a;class y{constructor(J,x,se=null,V=1e3){this.h=J,this.j=x,this.k=se,this.l=V,this.b=new Map,this.d=new Map,this.g=new Map,this.f=this.h.onMessage(ne=>this.q(ne)),this.m({type:200})}registerChannel(J,x){this.b.set(J,x),setTimeout(()=>this.w(J),0)}m(J){switch(J.type){case 200:{const x=this.o([J.type]);this.k?.logOutgoing(x,0,1,w(J.type));return}case 201:case 202:case 204:case 203:{const x=this.o([J.type,J.id],J.data);this.k?.logOutgoing(x,J.id,1,w(J.type),J.data);return}}}o(J,x=void 0){const se=new i;return o(se,J),o(se,x),this.p(se.buffer)}p(J){try{return this.h.send(J),J.byteLength}catch{return 0}}q(J){const x=new b(J),se=a(x),V=a(x),ne=se[0];switch(ne){case 100:return this.k?.logIncoming(J.byteLength,se[1],1,`${g(ne)}: ${se[2]}.${se[3]}`,V),this.s({type:ne,id:se[1],channelName:se[2],name:se[3],arg:V});case 102:return this.k?.logIncoming(J.byteLength,se[1],1,`${g(ne)}: ${se[2]}.${se[3]}`,V),this.t({type:ne,id:se[1],channelName:se[2],name:se[3],arg:V});case 101:return this.k?.logIncoming(J.byteLength,se[1],1,`${g(ne)}`),this.u({type:ne,id:se[1]});case 103:return this.k?.logIncoming(J.byteLength,se[1],1,`${g(ne)}`),this.u({type:ne,id:se[1]})}}s(J){const x=this.b.get(J.channelName);if(!x){this.v(J);return}const se=new j.$7d;let V;try{V=x.call(this.j,J.name,J.arg,se.token)}catch(z){V=Promise.reject(z)}const ne=J.id;V.then(z=>{this.m({id:ne,data:z,type:201})},z=>{z instanceof Error?this.m({id:ne,data:{message:z.message,name:z.name,stack:z.stack?z.stack.split?z.stack.split(`
`):z.stack:void 0},type:202}):this.m({id:ne,data:z,type:203})}).finally(()=>{K.dispose(),this.d.delete(J.id)});const K=(0,m.$Rc)(()=>se.cancel());this.d.set(J.id,K)}t(J){const x=this.b.get(J.channelName);if(!x){this.v(J);return}const se=J.id,ne=x.listen(this.j,J.name,J.arg)(K=>this.m({id:se,data:K,type:204}));this.d.set(J.id,ne)}u(J){const x=this.d.get(J.id);x&&(x.dispose(),this.d.delete(J.id))}v(J){let x=this.g.get(J.channelName);x||(x=[],this.g.set(J.channelName,x));const se=setTimeout(()=>{console.error(`Unknown channel: ${J.channelName}`),J.type===100&&this.m({id:J.id,data:{name:"Unknown channel",message:`Channel name '${J.channelName}' timed out after ${this.l}ms`,stack:void 0},type:202})},this.l);x.push({request:J,timeoutTimer:se})}w(J){const x=this.g.get(J);if(x){for(const se of x)switch(clearTimeout(se.timeoutTimer),se.request.type){case 100:this.s(se.request);break;case 102:this.t(se.request);break}this.g.delete(J)}}dispose(){this.f&&(this.f.dispose(),this.f=null),(0,m.$Oc)(this.d.values()),this.d.clear()}}e.$Jh=y;var $;(function(H){H[H.LocalSide=0]="LocalSide",H[H.OtherSide=1]="OtherSide"})($||(e.RequestInitiator=$={}));class d{constructor(J,x=null){this.l=J,this.a=!1,this.b=h.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new R.$Wd,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(se=>this.s(se)),this.j=x}getChannel(J){const x=this;return{call(se,V,ne){return x.a?Promise.reject(new P.$5):x.m(J,se,V,ne)},listen(se,V){return x.a?R.Event.None:x.o(J,se,V)}}}m(J,x,se,V=j.CancellationToken.None){const ne=this.g++,z={id:ne,type:100,channelName:J,name:x,arg:se};if(V.isCancellationRequested)return Promise.reject(new P.$5);let U;return new Promise((W,B)=>{if(V.isCancellationRequested)return B(new P.$5);const _=()=>{const ce=fe=>{switch(fe.type){case 201:this.f.delete(ne),W(fe.data);break;case 202:{this.f.delete(ne);const be=new Error(fe.data.message);be.stack=Array.isArray(fe.data.stack)?fe.data.stack.join(`
`):fe.data.stack,be.name=fe.data.name,B(be);break}case 203:this.f.delete(ne),B(fe.data);break}};this.f.set(ne,ce),this.p(z)};let ee=null;this.b===h.Idle?_():(ee=(0,N.$Vg)(ce=>this.u()),ee.then(()=>{ee=null,_()}));const X=()=>{ee?(ee.cancel(),ee=null):this.p({id:ne,type:101}),B(new P.$5)},ie=V.onCancellationRequested(X);U=(0,m.$Qc)((0,m.$Rc)(X),ie),this.d.add(U)}).finally(()=>{U.dispose(),this.d.delete(U)})}o(J,x,se){const V=this.g++,K={id:V,type:102,channelName:J,name:x,arg:se};let z=null;const U=new R.$Wd({onWillAddFirstListener:()=>{z=(0,N.$Vg)(W=>this.u()),z.then(()=>{z=null,this.d.add(U),this.p(K)})},onDidRemoveLastListener:()=>{z?(z.cancel(),z=null):(this.d.delete(U),this.p({id:V,type:103}))}}),O=W=>U.fire(W.data);return this.f.set(V,O),U.event}p(J){switch(J.type){case 100:case 102:{const x=this.q([J.type,J.id,J.channelName,J.name],J.arg);this.j?.logOutgoing(x,J.id,0,`${g(J.type)}: ${J.channelName}.${J.name}`,J.arg);return}case 101:case 103:{const x=this.q([J.type,J.id]);this.j?.logOutgoing(x,J.id,0,g(J.type));return}}}q(J,x=void 0){const se=new i;return o(se,J),o(se,x),this.r(se.buffer)}r(J){try{return this.l.send(J),J.byteLength}catch{return 0}}s(J){const x=new b(J),se=a(x),V=a(x),ne=se[0];switch(ne){case 200:return this.j?.logIncoming(J.byteLength,0,0,w(ne)),this.t({type:se[0]});case 201:case 202:case 204:case 203:return this.j?.logIncoming(J.byteLength,se[1],0,w(ne),V),this.t({type:se[0],id:se[1],data:V})}}t(J){if(J.type===200){this.b=h.Idle,this.k.fire();return}this.f.get(J.id)?.(J)}get onDidInitializePromise(){return R.Event.toPromise(this.onDidInitialize)}u(){return this.b===h.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),(0,m.$Oc)(this.d.values()),this.d.clear()}}e.$Kh=d,Se([I.$zh],d.prototype,"onDidInitializePromise",null);class v{get connections(){const J=[];return this.f.forEach(x=>J.push(x)),J}constructor(J){this.a=new Map,this.f=new Set,this.g=new R.$Wd,this.onDidAddConnection=this.g.event,this.h=new R.$Wd,this.onDidRemoveConnection=this.h.event,this.j=new m.$Sc,this.j.add(J(({protocol:x,onDidClientDisconnect:se})=>{const V=R.Event.once(x.onMessage);this.j.add(V(ne=>{const K=new b(ne),z=a(K),U=new y(x,z),O=new d(x);this.a.forEach((B,_)=>U.registerChannel(_,B));const W={channelServer:U,channelClient:O,ctx:z};this.f.add(W),this.g.fire(W),this.j.add(se(()=>{U.dispose(),O.dispose(),this.f.delete(W),this.h.fire(W)}))}))}))}getChannel(J,x){const se=this;return{call(V,ne,K){let z;if((0,E.$Yf)(x)){const O=(0,D.$4b)(se.connections.filter(x));z=O?Promise.resolve(O):R.Event.toPromise(R.Event.filter(se.onDidAddConnection,x))}else z=x.routeCall(se,V,ne);const U=z.then(O=>O.channelClient.getChannel(J));return A(U).call(V,ne,K)},listen(V,ne){if((0,E.$Yf)(x))return se.k(J,x,V,ne);const K=x.routeEvent(se,V,ne).then(z=>z.channelClient.getChannel(J));return A(K).listen(V,ne)}}}k(J,x,se,V){const ne=this;let K;const z=new R.$Wd({onWillAddFirstListener:()=>{K=new m.$Sc;const U=new R.$3d,O=new Map,W=_=>{const X=_.channelClient.getChannel(J).listen(se,V),ie=U.add(X);O.set(_,ie)},B=_=>{const ee=O.get(_);ee&&(ee.dispose(),O.delete(_))};ne.connections.filter(x).forEach(W),R.Event.filter(ne.onDidAddConnection,x)(W,void 0,K),ne.onDidRemoveConnection(B,void 0,K),U.event(z.fire,z,K),K.add(U)},onDidRemoveLastListener:()=>{K?.dispose(),K=void 0}});return z.event}registerChannel(J,x){this.a.set(J,x);for(const se of this.f)se.channelServer.registerChannel(J,x)}dispose(){this.j.dispose();for(const J of this.f)J.channelClient.dispose(),J.channelServer.dispose();this.f.clear(),this.a.clear(),this.g.dispose(),this.h.dispose()}}e.$Lh=v;class S{constructor(J,x,se=null){const V=new i;o(V,x),J.send(V.buffer),this.a=new d(J,se),this.d=new y(J,x,se)}getChannel(J){return this.a.getChannel(J)}registerChannel(J,x){this.d.registerChannel(J,x)}dispose(){this.a.dispose(),this.d.dispose()}}e.$Mh=S;function A(H){return{call(J,x,se){return H.then(V=>V.call(J,x,se))},listen(J,x){const se=new R.$6d;return H.then(V=>se.input=V.listen(J,x)),se.event}}}e.$Nh=A;function T(H){let J=!1;return{call(x,se,V){return J?H.call(x,se,V):(0,N.$9g)(0).then(()=>J=!0).then(()=>H.call(x,se,V))},listen(x,se){if(J)return H.listen(x,se);const V=new R.$6d;return(0,N.$9g)(0).then(()=>J=!0).then(()=>V.input=H.listen(x,se)),V.event}}}e.$Oh=T;class q{constructor(J){this.a=J}routeCall(J){return this.b(J)}routeEvent(J){return this.b(J)}async b(J){for(const x of J.connections)if(await Promise.resolve(this.a(x.ctx)))return Promise.resolve(x);return await R.Event.toPromise(J.onDidAddConnection),await this.b(J)}}e.$Ph=q;var M;(function(H){function J(ne,K,z){const U=ne,O=z&&z.disableMarshalling,W=new Map;for(const B in U)se(B)&&W.set(B,R.Event.buffer(U[B],!0,void 0,K));return new class{listen(B,_,ee){const X=W.get(_);if(X)return X;if(V(_)){const ie=U[_];if(typeof ie=="function")return ie.call(U,ee)}throw new P.$bb(`Event not found: ${_}`)}call(B,_,ee){const X=U[_];if(typeof X=="function"){if(!O&&Array.isArray(ee))for(let ce=0;ce<ee.length;ce++)ee[ce]=(0,C.$Eh)(ee[ce]);let ie=X.apply(U,ee);return ie instanceof Promise||(ie=Promise.resolve(ie)),ie}throw new P.$bb(`Method not found: ${_}`)}}}H.fromService=J;function x(ne,K){const z=K&&K.disableMarshalling;return new Proxy({},{get(U,O){if(typeof O=="string")return K?.properties?.has(O)?K.properties.get(O):V(O)?function(W){return ne.listen(O,W)}:se(O)?ne.listen(O):async function(...W){let B;K&&!(0,E.$Tf)(K.context)?B=[K.context,...W]:B=W;const _=await ne.call(O,B);return z?_:(0,C.$Eh)(_)};throw new P.$bb(`Property not found: ${String(O)}`)}})}H.toService=x;function se(ne){return ne[0]==="o"&&ne[1]==="n"&&k.$af(ne.charCodeAt(2))}function V(ne){return/^onDynamic/.test(ne)&&k.$af(ne.charCodeAt(9))}})(M||(e.ProxyChannel=M={}));const Y=[["#2977B1","#FC802D","#34A13A","#D3282F","#9366BA"],["#8B564C","#E177C0","#7F7F7F","#BBBE3D","#2EBECD"]];function G(H){if(Array.isArray(H))return H;if(H&&typeof H=="object"&&typeof H.toString=="function"){const J=H.toString();if(J!=="[object Object]")return J}return H}function Q(H){return Array.isArray(H)?H.map(G):G(H)}function F(H,J,x,se,V,ne,K){K=Q(K);const z=Y[V],U=z[se%z.length];let O=[`%c[${H}]%c[${String(J).padStart(7," ")}]%c[len: ${String(x).padStart(5," ")}]%c${String(se).padStart(5," ")} - ${ne}`,"color: darkgreen","color: grey","color: grey",`color: ${U}`];/\($/.test(ne)?(O=O.concat(K),O.push(")")):O.push(K),console.log.apply(console,O)}class te{constructor(J,x){this.d=J,this.f=x,this.a=0,this.b=0}logOutgoing(J,x,se,V,ne){this.b+=J,F(this.d,this.b,J,x,se,V,ne)}logIncoming(J,x,se,V,ne){this.a+=J,F(this.f,this.a,J,x,se,V,ne)}}e.$Qh=te}),define(ue[69],de([0,1,14,3,2,40]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Vh=e.$Uh=e.$Th=e.$Sh=e.ProtocolConstants=e.$Rh=e.SocketCloseEventType=e.SocketDiagnostics=e.SocketDiagnosticsEventType=void 0;var I;(function(s){s.Created="created",s.Read="read",s.Write="write",s.Open="open",s.Error="error",s.Close="close",s.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",s.NodeEndReceived="nodeEndReceived",s.NodeEndSent="nodeEndSent",s.NodeDrainBegin="nodeDrainBegin",s.NodeDrainEnd="nodeDrainEnd",s.zlibInflateError="zlibInflateError",s.zlibInflateData="zlibInflateData",s.zlibInflateInitialWrite="zlibInflateInitialWrite",s.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",s.zlibInflateWrite="zlibInflateWrite",s.zlibInflateFlushFired="zlibInflateFlushFired",s.zlibDeflateError="zlibDeflateError",s.zlibDeflateData="zlibDeflateData",s.zlibDeflateWrite="zlibDeflateWrite",s.zlibDeflateFlushFired="zlibDeflateFlushFired",s.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",s.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",s.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",s.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",s.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",s.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",s.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",s.ProtocolHeaderRead="protocolHeaderRead",s.ProtocolMessageRead="protocolMessageRead",s.ProtocolHeaderWrite="protocolHeaderWrite",s.ProtocolMessageWrite="protocolMessageWrite",s.ProtocolWrite="protocolWrite"})(I||(e.SocketDiagnosticsEventType=I={}));var P;(function(s){s.enableDiagnostics=!1,s.records=[];const t=new WeakMap;let o=0;function a($,d){if(!t.has($)){const v=String(++o);t.set($,v)}return t.get($)}function y($,d,v,S){if(!s.enableDiagnostics)return;const A=a($,d);if(S instanceof D.$ke||S instanceof Uint8Array||S instanceof ArrayBuffer||ArrayBuffer.isView(S)){const T=D.$ke.alloc(S.byteLength);T.set(S),s.records.push({timestamp:Date.now(),id:A,label:d,type:v,buff:T})}else s.records.push({timestamp:Date.now(),id:A,label:d,type:v,data:S})}s.traceSocketEvent=y})(P||(e.SocketDiagnostics=P={}));var R;(function(s){s[s.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",s[s.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(R||(e.SocketCloseEventType=R={}));let m=null;function C(){return m||(m=D.$ke.alloc(0)),m}class k{get byteLength(){return this.b}constructor(){this.a=[],this.b=0}acceptChunk(t){this.a.push(t),this.b+=t.byteLength}read(t){return this.c(t,!0)}peek(t){return this.c(t,!1)}c(t,o){if(t===0)return C();if(t>this.b)throw new Error("Cannot read so many bytes!");if(this.a[0].byteLength===t){const d=this.a[0];return o&&(this.a.shift(),this.b-=t),d}if(this.a[0].byteLength>t){const d=this.a[0].slice(0,t);return o&&(this.a[0]=this.a[0].slice(t),this.b-=t),d}const a=D.$ke.alloc(t);let y=0,$=0;for(;t>0;){const d=this.a[$];if(d.byteLength>t){const v=d.slice(0,t);a.set(v,y),y+=t,o&&(this.a[$]=d.slice(t),this.b-=t),t-=t}else a.set(d,y),y+=d.byteLength,o?(this.a.shift(),this.b-=d.byteLength):$++,t-=d.byteLength}return a}}e.$Rh=k;var E;(function(s){s[s.None=0]="None",s[s.Regular=1]="Regular",s[s.Control=2]="Control",s[s.Ack=3]="Ack",s[s.Disconnect=5]="Disconnect",s[s.ReplayRequest=6]="ReplayRequest",s[s.Pause=7]="Pause",s[s.Resume=8]="Resume",s[s.KeepAlive=9]="KeepAlive"})(E||(E={}));function l(s){switch(s){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var g;(function(s){s[s.HeaderLength=13]="HeaderLength",s[s.AcknowledgeTime=2e3]="AcknowledgeTime",s[s.TimeoutTime=2e4]="TimeoutTime",s[s.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",s[s.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime",s[s.KeepAliveSendTime=5e3]="KeepAliveSendTime"})(g||(e.ProtocolConstants=g={}));class p{constructor(t,o,a,y){this.type=t,this.id=o,this.ack=a,this.data=y,this.writtenTime=0}get size(){return this.data.byteLength}}class w extends L.$Tc{constructor(t){super(),this.f=this.D(new N.$Wd),this.onMessage=this.f.event,this.g={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this.a=t,this.b=!1,this.c=new k,this.D(this.a.onData(o=>this.acceptChunk(o))),this.lastReadTime=Date.now()}acceptChunk(t){if(!(!t||t.byteLength===0))for(this.lastReadTime=Date.now(),this.c.acceptChunk(t);this.c.byteLength>=this.g.readLen;){const o=this.c.read(this.g.readLen);if(this.g.readHead)this.g.readHead=!1,this.g.readLen=o.readUInt32BE(9),this.g.messageType=o.readUInt8(0),this.g.id=o.readUInt32BE(1),this.g.ack=o.readUInt32BE(5),this.a.traceSocketEvent("protocolHeaderRead",{messageType:l(this.g.messageType),id:this.g.id,ack:this.g.ack,messageSize:this.g.readLen});else{const a=this.g.messageType,y=this.g.id,$=this.g.ack;if(this.g.readHead=!0,this.g.readLen=13,this.g.messageType=0,this.g.id=0,this.g.ack=0,this.a.traceSocketEvent("protocolMessageRead",o),this.f.fire(new p(a,y,$,o)),this.b)break}}}readEntireBuffer(){return this.c.read(this.c.byteLength)}dispose(){this.b=!0,super.dispose()}}class h{constructor(t){this.k=null,this.a=!1,this.b=!1,this.c=t,this.d=[],this.f=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this.a=!0}drain(){return this.flush(),this.c.drain()}flush(){this.m()}pause(){this.b=!0}resume(){this.b=!1,this.l()}write(t){if(this.a)return;t.writtenTime=Date.now(),this.lastWriteTime=Date.now();const o=D.$ke.alloc(13);o.writeUInt8(t.type,0),o.writeUInt32BE(t.id,1),o.writeUInt32BE(t.ack,5),o.writeUInt32BE(t.data.byteLength,9),this.c.traceSocketEvent("protocolHeaderWrite",{messageType:l(t.type),id:t.id,ack:t.ack,messageSize:t.data.byteLength}),this.c.traceSocketEvent("protocolMessageWrite",t.data),this.j(o,t.data)}g(t,o){const a=this.f===0;return this.d.push(t,o),this.f+=t.byteLength+o.byteLength,a}h(){const t=D.$ke.concat(this.d,this.f);return this.d.length=0,this.f=0,t}j(t,o){this.g(t,o)&&this.l()}l(){this.k||(this.k=setTimeout(()=>{this.k=null,this.m()}))}m(){if(this.f===0||this.b)return;const t=this.h();this.c.traceSocketEvent("protocolWrite",{byteLength:t.byteLength}),this.c.write(t)}}class f extends L.$Tc{constructor(t){super(),this.f=new N.$Wd,this.onMessage=this.f.event,this.g=new N.$Wd,this.onDidDispose=this.g.event,this.a=t,this.b=this.D(new h(this.a)),this.c=this.D(new w(this.a)),this.D(this.c.onMessage(o=>{o.type===1&&this.f.fire(o.data)})),this.D(this.a.onClose(()=>this.g.fire()))}drain(){return this.b.drain()}getSocket(){return this.a}sendDisconnect(){}send(t){this.b.write(new p(1,0,0,t))}}e.$Sh=f;class u extends j.$Mh{static fromSocket(t,o){return new u(new f(t),o)}get onDidDispose(){return this.b.onDidDispose}constructor(t,o,a=null){super(t,o,a),this.b=t}dispose(){super.dispose();const t=this.b.getSocket();this.b.sendDisconnect(),this.b.dispose(),t.end()}}e.$Th=u;class c{constructor(){this.b=!1,this.c=!1,this.d=[],this.a=new N.$Wd({onWillAddFirstListener:()=>{this.b=!0,queueMicrotask(()=>this.f())},onDidRemoveLastListener:()=>{this.b=!1}}),this.event=this.a.event}f(){if(!this.c){for(this.c=!0;this.b&&this.d.length>0;)this.a.fire(this.d.shift());this.c=!1}}fire(t){this.b?this.d.length>0?this.d.push(t):this.a.fire(t):this.d.push(t)}flushBuffer(){this.d=[]}}e.$Uh=c;class b{constructor(t){this.data=t,this.next=null}}class i{constructor(){this.a=null,this.b=null}length(){let t=0,o=this.a;for(;o;)o=o.next,t++;return t}peek(){return this.a?this.a.data:null}toArray(){const t=[];let o=0,a=this.a;for(;a;)t[o++]=a.data,a=a.next;return t}pop(){if(this.a){if(this.a===this.b){this.a=null,this.b=null;return}this.a=this.a.next}}push(t){const o=new b(t);if(!this.a){this.a=o,this.b=o;return}this.b.next=o,this.b=o}}class r{static{this.a=10}static{this.b=null}static getInstance(){return r.b||(r.b=new r),r.b}constructor(){this.c=[];const t=Date.now();for(let o=0;o<r.a;o++)this.c[o]=t-1e3*o;setInterval(()=>{for(let o=r.a;o>=1;o--)this.c[o]=this.c[o-1];this.c[0]=Date.now()},1e3)}d(){const t=Date.now(),o=(1+r.a)*1e3;let a=0;for(let y=0;y<r.a;y++)t-this.c[y]<=o&&a++;return 1-a/r.a}hasHighLoad(){return this.d()>=.5}}class n{get unacknowledgedCount(){return this.c-this.d}constructor(t){this.u=new c,this.onControlMessage=this.u.event,this.v=new c,this.onMessage=this.v.event,this.w=new c,this.onDidDispose=this.w.event,this.x=new c,this.onSocketClose=this.x.event,this.y=new c,this.onSocketTimeout=this.y.event,this.s=t.loadEstimator??r.getInstance(),this.t=t.sendKeepAlive??!0,this.a=!1,this.b=new i,this.c=0,this.d=0,this.f=null,this.g=0,this.h=0,this.j=0,this.k=null,this.m=0,this.n=Date.now(),this.r=new L.$Sc,this.o=t.socket,this.p=this.r.add(new h(this.o)),this.q=this.r.add(new w(this.o)),this.r.add(this.q.onMessage(o=>this.z(o))),this.r.add(this.o.onClose(o=>this.x.fire(o))),t.initialChunk&&this.q.acceptChunk(t.initialChunk),this.t?this.l=setInterval(()=>{this.D()},5e3):this.l=null}dispose(){this.f&&(clearTimeout(this.f),this.f=null),this.k&&(clearTimeout(this.k),this.k=null),this.l&&(clearInterval(this.l),this.l=null),this.r.dispose()}drain(){return this.p.drain()}sendDisconnect(){const t=new p(5,0,0,C());this.p.write(t),this.p.flush()}sendPause(){const t=new p(7,0,0,C());this.p.write(t)}sendResume(){const t=new p(8,0,0,C());this.p.write(t)}pauseSocketWriting(){this.p.pause()}getSocket(){return this.o}getMillisSinceLastIncomingData(){return Date.now()-this.q.lastReadTime}beginAcceptReconnection(t,o){this.a=!0,this.r.dispose(),this.r=new L.$Sc,this.u.flushBuffer(),this.x.flushBuffer(),this.y.flushBuffer(),this.o.dispose(),this.m=0,this.n=Date.now(),this.o=t,this.p=this.r.add(new h(this.o)),this.q=this.r.add(new w(this.o)),this.r.add(this.q.onMessage(a=>this.z(a))),this.r.add(this.o.onClose(a=>this.x.fire(a))),this.q.acceptChunk(o)}endAcceptReconnection(){this.a=!1,this.h=this.g;const t=new p(3,0,this.h,C());this.p.write(t);const o=this.b.toArray();for(let a=0,y=o.length;a<y;a++)this.p.write(o[a]);this.B()}acceptDisconnect(){this.w.fire()}z(t){if(t.ack>this.d){this.d=t.ack;do{const o=this.b.peek();if(o&&o.id<=t.ack)this.b.pop();else break}while(!0)}switch(t.type){case 0:break;case 1:{if(t.id>this.g)if(t.id!==this.g+1){const o=Date.now();o-this.m>1e4&&(this.m=o,this.p.write(new p(6,0,0,C())))}else this.g=t.id,this.j=Date.now(),this.A(),this.v.fire(t.data);break}case 2:{this.u.fire(t.data);break}case 3:break;case 5:{this.w.fire();break}case 6:{const o=this.b.toArray();for(let a=0,y=o.length;a<y;a++)this.p.write(o[a]);this.B();break}case 7:{this.p.pause();break}case 8:{this.p.resume();break}case 9:break}}readEntireBuffer(){return this.q.readEntireBuffer()}flush(){this.p.flush()}send(t){const o=++this.c;this.h=this.g;const a=new p(1,o,this.h,t);this.b.push(a),this.a||(this.p.write(a),this.B())}sendControl(t){const o=new p(2,0,0,t);this.p.write(o)}A(){if(this.g<=this.h||this.k)return;const t=Date.now()-this.j;if(t>=2e3){this.C();return}this.k=setTimeout(()=>{this.k=null,this.A()},2e3-t+5)}B(){if(this.c<=this.d||this.f||this.a)return;const t=this.b.peek(),o=Date.now()-t.writtenTime,a=Date.now()-this.q.lastReadTime,y=Date.now()-this.n;if(o>=2e4&&a>=2e4&&y>=2e4&&!this.s.hasHighLoad()){this.n=Date.now(),this.y.fire({unacknowledgedMsgCount:this.b.length(),timeSinceOldestUnacknowledgedMsg:o,timeSinceLastReceivedSomeData:a});return}const $=Math.max(2e4-o,2e4-a,2e4-y,500);this.f=setTimeout(()=>{this.f=null,this.B()},$)}C(){if(this.g<=this.h)return;this.h=this.g;const t=new p(3,0,this.h,C());this.p.write(t)}D(){this.h=this.g;const t=new p(9,0,this.h,C());this.p.write(t)}}e.$Vh=n}),define(ue[94],de([0,1,55,6,14,26,141,7,3,2,30,144,91,40]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Lq=e.$Kq=void 0;class g extends l.$Jh{constructor(h){super({send:f=>{try{process.send?.(f.buffer.toString("base64"))}catch{}},onMessage:R.Event.fromNodeEventEmitter(process,"message",f=>L.$ke.wrap(Buffer.from(f,"base64")))},h),process.once("disconnect",()=>this.dispose())}}e.$Kq=g;class p{constructor(h,f){this.i=h,this.j=f,this.c=new Set,this.g=new Map,this.h=new R.$Wd,this.onDidProcessExit=this.h.event;const u=f&&f.timeout?f.timeout:6e4;this.b=new N.$5g(u),this.d=null,this.f=null}getChannel(h){const f=this;return{call(u,c,b){return f.k(h,u,c,b)},listen(u,c){return f.l(h,u,c)}}}k(h,f,u,c=j.CancellationToken.None){if(!this.b)return Promise.reject(new Error("disposed"));if(c.isCancellationRequested)return Promise.reject(P.$6());this.b.cancel();const b=this.n(h),i=(0,N.$Vg)(s=>b.call(f,u,s)),r=c.onCancellationRequested(()=>i.cancel()),n=(0,m.$Rc)(()=>i.cancel());return this.c.add(n),i.finally(()=>{r.dispose(),this.c.delete(n),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),i}l(h,f,u){if(!this.b)return R.Event.None;this.b.cancel();let c;const b=new R.$Wd({onWillAddFirstListener:()=>{c=this.n(h).listen(f,u)(b.fire,b),this.c.add(c)},onDidRemoveLastListener:()=>{this.c.delete(c),c.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return b.event}get m(){if(!this.f){const h=this.j&&this.j.args?this.j.args:[],f=Object.create(null);f.env={...(0,C.$En)(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(f.env={...f.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(f.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(f.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(f.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),f.execArgv===void 0&&(f.execArgv=process.execArgv.filter(t=>!/^--inspect(-brk)?=/.test(t)).filter(t=>!t.startsWith("--vscode-"))),(0,E.$1l)(f.env),this.d=(0,D.fork)(this.i,h,f);const u=new R.$Wd;R.Event.fromNodeEventEmitter(this.d,"message",t=>t)(t=>{if((0,I.$Gq)(t)){(0,I.log)(t,`IPC Library: ${this.j.serverName}`);return}u.fire(L.$ke.wrap(Buffer.from(t,"base64")))});const b=this.j.useQueue?(0,k.$3l)(this.d):this.d,i=t=>this.d&&this.d.connected&&b.send(t.buffer.toString("base64")),r=u.event,n={send:i,onMessage:r};this.f=new l.$Kh(n);const s=()=>this.o();process.once("exit",s),this.d.on("error",t=>console.warn('IPC "'+this.j.serverName+'" errored with '+t)),this.d.on("exit",(t,o)=>{process.removeListener("exit",s),this.c.forEach(a=>(0,m.$Oc)(a)),this.c.clear(),t!==0&&o!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+t+" and signal "+o),this.b?.cancel(),this.o(),this.h.fire({code:t,signal:o})})}return this.f}n(h){let f=this.g.get(h);return f||(f=this.m.getChannel(h),this.g.set(h,f)),f}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}}e.$Lq=p}),define(ue[146],de([0,1,134,14,40,3,12,17]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.once=e.$Zdb=void 0;class R{constructor(E){this.a=E,this.onMessage=j.Event.fromNodeEventEmitter(this.a,"message",l=>l.data?N.$ke.wrap(l.data):N.$ke.alloc(0)),E.start()}send(E){this.a.postMessage(E.buffer)}disconnect(){this.a.close()}}class m extends L.$Lh{static b(E){(0,I.$Uf)((0,D.$Ydb)(process),"Electron Utility Process");const l=new j.$Wd;return process.parentPort.on("message",g=>{if(E?.handledClientConnection(g))return;const p=(0,P.$Ob)(g.ports);p&&l.fire(p)}),j.Event.map(l.event,g=>({protocol:new R(g),onDidClientDisconnect:j.Event.fromNodeEventEmitter(g,"close")}))}constructor(E){super(m.b(E))}}e.$Zdb=m;function C(k,E,l){const g=p=>{p.data===E&&(k.removeListener("message",g),l())};k.on("message",g)}e.once=C}),define(ue[70],de([0,1,6,3,2,68,12]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$vp=e.$up=e.StorageState=e.$tp=e.StorageHint=void 0;var P;(function(E){E[E.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",E[E.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(P||(e.StorageHint=P={}));function R(E){const l=E;return l?.changed instanceof Map||l?.deleted instanceof Set}e.$tp=R;var m;(function(E){E[E.None=0]="None",E[E.Initialized=1]="Initialized",E[E.Closed=2]="Closed"})(m||(e.StorageState=m={}));class C extends L.$Tc{static{this.a=100}constructor(l,g=Object.create(null)){super(),this.q=l,this.r=g,this.b=this.D(new N.$Zd),this.onDidChangeStorage=this.b.event,this.c=m.None,this.f=new Map,this.g=this.D(new D.$6g(C.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.s()}s(){this.D(this.q.onDidChangeItemsExternal(l=>this.t(l)))}t(l){this.b.pause();try{l.changed?.forEach((g,p)=>this.u(p,g)),l.deleted?.forEach(g=>this.u(g,void 0))}finally{this.b.resume()}}u(l,g){if(this.c===m.Closed)return;let p=!1;(0,I.$Tf)(g)?p=this.f.delete(l):this.f.get(l)!==g&&(this.f.set(l,g),p=!0),p&&this.b.fire({key:l,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===m.None&&(this.c=m.Initialized,this.r.hint!==P.STORAGE_DOES_NOT_EXIST&&(this.f=await this.q.getItems()))}get(l,g){const p=this.f.get(l);return(0,I.$Tf)(p)?g:p}getBoolean(l,g){const p=this.get(l);return(0,I.$Tf)(p)?g:p==="true"}getNumber(l,g){const p=this.get(l);return(0,I.$Tf)(p)?g:parseInt(p,10)}getObject(l,g){const p=this.get(l);return(0,I.$Tf)(p)?g:(0,j.$Dh)(p)}async set(l,g,p=!1){if(this.c===m.Closed)return;if((0,I.$Tf)(g))return this.delete(l,p);const w=(0,I.$Mf)(g)||Array.isArray(g)?(0,j.$Ch)(g):String(g);if(this.f.get(l)!==w)return this.f.set(l,w),this.j.set(l,w),this.h.delete(l),this.b.fire({key:l,external:p}),this.C()}async delete(l,g=!1){if(!(this.c===m.Closed||!this.f.delete(l)))return this.h.has(l)||this.h.add(l),this.j.delete(l),this.b.fire({key:l,external:g}),this.C()}async optimize(){if(this.c!==m.Closed)return await this.flush(0),this.q.optimize()}async close(){return this.m||(this.m=this.w()),this.m}async w(){this.c=m.Closed;try{await this.C(0)}catch{}await this.q.close(()=>this.f)}get y(){return this.j.size>0||this.h.size>0}async z(){if(!this.y)return;const l={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.q.updateItems(l).finally(()=>{if(!this.y)for(;this.n.length;)this.n.pop()?.()})}async flush(l){if(this.y)return this.C(l)}async C(l){return this.r.hint===P.STORAGE_IN_MEMORY?this.z():this.g.trigger(()=>this.z(),l)}async whenFlushed(){if(this.y)return new Promise(l=>this.n.push(l))}isInMemory(){return this.r.hint===P.STORAGE_IN_MEMORY}}e.$up=C;class k{constructor(){this.onDidChangeItemsExternal=N.Event.None,this.a=new Map}async getItems(){return this.a}async updateItems(l){l.insert?.forEach((g,p)=>this.a.set(p,g)),l.delete?.forEach(g=>this.a.delete(g))}async optimize(){}async close(){}}e.$vp=k}),define(ue[147],de([13,9]),function(oe,e){return oe.create("vs/base/node/zip",e)}),define(ue[71],de([0,1,56,6,16,12,32,147]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$0p=e.$9p=e.zip=e.$7p=e.$6p=void 0,e.$6p="end of central directory record signature not found";const R=new RegExp(e.$6p);class m extends Error{constructor(b,i){let r=i.message;switch(b){case"CorruptZip":r=`Corrupt ZIP: ${r}`;break}super(r),this.type=b,this.cause=i}}e.$7p=m;function C(c){const b=c.externalFileAttributes>>16||33188;return[448,56,7].map(i=>b&i).reduce((i,r)=>i+r,b&61440)}function k(c){if(c instanceof m)return c;let b;return R.test(c.message)&&(b="CorruptZip"),new m(b,c)}function E(c,b,i,r,n,s){const t=L.$mc(b),o=L.$jc(r,t);if(!o.startsWith(r))return Promise.reject(new Error(P.localize(0,null,b)));const a=L.$jc(r,b);let y;return s.onCancellationRequested(()=>{y?.destroy()}),Promise.resolve(I.Promises.mkdir(o,{recursive:!0})).then(()=>new Promise(($,d)=>{if(!s.isCancellationRequested)try{y=(0,D.createWriteStream)(a,{mode:i}),y.once("close",()=>$()),y.once("error",d),c.once("error",d),c.pipe(y)}catch(v){d(v)}}))}function l(c,b,i,r){let n=(0,N.$Vg)(()=>Promise.resolve()),s=0;const t=r.onCancellationRequested(()=>{n.cancel(),c.close()});return new Promise((o,a)=>{const y=new N.$3g,$=d=>{d.isCancellationRequested||(s++,c.readEntry())};c.once("error",a),c.once("close",()=>n.then(()=>{r.isCancellationRequested||c.entryCount===s?o():a(new m("Incomplete",new Error(P.localize(1,null,s,c.entryCount))))},a)),c.readEntry(),c.on("entry",d=>{if(r.isCancellationRequested)return;if(!i.sourcePathRegex.test(d.fileName)){$(r);return}const v=d.fileName.replace(i.sourcePathRegex,"");if(/\/$/.test(v)){const T=L.$jc(b,v);n=(0,N.$Vg)(q=>I.Promises.mkdir(T,{recursive:!0}).then(()=>$(q)).then(void 0,a));return}const S=p(c,d),A=C(d);n=(0,N.$Vg)(T=>y.queue(()=>S.then(q=>E(q,v,A,b,i,T).then(()=>$(T)))).then(null,a))})}).finally(()=>t.dispose())}async function g(c,b=!1){const{open:i}=await new Promise((r,n)=>{oe(["yauzl"],r,n)});return new Promise((r,n)=>{i(c,b?{lazyEntries:!0}:void 0,(s,t)=>{s?n(k(s)):r((0,j.$Vf)(t))})})}function p(c,b){return new Promise((i,r)=>{c.openReadStream(b,(n,s)=>{n?r(k(n)):i((0,j.$Vf)(s))})})}async function w(c,b){const{ZipFile:i}=await new Promise((r,n)=>{oe(["yazl"],r,n)});return new Promise((r,n)=>{const s=new i;b.forEach(o=>{o.contents?s.addBuffer(typeof o.contents=="string"?Buffer.from(o.contents,"utf8"):o.contents,o.path):o.localPath&&s.addFile(o.localPath,o.path)}),s.end();const t=(0,D.createWriteStream)(c);s.outputStream.pipe(t),s.outputStream.once("error",n),t.once("error",n),t.once("finish",()=>r(c))})}e.zip=w;function h(c,b,i={},r){const n=new RegExp(i.sourcePath?`^${i.sourcePath}`:"");let s=g(c,!0);return i.overwrite&&(s=s.then(t=>I.Promises.rm(b).then(()=>t))),s.then(t=>l(t,b,{sourcePathRegex:n},r))}e.$9p=h;function f(c,b){return g(c).then(i=>new Promise((r,n)=>{i.on("entry",s=>{s.fileName===b&&p(i,s).then(t=>r(t),t=>n(t))}),i.once("close",()=>n(new Error(P.localize(2,null,b))))}))}function u(c,b){return f(c,b).then(i=>new Promise((r,n)=>{const s=[];i.once("error",n),i.on("data",t=>s.push(t)),i.on("end",()=>r(Buffer.concat(s)))}))}e.$0p=u}),define(ue[148],de([13,9]),function(oe,e){return oe.create("vs/platform/configuration/common/configurationRegistry",e)}),define(ue[149],de([13,9]),function(oe,e){return oe.create("vs/platform/contextkey/common/contextkey",e)}),define(ue[150],de([13,9]),function(oe,e){return oe.create("vs/platform/contextkey/common/scanner",e)}),define(ue[151],de([13,9]),function(oe,e){return oe.create("vs/platform/extensionManagement/common/abstractExtensionManagementService",e)}),define(ue[152],de([13,9]),function(oe,e){return oe.create("vs/platform/extensionManagement/common/extensionManagement",e)}),define(ue[153],de([13,9]),function(oe,e){return oe.create("vs/platform/extensionManagement/common/extensionNls",e)}),define(ue[154],de([13,9]),function(oe,e){return oe.create("vs/platform/extensionManagement/common/extensionsScannerService",e)}),define(ue[155],de([13,9]),function(oe,e){return oe.create("vs/platform/extensionManagement/node/extensionManagementService",e)}),define(ue[156],de([13,9]),function(oe,e){return oe.create("vs/platform/extensionManagement/node/extensionManagementUtil",e)}),define(ue[157],de([13,9]),function(oe,e){return oe.create("vs/platform/extensions/common/extensionValidator",e)}),define(ue[158],de([13,9]),function(oe,e){return oe.create("vs/platform/files/common/fileService",e)}),define(ue[159],de([13,9]),function(oe,e){return oe.create("vs/platform/files/common/files",e)}),define(ue[160],de([13,9]),function(oe,e){return oe.create("vs/platform/files/common/io",e)}),define(ue[161],de([13,9]),function(oe,e){return oe.create("vs/platform/files/node/diskFileSystemProvider",e)}),define(ue[162],de([13,9]),function(oe,e){return oe.create("vs/platform/languagePacks/common/languagePacks",e)}),define(ue[163],de([13,9]),function(oe,e){return oe.create("vs/platform/remoteTunnel/common/remoteTunnel",e)}),define(ue[164],de([13,9]),function(oe,e){return oe.create("vs/platform/remoteTunnel/node/remoteTunnelService",e)}),define(ue[165],de([13,9]),function(oe,e){return oe.create("vs/platform/request/common/request",e)}),define(ue[166],de([13,9]),function(oe,e){return oe.create("vs/platform/telemetry/common/telemetryLogAppender",e)}),define(ue[167],de([13,9]),function(oe,e){return oe.create("vs/platform/telemetry/common/telemetryService",e)}),define(ue[168],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataProfile/common/userDataProfile",e)}),define(ue[169],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/abstractSynchronizer",e)}),define(ue[170],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/keybindingsSync",e)}),define(ue[171],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/settingsSync",e)}),define(ue[172],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/userDataAutoSyncService",e)}),define(ue[173],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/userDataSync",e)}),define(ue[174],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/userDataSyncLog",e)}),define(ue[175],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/userDataSyncMachines",e)}),define(ue[176],de([13,9]),function(oe,e){return oe.create("vs/platform/userDataSync/common/userDataSyncResourceProvider",e)}),define(ue[177],de([13,9]),function(oe,e){return oe.create("vs/platform/workspace/common/workspace",e)}),define(ue[178],de([0,1,7,150]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3i=e.TokenType=void 0;var L;(function(m){m[m.LParen=0]="LParen",m[m.RParen=1]="RParen",m[m.Neg=2]="Neg",m[m.Eq=3]="Eq",m[m.NotEq=4]="NotEq",m[m.Lt=5]="Lt",m[m.LtEq=6]="LtEq",m[m.Gt=7]="Gt",m[m.GtEq=8]="GtEq",m[m.RegexOp=9]="RegexOp",m[m.RegexStr=10]="RegexStr",m[m.True=11]="True",m[m.False=12]="False",m[m.In=13]="In",m[m.Not=14]="Not",m[m.And=15]="And",m[m.Or=16]="Or",m[m.Str=17]="Str",m[m.QuotedStr=18]="QuotedStr",m[m.Error=19]="Error",m[m.EOF=20]="EOF"})(L||(e.TokenType=L={}));function j(...m){switch(m.length){case 1:return(0,N.localize)(0,null,m[0]);case 2:return(0,N.localize)(1,null,m[0],m[1]);case 3:return(0,N.localize)(2,null,m[0],m[1],m[2]);default:return}}const I=(0,N.localize)(3,null),P=(0,N.localize)(4,null);class R{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(C){switch(C.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return C.isTripleEq?"===":"==";case 4:return C.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return C.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return C.lexeme;case 18:return C.lexeme;case 19:return C.lexeme;case 20:return"EOF";default:throw(0,D.$8)(`unhandled token type: ${JSON.stringify(C)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(C=>C.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(C){return this.c=C,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const k=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:k})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const k=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:k})}else this.h(126)?this.k(9):this.l(j("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(j("&&"));break;case 124:this.h(124)?this.k(16):this.l(j("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(C){return this.r()||this.c.charCodeAt(this.e)!==C?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(C){this.f.push({type:C,offset:this.d})}l(C){const k=this.d,E=this.c.substring(this.d,this.e),l={type:19,offset:this.d,lexeme:E};this.g.push({offset:k,lexeme:E,additionalInfo:C}),this.f.push(l)}n(){this.m.lastIndex=this.d;const C=this.m.exec(this.c);if(C){this.e=this.d+C[0].length;const k=this.c.substring(this.d,this.e),E=R.b.get(k);E?this.k(E):this.f.push({type:17,lexeme:k,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(I);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let C=this.e,k=!1,E=!1;for(;;){if(C>=this.c.length){this.e=C,this.l(P);return}const g=this.c.charCodeAt(C);if(k)k=!1;else if(g===47&&!E){C++;break}else g===91?E=!0:g===92?k=!0:g===93&&(E=!1);C++}for(;C<this.c.length&&R.a.has(this.c.charCodeAt(C));)C++;this.e=C;const l=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:l,offset:this.d})}r(){return this.e>=this.c.length}}e.$3i=R}),define(ue[179],de([0,1,67,86,25,16,37,20,10]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Im=e.$Hm=e.$Gm=e.$Fm=void 0,e.$Fm=/^([^.]+\..+)[:=](.+)$/;class m{get appRoot(){return(0,j.$mc)(L.$qg.asFileUri("").fsPath)}get userHome(){return R.URI.file(this.b.homeDir)}get userDataPath(){return this.b.userDataDir}get appSettingsHome(){return R.URI.file((0,j.$jc)(this.userDataPath,"User"))}get tmpDir(){return R.URI.file(this.b.tmpDir)}get cacheHome(){return R.URI.file(this.userDataPath)}get stateResource(){return(0,P.$Jg)(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:L.Schemas.vscodeUserData})}get userDataSyncHome(){return(0,P.$Jg)(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){const l=(0,D.$Em)(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=(0,j.$jc)(this.userDataPath,"logs",l)}return R.URI.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return(0,P.$Jg)(R.URI.file((0,j.$jc)(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return(0,P.$Jg)(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return(0,P.$Jg)(this.appSettingsHome,"History")}get keyboardLayoutResource(){return(0,P.$Jg)(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){const l=I.env.VSCODE_PORTABLE;return l?R.URI.file((0,j.$jc)(l,"argv.json")):(0,P.$Jg)(this.userHome,this.c.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return R.URI.file((0,j.$jc)(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){const l=this.args["builtin-extensions-dir"];return l?(0,j.$kc)(l):(0,j.$hc)((0,j.$jc)(L.$qg.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){const l=this.args["extensions-download-dir"];return l?R.URI.file((0,j.$kc)(l)):R.URI.file((0,j.$jc)(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){const l=this.args["extensions-dir"];if(l)return(0,j.$kc)(l);const g=I.env.VSCODE_EXTENSIONS;if(g)return g;const p=I.env.VSCODE_PORTABLE;return p?(0,j.$jc)(p,"extensions"):(0,P.$Jg)(this.userHome,this.c.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){const l=this.args.extensionDevelopmentPath;if(Array.isArray(l))return l.map(g=>/^[^:/?#]+?:\/\//.test(g)?R.URI.parse(g):R.URI.file((0,j.$hc)(g)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(l=>l==="ui"||l==="workspace"||l==="web"?l:"workspace")}get extensionTestsLocationURI(){const l=this.args.extensionTestsPath;if(l)return/^[^:/?#]+?:\/\//.test(l)?R.URI.parse(l):R.URI.file((0,j.$hc)(l))}get disableExtensions(){if(this.args["disable-extensions"])return!0;const l=this.args["disable-extension"];if(l){if(typeof l=="string")return[l];if(Array.isArray(l)&&l.length>0)return l}return!1}get debugExtensionHost(){return C(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!I.env.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(l=>!e.$Fm.test(l))}get extensionLogLevel(){const l=[];for(const g of this.args.log||[]){const p=e.$Fm.exec(g);p&&p[1]&&p[2]&&l.push([p[1],p[2]])}return l.length?l:void 0}get serviceMachineIdResource(){return(0,P.$Jg)(R.URI.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){const l=I.env.VSCODE_PORTABLE;return l?R.URI.file((0,j.$jc)(l,"policy.json")):(0,P.$Jg)(this.userHome,this.c.dataFolderName,"policy.json")}}get continueOn(){return this.args.continueOn}set continueOn(l){this.args.continueOn=l}get args(){return this.a}constructor(l,g,p){this.a=l,this.b=g,this.c=p,this.editSessionId=this.args.editSessionId}}e.$Gm=m,Se([N.$zh],m.prototype,"appRoot",null),Se([N.$zh],m.prototype,"userHome",null),Se([N.$zh],m.prototype,"userDataPath",null),Se([N.$zh],m.prototype,"appSettingsHome",null),Se([N.$zh],m.prototype,"tmpDir",null),Se([N.$zh],m.prototype,"cacheHome",null),Se([N.$zh],m.prototype,"stateResource",null),Se([N.$zh],m.prototype,"userRoamingDataHome",null),Se([N.$zh],m.prototype,"userDataSyncHome",null),Se([N.$zh],m.prototype,"sync",null),Se([N.$zh],m.prototype,"machineSettingsResource",null),Se([N.$zh],m.prototype,"workspaceStorageHome",null),Se([N.$zh],m.prototype,"localHistoryHome",null),Se([N.$zh],m.prototype,"keyboardLayoutResource",null),Se([N.$zh],m.prototype,"argvResource",null),Se([N.$zh],m.prototype,"isExtensionDevelopment",null),Se([N.$zh],m.prototype,"untitledWorkspacesHome",null),Se([N.$zh],m.prototype,"builtinExtensionsPath",null),Se([N.$zh],m.prototype,"extensionsPath",null),Se([N.$zh],m.prototype,"extensionDevelopmentLocationURI",null),Se([N.$zh],m.prototype,"extensionDevelopmentKind",null),Se([N.$zh],m.prototype,"extensionTestsLocationURI",null),Se([N.$zh],m.prototype,"debugExtensionHost",null),Se([N.$zh],m.prototype,"logLevel",null),Se([N.$zh],m.prototype,"extensionLogLevel",null),Se([N.$zh],m.prototype,"serviceMachineIdResource",null),Se([N.$zh],m.prototype,"disableTelemetry",null),Se([N.$zh],m.prototype,"disableWorkspaceTrust",null),Se([N.$zh],m.prototype,"useInMemorySecretStorage",null),Se([N.$zh],m.prototype,"policyFile",null);function C(E,l){return k(E["inspect-extensions"],E["inspect-brk-extensions"],5870,l,E.debugId,E.extensionEnvironment)}e.$Hm=C;function k(E,l,g,p,w,h){const u=Number(l||E)||(p?null:g),c=u?!!l:!1;let b;if(h)try{b=JSON.parse(h)}catch{}return{port:u,break:c,debugId:w,env:b}}e.$Im=k}),function(){"use strict";function oe(e,D,N){function L(I,P){const R=j(I,P),m=[R];return e.isAbsolute(R)||m.unshift(N),e.resolve(...m)}function j(I,P){process.env.VSCODE_DEV&&(P="code-oss-dev"),process.env.VSCODE_DEV_ONBOARDING&&(P="code-oss-dev-onboarding");const R=process.env.VSCODE_PORTABLE;if(R)return e.join(R,"user-data");let m=process.env.VSCODE_APPDATA;if(m)return e.join(m,P);const C=I["user-data-dir"];if(C)return C;switch(process.platform){case"win32":if(m=process.env.APPDATA,!m){const k=process.env.USERPROFILE;if(typeof k!="string")throw new Error("Windows: Unexpected undefined %USERPROFILE% environment variable");m=e.join(k,"AppData","Roaming")}break;case"darwin":m=e.join(D.homedir(),"Library","Application Support");break;case"linux":m=process.env.XDG_CONFIG_HOME||e.join(D.homedir(),".config");break;default:throw new Error("Platform not supported")}return e.join(m,P)}return{getUserDataPath:L}}if(typeof define=="function")define(ue[180],de([268,36,37]),function(e,D,N){return oe(e,D,N.cwd())});else if(typeof module=="object"&&typeof module.exports=="object"){const e=require("path"),D=require("os");module.exports=oe(e,D,process.env.VSCODE_CWD||process.cwd())}else throw new Error("Unknown context")}(),define(ue[181],de([0,1,36,179,180]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Lm=e.$Km=e.$Jm=void 0;class j extends N.$Gm{constructor(m,C){super(m,{homeDir:(0,D.homedir)(),tmpDir:(0,D.tmpdir)(),userDataDir:(0,L.getUserDataPath)(m,C.nameShort)},C)}}e.$Jm=j;function I(R,m){return(0,N.$Im)(R["inspect-ptyhost"],R["inspect-brk-ptyhost"],5877,m,R.extensionEnvironment)}e.$Km=I;function P(R,m){return(0,N.$Im)(R["inspect-sharedprocess"],R["inspect-brk-sharedprocess"],5879,m,R.extensionEnvironment)}e.$Lm=P}),define(ue[182],de([0,1,12,153]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$gq=void 0;function L(I,P,R,m){try{j(I,P,R,m)}catch(C){I.error(C?.message??C)}return P}e.$gq=L;function j(I,P,R,m){const C=(k,E,l)=>{const g=k[E];if((0,D.$Kf)(g)){const p=g,w=p.length;if(w>1&&p[0]==="%"&&p[w-1]==="%"){const h=p.substr(1,w-2);let f=R[h];f===void 0&&m&&(f=m[h]);const u=typeof f=="string"?f:f?.message,c=m?.[h],b=typeof c=="string"?c:c?.message;if(!u){b||I.warn(`[${P.name}]: ${(0,N.localize)(0,null,h)}`);return}if(l&&(E==="title"||E==="category")&&b&&b!==u){const i={value:u,original:b};k[E]=i}else k[E]=u}}else if((0,D.$Mf)(g))for(const p in g)g.hasOwnProperty(p)&&(p==="commands"?C(g,p,!0):C(g,p,l));else if(Array.isArray(g))for(let p=0;p<g.length;p++)C(g,p,l)};for(const k in P)P.hasOwnProperty(k)&&C(P,k)}}),define(ue[183],de([0,1,71,156]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$oq=void 0;function L(j){return(0,D.$0p)(j,"extension/package.json").then(I=>{try{return JSON.parse(I.toString("utf8"))}catch{throw new Error((0,N.localize)(0,null))}})}e.$oq=L}),define(ue[184],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$JRc=e.$IRc=void 0;class D{constructor(j){this.a=j}get ignoredRecommendations(){throw new Error("not supported")}promptImportantExtensionsInstallNotification(j){return this.a.call("promptImportantExtensionsInstallNotification",[j])}promptWorkspaceRecommendations(j){throw new Error("not supported")}hasToIgnoreRecommendationNotifications(){throw new Error("not supported")}}e.$IRc=D;class N{constructor(j){this.a=j}listen(j,I){throw new Error(`Event not found: ${I}`)}call(j,I,P){switch(I){case"promptImportantExtensionsInstallNotification":return this.a.promptImportantExtensionsInstallNotification(P[0])}throw new Error(`Call not found: ${I}`)}}e.$JRc=N}),define(ue[72],de([0,1,20,90,157,49]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$sp=e.$rp=e.$qp=e.$pp=e.$op=e.$np=e.$mp=void 0;const I=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,P=/^-(\d{4})(\d{2})(\d{2})$/;function R(h){return h=h.trim(),h==="*"||I.test(h)}e.$mp=R;function m(h){if(!R(h))return null;if(h=h.trim(),h==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const f=h.match(I);return f?{hasCaret:f[1]==="^",hasGreaterEquals:f[1]===">=",majorBase:f[2]==="x"?0:parseInt(f[2],10),majorMustEqual:f[2]!=="x",minorBase:f[4]==="x"?0:parseInt(f[4],10),minorMustEqual:f[4]!=="x",patchBase:f[6]==="x"?0:parseInt(f[6],10),patchMustEqual:f[6]!=="x",preRelease:f[8]||null}:null}e.$np=m;function C(h){if(!h)return null;const f=h.majorBase,u=h.majorMustEqual,c=h.minorBase;let b=h.minorMustEqual;const i=h.patchBase;let r=h.patchMustEqual;h.hasCaret&&(f===0||(b=!1),r=!1);let n=0;if(h.preRelease){const s=P.exec(h.preRelease);if(s){const[,t,o,a]=s;n=Date.UTC(Number(t),Number(o)-1,Number(a))}}return{majorBase:f,majorMustEqual:u,minorBase:c,minorMustEqual:b,patchBase:i,patchMustEqual:r,isMinimum:h.hasGreaterEquals,notBefore:n}}e.$op=C;function k(h,f,u){let c;typeof h=="string"?c=C(m(h)):c=h;let b;f instanceof Date?b=f.getTime():typeof f=="string"&&(b=new Date(f).getTime());let i;if(typeof u=="string"?i=C(m(u)):i=u,!c||!i)return!1;const r=c.majorBase,n=c.minorBase,s=c.patchBase;let t=i.majorBase,o=i.minorBase,a=i.patchBase;const y=i.notBefore;let $=i.majorMustEqual,d=i.minorMustEqual,v=i.patchMustEqual;return i.isMinimum?r>t?!0:r<t?!1:n>o?!0:n<o||b&&b<y?!1:s>=a:(r===1&&t===0&&(!$||!d||!v)&&(t=1,o=0,a=0,$=!0,d=!1,v=!1),r<t?!1:r>t?!$:n<o?!1:n>o?!d:s<a?!1:s>a?!v:!(b&&b<y))}e.$pp=k;function E(h,f,u,c,b){const i=[];if(typeof c.publisher<"u"&&typeof c.publisher!="string")return i.push([N.default.Error,L.localize(0,null)]),i;if(typeof c.name!="string")return i.push([N.default.Error,L.localize(1,null,"name")]),i;if(typeof c.version!="string")return i.push([N.default.Error,L.localize(2,null,"version")]),i;if(!c.engines)return i.push([N.default.Error,L.localize(3,null,"engines")]),i;if(typeof c.engines.vscode!="string")return i.push([N.default.Error,L.localize(4,null,"engines.vscode")]),i;if(typeof c.extensionDependencies<"u"&&!w(c.extensionDependencies))return i.push([N.default.Error,L.localize(5,null,"extensionDependencies")]),i;if(typeof c.activationEvents<"u"){if(!w(c.activationEvents))return i.push([N.default.Error,L.localize(6,null,"activationEvents")]),i;if(typeof c.main>"u"&&typeof c.browser>"u")return i.push([N.default.Error,L.localize(7,null,"activationEvents","main","browser")]),i}if(typeof c.extensionKind<"u"&&typeof c.main>"u"&&i.push([N.default.Warning,L.localize(8,null,"extensionKind")]),typeof c.main<"u"){if(typeof c.main!="string")return i.push([N.default.Error,L.localize(9,null,"main")]),i;{const s=(0,D.$Jg)(u,c.main);(0,D.$Dg)(s,u)||i.push([N.default.Warning,L.localize(10,null,s.path,u.path)])}}if(typeof c.browser<"u"){if(typeof c.browser!="string")return i.push([N.default.Error,L.localize(11,null,"browser")]),i;{const s=(0,D.$Jg)(u,c.browser);(0,D.$Dg)(s,u)||i.push([N.default.Warning,L.localize(12,null,s.path,u.path)])}}if(!j.valid(c.version))return i.push([N.default.Error,L.localize(13,null)]),i;const r=[];if(!l(h,f,c,b,r))for(const s of r)i.push([N.default.Error,s]);return i}e.$qp=E;function l(h,f,u,c,b){return c||typeof u.main>"u"&&typeof u.browser>"u"?!0:p(h,f,u.engines.vscode,b)}e.$rp=l;function g(h,f,u){return h==="*"||p(f,u,h)}e.$sp=g;function p(h,f,u,c=[]){const b=C(m(u));if(!b)return c.push(L.localize(14,null,u)),!1;if(b.majorBase===0){if(!b.majorMustEqual||!b.minorMustEqual)return c.push(L.localize(15,null,u)),!1}else if(!b.majorMustEqual)return c.push(L.localize(16,null,u)),!1;return k(h,f,b)?!0:(c.push(L.localize(17,null,h,u)),!1)}function w(h){if(!Array.isArray(h))return!1;for(let f=0,u=h.length;f<u;f++)if(typeof h[f]!="string")return!1;return!0}}),define(ue[43],de([0,1,14,31]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ep=void 0;async function L(j,I,P){let R=P&&P.get("storage.serviceMachineId",-1)||null;if(R)return R;try{const C=(await I.readFile(j.serviceMachineIdResource)).value.toString();R=(0,N.$rg)(C)?C:null}catch{R=null}if(!R){R=(0,N.$sg)();try{await I.writeFile(j.serviceMachineIdResource,D.$ke.fromString(R))}catch{}}return P?.store("storage.serviceMachineId",R,-1,1),R}e.$Ep=L}),define(ue[73],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$5h=void 0;class D{constructor(L,j=[],I=!1){this.ctor=L,this.staticArguments=j,this.supportsDelayedInstantiation=I}}e.$5h=D}),define(ue[185],de([0,1,73]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$js=e.$is=e.InstantiationType=void 0;const N=[];var L;(function(P){P[P.Eager=0]="Eager",P[P.Delayed=1]="Delayed"})(L||(e.InstantiationType=L={}));function j(P,R,m){R instanceof D.$5h||(R=new D.$5h(R,[],!!m)),N.push([P,R])}e.$is=j;function I(){return N}e.$js=I}),define(ue[186],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Xq=e.$Wq=void 0;class D{constructor(j,I){this.key=j,this.data=I,this.incoming=new Map,this.outgoing=new Map}}e.$Wq=D;class N{constructor(j){this.b=j,this.a=new Map}roots(){const j=[];for(const I of this.a.values())I.outgoing.size===0&&j.push(I);return j}insertEdge(j,I){const P=this.lookupOrInsertNode(j),R=this.lookupOrInsertNode(I);P.outgoing.set(R.key,R),R.incoming.set(P.key,P)}removeNode(j){const I=this.b(j);this.a.delete(I);for(const P of this.a.values())P.outgoing.delete(I),P.incoming.delete(I)}lookupOrInsertNode(j){const I=this.b(j);let P=this.a.get(I);return P||(P=new D(I,j),this.a.set(I,P)),P}lookup(j){return this.a.get(this.b(j))}isEmpty(){return this.a.size===0}toString(){const j=[];for(const[I,P]of this.a)j.push(`${I}
	(-> incoming)[${[...P.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...P.outgoing.keys()].join(",")}]
`);return j.join(`
`)}findCycleSlow(){for(const[j,I]of this.a){const P=new Set([j]),R=this.c(I,P);if(R)return R}}c(j,I){for(const[P,R]of j.outgoing){if(I.has(P))return[...I,P].join(" -> ");I.add(P);const m=this.c(R,I);if(m)return m;I.delete(P)}}}e.$Xq=N}),define(ue[4],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$9h=e.$8h=e.$7h=e._util=void 0;var D;(function(I){I.serviceIds=new Map,I.DI_TARGET="$di$target",I.DI_DEPENDENCIES="$di$dependencies";function P(R){return R[I.DI_DEPENDENCIES]||[]}I.getServiceDependencies=P})(D||(e._util=D={})),e.$7h=L("instantiationService");function N(I,P,R){P[D.DI_TARGET]===P?P[D.DI_DEPENDENCIES].push({id:I,index:R}):(P[D.DI_DEPENDENCIES]=[{id:I,index:R}],P[D.DI_TARGET]=P)}function L(I){if(D.serviceIds.has(I))return D.serviceIds.get(I);const P=function(R,m,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");N(P,R,C)};return P.toString=()=>I,D.serviceIds.set(I,P),P}e.$8h=L;function j(I){return I}e.$9h=j}),define(ue[187],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$iRc=void 0,e.$iRc=(0,D.$8h)("checksumService")}),define(ue[21],de([0,1,12,10,4]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Li=e.$Ki=e.$Ji=e.$Ii=e.$Hi=e.$Gi=e.$Fi=e.$Ei=e.ConfigurationTarget=e.$Di=e.$Ci=e.$Bi=void 0,e.$Bi=(0,L.$8h)("configurationService");function j(h){return h&&typeof h=="object"&&(!h.overrideIdentifier||typeof h.overrideIdentifier=="string")&&(!h.resource||h.resource instanceof N.URI)}e.$Ci=j;function I(h){return h&&typeof h=="object"&&(!h.overrideIdentifiers||Array.isArray(h.overrideIdentifiers))&&!h.overrideIdentifier&&(!h.resource||h.resource instanceof N.URI)}e.$Di=I;var P;(function(h){h[h.APPLICATION=1]="APPLICATION",h[h.USER=2]="USER",h[h.USER_LOCAL=3]="USER_LOCAL",h[h.USER_REMOTE=4]="USER_REMOTE",h[h.WORKSPACE=5]="WORKSPACE",h[h.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",h[h.DEFAULT=7]="DEFAULT",h[h.MEMORY=8]="MEMORY"})(P||(e.ConfigurationTarget=P={}));function R(h){switch(h){case 1:return"APPLICATION";case 2:return"USER";case 3:return"USER_LOCAL";case 4:return"USER_REMOTE";case 5:return"WORKSPACE";case 6:return"WORKSPACE_FOLDER";case 7:return"DEFAULT";case 8:return"MEMORY"}}e.$Ei=R;function m(h){return h.applicationValue!==void 0||h.userValue!==void 0||h.userLocalValue!==void 0||h.userRemoteValue!==void 0||h.workspaceValue!==void 0||h.workspaceFolderValue!==void 0}e.$Fi=m;function C(h,f){const u=Object.create(null);for(const c in h)k(u,c,h[c],f);return u}e.$Gi=C;function k(h,f,u,c){const b=f.split("."),i=b.pop();let r=h;for(let n=0;n<b.length;n++){const s=b[n];let t=r[s];switch(typeof t){case"undefined":t=r[s]=Object.create(null);break;case"object":break;default:c(`Ignoring ${f} as ${b.slice(0,n+1).join(".")} is ${JSON.stringify(t)}`);return}r=t}if(typeof r=="object"&&r!==null)try{r[i]=u}catch{c(`Ignoring ${f} as ${b.join(".")} is ${JSON.stringify(r)}`)}else c(`Ignoring ${f} as ${b.join(".")} is ${JSON.stringify(r)}`)}e.$Hi=k;function E(h,f){const u=f.split(".");l(h,u)}e.$Ii=E;function l(h,f){const u=f.shift();if(f.length===0){delete h[u];return}if(Object.keys(h).indexOf(u)!==-1){const c=h[u];typeof c=="object"&&!Array.isArray(c)&&(l(c,f),Object.keys(c).length===0&&delete h[u])}}function g(h,f,u){function c(r,n){let s=r;for(const t of n){if(typeof s!="object"||s===null)return;s=s[t]}return s}const b=f.split("."),i=c(h,b);return typeof i>"u"?u:i}e.$Ji=g;function p(h,f,u){Object.keys(f).forEach(c=>{c!=="__proto__"&&(c in h?D.$Mf(h[c])&&D.$Mf(f[c])?p(h[c],f[c],u):u&&(h[c]=f[c]):h[c]=f[c])})}e.$Ki=p;function w(h){return h.replace(/[\[\]]/g,"")}e.$Li=w}),define(ue[95],de([0,1,5,27,178,4,149,7]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$pj=e.$oj=e.$nj=e.$mj=e.$lj=e.$kj=e.$jj=e.$ij=e.$hj=e.$gj=e.$fj=e.$ej=e.$dj=e.$cj=e.$bj=e.$aj=e.$_i=e.$$i=e.$0i=e.$9i=e.$8i=e.$7i=e.$6i=e.$5i=e.ContextKeyExprType=e.$4i=void 0;const R=new Map;R.set("false",!1),R.set("true",!0),R.set("isMac",D.$j),R.set("isLinux",D.$k),R.set("isWindows",D.$i),R.set("isWeb",D.$o),R.set("isMacNative",D.$j&&!D.$o),R.set("isEdge",D.$H),R.set("isFirefox",D.$F),R.set("isChrome",D.$E),R.set("isSafari",D.$G);function m(U,O){if(R.get(U)!==void 0)throw(0,P.$7)("contextkey.setConstant(k, v) invoked with already set constant `k`");R.set(U,O)}e.$4i=m;const C=Object.prototype.hasOwnProperty;var k;(function(U){U[U.False=0]="False",U[U.True=1]="True",U[U.Defined=2]="Defined",U[U.Not=3]="Not",U[U.Equals=4]="Equals",U[U.NotEquals=5]="NotEquals",U[U.And=6]="And",U[U.Regex=7]="Regex",U[U.NotRegex=8]="NotRegex",U[U.Or=9]="Or",U[U.In=10]="In",U[U.NotIn=11]="NotIn",U[U.Greater=12]="Greater",U[U.GreaterEquals=13]="GreaterEquals",U[U.Smaller=14]="Smaller",U[U.SmallerEquals=15]="SmallerEquals",U[U.Function=16]="Function"})(k||(e.ContextKeyExprType=k={}));const E={regexParsingWithErrorRecovery:!0},l=(0,I.localize)(0,null),g=(0,I.localize)(1,null),p=(0,I.localize)(2,null),w=(0,I.localize)(3,null),h=(0,I.localize)(4,null),f=(0,I.localize)(5,null),u=(0,I.localize)(6,null),c=(0,I.localize)(7,null);class b{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(O=E){this.k=O,this.d=new L.$3i,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(O){if(O===""){this.h.push({message:l,offset:0,lexeme:"",additionalInfo:g});return}this.f=this.d.reset(O).scan(),this.g=0,this.h=[];try{const W=this.l();if(!this.E()){const B=this.D(),_=B.type===17?f:void 0;throw this.h.push({message:h,offset:B.offset,lexeme:L.$3i.getLexeme(B),additionalInfo:_}),b.c}return W}catch(W){if(W!==b.c)throw W;return}}l(){return this.m()}m(){const O=[this.o()];for(;this.y(16);){const W=this.o();O.push(W)}return O.length===1?O[0]:i.or(...O)}o(){const O=[this.s()];for(;this.y(15);){const W=this.s();O.push(W)}return O.length===1?O[0]:i.and(...O)}s(){if(this.y(2)){const O=this.D();switch(O.type){case 11:return this.z(),o.INSTANCE;case 12:return this.z(),a.INSTANCE;case 0:{this.z();const W=this.l();return this.A(1,w),W?.negate()}case 17:return this.z(),A.create(O.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",O)}}return this.t()}t(){const O=this.D();switch(O.type){case 11:return this.z(),i.true();case 12:return this.z(),i.false();case 0:{this.z();const W=this.l();return this.A(1,w),W}case 17:{const W=O.lexeme;if(this.z(),this.y(9)){const _=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),_.type!==10)throw this.B("REGEX",_);const ee=_.lexeme,X=ee.lastIndexOf("/"),ie=X===ee.length-1?void 0:this.w(ee.substring(X+1));let ce;try{ce=new RegExp(ee.substring(1,X),ie)}catch{throw this.B("REGEX",_)}return Q.create(W,ce)}switch(_.type){case 10:case 19:{const ee=[_.lexeme];this.z();let X=this.D(),ie=0;for(let re=0;re<_.lexeme.length;re++)_.lexeme.charCodeAt(re)===40?ie++:_.lexeme.charCodeAt(re)===41&&ie--;for(;!this.E()&&X.type!==15&&X.type!==16;){switch(X.type){case 0:ie++;break;case 1:ie--;break;case 10:case 18:for(let re=0;re<X.lexeme.length;re++)X.lexeme.charCodeAt(re)===40?ie++:_.lexeme.charCodeAt(re)===41&&ie--}if(ie<0)break;ee.push(L.$3i.getLexeme(X)),this.z(),X=this.D()}const ce=ee.join(""),fe=ce.lastIndexOf("/"),be=fe===ce.length-1?void 0:this.w(ce.substring(fe+1));let le;try{le=new RegExp(ce.substring(1,fe),be)}catch{throw this.B("REGEX",_)}return i.regex(W,le)}case 18:{const ee=_.lexeme;this.z();let X=null;if(!(0,N.$Le)(ee)){const ie=ee.indexOf("/"),ce=ee.lastIndexOf("/");if(ie!==ce&&ie>=0){const fe=ee.slice(ie+1,ce),be=ee[ce+1]==="i"?"i":"";try{X=new RegExp(fe,be)}catch{throw this.B("REGEX",_)}}}if(X===null)throw this.B("REGEX",_);return Q.create(W,X)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,p);const _=this.u();return i.notIn(W,_)}switch(this.D().type){case 3:{this.z();const _=this.u();if(this.x().type===18)return i.equals(W,_);switch(_){case"true":return i.has(W);case"false":return i.not(W);default:return i.equals(W,_)}}case 4:{this.z();const _=this.u();if(this.x().type===18)return i.notEquals(W,_);switch(_){case"true":return i.not(W);case"false":return i.has(W);default:return i.notEquals(W,_)}}case 5:return this.z(),Y.create(W,this.u());case 6:return this.z(),G.create(W,this.u());case 7:return this.z(),q.create(W,this.u());case 8:return this.z(),M.create(W,this.u());case 13:return this.z(),i.in(W,this.u());default:return i.has(W)}}case 20:throw this.h.push({message:u,offset:O.offset,lexeme:"",additionalInfo:c}),b.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const O=this.D();switch(O.type){case 17:case 18:return this.z(),O.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(O){return O.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(O){return this.C(O)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(O,W){if(this.C(O))return this.z();throw this.B(W,this.D())}B(O,W,B){const _=(0,I.localize)(8,null,O,L.$3i.getLexeme(W)),ee=W.offset,X=L.$3i.getLexeme(W);return this.h.push({message:_,offset:ee,lexeme:X,additionalInfo:B}),b.c}C(O){return this.D().type===O}D(){return this.f[this.g]}E(){return this.D().type===20}}e.$5i=b;class i{static false(){return o.INSTANCE}static true(){return a.INSTANCE}static has(O){return y.create(O)}static equals(O,W){return $.create(O,W)}static notEquals(O,W){return S.create(O,W)}static regex(O,W){return Q.create(O,W)}static in(O,W){return d.create(O,W)}static notIn(O,W){return v.create(O,W)}static not(O){return A.create(O)}static and(...O){return H.create(O,null,!0)}static or(...O){return J.create(O,null,!0)}static greater(O,W){return q.create(O,W)}static greaterEquals(O,W){return M.create(O,W)}static smaller(O,W){return Y.create(O,W)}static smallerEquals(O,W){return G.create(O,W)}static function(O){return t.create(O)}static{this.c=new b({regexParsingWithErrorRecovery:!1})}static deserialize(O){return O==null?void 0:this.c.parse(O)}}e.$6i=i;function r(U){const O=new b({regexParsingWithErrorRecovery:!1});return U.map(W=>(O.parse(W),O.lexingErrors.length>0?O.lexingErrors.map(B=>({errorMessage:B.additionalInfo?(0,I.localize)(9,null,B.additionalInfo):(0,I.localize)(10,null),offset:B.offset,length:B.lexeme.length})):O.parsingErrors.length>0?O.parsingErrors.map(B=>({errorMessage:B.additionalInfo?`${B.message}. ${B.additionalInfo}`:B.message,offset:B.offset,length:B.lexeme.length})):[]))}e.$7i=r;function n(U,O){const W=U?U.substituteConstants():void 0,B=O?O.substituteConstants():void 0;return!W&&!B?!0:!W||!B?!1:W.equals(B)}e.$8i=n;function s(U,O){return U.cmp(O)}class t{static create(O){return new t(O)}constructor(O){this.type=16,this.c=O}cmp(O){return this.type-O.type}equals(O){return O.type===this.type&&O.c===this.c}substituteConstants(){return this}evaluate(O){return this.c()}serialize(){return"(arbitrary function)"}keys(){return[]}map(O){return this}negate(){return new t(()=>!this.c())}}e.$9i=t;class o{static{this.INSTANCE=new o}constructor(){this.type=0}cmp(O){return this.type-O.type}equals(O){return O.type===this.type}substituteConstants(){return this}evaluate(O){return!1}serialize(){return"false"}keys(){return[]}map(O){return this}negate(){return a.INSTANCE}}e.$0i=o;class a{static{this.INSTANCE=new a}constructor(){this.type=1}cmp(O){return this.type-O.type}equals(O){return O.type===this.type}substituteConstants(){return this}evaluate(O){return!0}serialize(){return"true"}keys(){return[]}map(O){return this}negate(){return o.INSTANCE}}e.$$i=a;class y{static create(O,W=null){const B=R.get(O);return typeof B=="boolean"?B?a.INSTANCE:o.INSTANCE:new y(O,W)}constructor(O,W){this.key=O,this.c=W,this.type=2}cmp(O){return O.type!==this.type?this.type-O.type:se(this.key,O.key)}equals(O){return O.type===this.type?this.key===O.key:!1}substituteConstants(){const O=R.get(this.key);return typeof O=="boolean"?O?a.INSTANCE:o.INSTANCE:this}evaluate(O){return!!O.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(O){return O.mapDefined(this.key)}negate(){return this.c||(this.c=A.create(this.key,this)),this.c}}e.$_i=y;class ${static create(O,W,B=null){if(typeof W=="boolean")return W?y.create(O,B):A.create(O,B);const _=R.get(O);return typeof _=="boolean"?W===(_?"true":"false")?a.INSTANCE:o.INSTANCE:new $(O,W,B)}constructor(O,W,B){this.c=O,this.d=W,this.f=B,this.type=4}cmp(O){return O.type!==this.type?this.type-O.type:V(this.c,this.d,O.c,O.d)}equals(O){return O.type===this.type?this.c===O.c&&this.d===O.d:!1}substituteConstants(){const O=R.get(this.c);if(typeof O=="boolean"){const W=O?"true":"false";return this.d===W?a.INSTANCE:o.INSTANCE}return this}evaluate(O){return O.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(O){return O.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=S.create(this.c,this.d,this)),this.f}}e.$aj=$;class d{static create(O,W){return new d(O,W)}constructor(O,W){this.d=O,this.f=W,this.type=10,this.c=null}cmp(O){return O.type!==this.type?this.type-O.type:V(this.d,this.f,O.d,O.f)}equals(O){return O.type===this.type?this.d===O.d&&this.f===O.f:!1}substituteConstants(){return this}evaluate(O){const W=O.getValue(this.f),B=O.getValue(this.d);return Array.isArray(W)?W.includes(B):typeof B=="string"&&typeof W=="object"&&W!==null?C.call(W,B):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(O){return O.mapIn(this.d,this.f)}negate(){return this.c||(this.c=v.create(this.d,this.f)),this.c}}e.$bj=d;class v{static create(O,W){return new v(O,W)}constructor(O,W){this.d=O,this.f=W,this.type=11,this.c=d.create(O,W)}cmp(O){return O.type!==this.type?this.type-O.type:this.c.cmp(O.c)}equals(O){return O.type===this.type?this.c.equals(O.c):!1}substituteConstants(){return this}evaluate(O){return!this.c.evaluate(O)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(O){return O.mapNotIn(this.d,this.f)}negate(){return this.c}}e.$cj=v;class S{static create(O,W,B=null){if(typeof W=="boolean")return W?A.create(O,B):y.create(O,B);const _=R.get(O);return typeof _=="boolean"?W===(_?"true":"false")?o.INSTANCE:a.INSTANCE:new S(O,W,B)}constructor(O,W,B){this.c=O,this.d=W,this.f=B,this.type=5}cmp(O){return O.type!==this.type?this.type-O.type:V(this.c,this.d,O.c,O.d)}equals(O){return O.type===this.type?this.c===O.c&&this.d===O.d:!1}substituteConstants(){const O=R.get(this.c);if(typeof O=="boolean"){const W=O?"true":"false";return this.d===W?o.INSTANCE:a.INSTANCE}return this}evaluate(O){return O.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(O){return O.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=$.create(this.c,this.d,this)),this.f}}e.$dj=S;class A{static create(O,W=null){const B=R.get(O);return typeof B=="boolean"?B?o.INSTANCE:a.INSTANCE:new A(O,W)}constructor(O,W){this.c=O,this.d=W,this.type=3}cmp(O){return O.type!==this.type?this.type-O.type:se(this.c,O.c)}equals(O){return O.type===this.type?this.c===O.c:!1}substituteConstants(){const O=R.get(this.c);return typeof O=="boolean"?O?o.INSTANCE:a.INSTANCE:this}evaluate(O){return!O.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(O){return O.mapNot(this.c)}negate(){return this.d||(this.d=y.create(this.c,this)),this.d}}e.$ej=A;function T(U,O){if(typeof U=="string"){const W=parseFloat(U);isNaN(W)||(U=W)}return typeof U=="string"||typeof U=="number"?O(U):o.INSTANCE}class q{static create(O,W,B=null){return T(W,_=>new q(O,_,B))}constructor(O,W,B){this.c=O,this.d=W,this.f=B,this.type=12}cmp(O){return O.type!==this.type?this.type-O.type:V(this.c,this.d,O.c,O.d)}equals(O){return O.type===this.type?this.c===O.c&&this.d===O.d:!1}substituteConstants(){return this}evaluate(O){return typeof this.d=="string"?!1:parseFloat(O.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(O){return O.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=G.create(this.c,this.d,this)),this.f}}e.$fj=q;class M{static create(O,W,B=null){return T(W,_=>new M(O,_,B))}constructor(O,W,B){this.c=O,this.d=W,this.f=B,this.type=13}cmp(O){return O.type!==this.type?this.type-O.type:V(this.c,this.d,O.c,O.d)}equals(O){return O.type===this.type?this.c===O.c&&this.d===O.d:!1}substituteConstants(){return this}evaluate(O){return typeof this.d=="string"?!1:parseFloat(O.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(O){return O.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=Y.create(this.c,this.d,this)),this.f}}e.$gj=M;class Y{static create(O,W,B=null){return T(W,_=>new Y(O,_,B))}constructor(O,W,B){this.c=O,this.d=W,this.f=B,this.type=14}cmp(O){return O.type!==this.type?this.type-O.type:V(this.c,this.d,O.c,O.d)}equals(O){return O.type===this.type?this.c===O.c&&this.d===O.d:!1}substituteConstants(){return this}evaluate(O){return typeof this.d=="string"?!1:parseFloat(O.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(O){return O.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=M.create(this.c,this.d,this)),this.f}}e.$hj=Y;class G{static create(O,W,B=null){return T(W,_=>new G(O,_,B))}constructor(O,W,B){this.c=O,this.d=W,this.f=B,this.type=15}cmp(O){return O.type!==this.type?this.type-O.type:V(this.c,this.d,O.c,O.d)}equals(O){return O.type===this.type?this.c===O.c&&this.d===O.d:!1}substituteConstants(){return this}evaluate(O){return typeof this.d=="string"?!1:parseFloat(O.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(O){return O.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=q.create(this.c,this.d,this)),this.f}}e.$ij=G;class Q{static create(O,W){return new Q(O,W)}constructor(O,W){this.d=O,this.f=W,this.type=7,this.c=null}cmp(O){if(O.type!==this.type)return this.type-O.type;if(this.d<O.d)return-1;if(this.d>O.d)return 1;const W=this.f?this.f.source:"",B=O.f?O.f.source:"";return W<B?-1:W>B?1:0}equals(O){if(O.type===this.type){const W=this.f?this.f.source:"",B=O.f?O.f.source:"";return this.d===O.d&&W===B}return!1}substituteConstants(){return this}evaluate(O){const W=O.getValue(this.d);return this.f?this.f.test(W):!1}serialize(){const O=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${O}`}keys(){return[this.d]}map(O){return O.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=F.create(this)),this.c}}e.$jj=Q;class F{static create(O){return new F(O)}constructor(O){this.c=O,this.type=8}cmp(O){return O.type!==this.type?this.type-O.type:this.c.cmp(O.c)}equals(O){return O.type===this.type?this.c.equals(O.c):!1}substituteConstants(){return this}evaluate(O){return!this.c.evaluate(O)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(O){return new F(this.c.map(O))}negate(){return this.c}}e.$kj=F;function te(U){let O=null;for(let W=0,B=U.length;W<B;W++){const _=U[W].substituteConstants();if(U[W]!==_&&O===null){O=[];for(let ee=0;ee<W;ee++)O[ee]=U[ee]}O!==null&&(O[W]=_)}return O===null?U:O}class H{static create(O,W,B){return H.d(O,W,B)}constructor(O,W){this.expr=O,this.c=W,this.type=6}cmp(O){if(O.type!==this.type)return this.type-O.type;if(this.expr.length<O.expr.length)return-1;if(this.expr.length>O.expr.length)return 1;for(let W=0,B=this.expr.length;W<B;W++){const _=s(this.expr[W],O.expr[W]);if(_!==0)return _}return 0}equals(O){if(O.type===this.type){if(this.expr.length!==O.expr.length)return!1;for(let W=0,B=this.expr.length;W<B;W++)if(!this.expr[W].equals(O.expr[W]))return!1;return!0}return!1}substituteConstants(){const O=te(this.expr);return O===this.expr?this:H.create(O,this.c,!1)}evaluate(O){for(let W=0,B=this.expr.length;W<B;W++)if(!this.expr[W].evaluate(O))return!1;return!0}static d(O,W,B){const _=[];let ee=!1;for(const X of O)if(X){if(X.type===1){ee=!0;continue}if(X.type===0)return o.INSTANCE;if(X.type===6){_.push(...X.expr);continue}_.push(X)}if(_.length===0&&ee)return a.INSTANCE;if(_.length!==0){if(_.length===1)return _[0];_.sort(s);for(let X=1;X<_.length;X++)_[X-1].equals(_[X])&&(_.splice(X,1),X--);if(_.length===1)return _[0];for(;_.length>1;){const X=_[_.length-1];if(X.type!==9)break;_.pop();const ie=_.pop(),ce=_.length===0,fe=J.create(X.expr.map(be=>H.create([be,ie],null,B)),null,ce);fe&&(_.push(fe),_.sort(s))}if(_.length===1)return _[0];if(B){for(let X=0;X<_.length;X++)for(let ie=X+1;ie<_.length;ie++)if(_[X].negate().equals(_[ie]))return o.INSTANCE;if(_.length===1)return _[0]}return new H(_,W)}}serialize(){return this.expr.map(O=>O.serialize()).join(" && ")}keys(){const O=[];for(const W of this.expr)O.push(...W.keys());return O}map(O){return new H(this.expr.map(W=>W.map(O)),null)}negate(){if(!this.c){const O=[];for(const W of this.expr)O.push(W.negate());this.c=J.create(O,this,!0)}return this.c}}e.$lj=H;class J{static create(O,W,B){return J.d(O,W,B)}constructor(O,W){this.expr=O,this.c=W,this.type=9}cmp(O){if(O.type!==this.type)return this.type-O.type;if(this.expr.length<O.expr.length)return-1;if(this.expr.length>O.expr.length)return 1;for(let W=0,B=this.expr.length;W<B;W++){const _=s(this.expr[W],O.expr[W]);if(_!==0)return _}return 0}equals(O){if(O.type===this.type){if(this.expr.length!==O.expr.length)return!1;for(let W=0,B=this.expr.length;W<B;W++)if(!this.expr[W].equals(O.expr[W]))return!1;return!0}return!1}substituteConstants(){const O=te(this.expr);return O===this.expr?this:J.create(O,this.c,!1)}evaluate(O){for(let W=0,B=this.expr.length;W<B;W++)if(this.expr[W].evaluate(O))return!0;return!1}static d(O,W,B){let _=[],ee=!1;if(O){for(let X=0,ie=O.length;X<ie;X++){const ce=O[X];if(ce){if(ce.type===0){ee=!0;continue}if(ce.type===1)return a.INSTANCE;if(ce.type===9){_=_.concat(ce.expr);continue}_.push(ce)}}if(_.length===0&&ee)return o.INSTANCE;_.sort(s)}if(_.length!==0){if(_.length===1)return _[0];for(let X=1;X<_.length;X++)_[X-1].equals(_[X])&&(_.splice(X,1),X--);if(_.length===1)return _[0];if(B){for(let X=0;X<_.length;X++)for(let ie=X+1;ie<_.length;ie++)if(_[X].negate().equals(_[ie]))return a.INSTANCE;if(_.length===1)return _[0]}return new J(_,W)}}serialize(){return this.expr.map(O=>O.serialize()).join(" || ")}keys(){const O=[];for(const W of this.expr)O.push(...W.keys());return O}map(O){return new J(this.expr.map(W=>W.map(O)),null)}negate(){if(!this.c){const O=[];for(const W of this.expr)O.push(W.negate());for(;O.length>1;){const W=O.shift(),B=O.shift(),_=[];for(const ee of z(W))for(const X of z(B))_.push(H.create([ee,X],null,!1));O.unshift(J.create(_,null,!1))}this.c=J.create(O,this,!0)}return this.c}}e.$mj=J;class x extends y{static{this.d=[]}static all(){return x.d.values()}constructor(O,W,B){super(O,null),this.f=W,typeof B=="object"?x.d.push({...B,key:O}):B!==!0&&x.d.push({key:O,description:B,type:W!=null?typeof W:void 0})}bindTo(O){return O.createKey(this.key,this.f)}getValue(O){return O.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(O){return $.create(this.key,O)}notEqualsTo(O){return S.create(this.key,O)}}e.$nj=x,e.$oj=(0,j.$8h)("contextKeyService");function se(U,O){return U<O?-1:U>O?1:0}function V(U,O,W,B){return U<W?-1:U>W?1:O<B?-1:O>B?1:0}function ne(U,O){if(U.type===0||O.type===1)return!0;if(U.type===9)return O.type===9?K(U.expr,O.expr):!1;if(O.type===9){for(const W of O.expr)if(ne(U,W))return!0;return!1}if(U.type===6){if(O.type===6)return K(O.expr,U.expr);for(const W of U.expr)if(ne(W,O))return!0;return!1}return U.equals(O)}e.$pj=ne;function K(U,O){let W=0,B=0;for(;W<U.length&&B<O.length;){const _=U[W].cmp(O[B]);if(_<0)return!1;_===0&&W++,B++}return W===U.length}function z(U){return U.type===9?U.expr:[U]}}),define(ue[96],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Sm=e.$Rm=e.$Qm=e.ID=void 0,e.ID="diagnosticsService",e.$Qm=(0,D.$8h)(e.ID);function N(j){return!!j.hostName&&!!j.errorMessage}e.$Rm=N;class L{async getPerformanceInfo(I,P){return{}}async getSystemInfo(I,P){return{processArgs:"nullProcessArgs",gpuStatus:"nullGpuStatus",screenReader:"nullScreenReader",remoteData:[],os:"nullOs",memory:"nullMemory",vmHint:"nullVmHint"}}async getDiagnostics(I,P){return""}async getWorkspaceFileExtensions(I){return{extensions:[]}}async reportWorkspaceStats(I){}}e.$Sm=L}),define(ue[97],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$mo=void 0,e.$mo=(0,D.$8h)("downloadService")}),define(ue[15],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$di=e.$ci=void 0,e.$ci=(0,D.$8h)("environmentService"),e.$di=(0,D.$9h)(e.$ci)}),define(ue[29],de([0,1,152,4]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$To=e.$So=e.$Ro=e.$Qo=e.$Po=e.$Oo=e.$No=e.$Mo=e.$Lo=e.ExtensionGalleryErrorCode=e.$Ko=e.ExtensionSignaturetErrorCode=e.ExtensionManagementErrorCode=e.$Jo=e.InstallOperation=e.StatisticType=e.SortOrder=e.SortBy=e.$Io=e.$Ho=e.$Go=e.$Fo=e.$Eo=e.$Do=e.$Co=e.$Bo=e.$Ao=e.$zo=e.$yo=e.$xo=void 0,e.$xo="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",e.$yo=new RegExp(e.$xo),e.$zo="__web_extension",e.$Ao="skipWalkthrough",e.$Bo="extensionsSync",e.$Co="dependecyOrPackExtensionInstall";function L(u){switch(u){case"win32-x64":return"Windows 64 bit";case"win32-arm64":return"Windows ARM";case"linux-x64":return"Linux 64 bit";case"linux-arm64":return"Linux ARM 64";case"linux-armhf":return"Linux ARM";case"alpine-x64":return"Alpine Linux 64 bit";case"alpine-arm64":return"Alpine ARM 64";case"darwin-x64":return"Mac";case"darwin-arm64":return"Mac Silicon";case"web":return"Web";case"universal":return"universal";case"unknown":return"unknown";case"undefined":return"undefined"}}e.$Do=L;function j(u){switch(u){case"win32-x64":return"win32-x64";case"win32-arm64":return"win32-arm64";case"linux-x64":return"linux-x64";case"linux-arm64":return"linux-arm64";case"linux-armhf":return"linux-armhf";case"alpine-x64":return"alpine-x64";case"alpine-arm64":return"alpine-arm64";case"darwin-x64":return"darwin-x64";case"darwin-arm64":return"darwin-arm64";case"web":return"web";case"universal":return"universal";default:return"unknown"}}e.$Eo=j;function I(u,c){switch(u){case 3:return c==="x64"?"win32-x64":c==="arm64"?"win32-arm64":"unknown";case 2:return c==="x64"?"linux-x64":c==="arm64"?"linux-arm64":c==="arm"?"linux-armhf":"unknown";case"alpine":return c==="x64"?"alpine-x64":c==="arm64"?"alpine-arm64":"unknown";case 1:return c==="x64"?"darwin-x64":c==="arm64"?"darwin-arm64":"unknown";case 0:return"web"}}e.$Fo=I;function P(u,c){return c==="web"&&!u.includes("web")}e.$Go=P;function R(u,c,b){return P(c,b)?!1:u==="undefined"||u==="universal"?!0:u==="unknown"?!1:u===b}e.$Ho=R;function m(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(!u.uuid||typeof u.uuid=="string")}e.$Io=m;var C;(function(u){u[u.NoneOrRelevance=0]="NoneOrRelevance",u[u.LastUpdatedDate=1]="LastUpdatedDate",u[u.Title=2]="Title",u[u.PublisherName=3]="PublisherName",u[u.InstallCount=4]="InstallCount",u[u.PublishedDate=10]="PublishedDate",u[u.AverageRating=6]="AverageRating",u[u.WeightedRating=12]="WeightedRating"})(C||(e.SortBy=C={}));var k;(function(u){u[u.Default=0]="Default",u[u.Ascending=1]="Ascending",u[u.Descending=2]="Descending"})(k||(e.SortOrder=k={}));var E;(function(u){u.Install="install",u.Uninstall="uninstall"})(E||(e.StatisticType=E={}));var l;(function(u){u[u.None=1]="None",u[u.Install=2]="Install",u[u.Update=3]="Update",u[u.Migrate=4]="Migrate"})(l||(e.InstallOperation=l={})),e.$Jo=(0,N.$8h)("extensionGalleryService");var g;(function(u){u.Unsupported="Unsupported",u.Deprecated="Deprecated",u.Malicious="Malicious",u.Incompatible="Incompatible",u.IncompatibleTargetPlatform="IncompatibleTargetPlatform",u.ReleaseVersionNotFound="ReleaseVersionNotFound",u.Invalid="Invalid",u.Download="Download",u.DownloadSignature="DownloadSignature",u.UpdateMetadata="UpdateMetadata",u.Extract="Extract",u.Scanning="Scanning",u.Delete="Delete",u.Rename="Rename",u.CorruptZip="CorruptZip",u.IncompleteZip="IncompleteZip",u.Signature="Signature",u.NotAllowed="NotAllowed",u.Gallery="Gallery",u.Unknown="Unknown",u.Internal="Internal"})(g||(e.ExtensionManagementErrorCode=g={}));var p;(function(u){u.UnknownError="UnknownError",u.PackageIsInvalidZip="PackageIsInvalidZip",u.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip"})(p||(e.ExtensionSignaturetErrorCode=p={}));class w extends Error{constructor(c,b){super(c),this.code=b,this.name=b}}e.$Ko=w;var h;(function(u){u.Timeout="Timeout",u.Cancelled="Cancelled",u.Failed="Failed"})(h||(e.ExtensionGalleryErrorCode=h={}));class f extends Error{constructor(c,b){super(c),this.code=b,this.name=b}}e.$Lo=f,e.$Mo=(0,N.$8h)("extensionManagementService"),e.$No="extensionsIdentifiers/disabled",e.$Oo="extensionsIdentifiers/enabled",e.$Po=(0,N.$8h)("IGlobalExtensionEnablementService"),e.$Qo=(0,N.$8h)("IExtensionTipsService"),e.$Ro=(0,D.localize)(0,null),e.$So={value:e.$Ro,original:"Extensions"},e.$To=(0,D.localize2)(1,"Preferences")}),define(ue[188],de([0,1,3,2,30,10,93,29]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$5p=e.$4p=e.$3p=void 0;function R(w,h){return w?j.URI.revive(h?h.transformIncoming(w):w):void 0}function m(w,h){return h?h.transformOutgoingURI(w):w}function C(w,h){h=h||I.$an;const f=w.manifest;return{...(0,I.$dn)({...w,manifest:void 0},h),manifest:f}}function k(w,h){return w?.profileLocation?(0,I.$dn)(w,h??I.$an):w}function E(w,h){return h?(0,L.$Gn)(w,f=>f instanceof j.URI?h.transformOutgoingURI(f):void 0):w}class l{constructor(h,f){this.a=h,this.b=f,this.onInstallExtension=D.Event.buffer(h.onInstallExtension,!0),this.onDidInstallExtensions=D.Event.buffer(h.onDidInstallExtensions,!0),this.onUninstallExtension=D.Event.buffer(h.onUninstallExtension,!0),this.onDidUninstallExtension=D.Event.buffer(h.onDidUninstallExtension,!0),this.onDidUpdateExtensionMetadata=D.Event.buffer(h.onDidUpdateExtensionMetadata,!0)}listen(h,f){const u=this.b(h);switch(f){case"onInstallExtension":return D.Event.map(this.onInstallExtension,c=>({...c,profileLocation:c.profileLocation?m(c.profileLocation,u):c.profileLocation}));case"onDidInstallExtensions":return D.Event.map(this.onDidInstallExtensions,c=>c.map(b=>({...b,local:b.local?E(b.local,u):b.local,profileLocation:b.profileLocation?m(b.profileLocation,u):b.profileLocation})));case"onUninstallExtension":return D.Event.map(this.onUninstallExtension,c=>({...c,profileLocation:c.profileLocation?m(c.profileLocation,u):c.profileLocation}));case"onDidUninstallExtension":return D.Event.map(this.onDidUninstallExtension,c=>({...c,profileLocation:c.profileLocation?m(c.profileLocation,u):c.profileLocation}));case"onDidUpdateExtensionMetadata":return D.Event.map(this.onDidUpdateExtensionMetadata,c=>E(c,u))}throw new Error("Invalid listen")}async call(h,f,u){const c=this.b(h);switch(f){case"zip":{const b=C(u[0],c),i=await this.a.zip(b);return m(i,c)}case"unzip":return this.a.unzip(R(u[0],c));case"install":return this.a.install(R(u[0],c),k(u[1],c));case"installFromLocation":return this.a.installFromLocation(R(u[0],c),R(u[1],c));case"installExtensionsFromProfile":return this.a.installExtensionsFromProfile(u[0],R(u[1],c),R(u[2],c));case"getManifest":return this.a.getManifest(R(u[0],c));case"getTargetPlatform":return this.a.getTargetPlatform();case"canInstall":return this.a.canInstall(u[0]);case"installFromGallery":return this.a.installFromGallery(u[0],k(u[1],c));case"installGalleryExtensions":{const b=u[0];return this.a.installGalleryExtensions(b.map(({extension:i,options:r})=>({extension:i,options:k(r,c)??{}})))}case"uninstall":return this.a.uninstall(C(u[0],c),k(u[1],c));case"reinstallFromGallery":return this.a.reinstallFromGallery(C(u[0],c));case"getInstalled":return(await this.a.getInstalled(u[0],R(u[1],c))).map(i=>E(i,c));case"toggleAppliationScope":{const b=await this.a.toggleAppliationScope(C(u[0],c),R(u[1],c));return E(b,c)}case"copyExtensions":return this.a.copyExtensions(R(u[0],c),R(u[1],c));case"updateMetadata":{const b=await this.a.updateMetadata(C(u[0],c),u[1],R(u[2],c));return E(b,c)}case"getExtensionsControlManifest":return this.a.getExtensionsControlManifest();case"download":return this.a.download(u[0],u[1],u[2]);case"cleanUp":return this.a.cleanUp()}throw new Error("Invalid call")}}e.$3p=l;class g extends N.$Tc{get onInstallExtension(){return this.c.event}get onDidInstallExtensions(){return this.f.event}get onUninstallExtension(){return this.g.event}get onDidUninstallExtension(){return this.h.event}get onDidUpdateExtensionMetadata(){return this.j.event}constructor(h){super(),this.m=h,this.c=this.D(new D.$Wd),this.f=this.D(new D.$Wd),this.g=this.D(new D.$Wd),this.h=this.D(new D.$Wd),this.j=this.D(new D.$Wd),this.D(this.m.listen("onInstallExtension")(f=>this.n(this.c,{...f,source:this.q(f.source)?j.URI.revive(f.source):f.source,profileLocation:j.URI.revive(f.profileLocation)}))),this.D(this.m.listen("onDidInstallExtensions")(f=>this.n(this.f,f.map(u=>({...u,local:u.local?C(u.local,null):u.local,source:this.q(u.source)?j.URI.revive(u.source):u.source,profileLocation:j.URI.revive(u.profileLocation)}))))),this.D(this.m.listen("onUninstallExtension")(f=>this.n(this.g,{...f,profileLocation:j.URI.revive(f.profileLocation)}))),this.D(this.m.listen("onDidUninstallExtension")(f=>this.n(this.h,{...f,profileLocation:j.URI.revive(f.profileLocation)}))),this.D(this.m.listen("onDidUpdateExtensionMetadata")(f=>this.j.fire(C(f,null))))}n(h,f){h.fire(f)}q(h){return h?typeof h.path=="string"&&typeof h.scheme=="string":!1}getTargetPlatform(){return this.r||(this.r=this.m.call("getTargetPlatform")),this.r}async canInstall(h){const f=await this.getTargetPlatform();return h.allTargetPlatforms.some(u=>(0,P.$Ho)(u,h.allTargetPlatforms,f))}zip(h){return Promise.resolve(this.m.call("zip",[h]).then(f=>j.URI.revive(f)))}unzip(h){return Promise.resolve(this.m.call("unzip",[h]))}install(h,f){return Promise.resolve(this.m.call("install",[h,f])).then(u=>C(u,null))}installFromLocation(h,f){return Promise.resolve(this.m.call("installFromLocation",[h,f])).then(u=>C(u,null))}async installExtensionsFromProfile(h,f,u){return(await this.m.call("installExtensionsFromProfile",[h,f,u])).map(b=>C(b,null))}getManifest(h){return Promise.resolve(this.m.call("getManifest",[h]))}installFromGallery(h,f){return Promise.resolve(this.m.call("installFromGallery",[h,f])).then(u=>C(u,null))}async installGalleryExtensions(h){return(await this.m.call("installGalleryExtensions",[h])).map(u=>({...u,local:u.local?C(u.local,null):u.local,source:this.q(u.source)?j.URI.revive(u.source):u.source,profileLocation:j.URI.revive(u.profileLocation)}))}uninstall(h,f){return Promise.resolve(this.m.call("uninstall",[h,f]))}reinstallFromGallery(h){return Promise.resolve(this.m.call("reinstallFromGallery",[h])).then(f=>C(f,null))}getInstalled(h=null,f){return Promise.resolve(this.m.call("getInstalled",[h,f])).then(u=>u.map(c=>C(c,null)))}updateMetadata(h,f,u){return Promise.resolve(this.m.call("updateMetadata",[h,f,u])).then(c=>C(c,null))}toggleAppliationScope(h,f){return this.m.call("toggleAppliationScope",[h,f]).then(u=>C(u,null))}copyExtensions(h,f){return this.m.call("copyExtensions",[h,f])}getExtensionsControlManifest(){return Promise.resolve(this.m.call("getExtensionsControlManifest"))}async download(h,f,u){const c=await this.m.call("download",[h,f,u]);return j.URI.revive(c)}async cleanUp(){return this.m.call("cleanUp")}registerParticipant(){throw new Error("Not Supported")}}e.$4p=g;class p{constructor(h){this.a=h}listen(h,f){throw new Error("Invalid listen")}call(h,f,u){switch(f){case"getConfigBasedTips":return this.a.getConfigBasedTips(j.URI.revive(u[0]));case"getImportantExecutableBasedTips":return this.a.getImportantExecutableBasedTips();case"getOtherExecutableBasedTips":return this.a.getOtherExecutableBasedTips()}throw new Error("Invalid call")}}e.$5p=p}),define(ue[98],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$XDc=e.RecommendationsNotificationResult=e.$WDc=e.RecommendationSource=void 0;var N;(function(I){I[I.FILE=1]="FILE",I[I.WORKSPACE=2]="WORKSPACE",I[I.EXE=3]="EXE"})(N||(e.RecommendationSource=N={}));function L(I){switch(I){case 1:return"file";case 2:return"workspace";case 3:return"exe"}}e.$WDc=L;var j;(function(I){I.Ignored="ignored",I.Cancelled="cancelled",I.TooMany="toomany",I.IncompatibleWindow="incompatibleWindow",I.Accepted="reacted"})(j||(e.RecommendationsNotificationResult=j={})),e.$XDc=(0,D.$8h)("IExtensionRecommendationNotificationService")}),define(ue[11],de([0,1,47,16,27,12,10,159,4,5,25,53]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6k=e.$5k=e.$4k=e.$3k=e.$2k=e.FileKind=e.$1k=e.$Zk=e.$Yk=e.$Xk=e.$Wk=e.$Vk=e.$Uk=e.FileOperationResult=e.$Tk=e.$Sk=e.$Rk=e.$Qk=e.$Pk=e.FileChangeType=e.$Ok=e.FileOperation=e.$Nk=e.$Mk=e.$Lk=e.$Kk=e.$Jk=e.$Ik=e.FileSystemProviderErrorCode=e.$Hk=e.$Gk=e.$Fk=e.$Ek=e.$Dk=e.$Ck=e.$Bk=e.$Ak=e.$zk=e.FileSystemProviderCapabilities=e.$yk=e.FilePermission=e.FileType=e.$xk=e.$wk=void 0,e.$wk=(0,R.$8h)("fileService");function E(V){return V.create===!0}e.$xk=E;var l;(function(V){V[V.Unknown=0]="Unknown",V[V.File=1]="File",V[V.Directory=2]="Directory",V[V.SymbolicLink=64]="SymbolicLink"})(l||(e.FileType=l={}));var g;(function(V){V[V.Readonly=1]="Readonly",V[V.Locked=2]="Locked"})(g||(e.FilePermission=g={}));function p(V){const ne=V;return!!ne&&typeof ne.onDidChange=="function"}e.$yk=p;var w;(function(V){V[V.None=0]="None",V[V.FileReadWrite=2]="FileReadWrite",V[V.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",V[V.FileReadStream=16]="FileReadStream",V[V.FileFolderCopy=8]="FileFolderCopy",V[V.PathCaseSensitive=1024]="PathCaseSensitive",V[V.Readonly=2048]="Readonly",V[V.Trash=4096]="Trash",V[V.FileWriteUnlock=8192]="FileWriteUnlock",V[V.FileAtomicRead=16384]="FileAtomicRead",V[V.FileAtomicWrite=32768]="FileAtomicWrite",V[V.FileAtomicDelete=65536]="FileAtomicDelete",V[V.FileClone=131072]="FileClone"})(w||(e.FileSystemProviderCapabilities=w={}));function h(V){return!!(V.capabilities&2)}e.$zk=h;function f(V){return!!(V.capabilities&8)}e.$Ak=f;function u(V){return!!(V.capabilities&131072)}e.$Bk=u;function c(V){return!!(V.capabilities&4)}e.$Ck=c;function b(V){return!!(V.capabilities&16)}e.$Dk=b;function i(V){return h(V)?!!(V.capabilities&16384):!1}e.$Ek=i;function r(V){return h(V)?!!(V.capabilities&32768):!1}e.$Fk=r;function n(V){return!!(V.capabilities&65536)}e.$Gk=n;function s(V){return!!(V.capabilities&2048)}e.$Hk=s;var t;(function(V){V.FileExists="EntryExists",V.FileNotFound="EntryNotFound",V.FileNotADirectory="EntryNotADirectory",V.FileIsADirectory="EntryIsADirectory",V.FileExceedsStorageQuota="EntryExceedsStorageQuota",V.FileTooLarge="EntryTooLarge",V.FileWriteLocked="EntryWriteLocked",V.NoPermissions="NoPermissions",V.Unavailable="Unavailable",V.Unknown="Unknown"})(t||(e.FileSystemProviderErrorCode=t={}));class o extends Error{static create(ne,K){const z=new o(ne.toString(),K);return $(z,K),z}constructor(ne,K){super(ne),this.code=K}}e.$Ik=o;function a(V,ne){return o.create(V,ne)}e.$Jk=a;function y(V){return V||a((0,P.localize)(0,null),t.Unknown)}e.$Kk=y;function $(V,ne){return V.name=ne?`${ne} (FileSystemError)`:"FileSystemError",V}e.$Lk=$;function d(V){if(!V)return t.Unknown;if(V instanceof o)return V.code;const ne=/^(.+) \(FileSystemError\)$/.exec(V.name);if(!ne)return t.Unknown;switch(ne[1]){case t.FileExists:return t.FileExists;case t.FileIsADirectory:return t.FileIsADirectory;case t.FileNotADirectory:return t.FileNotADirectory;case t.FileNotFound:return t.FileNotFound;case t.FileTooLarge:return t.FileTooLarge;case t.FileWriteLocked:return t.FileWriteLocked;case t.NoPermissions:return t.NoPermissions;case t.Unavailable:return t.Unavailable}return t.Unknown}e.$Mk=d;function v(V){if(V instanceof Y)return V.fileOperationResult;switch(d(V)){case t.FileNotFound:return 1;case t.FileIsADirectory:return 0;case t.FileNotADirectory:return 9;case t.FileWriteLocked:return 5;case t.NoPermissions:return 6;case t.FileExists:return 4;case t.FileTooLarge:return 7;default:return 10}}e.$Nk=v;var S;(function(V){V[V.CREATE=0]="CREATE",V[V.DELETE=1]="DELETE",V[V.MOVE=2]="MOVE",V[V.COPY=3]="COPY",V[V.WRITE=4]="WRITE"})(S||(e.FileOperation=S={}));class A{constructor(ne,K,z){this.resource=ne,this.operation=K,this.target=z}isOperation(ne){return this.operation===ne}}e.$Ok=A;var T;(function(V){V[V.UPDATED=0]="UPDATED",V[V.ADDED=1]="ADDED",V[V.DELETED=2]="DELETED"})(T||(e.FileChangeType=T={}));class q{static{this.a=null}constructor(ne,K){this.c=K,this.b=void 0,this.d=new k.$V(()=>{const z=D.$bi.forUris(()=>this.c);return z.fill(this.rawAdded.map(U=>[U,!0])),z}),this.f=new k.$V(()=>{const z=D.$bi.forUris(()=>this.c);return z.fill(this.rawUpdated.map(U=>[U,!0])),z}),this.g=new k.$V(()=>{const z=D.$bi.forUris(()=>this.c);return z.fill(this.rawDeleted.map(U=>[U,!0])),z}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const z of ne){switch(z.type){case 1:this.rawAdded.push(z.resource);break;case 0:this.rawUpdated.push(z.resource);break;case 2:this.rawDeleted.push(z.resource);break}this.b!==q.a&&(typeof z.cId=="number"?this.b===void 0?this.b=z.cId:this.b!==z.cId&&(this.b=q.a):this.b!==void 0&&(this.b=q.a))}}contains(ne,...K){return this.h(ne,{includeChildren:!1},...K)}affects(ne,...K){return this.h(ne,{includeChildren:!0},...K)}h(ne,K,...z){if(!ne)return!1;const U=z.length>0;return!!((!U||z.includes(1))&&(this.d.value.get(ne)||K.includeChildren&&this.d.value.findSuperstr(ne))||(!U||z.includes(0))&&(this.f.value.get(ne)||K.includeChildren&&this.f.value.findSuperstr(ne))||(!U||z.includes(2))&&(this.g.value.findSubstr(ne)||K.includeChildren&&this.g.value.findSuperstr(ne)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(ne){return this.b===ne}hasCorrelation(){return typeof this.b=="number"}}e.$Pk=q;function M(V,ne,K){return!V||!ne||V===ne||ne.length>V.length?!1:(ne.charAt(ne.length-1)!==N.sep&&(ne+=N.sep),K?(0,L.$cf)(V,ne):V.indexOf(ne)===0)}e.$Qk=M;class Y extends Error{constructor(ne,K,z){super(ne),this.fileOperationResult=K,this.options=z}}e.$Rk=Y;class G extends Y{constructor(ne,K,z,U){super(ne,K,U),this.fileOperationResult=K,this.size=z}}e.$Sk=G;class Q extends Y{constructor(ne,K,z){super(ne,2,z),this.stat=K}}e.$Tk=Q;var F;(function(V){V[V.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",V[V.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",V[V.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",V[V.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",V[V.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",V[V.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",V[V.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",V[V.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",V[V.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",V[V.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",V[V.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(F||(e.FileOperationResult=F={})),e.$Uk={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},e.$Vk={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},e.$Wk="files.associations",e.$Xk="files.exclude",e.$Yk="files.readonlyInclude",e.$Zk="files.readonlyExclude",e.$1k="files.readonlyFromPermissions";var te;(function(V){V[V.FILE=0]="FILE",V[V.FOLDER=1]="FOLDER",V[V.ROOT_FOLDER=2]="ROOT_FOLDER"})(te||(e.FileKind=te={})),e.$2k="";function H(V){if(!(typeof V.size!="number"||typeof V.mtime!="number"))return V.mtime.toString(29)+V.size.toString(31)}e.$3k=H;async function J(V,ne){if(!ne.hasProvider(I.URI.from({scheme:V.scheme})))return new Promise(K=>{const z=ne.onDidChangeFileSystemProviderRegistrations(U=>{U.scheme===V.scheme&&U.added&&(z.dispose(),K())})})}e.$4k=J;class x{static{this.KB=1024}static{this.MB=x.KB*x.KB}static{this.GB=x.MB*x.KB}static{this.TB=x.GB*x.KB}static formatSize(ne){return(0,j.$Of)(ne)||(ne=0),ne<x.KB?(0,P.localize)(1,null,ne.toFixed(0)):ne<x.MB?(0,P.localize)(2,null,(ne/x.KB).toFixed(2)):ne<x.GB?(0,P.localize)(3,null,(ne/x.MB).toFixed(2)):ne<x.TB?(0,P.localize)(4,null,(ne/x.GB).toFixed(2)):(0,P.localize)(5,null,(ne/x.TB).toFixed(2))}}e.$5k=x;function se(V){const ne=typeof V=="string"||V?.scheme===C.Schemas.vscodeRemote;return typeof V!="string"&&V?.scheme===C.Schemas.file?1024*x.MB:ne?10*x.MB:m.$o?50*x.MB:1024*x.MB}e.$6k=se});var Z=this&&this.__param||function(oe,e){return function(D,N){e(D,N,oe)}};define(ue[189],de([0,1,74,46,11]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$jRc=void 0;let j=class{constructor(P){this.a=P}async checksum(P){const R=(await this.a.readFileStream(P)).value;return new Promise((m,C)=>{const k=(0,D.createHash)("sha256");(0,N.$ce)(R,{onData:E=>k.update(E.buffer),onError:E=>C(E),onEnd:()=>m(k.digest("base64").replace(/=+$/,""))})})}};e.$jRc=j,e.$jRc=j=Se([Z(0,L.$wk)],j)}),define(ue[99],de([0,1,14,7,160,11]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$vq=void 0;async function I(C,k,E,l,g,p){let w;try{await P(C,k,E,l,g,p)}catch(h){w=h}finally{w&&g.errorTransformer&&(w=g.errorTransformer(w)),typeof w<"u"&&E.error(w),E.end()}}e.$vq=I;async function P(C,k,E,l,g,p){R(p);const w=await C.open(k,{create:!1});try{R(p);let h=0,f=0,u=g&&typeof g.length=="number"?g.length:void 0,c=D.$ke.alloc(Math.min(g.bufferSize,typeof u=="number"?u:g.bufferSize)),b=g&&typeof g.position=="number"?g.position:0,i=0;do f=await C.read(w,b,c.buffer,i,c.byteLength-i),b+=f,i+=f,h+=f,typeof u=="number"&&(u-=f),i===c.byteLength&&(await E.write(l(c)),c=D.$ke.alloc(Math.min(g.bufferSize,typeof u=="number"?u:g.bufferSize)),i=0);while(f>0&&(typeof u!="number"||u>0)&&R(p)&&m(h,g));if(i>0){let r=i;typeof u=="number"&&(r=Math.min(i,u)),E.write(l(c.slice(0,r)))}}catch(h){throw(0,j.$Kk)(h)}finally{await C.close(w)}}function R(C){if(C.isCancellationRequested)throw(0,N.$6)();return!0}function m(C,k){if(typeof k?.limits?.size=="number"&&C>k.limits.size)throw(0,j.$Jk)((0,L.localize)(0,null),j.FileSystemProviderErrorCode.FileTooLarge);return!0}}),define(ue[50],de([0,1,92,2,16,5,10,11]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Eq=e.$Dq=e.$Cq=e.$Bq=e.$Aq=e.$zq=e.$yq=e.$xq=void 0;function R(h){return h.recursive===!0}e.$xq=R;class m extends N.$Tc{static{this.a=5}constructor(f,u,c,b){super(),this.h=f,this.j=u,this.m=c,this.n=b,this.c=this.D(new N.$Uc),this.f=void 0,this.g=0}r(){const f=new N.$Sc;this.c.value=f,this.b=this.q(f),this.b.setVerboseLogging(this.m),f.add(this.b.onDidChangeFile(u=>this.h(u))),f.add(this.b.onDidLogMessage(u=>this.j(u))),f.add(this.b.onDidError(u=>this.s(u)))}s(f){this.n.restartOnError?this.g<m.a&&this.f?(this.u(`restarting watcher after error: ${f}`),this.t(this.f)):this.u(`gave up attempting to restart watcher after error: ${f}`):this.u(f)}t(f){this.g++,this.r(),this.watch(f)}async watch(f){this.f=f,await this.b?.watch(f)}async setVerboseLogging(f){this.m=f,await this.b?.setVerboseLogging(f)}u(f){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${f}`})}w(f){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${f}`})}dispose(){return this.b=void 0,super.dispose()}}e.$yq=m;class C extends m{constructor(f,u,c){super(f,u,c,{type:"node.js",restartOnError:!1})}}e.$zq=C;class k extends m{constructor(f,u,c){super(f,u,c,{type:"universal",restartOnError:!0})}}e.$Aq=k;function E(h){return h.map(f=>({type:f.type,resource:I.URI.revive(f.resource),cId:f.cId}))}e.$Bq=E;function l(h){const f=new w;for(const u of h)f.processEvent(u);return f.coalesce()}e.$Cq=l;function g(h,f){return typeof f=="string"&&!f.startsWith(D.$Mj)&&!(0,L.$ic)(f)?{base:h,pattern:f}:f}e.$Dq=g;function p(h,f){const u=[];for(const c of f)u.push((0,D.$Qj)(g(h,c)));return u}e.$Eq=p;class w{constructor(){this.a=new Set,this.b=new Map}c(f){return j.$k?f.resource.fsPath:f.resource.fsPath.toLowerCase()}processEvent(f){const u=this.b.get(this.c(f));let c=!1;if(u){const b=u.type,i=f.type;u.resource.fsPath!==f.resource.fsPath&&(f.type===2||f.type===1)?c=!0:b===1&&i===2?(this.b.delete(this.c(f)),this.a.delete(u)):b===2&&i===1?u.type=0:b===1&&i===0||(u.type=i)}else c=!0;c&&(this.a.add(f),this.b.set(this.c(f),f))}coalesce(){const f=[],u=[];return Array.from(this.a).filter(c=>c.type!==2?(f.push(c),!1):!0).sort((c,b)=>c.resource.fsPath.length-b.resource.fsPath.length).filter(c=>u.some(b=>(0,P.$Qk)(c.resource.fsPath,b,!j.$k))?!1:(u.push(c.resource.fsPath),!0)).concat(f)}}}),define(ue[190],de([0,1,14,38,7,3,2,46,31,11,50]),function(oe,e,D,N,L,j,I,P,R,m,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$n4=e.$m4=void 0,e.$m4="localFilesystem";class k extends I.$Tc{constructor(l,g){super(),this.a=l,this.b=g,this.onDidChangeCapabilities=j.Event.None,this.f=this.D(new j.$Wd),this.onDidChangeFile=this.f.event,this.g=this.D(new j.$Wd),this.onDidWatchError=this.g.event,this.h=(0,R.$sg)(),this.j()}get capabilities(){return this.c||(this.c=253982,this.b.pathCaseSensitive&&(this.c|=1024),this.b.trash&&(this.c|=4096)),this.c}stat(l){return this.a.call("stat",[l])}readdir(l){return this.a.call("readdir",[l])}async readFile(l,g){const{buffer:p}=await this.a.call("readFile",[l,g]);return p}readFileStream(l,g,p){const w=(0,P.$$d)(f=>D.$ke.concat(f.map(u=>D.$ke.wrap(u))).buffer),h=new I.$Sc;return h.add(this.a.listen("readFileStream",[l,g])(f=>{if(f instanceof D.$ke)w.write(f.buffer);else{if(f==="end")w.end();else{let u;if(f instanceof Error)u=f;else{const c=f;u=(0,m.$Jk)(c.message??(0,N.$Si)(c),c.code??m.FileSystemProviderErrorCode.Unknown)}w.error(u),w.end()}h.dispose()}})),h.add(p.onCancellationRequested(()=>{w.error((0,L.$6)()),w.end(),h.dispose()})),w}writeFile(l,g,p){return this.a.call("writeFile",[l,D.$ke.wrap(g),p])}open(l,g){return this.a.call("open",[l,g])}close(l){return this.a.call("close",[l])}async read(l,g,p,w,h){const[f,u]=await this.a.call("read",[l,g,h]);return p.set(f.buffer.slice(0,u),w),u}write(l,g,p,w,h){return this.a.call("write",[l,g,D.$ke.wrap(p),w,h])}mkdir(l){return this.a.call("mkdir",[l])}delete(l,g){return this.a.call("delete",[l,g])}rename(l,g,p){return this.a.call("rename",[l,g,p])}copy(l,g,p){return this.a.call("copy",[l,g,p])}cloneFile(l,g){return this.a.call("cloneFile",[l,g])}j(){this.D(this.a.listen("fileChange",[this.h])(l=>{if(Array.isArray(l)){const g=l;this.f.fire((0,C.$Bq)(g))}else{const g=l;this.g.fire(g)}}))}watch(l,g){const p=(0,R.$sg)();return this.a.call("watch",[this.h,p,l,g]),(0,I.$Rc)(()=>this.a.call("unwatch",[this.h,p]))}}e.$n4=k}),define(ue[191],de([0,1,56,6,26,48,2,89,16,5,20,10,143,32,50]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Sq=e.$Rq=void 0;class p extends I.$Tc{static{this.a=100}static{this.b=75}constructor(f,u,c,b){super(),this.m=f,this.n=u,this.q=c,this.r=b,this.c=this.D(new N.$kh({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},i=>this.n(i))),this.f=this.D(new N.$jh(i=>this.y(i),p.b)),this.g=(0,g.$Eq)(this.m.path,this.m.excludes),this.h=this.m.includes?(0,g.$Eq)(this.m.path,this.m.includes):void 0,this.j=new L.$7d,this.ready=this.s()}async s(){try{const f=await this.t(this.m);if(this.j.token.isCancellationRequested)return;const u=await l.Promises.stat(f);this.D(await this.u(f,u.isDirectory()))}catch(f){f.code!=="ENOENT"?this.C(f):this.G(f)}}async t(f){let u=f.path;try{u=await l.Promises.realpath(f.path),f.path===u&&(u=await(0,E.$Oq)(f.path)??f.path),f.path!==u&&this.G(`correcting a path to watch that seems to be a symbolic link or wrong casing (original: ${f.path}, real: ${u})`)}catch{}return u}async u(f,u){if(m.$j&&(0,j.$0f)(f,"/Volumes/",!0))return this.C(`Refusing to watch ${f} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`),I.$Tc.None;const c=new L.$7d(this.j.token),b=new I.$Sc;try{const i=k.URI.file(this.m.path),r=(0,R.$nc)(f),n=(0,D.watch)(f);b.add((0,I.$Rc)(()=>{n.removeAllListeners(),n.close()})),this.G(`Started watching: '${f}'`);const s=new Set;if(u)try{for(const o of await l.Promises.readdir(f))s.add(o)}catch(o){this.C(o)}const t=new Map;b.add((0,I.$Rc)(()=>{for(const[,o]of t)o.dispose();t.clear()})),n.on("error",(o,a)=>{this.C(`Failed to watch ${f} for changes using fs.watch() (${o}, ${a})`),this.dispose()}),n.on("change",(o,a)=>{if(c.token.isCancellationRequested)return;this.G(`[raw] ["${o}"] ${a}`);let y="";if(a&&(y=a.toString(),m.$j&&(y=(0,P.$Ol)(y))),!(!y||o!=="change"&&o!=="rename"))if(u)if(o==="rename"){t.get(y)?.dispose();const $=setTimeout(async()=>{if(t.delete(y),y===r&&!await l.Promises.exists(f)){this.F("Watcher shutdown because watched path got deleted"),this.dispose();return}const d=await this.z((0,R.$jc)(f,y));if(c.token.isCancellationRequested)return;let v;d?s.has(y)?v=0:(v=1,s.add(y)):(s.delete(y),v=2),this.w({resource:(0,C.$Jg)(i,y),type:v,cId:this.m.correlationId})},p.a);t.set(y,(0,I.$Rc)(()=>clearTimeout($)))}else{let $;s.has(y)?$=0:($=1,s.add(y)),this.w({resource:(0,C.$Jg)(i,y),type:$,cId:this.m.correlationId})}else if(o==="rename"||y!==r){const $=setTimeout(async()=>{const d=await l.Promises.exists(f);c.token.isCancellationRequested||(d?(this.w({resource:i,type:0,cId:this.m.correlationId},!0),b.add(await this.u(f,!1))):(this.w({resource:i,type:2,cId:this.m.correlationId},!0),this.f.flush(),this.dispose()))},p.a);b.clear(),b.add((0,I.$Rc)(()=>clearTimeout($)))}else this.w({resource:i,type:0,cId:this.m.correlationId},!0)})}catch(i){await l.Promises.exists(f)&&!c.token.isCancellationRequested&&this.C(`Failed to watch ${f} for changes using fs.watch() (${i.toString()})`)}return(0,I.$Rc)(()=>{c.dispose(!0),b.dispose()})}w(f,u=!1){this.j.token.isCancellationRequested||(this.r&&this.G(`${f.type===1?"[ADDED]":f.type===2?"[DELETED]":"[CHANGED]"} ${f.resource.fsPath}`),!u&&this.g.some(c=>c(f.resource.fsPath))?this.r&&this.G(` >> ignored (excluded) ${f.resource.fsPath}`):!u&&this.h&&this.h.length>0&&!this.h.some(c=>c(f.resource.fsPath))?this.r&&this.G(` >> ignored (not included) ${f.resource.fsPath}`):this.f.work(f))}y(f){const u=(0,g.$Cq)(f);if(u.length>0){if(this.r)for(const b of u)this.G(` >> normalized ${b.type===1?"[ADDED]":b.type===2?"[DELETED]":"[CHANGED]"} ${b.resource.fsPath}`);this.c.work(u)?this.c.pending>0&&this.G(`started throttling events due to large amount of file change events at once (pending: ${this.c.pending}, most recent change: ${u[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.F(`started ignoring events due to too many file change events at once (incoming: ${u.length}, most recent change: ${u[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}}async z(f){if(m.$k)return l.Promises.exists(f);try{const u=(0,R.$nc)(f);return(await l.Promises.readdir((0,R.$mc)(f))).some(b=>b===u)}catch(u){return this.G(u),!1}}setVerboseLogging(f){this.r=f}C(f){this.j.token.isCancellationRequested||this.q?.({type:"error",message:`[File Watcher (node.js)] ${f}`})}F(f){this.j.token.isCancellationRequested||this.q?.({type:"warn",message:`[File Watcher (node.js)] ${f}`})}G(f){!this.j.token.isCancellationRequested&&this.r&&this.q?.({type:"trace",message:`[File Watcher (node.js)] ${f}`})}dispose(){this.G(`stopping file watcher on ${this.m.path}`),this.j.dispose(!0),super.dispose()}}e.$Rq=p;async function w(h,f,u,c,b=512){const i=await l.Promises.open(h,"r"),r=Buffer.allocUnsafe(b),n=new L.$7d(c);let s,t=!1;const o={path:h,excludes:[],recursive:!1},a=new p(o,y=>{(async()=>{for(const{type:$}of y)if($===0){if(t)return;t=!0;try{for(;!n.token.isCancellationRequested;){const{bytesRead:d}=await l.Promises.read(i,r,0,b,null);if(!d||n.token.isCancellationRequested)break;f(r.slice(0,d))}}catch(d){s=new Error(d),n.dispose(!0)}finally{t=!1}}})()});return await a.ready,u(),new Promise((y,$)=>{n.token.onCancellationRequested(async()=>{a.dispose();try{await l.Promises.close(i)}catch(d){s=new Error(d)}s?$(s):y()})})}e.$Sq=w}),define(ue[192],de([0,1,3,92,2,5,191]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Tq=void 0;class P extends L.$Tc{constructor(){super(...arguments),this.a=this.D(new D.$Wd),this.onDidChangeFile=this.a.event,this.b=this.D(new D.$Wd),this.onDidLogMessage=this.b.event,this.onDidError=D.Event.None,this.c=new Map,this.f=!1}async watch(m){const C=this.j(m),k=C.filter(l=>{const g=this.c.get(l.path);return g?!(0,N.$Uj)(g.request.excludes,l.excludes)||!(0,N.$Uj)(g.request.includes,l.includes):!0}),E=Array.from(this.c.values()).filter(({request:l})=>!C.find(g=>g.path===l.path&&(0,N.$Uj)(g.excludes,l.excludes)&&(0,N.$Uj)(g.includes,l.includes))).map(({request:l})=>l.path);k.length&&this.m(`Request to start watching: ${k.map(l=>`${l.path} (excludes: ${l.excludes.length>0?l.excludes:"<none>"}, includes: ${l.includes&&l.includes.length>0?JSON.stringify(l.includes):"<all>"}, correlationId: ${typeof l.correlationId=="number"?l.correlationId:"<none>"})`).join(",")}`),E.length&&this.m(`Request to stop watching: ${E.join(",")}`);for(const l of E)this.h(l);for(const l of k)this.g(l)}g(m){const C=new I.$Rq(m,E=>this.a.fire(E),E=>this.b.fire(E),this.f),k={request:m,instance:C};this.c.set(m.path,k)}async stop(){for(const[m]of this.c)this.h(m);this.c.clear()}h(m){const C=this.c.get(m);C&&(this.c.delete(m),C.instance.dispose())}j(m){const C=new Map;for(const k of m){const E=j.$k?k.path:k.path.toLowerCase();let l=C.get(k.correlationId);l||(l=new Map,C.set(k.correlationId,l)),l.set(E,k)}return Array.from(C.values()).map(k=>Array.from(k.values())).flat()}async setVerboseLogging(m){this.f=m;for(const[,C]of this.c)C.instance.setVerboseLogging(m)}m(m){this.f&&this.b.fire({type:"trace",message:this.n(m)})}n(m,C){return C?`[File Watcher (node.js)] ${m} (path: ${C.request.path})`:`[File Watcher (node.js)] ${m}`}}e.$Tq=P}),define(ue[193],de([0,1,50,192]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Uq=void 0;class L extends D.$zq{constructor(I,P,R){super(I,P,R),this.r()}q(I){return I.add(new N.$Tq)}}e.$Uq=L}),define(ue[194],de([0,1,25,40,94,50]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Mq=void 0;class I extends j.$Aq{constructor(R,m,C){super(R,m,C),this.r()}q(R){const m=R.add(new L.$Lq(D.$qg.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_AMD_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return R.add(m.onDidProcessExit(({code:C,signal:k})=>this.s(`terminated by itself with code ${C}, signal: ${k}`))),N.ProxyChannel.toService((0,N.$Oh)(m.getChannel("watcher")))}}e.$Mq=I}),define(ue[75],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6h=void 0;class D{constructor(...L){this.a=new Map;for(const[j,I]of L)this.set(j,I)}set(L,j){const I=this.a.get(L);return this.a.set(L,j),I}has(L){return this.a.has(L)}get(L){return this.a.get(L)}}e.$6h=D}),define(ue[195],de([0,1,6,7,2,73,186,4,75,88]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Zq=e.$Yq=void 0;const C=!1;class k extends Error{constructor(w){super("cyclic dependency between services"),this.message=w.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${w.toString()}`}}class E{constructor(w=new R.$6h,h=!1,f,u=C){this.f=w,this.g=h,this.h=f,this.i=u,this.o=new Set,this.f.set(P.$7h,this),this._globalGraph=u?f?._globalGraph??new I.$Xq(c=>c):void 0}createChild(w){return new E(w,this.g,this,this.i)}invokeFunction(w,...h){const f=g.traceInvocation(this.i,w);let u=!1;try{return w({get:b=>{if(u)throw(0,N.$8)("service accessor is only valid during the invocation of its target method");const i=this.m(b,f);if(!i)throw new Error(`[invokeFunction] unknown service '${b}'`);return i}},...h)}finally{u=!0,f.stop()}}createInstance(w,...h){let f,u;return w instanceof j.$5h?(f=g.traceCreation(this.i,w.ctor),u=this.j(w.ctor,w.staticArguments.concat(h),f)):(f=g.traceCreation(this.i,w),u=this.j(w,h,f)),f.stop(),u}j(w,h=[],f){const u=P._util.getServiceDependencies(w).sort((i,r)=>i.index-r.index),c=[];for(const i of u){const r=this.m(i.id,f);r||this.u(`[createInstance] ${w.name} depends on UNKNOWN service ${i.id}.`,!1),c.push(r)}const b=u.length>0?u[0].index:h.length;if(h.length!==b){console.trace(`[createInstance] First service dependency of ${w.name} at position ${b+1} conflicts with ${h.length} static arguments`);const i=b-h.length;i>0?h=h.concat(new Array(i)):h=h.slice(0,b)}return Reflect.construct(w,h.concat(c))}k(w,h){if(this.f.get(w)instanceof j.$5h)this.f.set(w,h);else if(this.h)this.h.k(w,h);else throw new Error("illegalState - setting UNKNOWN service instance")}l(w){const h=this.f.get(w);return!h&&this.h?this.h.l(w):h}m(w,h){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(w));const f=this.l(w);return f instanceof j.$5h?this.q(w,f,h.branch(w,!0)):(h.branch(w,!1),f)}q(w,h,f){if(this.o.has(w))throw new Error(`illegal state - RECURSIVELY instantiating service '${w}'`);this.o.add(w);try{return this.r(w,h,f)}finally{this.o.delete(w)}}r(w,h,f){const u=new I.$Xq(i=>i.id.toString());let c=0;const b=[{id:w,desc:h,_trace:f}];for(;b.length;){const i=b.pop();if(u.lookupOrInsertNode(i),c++>1e3)throw new k(u);for(const r of P._util.getServiceDependencies(i.desc.ctor)){const n=this.l(r.id);if(n||this.u(`[createInstance] ${w} depends on ${r.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(i.id),String(r.id)),n instanceof j.$5h){const s={id:r.id,desc:n,_trace:i._trace.branch(r.id,!0)};u.insertEdge(i,s),b.push(s)}}}for(;;){const i=u.roots();if(i.length===0){if(!u.isEmpty())throw new k(u);break}for(const{data:r}of i){if(this.l(r.id)instanceof j.$5h){const s=this.s(r.id,r.desc.ctor,r.desc.staticArguments,r.desc.supportsDelayedInstantiation,r._trace);this.k(r.id,s)}u.removeNode(r)}}return this.l(w)}s(w,h,f=[],u,c){if(this.f.get(w)instanceof j.$5h)return this.t(w,h,f,u,c);if(this.h)return this.h.s(w,h,f,u,c);throw new Error(`illegalState - creating UNKNOWN service instance ${h.name}`)}t(w,h,f=[],u,c){if(u){const b=new E(void 0,this.g,this,this.i);b.c=String(w);const i=new Map,r=new D.$oh(()=>{const n=b.j(h,f,c);for(const[s,t]of i){const o=n[s];if(typeof o=="function")for(const a of t)a.disposable=o.apply(n,a.listener)}return i.clear(),n});return new Proxy(Object.create(null),{get(n,s){if(!r.isInitialized&&typeof s=="string"&&(s.startsWith("onDid")||s.startsWith("onWill"))){let a=i.get(s);return a||(a=new m.$4c,i.set(s,a)),($,d,v)=>{if(r.isInitialized)return r.value[s]($,d,v);{const S={listener:[$,d,v],disposable:void 0},A=a.push(S);return(0,L.$Rc)(()=>{A(),S.disposable?.dispose()})}}}if(s in n)return n[s];const t=r.value;let o=t[s];return typeof o!="function"||(o=o.bind(t),n[s]=o),o},set(n,s,t){return r.value[s]=t,!0},getPrototypeOf(n){return h.prototype}})}else return this.j(h,f,c)}u(w,h){if(h&&console.warn(w),this.g)throw new Error(w)}}e.$Yq=E;var l;(function(p){p[p.None=0]="None",p[p.Creation=1]="Creation",p[p.Invocation=2]="Invocation",p[p.Branch=3]="Branch"})(l||(l={}));class g{static{this.all=new Set}static{this.c=new class extends g{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(w,h){return w?new g(2,h.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):g.c}static traceCreation(w,h){return w?new g(1,h.name):g.c}static{this.f=0}constructor(w,h){this.type=w,this.name=h,this.g=Date.now(),this.h=[]}branch(w,h){const f=new g(3,w.toString());return this.h.push([w,h,f]),f}stop(){const w=Date.now()-this.g;g.f+=w;let h=!1;function f(c,b){const i=[],r=new Array(c+1).join("	");for(const[n,s,t]of b.h)if(s&&t){h=!0,i.push(`${r}CREATES -> ${n}`);const o=f(c+1,t);o&&i.push(o)}else i.push(`${r}uses -> ${n}`);return i.join(`
`)}const u=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${f(1,this)}`,`DONE, took ${w.toFixed(2)}ms (grand total ${g.f.toFixed(2)}ms)`];(w>2||h)&&g.all.add(u.join(`
`))}}e.$Zq=g}),define(ue[57],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$RQc=e.$QQc=void 0,e.$QQc=(0,D.$8h)("mainProcessService");class N{constructor(j,I){this.a=j,this.b=I}getChannel(j){return this.a.getChannel(j,this.b)}registerChannel(j,I){this.a.registerChannel(j,I)}sendRawMessage(j,I){}}e.$RQc=N}),define(ue[76],de([0,1,26,2,5,162,29,4]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Er=e.$Dr=e.$Cr=void 0;function R(C){return C.tags.find(k=>k.startsWith("lp-"))?.split("lp-")[1]}e.$Cr=R,e.$Dr=(0,P.$8h)("languagePackService");let m=class extends N.$Tc{constructor(k){super(),this.c=k}async getAvailableLanguages(){const k=new D.$7d;setTimeout(()=>k.cancel(),1e3);let E;try{E=await this.c.query({text:'category:"language packs"',pageSize:20},k.token)}catch{return[]}const g=E.firstPage.filter(p=>p.properties.localizedLanguages?.length&&p.tags.some(w=>w.startsWith("lp-"))).map(p=>{const w=p.properties.localizedLanguages?.[0],h=R(p);return{...this.f(h,w,p),extensionId:p.identifier.id,galleryExtension:p}});return g.push(this.f("en","English")),g}f(k,E,l){const g=E??k;let p;if(g!==k&&(p=`(${k})`),k.toLowerCase()===L.$w.toLowerCase()&&(p??="",p+=(0,j.localize)(0,null)),l?.installCount){p??="";const w=l.installCount;let h;w>1e6?h=`${Math.floor(w/1e5)/10}M`:w>1e3?h=`${Math.floor(w/1e3)}K`:h=String(w),p+=` $(cloud-download) ${h}`}return{id:k,label:g,description:p}}};e.$Er=m,e.$Er=m=Se([Z(0,I.$Jo)],m)}),define(ue[196],de([0,1,2,76]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$fRc=void 0;let L=class extends D.$Tc{constructor(I){super(),this.a=I,this.b()}b(){this.a.update()}};e.$fRc=L,e.$fRc=L=Se([Z(0,N.$Dr)],L)}),define(ue[8],de([0,1,38,3,54,2,35,5,20,12,10,95,4]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Hj=e.$Gj=e.$Fj=e.$Ej=e.$Dj=e.$Cj=e.$Bj=e.$Aj=e.$zj=e.$yj=e.$xj=e.$wj=e.$vj=e.log=e.$tj=e.LogLevel=e.$sj=e.$rj=e.$qj=void 0,e.$qj=(0,E.$8h)("logService"),e.$rj=(0,E.$8h)("loggerService");function l(){return new Date().toISOString()}function g($){return(0,m.$Of)($)}e.$sj=g;var p;(function($){$[$.Off=0]="Off",$[$.Trace=1]="Trace",$[$.Debug=2]="Debug",$[$.Info=3]="Info",$[$.Warning=4]="Warning",$[$.Error=5]="Error"})(p||(e.LogLevel=p={})),e.$tj=p.Info;function w($,d,v){switch(d){case p.Trace:$.trace(v);break;case p.Debug:$.debug(v);break;case p.Info:$.info(v);break;case p.Warning:$.warn(v);break;case p.Error:$.error(v);break;case p.Off:break;default:throw new Error(`Invalid log level ${d}`)}}e.log=w;function h($,d=!1){let v="";for(let S=0;S<$.length;S++){let A=$[S];if(A instanceof Error&&(A=(0,D.$Si)(A,d)),typeof A=="object")try{A=JSON.stringify(A)}catch{}v+=(S>0?" ":"")+A}return v}class f extends j.$Tc{constructor(){super(...arguments),this.b=e.$tj,this.c=this.D(new N.$Wd),this.onDidChangeLogLevel=this.c.event}setLevel(d){this.b!==d&&(this.b=d,this.c.fire(this.b))}getLevel(){return this.b}f(d){return this.b!==p.Off&&this.b<=d}}e.$vj=f;class u extends f{constructor(d){super(),this.h=d}f(d){return this.h||super.f(d)}trace(d,...v){this.f(p.Trace)&&this.g(p.Trace,h([d,...v],!0))}debug(d,...v){this.f(p.Debug)&&this.g(p.Debug,h([d,...v]))}info(d,...v){this.f(p.Info)&&this.g(p.Info,h([d,...v]))}warn(d,...v){this.f(p.Warning)&&this.g(p.Warning,h([d,...v]))}error(d,...v){if(this.f(p.Error))if(d instanceof Error){const S=Array.prototype.slice.call(arguments);S[0]=d.stack,this.g(p.Error,h(S))}else this.g(p.Error,h([d,...v]))}flush(){}}e.$wj=u;class c extends f{constructor(d=e.$tj){super(),this.setLevel(d),this.g=!P.$i}trace(d,...v){this.f(p.Trace)&&(this.g?console.log(`\x1B[90m[main ${l()}]\x1B[0m`,d,...v):console.log(`[main ${l()}]`,d,...v))}debug(d,...v){this.f(p.Debug)&&(this.g?console.log(`\x1B[90m[main ${l()}]\x1B[0m`,d,...v):console.log(`[main ${l()}]`,d,...v))}info(d,...v){this.f(p.Info)&&(this.g?console.log(`\x1B[90m[main ${l()}]\x1B[0m`,d,...v):console.log(`[main ${l()}]`,d,...v))}warn(d,...v){this.f(p.Warning)&&(this.g?console.warn(`\x1B[93m[main ${l()}]\x1B[0m`,d,...v):console.warn(`[main ${l()}]`,d,...v))}error(d,...v){this.f(p.Error)&&(this.g?console.error(`\x1B[91m[main ${l()}]\x1B[0m`,d,...v):console.error(`[main ${l()}]`,d,...v))}flush(){}}e.$xj=c;class b extends f{constructor(d=e.$tj,v=!0){super(),this.g=v,this.setLevel(d)}trace(d,...v){this.f(p.Trace)&&(this.g?console.log("%cTRACE","color: #888",d,...v):console.log(d,...v))}debug(d,...v){this.f(p.Debug)&&(this.g?console.log("%cDEBUG","background: #eee; color: #888",d,...v):console.log(d,...v))}info(d,...v){this.f(p.Info)&&(this.g?console.log("%c INFO","color: #33f",d,...v):console.log(d,...v))}warn(d,...v){this.f(p.Warning)&&(this.g?console.log("%c WARN","color: #993",d,...v):console.log(d,...v))}error(d,...v){this.f(p.Error)&&(this.g?console.log("%c  ERR","color: #f33",d,...v):console.error(d,...v))}flush(){}}e.$yj=b;class i extends f{constructor(d,v=e.$tj){super(),this.g=d,this.setLevel(v)}trace(d,...v){this.f(p.Trace)&&this.g.log(p.Trace,[this.h(d),...v])}debug(d,...v){this.f(p.Debug)&&this.g.log(p.Debug,[this.h(d),...v])}info(d,...v){this.f(p.Info)&&this.g.log(p.Info,[this.h(d),...v])}warn(d,...v){this.f(p.Warning)&&this.g.log(p.Warning,[this.h(d),...v])}error(d,...v){this.f(p.Error)&&this.g.log(p.Error,[this.h(d),...v])}h(d){return typeof d=="string"?d:(0,D.$Si)(d,this.f(p.Trace))}flush(){}}e.$zj=i;class r extends f{constructor(d){super(),this.g=d,d.length&&this.setLevel(d[0].getLevel())}setLevel(d){for(const v of this.g)v.setLevel(d);super.setLevel(d)}trace(d,...v){for(const S of this.g)S.trace(d,...v)}debug(d,...v){for(const S of this.g)S.debug(d,...v)}info(d,...v){for(const S of this.g)S.info(d,...v)}warn(d,...v){for(const S of this.g)S.warn(d,...v)}error(d,...v){for(const S of this.g)S.error(d,...v)}flush(){for(const d of this.g)d.flush()}dispose(){for(const d of this.g)d.dispose();super.dispose()}}e.$Aj=r;class n extends j.$Tc{constructor(d,v,S){if(super(),this.h=d,this.j=v,this.b=new I.$Ac,this.c=this.D(new N.$Wd),this.onDidChangeLoggers=this.c.event,this.f=this.D(new N.$Wd),this.onDidChangeLogLevel=this.f.event,this.g=this.D(new N.$Wd),this.onDidChangeVisibility=this.g.event,S)for(const A of S)this.b.set(A.resource,{logger:void 0,info:A})}m(d){return(0,m.$Kf)(d)?[...this.b.values()].find(v=>v.info.id===d):this.b.get(d)}getLogger(d){return this.m(d)?.logger}createLogger(d,v){const S=this.n(d),A=(0,m.$Kf)(d)?d:v?.id??(0,L.$Vi)(S.toString()).toString(16);let T=this.b.get(S)?.logger;const q=v?.logLevel==="always"?p.Trace:v?.logLevel;T||(T=this.q(S,q??this.getLogLevel(S)??this.h,{...v,id:A}));const M={logger:T,info:{resource:S,id:A,logLevel:q,name:v?.name,hidden:v?.hidden,extensionId:v?.extensionId,when:v?.when}};return this.registerLogger(M.info),this.b.set(S,M),T}n(d){return(0,m.$Kf)(d)?(0,R.$Jg)(this.j,`${d}.log`):d}setLogLevel(d,v){if(C.URI.isUri(d)){const S=d,A=v,T=this.b.get(S);T&&A!==T.info.logLevel&&(T.info.logLevel=A===this.h?void 0:A,T.logger?.setLevel(A),this.b.set(T.info.resource,T),this.f.fire([S,A]))}else{this.h=d;for(const[S,A]of this.b.entries())this.b.get(S)?.info.logLevel===void 0&&A.logger?.setLevel(this.h);this.f.fire(this.h)}}setVisibility(d,v){const S=this.m(d);S&&v!==!S.info.hidden&&(S.info.hidden=!v,this.b.set(S.info.resource,S),this.g.fire([S.info.resource,v]))}getLogLevel(d){let v;return d&&(v=this.b.get(d)?.info.logLevel),v??this.h}registerLogger(d){const v=this.b.get(d.resource);v?v.info.hidden!==d.hidden&&this.setVisibility(d.resource,!d.hidden):(this.b.set(d.resource,{info:d,logger:void 0}),this.c.fire({added:[d],removed:[]}))}deregisterLogger(d){const v=this.b.get(d);v&&(v.logger&&v.logger.dispose(),this.b.delete(d),this.c.fire({added:[],removed:[v.info]}))}*getRegisteredLoggers(){for(const d of this.b.values())yield d.info}getRegisteredLogger(d){return this.b.get(d)?.info}dispose(){this.b.forEach(d=>d.logger?.dispose()),this.b.clear(),super.dispose()}}e.$Bj=n;class s{constructor(){this.onDidChangeLogLevel=new N.$Wd().event}setLevel(d){}getLevel(){return p.Info}trace(d,...v){}debug(d,...v){}info(d,...v){}warn(d,...v){}error(d,...v){}critical(d,...v){}dispose(){}flush(){}}e.$Cj=s;class t extends s{}e.$Dj=t;function o($){if($.verbose)return p.Trace;if(typeof $.logLevel=="string"){const d=y($.logLevel.toLowerCase());if(d!==void 0)return d}return e.$tj}e.$Ej=o;function a($){switch($){case p.Trace:return"trace";case p.Debug:return"debug";case p.Info:return"info";case p.Warning:return"warn";case p.Error:return"error";case p.Off:return"off"}}e.$Fj=a;function y($){switch($){case"trace":return p.Trace;case"debug":return p.Debug;case"info":return p.Info;case"warn":return p.Warning;case"error":return p.Error;case"critical":return p.Error;case"off":return p.Off}}e.$Gj=y,e.$Hj=new k.$nj("logLevel",a(p.Info))}),define(ue[197],de([0,1,6,7,2,25,16,20,32,15,8]),function(oe,e,D,N,L,j,I,P,R,m,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$gRc=void 0;let k=class extends L.$Tc{constructor(l,g){super(),this.a=l,this.b=g,this.D(new D.$hh(()=>{this.c()},10*1e3)).schedule()}async c(){this.b.trace("[logs cleanup]: Starting to clean up old logs.");try{const l=(0,P.$Gg)(this.a.logsHome),g=(0,P.$Ig)(this.a.logsHome.with({scheme:j.Schemas.file})).fsPath,h=(await R.Promises.readdir(g)).filter(u=>/^\d{8}T\d{6}$/.test(u)).sort().filter(u=>u!==l),f=h.slice(0,Math.max(0,h.length-9));f.length>0&&(this.b.trace(`[logs cleanup]: Removing log folders '${f.join(", ")}'`),await Promise.all(f.map(u=>R.Promises.rm((0,I.$jc)(g,u)))))}catch(l){(0,N.$1)(l)}}};e.$gRc=k,e.$gRc=k=Se([Z(0,m.$ci),Z(1,C.$qj)],k)}),define(ue[100],de([0,1,7,4,8]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$1p=e.$Zp=void 0,e.$Zp=(0,N.$8h)("IExtensionSignatureVerificationService");let j=class{constructor(P){this.b=P}c(){return this.a||(this.a=new Promise((P,R)=>oe(["node-vsce-sign"],async m=>P(m),R))),this.a}async verify(P,R,m){let C;try{C=await this.c()}catch(k){return this.b.error("Could not load vsce-sign module",(0,D.$0)(k)),!1}return C.verify(P,R,m)}};e.$1p=j,e.$1p=j=Se([Z(0,L.$qj)],j)}),define(ue[198],de([0,1,17,6,7,3,2,16,50,8]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fq=void 0;class C extends I.$Tc{constructor(E,l){super(),this.a=E,this.b=l,this.c=this.D(new j.$Wd),this.onDidChangeFile=this.c.event,this.g=this.D(new j.$Wd),this.onDidWatchError=this.g.event,this.j=[],this.m=this.D(new N.$6g(0)),this.u=[],this.w=this.D(new N.$6g(0))}watch(E,l){return l.recursive||this.b?.watcher?.forceUniversal?this.n(E,l):this.y(E,l)}n(E,l){const g={path:this.H(E),excludes:l.excludes,includes:l.includes,recursive:l.recursive,correlationId:l.correlationId},p=(0,D.$Ub)(this.j,g);return this.q(),(0,I.$Rc)(()=>{p(),this.q()})}q(){this.m.trigger(()=>this.r()).catch(E=>(0,L.$1)(E))}r(){this.h||(this.h=this.D(this.s(l=>this.c.fire((0,R.$Bq)(l)),l=>this.G(l),this.a.getLevel()===m.LogLevel.Trace)),this.D(this.a.onDidChangeLogLevel(()=>{this.h?.setVerboseLogging(this.a.getLevel()===m.LogLevel.Trace)})));const E=this.b?.watcher?.recursive?.usePolling;if(E===!0)for(const l of this.j)(0,R.$xq)(l)&&(l.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3);else if(Array.isArray(E))for(const l of this.j)(0,R.$xq)(l)&&E.includes(l.path)&&(l.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3);return this.h.watch(this.j)}y(E,l){const g={path:this.H(E),excludes:l.excludes,includes:l.includes,recursive:!1,correlationId:l.correlationId},p=(0,D.$Ub)(this.u,g);return this.z(),(0,I.$Rc)(()=>{p(),this.z()})}z(){this.w.trigger(()=>this.C()).catch(E=>(0,L.$1)(E))}C(){return this.t||(this.t=this.D(this.F(E=>this.c.fire((0,R.$Bq)(E)),E=>this.G(E),this.a.getLevel()===m.LogLevel.Trace)),this.D(this.a.onDidChangeLogLevel(()=>{this.t?.setVerboseLogging(this.a.getLevel()===m.LogLevel.Trace)}))),this.t.watch(this.u)}G(E){E.type==="error"&&this.g.fire(E.message),this.a[E.type](E.message)}H(E){return(0,P.$hc)(E.fsPath)}}e.$Fq=C}),define(ue[199],de([0,1,17,6,14,26,3,54,63,2,47,25,101,20,46,158,11,99,8,7]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u){"use strict";var c;Object.defineProperty(e,"__esModule",{value:!0}),e.$wq=void 0;let b=class extends m.$Tc{static{c=this}constructor(r){super(),this.b=r,this.a=256*1024,this.c=this.D(new I.$Wd),this.onDidChangeFileSystemProviderRegistrations=this.c.event,this.f=this.D(new I.$Wd),this.onWillActivateFileSystemProvider=this.f.event,this.g=this.D(new I.$Wd),this.onDidChangeFileSystemProviderCapabilities=this.g.event,this.h=new Map,this.q=this.D(new I.$Wd),this.onDidRunOperation=this.q.event,this.X=this.D(new I.$Wd),this.Y=this.D(new I.$Wd),this.onDidFilesChange=this.Y.event,this.Z=this.D(new I.$Wd),this.onDidWatchError=this.Z.event,this.$=new Map,this.cb=this.D(new N.$eh)}registerProvider(r,n){if(this.h.has(r))throw new Error(`A filesystem provider for the scheme '${r}' is already registered.`);(0,E.mark)(`code/registerFilesystem/${r}`);const s=new m.$Sc;return this.h.set(r,n),this.c.fire({added:!0,scheme:r,provider:n}),s.add(n.onDidChangeFile(t=>{const o=new w.$Pk(t,!this.S(n));this.X.fire(o),o.hasCorrelation()||this.Y.fire(o)})),typeof n.onDidWatchError=="function"&&s.add(n.onDidWatchError(t=>this.Z.fire(new Error(t)))),s.add(n.onDidChangeCapabilities(()=>this.g.fire({provider:n,scheme:r}))),(0,m.$Rc)(()=>{this.c.fire({added:!1,scheme:r,provider:n}),this.h.delete(r),(0,m.$Oc)(s)})}getProvider(r){return this.h.get(r)}async activateProvider(r){const n=[];this.f.fire({scheme:r,join(s){n.push(s)}}),!this.h.has(r)&&await N.Promises.settled(n)}async canHandleResource(r){return await this.activateProvider(r.scheme),this.hasProvider(r)}hasProvider(r){return this.h.has(r.scheme)}hasCapability(r,n){const s=this.h.get(r.scheme);return!!(s&&s.capabilities&n)}listCapabilities(){return R.Iterable.map(this.h,([r,n])=>({scheme:r,capabilities:n.capabilities}))}async j(r){if(!(0,l.$Ng)(r))throw new w.$Rk((0,p.localize)(0,null,this.sb(r)),8);await this.activateProvider(r.scheme);const n=this.h.get(r.scheme);if(!n){const s=new u.$bb;throw s.message=(0,p.localize)(1,null,r.toString()),s}return n}async m(r){const n=await this.j(r);if((0,w.$Ck)(n)||(0,w.$zk)(n)||(0,w.$Dk)(n))return n;throw new Error(`Filesystem provider for scheme '${r.scheme}' neither has FileReadWrite, FileReadStream nor FileOpenReadWriteClose capability which is needed for the read operation.`)}async n(r){const n=await this.j(r);if((0,w.$Ck)(n)||(0,w.$zk)(n))return n;throw new Error(`Filesystem provider for scheme '${r.scheme}' neither has FileReadWrite nor FileOpenReadWriteClose capability which is needed for the write operation.`)}async resolve(r,n){try{return await this.r(r,n)}catch(s){throw(0,w.$Mk)(s)===w.FileSystemProviderErrorCode.FileNotFound?new w.$Rk((0,p.localize)(2,null,this.sb(r)),1):(0,w.$Kk)(s)}}async r(r,n){const s=await this.j(r),t=this.S(s),o=n?.resolveTo,a=n?.resolveSingleChildDescendants,y=n?.resolveMetadata,$=await s.stat(r);let d;return this.s(s,r,$,void 0,!!y,(v,S)=>(d||(d=C.$bi.forUris(()=>!t),d.set(r,!0),o&&d.fill(!0,o)),d.get(v.resource)||d.findSuperstr(v.resource.with({query:null,fragment:null}))?!0:v.isDirectory&&a?S===1:!1))}async s(r,n,s,t,o,a){const{providerExtUri:y}=this.R(r),$={resource:n,name:y.basename(n),isFile:(s.type&w.FileType.File)!==0,isDirectory:(s.type&w.FileType.Directory)!==0,isSymbolicLink:(s.type&w.FileType.SymbolicLink)!==0,mtime:s.mtime,ctime:s.ctime,size:s.size,readonly:!!((s.permissions??0)&w.FilePermission.Readonly)||!!(r.capabilities&2048),locked:!!((s.permissions??0)&w.FilePermission.Locked),etag:(0,w.$3k)({mtime:s.mtime,size:s.size}),children:void 0};if($.isDirectory&&a($,t)){try{const d=await r.readdir(n),v=await N.Promises.settled(d.map(async([S,A])=>{try{const T=y.joinPath(n,S),q=o?await r.stat(T):{type:A};return await this.s(r,T,q,d.length,o,a)}catch(T){return this.b.trace(T),null}}));$.children=(0,D.$Hb)(v)}catch(d){this.b.trace(d),$.children=[]}return $}return $}async resolveAll(r){return N.Promises.settled(r.map(async n=>{try{return{stat:await this.r(n.resource,n.options),success:!0}}catch(s){return this.b.trace(s),{stat:void 0,success:!1}}}))}async stat(r){const n=await this.j(r),s=await n.stat(r);return this.s(n,r,s,void 0,!0,()=>!1)}async exists(r){const n=await this.j(r);try{return!!await n.stat(r)}catch{return!1}}async canCreateFile(r,n){try{await this.t(r,n)}catch(s){return s}return!0}async t(r,n){if(!n?.overwrite&&await this.exists(r))throw new w.$Rk((0,p.localize)(3,null,this.sb(r)),3,n)}async createFile(r,n=L.$ke.fromString(""),s){await this.t(r,s);const t=await this.writeFile(r,n);return this.q.fire(new w.$Ok(r,0,t)),t}async writeFile(r,n,s){const t=this.qb(await this.n(r),r),{providerExtUri:o}=this.R(t);let a=s;if((0,w.$Fk)(t)&&!a?.atomic){const y=t.enforceAtomicWriteFile?.(r);y&&(a={...s,atomic:y})}try{await this.u(t,r,a)||await this.U(t,o.dirname(r));let $;if((0,w.$zk)(t)&&!(n instanceof L.$ke))if((0,g.$9d)(n)){const d=await(0,g.$de)(n,3);d.ended?$=L.$ke.concat(d.buffer):$=d}else $=(0,g.$ae)(n,d=>L.$ke.concat(d),3);else $=n;!(0,w.$Ck)(t)||(0,w.$zk)(t)&&$ instanceof L.$ke||(0,w.$zk)(t)&&(0,w.$Fk)(t)&&a?.atomic?await this.hb(t,r,a,$):await this.db(t,r,a,$ instanceof L.$ke?(0,L.$ve)($):$),this.q.fire(new w.$Ok(r,4))}catch(y){throw new w.$Rk((0,p.localize)(4,null,this.sb(r),(0,w.$Kk)(y).toString()),(0,w.$Nk)(y),a)}return this.resolve(r,{resolveMetadata:!0})}async u(r,n,s){const t=!!s?.unlock;if(t&&!(r.capabilities&8192))throw new Error((0,p.localize)(5,null,this.sb(n)));if(!!s?.atomic){if(!(r.capabilities&32768))throw new Error((0,p.localize)(6,null,this.sb(n)));if(!(r.capabilities&2))throw new Error((0,p.localize)(7,null,this.sb(n)));if(t)throw new Error((0,p.localize)(8,null,this.sb(n)))}let a;try{a=await r.stat(n)}catch{return}if(a.type&w.FileType.Directory)throw new w.$Rk((0,p.localize)(9,null,this.sb(n)),0,s);if(this.rb(n,a),typeof s?.mtime=="number"&&typeof s.etag=="string"&&s.etag!==w.$2k&&typeof a.mtime=="number"&&typeof a.size=="number"&&s.mtime<a.mtime&&s.etag!==(0,w.$3k)({mtime:s.mtime,size:a.size}))throw new w.$Rk((0,p.localize)(10,null),3,s);return a}async readFile(r,n,s){const t=await this.m(r);return n?.atomic?this.w(t,r,n,s):this.z(t,r,n,s)}async w(r,n,s,t){return new Promise((o,a)=>{this.cb.queueFor(n,async()=>{try{const y=await this.z(r,n,s,t);o(y)}catch(y){a(y)}},this.R(r).providerExtUri)})}async z(r,n,s,t){const o=await this.C(r,n,{...s,preferUnbuffered:!0},t);return{...o,value:await(0,L.$we)(o.value)}}async readFileStream(r,n,s){const t=await this.m(r);return this.C(t,r,n,s)}async C(r,n,s,t){const o=new j.$7d(t);let a=s;(0,w.$Ek)(r)&&r.enforceAtomicReadFile?.(n)&&(a={...s,atomic:!0});const y=this.J(n,a).then(d=>d,d=>{throw o.dispose(!0),d});let $;try{return typeof a?.etag=="string"&&a.etag!==w.$2k&&await y,a?.atomic&&(0,w.$Ek)(r)||!((0,w.$Ck)(r)||(0,w.$Dk)(r))||(0,w.$zk)(r)&&a?.preferUnbuffered?$=this.I(r,n,a):(0,w.$Dk)(r)?$=this.G(r,n,o.token,a):$=this.H(r,n,o.token,a),$.on("end",()=>o.dispose()),$.on("error",()=>o.dispose()),{...await y,value:$}}catch(d){throw $&&await(0,g.$be)($),this.F(d,n,a)}}F(r,n,s){const t=(0,p.localize)(11,null,this.sb(n),(0,w.$Kk)(r).toString());return r instanceof w.$Tk?new w.$Tk(t,r.stat,s):r instanceof w.$Sk?new w.$Sk(t,r.fileOperationResult,r.size,r.options):new w.$Rk(t,(0,w.$Nk)(r),s)}G(r,n,s,t=Object.create(null)){const o=r.readFileStream(n,t,s);return(0,g.$he)(o,{data:a=>a instanceof L.$ke?a:L.$ke.wrap(a),error:a=>this.F(a,n,t)},a=>L.$ke.concat(a))}H(r,n,s,t=Object.create(null)){const o=(0,L.$Ae)();return(0,h.$vq)(r,n,o,a=>a,{...t,bufferSize:this.a,errorTransformer:a=>this.F(a,n,t)},s),o}I(r,n,s){const t=(0,g.$$d)(o=>L.$ke.concat(o));return(async()=>{try{let o;s?.atomic&&(0,w.$Ek)(r)?o=await r.readFile(n,{atomic:!0}):o=await r.readFile(n),typeof s?.position=="number"&&(o=o.slice(s.position)),typeof s?.length=="number"&&(o=o.slice(0,s.length)),this.L(n,o.byteLength,s),t.end(L.$ke.wrap(o))}catch(o){t.error(o),t.end()}})(),t}async J(r,n){const s=await this.resolve(r,{resolveMetadata:!0});if(s.isDirectory)throw new w.$Rk((0,p.localize)(12,null,this.sb(r)),0,n);if(typeof n?.etag=="string"&&n.etag!==w.$2k&&n.etag===s.etag)throw new w.$Tk((0,p.localize)(13,null),s,n);return this.L(r,s.size,n),s}L(r,n,s){if(typeof s?.limits?.size=="number"&&n>s.limits.size)throw new w.$Sk((0,p.localize)(14,null,this.sb(r)),7,n,s)}async canMove(r,n,s){return this.M(r,n,"move",s)}async canCopy(r,n,s){return this.M(r,n,"copy",s)}async M(r,n,s,t){if(r.toString()!==n.toString())try{const o=s==="move"?this.qb(await this.n(r),r):await this.m(r),a=this.qb(await this.n(n),n);await this.Q(o,r,a,n,s,t)}catch(o){return o}return!0}async move(r,n,s){const t=this.qb(await this.n(r),r),o=this.qb(await this.n(n),n),a=await this.N(t,r,o,n,"move",!!s),y=await this.resolve(n,{resolveMetadata:!0});return this.q.fire(new w.$Ok(r,a==="move"?2:3,y)),y}async copy(r,n,s){const t=await this.m(r),o=this.qb(await this.n(n),n),a=await this.N(t,r,o,n,"copy",!!s),y=await this.resolve(n,{resolveMetadata:!0});return this.q.fire(new w.$Ok(r,a==="copy"?3:2,y)),y}async N(r,n,s,t,o,a){if(n.toString()===t.toString())return o;const{exists:y,isSameResourceWithDifferentPathCase:$}=await this.Q(r,n,s,t,o,a);if(y&&!$&&a&&await this.del(t,{recursive:!0}),await this.U(s,this.R(s).providerExtUri.dirname(t)),o==="copy"){if(r===s&&(0,w.$Ak)(r))await r.copy(n,t,{overwrite:a});else{const d=await this.resolve(n);d.isDirectory?await this.P(r,d,s,t):await this.O(r,n,s,t)}return o}else return r===s?(await r.rename(n,t,{overwrite:a}),o):(await this.N(r,n,s,t,"copy",a),await this.del(n,{recursive:!0}),"copy")}async O(r,n,s,t){if((0,w.$Ck)(r)&&(0,w.$Ck)(s))return this.jb(r,n,s,t);if((0,w.$Ck)(r)&&(0,w.$zk)(s))return this.pb(r,n,s,t);if((0,w.$zk)(r)&&(0,w.$Ck)(s))return this.nb(r,n,s,t);if((0,w.$zk)(r)&&(0,w.$zk)(s))return this.lb(r,n,s,t)}async P(r,n,s,t){await s.mkdir(t),Array.isArray(n.children)&&await N.Promises.settled(n.children.map(async o=>{const a=this.R(s).providerExtUri.joinPath(t,o.name);return o.isDirectory?this.P(r,await this.resolve(o.resource),s,a):this.O(r,o.resource,s,a)}))}async Q(r,n,s,t,o,a){let y=!1;if(r===s){const{providerExtUri:d,isPathCaseSensitive:v}=this.R(r);if(v||(y=d.isEqual(n,t)),y&&o==="copy")throw new Error((0,p.localize)(15,null,this.sb(n),this.sb(t)));if(!y&&d.isEqualOrParent(t,n))throw new Error((0,p.localize)(16,null,this.sb(n),this.sb(t)))}const $=await this.exists(t);if($&&!y){if(!a)throw new w.$Rk((0,p.localize)(17,null,this.sb(n),this.sb(t)),4);if(r===s){const{providerExtUri:d}=this.R(r);if(d.isEqualOrParent(n,t))throw new Error((0,p.localize)(18,null,this.sb(n),this.sb(t)))}}return{exists:$,isSameResourceWithDifferentPathCase:y}}R(r){const n=this.S(r);return{providerExtUri:n?l.$zg:l.$Bg,isPathCaseSensitive:n}}S(r){return!!(r.capabilities&1024)}async createFolder(r){const n=this.qb(await this.j(r),r);await this.U(n,r);const s=await this.resolve(r,{resolveMetadata:!0});return this.q.fire(new w.$Ok(r,0,s)),s}async U(r,n){const s=[],{providerExtUri:t}=this.R(r);for(;!t.isEqual(n,t.dirname(n));)try{if(!((await r.stat(n)).type&w.FileType.Directory))throw new Error((0,p.localize)(19,null,this.sb(n)));break}catch(o){if((0,w.$Mk)(o)!==w.FileSystemProviderErrorCode.FileNotFound)throw o;s.push(t.basename(n)),n=t.dirname(n)}for(let o=s.length-1;o>=0;o--){n=t.joinPath(n,s[o]);try{await r.mkdir(n)}catch(a){if((0,w.$Mk)(a)!==w.FileSystemProviderErrorCode.FileExists)throw a}}}async canDelete(r,n){try{await this.W(r,n)}catch(s){return s}return!0}async W(r,n){const s=this.qb(await this.j(r),r),t=!!n?.useTrash;if(t&&!(s.capabilities&4096))throw new Error((0,p.localize)(20,null,this.sb(r)));const o=n?.atomic;if(o&&!(s.capabilities&65536))throw new Error((0,p.localize)(21,null,this.sb(r)));if(t&&o)throw new Error((0,p.localize)(22,null,this.sb(r)));let a;try{a=await s.stat(r)}catch{}if(a)this.rb(r,a);else throw new w.$Rk((0,p.localize)(23,null,this.sb(r)),1);if(!!!n?.recursive){const $=await this.resolve(r);if($.isDirectory&&Array.isArray($.children)&&$.children.length>0)throw new Error((0,p.localize)(24,null,this.sb(r)))}return s}async del(r,n){const s=await this.W(r,n);let t=n;if((0,w.$Gk)(s)&&!t?.atomic){const $=s.enforceAtomicDelete?.(r);$&&(t={...n,atomic:$})}const o=!!t?.useTrash,a=!!t?.recursive,y=t?.atomic??!1;await s.delete(r,{recursive:a,useTrash:o,atomic:y}),this.q.fire(new w.$Ok(r,1))}async cloneFile(r,n){const s=await this.j(r),t=this.qb(await this.n(n),n);if(!(s===t&&this.R(s).providerExtUri.isEqual(r,n)))return s===t&&(0,w.$Bk)(s)?s.cloneFile(r,n):(await this.U(t,this.R(t).providerExtUri.dirname(n)),s===t&&(0,w.$Ak)(s)?this.cb.queueFor(r,()=>s.copy(r,n,{overwrite:!0}),this.R(s).providerExtUri):this.cb.queueFor(r,()=>this.O(s,r,t,n),this.R(s).providerExtUri))}static{this.ab=0}createWatcher(r,n){return this.watch(r,{...n,correlationId:c.ab++})}watch(r,n={recursive:!1,excludes:[]}){const s=new m.$Sc;let t=!1,o=()=>{t=!0};s.add((0,m.$Rc)(()=>o())),(async()=>{try{const y=await this.bb(r,n);t?(0,m.$Oc)(y):o=()=>(0,m.$Oc)(y)}catch(y){this.b.error(y)}})();const a=n.correlationId;if(typeof a=="number"){const y=s.add(new I.$Wd);return s.add(this.X.event(d=>{d.correlates(a)&&y.fire(d)})),{onDidChange:y.event,dispose:()=>s.dispose()}}return s}async bb(r,n){const s=await this.j(r),t=(0,P.$Vi)([this.R(s).providerExtUri.getComparisonKey(r),n]);let o=this.$.get(t);return o||(o={count:0,disposable:s.watch(r,n)},this.$.set(t,o)),o.count+=1,(0,m.$Rc)(()=>{o&&(o.count--,o.count===0&&((0,m.$Oc)(o.disposable),this.$.delete(t)))})}dispose(){super.dispose();for(const[,r]of this.$)(0,m.$Oc)(r.disposable);this.$.clear()}async db(r,n,s,t){return this.cb.queueFor(n,async()=>{const o=await r.open(n,{create:!0,unlock:s?.unlock??!1});try{(0,g.$9d)(t)||(0,g.$0d)(t)?await this.eb(r,o,t):await this.fb(r,o,t)}catch(a){throw(0,w.$Kk)(a)}finally{await r.close(o)}},this.R(r).providerExtUri)}async eb(r,n,s){let t=0,o;if((0,g.$0d)(s)){if(s.buffer.length>0){const a=L.$ke.concat(s.buffer);await this.gb(r,n,a,a.byteLength,t,0),t+=a.byteLength}if(s.ended)return;o=s.stream}else o=s;return new Promise((a,y)=>{(0,g.$ce)(o,{onData:async $=>{o.pause();try{await this.gb(r,n,$,$.byteLength,t,0)}catch(d){return y(d)}t+=$.byteLength,setTimeout(()=>o.resume())},onError:$=>y($),onEnd:()=>a()})})}async fb(r,n,s){let t=0,o;for(;(o=s.read())!==null;)await this.gb(r,n,o,o.byteLength,t,0),t+=o.byteLength}async gb(r,n,s,t,o,a){let y=0;for(;y<t;){const $=await r.write(n,o+y,s.buffer,a+y,t-y);y+=$}}async hb(r,n,s,t){return this.cb.queueFor(n,()=>this.ib(r,n,s,t),this.R(r).providerExtUri)}async ib(r,n,s,t){let o;t instanceof L.$ke?o=t:(0,g.$9d)(t)?o=await(0,L.$we)(t):(0,g.$0d)(t)?o=await(0,L.$xe)(t):o=(0,L.$ue)(t),await r.writeFile(n,o.buffer,{create:!0,overwrite:!0,unlock:s?.unlock??!1,atomic:s?.atomic??!1})}async jb(r,n,s,t){return this.cb.queueFor(t,()=>this.kb(r,n,s,t),this.R(s).providerExtUri)}async kb(r,n,s,t){let o,a;try{o=await r.open(n,{create:!1}),a=await s.open(t,{create:!0,unlock:!1});const y=L.$ke.alloc(this.a);let $=0,d=0,v=0;do v=await r.read(o,$,y.buffer,d,y.byteLength-d),await this.gb(s,a,y,v,$,d),$+=v,d+=v,d===y.byteLength&&(d=0);while(v>0)}catch(y){throw(0,w.$Kk)(y)}finally{await N.Promises.settled([typeof o=="number"?r.close(o):Promise.resolve(),typeof a=="number"?s.close(a):Promise.resolve()])}}async lb(r,n,s,t){return this.cb.queueFor(t,()=>this.mb(r,n,s,t),this.R(s).providerExtUri)}async mb(r,n,s,t){return s.writeFile(t,await r.readFile(n),{create:!0,overwrite:!0,unlock:!1,atomic:!1})}async nb(r,n,s,t){return this.cb.queueFor(t,()=>this.ob(r,n,s,t),this.R(s).providerExtUri)}async ob(r,n,s,t){const o=await s.open(t,{create:!0,unlock:!1});try{const a=await r.readFile(n);await this.gb(s,o,L.$ke.wrap(a),a.byteLength,0,0)}catch(a){throw(0,w.$Kk)(a)}finally{await s.close(o)}}async pb(r,n,s,t){const o=await(0,L.$we)(this.H(r,n,j.CancellationToken.None));await this.hb(s,t,void 0,o)}qb(r,n){if(r.capabilities&2048)throw new w.$Rk((0,p.localize)(25,null,this.sb(n)),6);return r}rb(r,n){if((n.permissions??0)&w.FilePermission.Readonly)throw new w.$Rk((0,p.localize)(26,null,this.sb(r)),6)}sb(r){return r.scheme===k.Schemas.file?r.fsPath:r.toString(!0)}};e.$wq=b,e.$wq=b=c=Se([Z(0,f.$qj)],b)}),define(ue[200],de([0,1,56,269,6,35,14,3,48,2,16,5,20,46,32,161,11,99,198,38,194,193]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Vq=void 0,(()=>{try{(0,N.gracefulify)(D)}catch(r){console.error(`Error enabling graceful-fs: ${(0,u.$Si)(r)}`)}})();class i extends f.$Fq{static{this.I=!1}constructor(n,s){super(n,s),this.onDidChangeCapabilities=P.Event.None,this.N=new j.$Ac(t=>E.$Ag.getComparisonKey(t)),this.U=new Map,this.W=new Map,this.X=new Map}get capabilities(){return this.J||(this.J=253982,k.$k&&(this.J|=1024)),this.J}async stat(n){try{const{stat:s,symbolicLink:t}=await g.SymlinkSupport.stat(this.H(n));return{type:this.M(s,t),ctime:s.birthtime.getTime(),mtime:s.mtime.getTime(),size:s.size,permissions:s.mode&128?void 0:w.FilePermission.Locked}}catch(s){throw this.fb(s)}}async L(n){try{return await this.stat(n)}catch{return}}async readdir(n){try{const s=await g.Promises.readdir(this.H(n),{withFileTypes:!0}),t=[];return await Promise.all(s.map(async o=>{try{let a;o.isSymbolicLink()?a=(await this.stat((0,E.$Jg)(n,o.name))).type:a=this.M(o),t.push([o.name,a])}catch(a){this.a.trace(a)}})),t}catch(s){throw this.fb(s)}}M(n,s){let t;return s?.dangling?t=w.FileType.Unknown:n.isFile()?t=w.FileType.File:n.isDirectory()?t=w.FileType.Directory:t=w.FileType.Unknown,s&&(t|=w.FileType.SymbolicLink),t}async O(n){const s=this.H(n);this.P(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${s})`);let t;for(;t=this.N.get(n);)this.P(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${s})`),await t.wait();const o=new L.$7g;return this.N.set(n,o),this.P(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${s})`),(0,m.$Rc)(()=>{this.P(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${s})`),this.N.get(n)===o&&(this.P(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${s})`),this.N.delete(n)),this.P(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${s})`),o.open()})}async readFile(n,s){let t;try{s?.atomic&&(this.P(`[Disk FileSystemProvider]: atomic read operation started (${this.H(n)})`),t=await this.O(n));const o=this.H(n);return await g.Promises.readFile(o)}catch(o){throw this.fb(o)}finally{t?.dispose()}}P(n){i.I&&this.a.trace(n)}readFileStream(n,s,t){const o=(0,l.$$d)(a=>I.$ke.concat(a.map(y=>I.$ke.wrap(y))).buffer);return(0,h.$vq)(this,n,o,a=>a.buffer,{...s,bufferSize:256*1024},t),o}async writeFile(n,s,t){return t?.atomic!==!1&&t?.atomic?.postfix&&await this.Q(n)?this.R(n,(0,E.$Jg)((0,E.$Ig)(n),`${(0,E.$Gg)(n)}${t.atomic.postfix}`),s,t):this.S(n,s,t)}async Q(n){try{const s=this.H(n),{symbolicLink:t}=await g.SymlinkSupport.stat(s);if(t)return!1}catch{}return!0}async R(n,s,t,o){const a=new m.$Sc;try{a.add(await this.O(n)),a.add(await this.O(s)),await this.S(s,t,o,!0);try{await this.rename(s,n,{overwrite:!0})}catch(y){try{await this.delete(s,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw y}}finally{a.dispose()}}async S(n,s,t,o){let a;try{const y=this.H(n);if(!t.create||!t.overwrite){if(await g.Promises.exists(y)){if(!t.overwrite)throw(0,w.$Jk)((0,p.localize)(0,null),w.FileSystemProviderErrorCode.FileExists)}else if(!t.create)throw(0,w.$Jk)((0,p.localize)(1,null),w.FileSystemProviderErrorCode.FileNotFound)}a=await this.open(n,{create:!0,unlock:t.unlock},o),await this.write(a,0,s,0,s.byteLength)}catch(y){throw await this.gb(n,y)}finally{typeof a=="number"&&await this.close(a)}}static{this.Y=!0}static configureFlushOnWrite(n){i.Y=n}async open(n,s,t){const o=this.H(n);let a;(0,w.$xk)(s)&&!t&&(a=await this.O(n));let y;try{if((0,w.$xk)(s)&&s.unlock)try{const{stat:d}=await g.SymlinkSupport.stat(o);d.mode&128||await g.Promises.chmod(o,d.mode|128)}catch(d){d.code!=="ENOENT"&&this.a.trace(d)}let $;if((0,w.$xk)(s)){if(k.$i)try{await g.Promises.truncate(o,0),$="r+"}catch(d){d.code!=="ENOENT"&&this.a.trace(d)}$||($="w")}else $="r";y=await g.Promises.open(o,$)}catch($){throw a?.dispose(),(0,w.$xk)(s)?await this.gb(n,$):this.fb($)}if(this.U.set(y,0),(0,w.$xk)(s)&&this.X.set(y,n),a){const $=this.W.get(y);this.P(`[Disk FileSystemProvider]: open() - storing lock for handle ${y} (${o})`),this.W.set(y,a),$&&(this.P(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${y} (${o})`),$.dispose())}return y}async close(n){const s=this.W.get(n);try{if(this.U.delete(n),this.X.delete(n)&&i.Y)try{await g.Promises.fdatasync(n)}catch(t){i.configureFlushOnWrite(!1),this.a.error(t)}return await g.Promises.close(n)}catch(t){throw this.fb(t)}finally{s&&(this.W.get(n)===s&&(this.P(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${n}`),this.W.delete(n)),this.P(`[Disk FileSystemProvider]: close() - disposing lock for handle ${n}`),s.dispose())}}async read(n,s,t,o,a){const y=this.Z(n,s);let $=null;try{$=(await g.Promises.read(n,t,o,a,y)).bytesRead}catch(d){throw this.fb(d)}finally{this.$(n,y,$)}return $}Z(n,s){return s===this.U.get(n)?null:s}$(n,s,t){const o=this.U.get(n);typeof o=="number"&&(typeof s=="number"||(typeof t=="number"?this.U.set(n,o+t):this.U.delete(n)))}async write(n,s,t,o,a){return(0,L.$ph)(()=>this.ab(n,s,t,o,a),100,3)}async ab(n,s,t,o,a){const y=this.Z(n,s);let $=null;try{$=(await g.Promises.write(n,t,o,a,y)).bytesWritten}catch(d){throw await this.gb(this.X.get(n),d)}finally{this.$(n,y,$)}return $}async mkdir(n){try{await g.Promises.mkdir(this.H(n))}catch(s){throw this.fb(s)}}async delete(n,s){try{const t=this.H(n);if(s.recursive){let o;s?.atomic!==!1&&s.atomic.postfix&&(o=(0,C.$jc)((0,C.$mc)(t),`${(0,C.$nc)(t)}${s.atomic.postfix}`)),await g.Promises.rm(t,g.RimRafMode.MOVE,o)}else try{await g.Promises.unlink(t)}catch(o){if(o.code==="EPERM"||o.code==="EISDIR"){let a=!1;try{const{stat:y,symbolicLink:$}=await g.SymlinkSupport.stat(t);a=y.isDirectory()&&!$}catch{}if(a)await g.Promises.rmdir(t);else throw o}else throw o}}catch(t){throw this.fb(t)}}async rename(n,s,t){const o=this.H(n),a=this.H(s);if(o!==a)try{await this.bb(n,s,"move",t.overwrite),await g.Promises.rename(o,a)}catch(y){throw(y.code==="EINVAL"||y.code==="EBUSY"||y.code==="ENAMETOOLONG")&&(y=new Error((0,p.localize)(2,null,(0,C.$nc)(o),(0,C.$nc)((0,C.$mc)(a)),y.toString()))),this.fb(y)}}async copy(n,s,t){const o=this.H(n),a=this.H(s);if(o!==a)try{await this.bb(n,s,"copy",t.overwrite),await g.Promises.copy(o,a,{preserveSymlinks:!0})}catch(y){throw(y.code==="EINVAL"||y.code==="EBUSY"||y.code==="ENAMETOOLONG")&&(y=new Error((0,p.localize)(3,null,(0,C.$nc)(o),(0,C.$nc)((0,C.$mc)(a)),y.toString()))),this.fb(y)}}async bb(n,s,t,o){const a=this.H(n),y=this.H(s);let $=!1;if(!!(this.capabilities&1024)||($=(0,R.$9f)(a,y,!0)),$){if(t==="copy")throw(0,w.$Jk)((0,p.localize)(4,null),w.FileSystemProviderErrorCode.FileExists);if(t==="move")return}const v=await this.L(n);if(!v)throw(0,w.$Jk)((0,p.localize)(5,null),w.FileSystemProviderErrorCode.FileNotFound);const S=await this.L(s);if(S){if(!o)throw(0,w.$Jk)((0,p.localize)(6,null),w.FileSystemProviderErrorCode.FileExists);v.type&w.FileType.File&&S.type&w.FileType.File||await this.delete(s,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(n,s){return this.cb(n,s,!1)}async cb(n,s,t){const o=this.H(n),a=this.H(s),y=!!(this.capabilities&1024);if((0,R.$9f)(o,a,!y))return;const $=new m.$Sc;try{$.add(await this.O(n)),$.add(await this.O(s)),t&&await g.Promises.mkdir((0,C.$mc)(a),{recursive:!0}),await g.Promises.copyFile(o,a)}catch(d){if(d.code==="ENOENT"&&!t)return this.cb(n,s,!0);throw this.fb(d)}finally{$.dispose()}}s(n,s,t){return new c.$Mq(o=>n(o),o=>s(o),t)}F(n,s,t){return new b.$Uq(o=>n(o),o=>s(o),t)}fb(n){if(n instanceof w.$Ik)return n;let s=n,t;switch(n.code){case"ENOENT":t=w.FileSystemProviderErrorCode.FileNotFound;break;case"EISDIR":t=w.FileSystemProviderErrorCode.FileIsADirectory;break;case"ENOTDIR":t=w.FileSystemProviderErrorCode.FileNotADirectory;break;case"EEXIST":t=w.FileSystemProviderErrorCode.FileExists;break;case"EPERM":case"EACCES":t=w.FileSystemProviderErrorCode.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":s=`${n.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,t=w.FileSystemProviderErrorCode.Unknown;break;default:t=w.FileSystemProviderErrorCode.Unknown}return(0,w.$Jk)(s,t)}async gb(n,s){let t=this.fb(s);if(n&&t.code===w.FileSystemProviderErrorCode.NoPermissions)try{const{stat:o}=await g.SymlinkSupport.stat(this.H(n));o.mode&128||(t=(0,w.$Jk)(s,w.FileSystemProviderErrorCode.FileWriteLocked))}catch(o){this.a.trace(o)}return t}}e.$Vq=i}),define(ue[102],de([0,1,3,2,4,8]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$GRc=e.$FRc=void 0,e.$FRc=(0,L.$8h)("sharedProcessLifecycleService");let I=class extends N.$Tc{constructor(R){super(),this.b=R,this.a=this.D(new D.$Wd),this.onWillShutdown=this.a.event}fireOnWillShutdown(){this.b.trace("Lifecycle#onWillShutdown.fire()"),this.a.fire()}};e.$GRc=I,e.$GRc=I=Se([Z(0,j.$qj)],I)}),define(ue[201],de([0,1,10,3,8,2]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Yr=e.$Xr=e.$Wr=void 0;class I extends L.$Bj{constructor(k,E,l,g,p){super(E,l,g),this.r=k,this.s=p,this.D(p.listen("onDidChangeLogLevel",k)(w=>{(0,L.$sj)(w)?super.setLogLevel(w):super.setLogLevel(D.URI.revive(w[0]),w[1])})),this.D(p.listen("onDidChangeVisibility",k)(([w,h])=>super.setVisibility(D.URI.revive(w),h))),this.D(p.listen("onDidChangeLoggers",k)(({added:w,removed:h})=>{for(const f of w)super.registerLogger({...f,resource:D.URI.revive(f.resource)});for(const f of h)super.deregisterLogger(f.resource)}))}createConsoleMainLogger(){return new L.$zj({log:(k,E)=>{this.s.call("consoleLog",[k,E])}})}registerLogger(k){super.registerLogger(k),this.s.call("registerLogger",[k,this.r])}deregisterLogger(k){super.deregisterLogger(k),this.s.call("deregisterLogger",[k,this.r])}setLogLevel(k,E){super.setLogLevel(k,E),this.s.call("setLogLevel",[k,E])}setVisibility(k,E){super.setVisibility(k,E),this.s.call("setVisibility",[this.n(k),E])}q(k,E,l){return new P(this.s,k,E,l,this.r)}static setLogLevel(k,E,l){return k.call("setLogLevel",[E,l])}}e.$Wr=I;class P extends L.$wj{constructor(k,E,l,g,p){super(g?.logLevel==="always"),this.q=k,this.r=E,this.m=!1,this.n=[],this.setLevel(l),this.q.call("createLogger",[E,g,p]).then(()=>{this.t(this.n),this.m=!0})}g(k,E){const l=[[k,E]];this.m?this.t(l):this.n.push(...l)}t(k){this.q.call("log",[this.r,k])}}class R{constructor(k,E){this.a=k,this.b=E}listen(k,E){const l=this.b(k);switch(E){case"onDidChangeLoggers":return N.Event.map(this.a.onDidChangeLoggers,g=>({added:[...g.added].map(p=>this.c(p,l)),removed:[...g.removed].map(p=>this.c(p,l))}));case"onDidChangeVisibility":return N.Event.map(this.a.onDidChangeVisibility,g=>[l.transformOutgoingURI(g[0]),g[1]]);case"onDidChangeLogLevel":return N.Event.map(this.a.onDidChangeLogLevel,g=>(0,L.$sj)(g)?g:[l.transformOutgoingURI(g[0]),g[1]])}throw new Error(`Event not found: ${E}`)}async call(k,E,l){const g=this.b(k);switch(E){case"setLogLevel":return(0,L.$sj)(l[0])?this.a.setLogLevel(l[0]):this.a.setLogLevel(D.URI.revive(g.transformIncoming(l[0][0])),l[0][1]);case"getRegisteredLoggers":return Promise.resolve([...this.a.getRegisteredLoggers()].map(p=>this.c(p,g)))}throw new Error(`Call not found: ${E}`)}c(k,E){return{...k,resource:E.transformOutgoingURI(k.resource)}}}e.$Xr=R;class m extends j.$Tc{constructor(k,E){super(),E.call("setLogLevel",[k.getLogLevel()]),this.D(k.onDidChangeLogLevel(l=>E.call("setLogLevel",[l]))),E.call("getRegisteredLoggers").then(l=>{for(const g of l)k.registerLogger({...g,resource:D.URI.revive(g.resource)})}),this.D(E.listen("onDidChangeVisibility")(([l,g])=>k.setVisibility(D.URI.revive(l),g))),this.D(E.listen("onDidChangeLoggers")(({added:l,removed:g})=>{for(const p of l)k.registerLogger({...p,resource:D.URI.revive(p.resource)});for(const p of g)k.deregisterLogger(p.resource)}))}}e.$Yr=m}),define(ue[202],de([0,1,2,8]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$E4=void 0;class L extends D.$Tc{constructor(I,P=[]){super(),this.a=new N.$Aj([I,...P]),this.D(I.onDidChangeLogLevel(R=>this.setLevel(R)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(I){this.a.setLevel(I)}getLevel(){return this.a.getLevel()}trace(I,...P){this.a.trace(I,...P)}debug(I,...P){this.a.debug(I,...P)}info(I,...P){this.a.info(I,...P)}warn(I,...P){this.a.warn(I,...P)}error(I,...P){this.a.error(I,...P)}flush(){this.a.flush()}}e.$E4=L}),define(ue[58],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$CPc=void 0,e.$CPc=(0,D.$8h)("nativeHostService")}),define(ue[203],de([0,1,40,57]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$WQc=void 0;let L=class{constructor(I,P){return this.windowId=I,D.ProxyChannel.toService(P.getChannel("nativeHost"),{context:I,properties:(()=>{const R=new Map;return R.set("windowId",I),R})()})}};e.$WQc=L,e.$WQc=L=Se([Z(1,N.$QQc)],L)}),define(ue[59],de([0,1,3,63,2,4]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Un=e.$Tn=e.$Sn=void 0,e.$Sn=(0,j.$8h)("policy");class I extends L.$Tc{constructor(){super(...arguments),this.f={},this.g=new Map,this.h=this.D(new D.$Wd),this.onDidChange=this.h.event}async updatePolicyDefinitions(m){const C=Object.keys(this.f).length;return this.f={...m,...this.f},C!==Object.keys(this.f).length&&await this.j(m),N.Iterable.reduce(this.g.entries(),(k,[E,l])=>({...k,[E]:l}),{})}getPolicyValue(m){return this.g.get(m)}serialize(){return N.Iterable.reduce(Object.entries(this.f),(m,[C,k])=>({...m,[C]:{definition:k,value:this.g.get(C)}}),{})}}e.$Tn=I;class P{constructor(){this.onDidChange=D.Event.None}async updatePolicyDefinitions(){return{}}getPolicyValue(){}serialize(){}}e.$Un=P}),define(ue[204],de([0,1,3,2,59]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$nQc=e.$mQc=void 0;class j{constructor(R){this.b=R,this.a=new N.$Sc}listen(R,m){switch(m){case"onDidChange":return D.Event.map(this.b.onDidChange,C=>C.reduce((k,E)=>({...k,[E]:this.b.getPolicyValue(E)??null}),{}),this.a)}throw new Error(`Event not found: ${m}`)}call(R,m,C){switch(m){case"updatePolicyDefinitions":return this.b.updatePolicyDefinitions(C)}throw new Error(`Call not found: ${m}`)}dispose(){this.a.dispose()}}e.$mQc=j;class I extends L.$Tn{constructor(R,m){super(),this.a=m;for(const C in R){const{definition:k,value:E}=R[C];this.f[C]=k,E!==void 0&&this.g.set(C,E)}this.a.listen("onDidChange")(C=>{for(const k in C){const E=C[k];E===null?this.g.delete(k):this.g.set(k,E)}this.h.fire(Object.keys(C))})}async j(R){const m=await this.a.call("updatePolicyDefinitions",R);for(const C in m)this.g.set(C,m[C])}}e.$nQc=I}),define(ue[60],de([0,1,37]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let N;const L=globalThis.vscode;if(typeof L<"u"&&typeof L.context<"u"){const j=L.context.configuration();if(j)N=j.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(N=globalThis._VSCODE_PRODUCT_JSON,D.env.VSCODE_DEV&&Object.assign(N,{nameShort:`${N.nameShort} Dev`,nameLong:`${N.nameLong} Dev`,dataFolderName:`${N.dataFolderName}-dev`,serverDataFolderName:N.serverDataFolderName?`${N.serverDataFolderName}-dev`:void 0}),D.env.VSCODE_DEV_ONBOARDING&&Object.assign(N,{nameShort:`${N.nameShort} Onboarding`,nameLong:`${N.nameLong} Onboarding`,dataFolderName:`${N.dataFolderName}-onboarding`,serverDataFolderName:N.serverDataFolderName?`${N.serverDataFolderName}-onboarding`:void 0}),!N.version){const j=globalThis._VSCODE_PACKAGE_JSON;Object.assign(N,{version:j.version})}}else N={},Object.keys(N).length===0&&Object.assign(N,{version:"1.83.1-dev",nameShort:"Cursor Dev",nameLong:"Cursor Dev",applicationName:"cursor",dataFolderName:".cursor",urlProtocol:"cursor",reportIssueUrl:"https://github.com/getcursor/cursor/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/getcursor/cursor/",serverLicenseUrl:"https://github.com/getcursor/cursor/"});e.default=N}),define(ue[23],de([0,1,10,4]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Kj=e.$Jj=e.$Ij=void 0,e.$Ij=(0,N.$8h)("productService"),e.$Jj="vscode://schemas/vscode-product";function L(j,I){return D.URI.joinPath(j.userHome,I.dataFolderName,"shadow-workspaces")}e.$Kj=L}),define(ue[205],de([0,1,6,7,2,16,32,8,23]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$dRc=void 0;let m=class extends L.$Tc{constructor(k,E,l){super(),this.b=E,this.c=l,this.a=this.b.quality!=="stable"?1e3*60*60*24*7:1e3*60*60*24*30*3,k&&this.D(new D.$hh(()=>{this.f(k)},3e4)).schedule()}async f(k){this.c.trace("[code cache cleanup]: Starting to clean up old code cache folders.");try{const E=Date.now(),l=(0,j.$mc)(k),g=(0,j.$nc)(k),p=await I.Promises.readdir(l);await Promise.all(p.map(async w=>{if(w===g)return;const h=(0,j.$jc)(l,w),f=await I.Promises.stat(h);if(f.isDirectory()&&E-f.mtime.getTime()>this.a)return this.c.trace(`[code cache cleanup]: Removing code cache folder ${w}.`),I.Promises.rm(h)}))}catch(E){(0,N.$1)(E)}}};e.$dRc=m,e.$dRc=m=Se([Z(1,R.$Ij),Z(2,P.$qj)],m)}),define(ue[206],de([0,1,6,7,2,16,32,15,8,23]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$eRc=void 0;let C=class extends L.$Tc{constructor(E,l,g){super(),this.b=E,this.c=l,this.f=g,this.a=(this.f.quality!=="stable",1e3*60*60*24*7),this.b.isBuilt&&this.D(new D.$hh(()=>{this.g()},4e4)).schedule()}async g(){this.c.trace("[language pack cache cleanup]: Starting to clean up unused language packs.");try{const E=Object.create(null),l=JSON.parse(await I.Promises.readFile((0,j.$jc)(this.b.userDataPath,"languagepacks.json"),"utf8"));for(const f of Object.keys(l)){const u=l[f];E[`${u.hash}.${f}`]=!0}const g=(0,j.$jc)(this.b.userDataPath,"clp");if(!await I.Promises.exists(g))return;const w=await I.Promises.readdir(g);for(const f of w){if(E[f]){this.c.trace(`[language pack cache cleanup]: Skipping folder ${f}. Language pack still in use.`);continue}this.c.trace(`[language pack cache cleanup]: Removing unused language pack: ${f}`),await I.Promises.rm((0,j.$jc)(g,f))}const h=Date.now();for(const f of Object.keys(E)){const u=(0,j.$jc)(g,f),c=await I.Promises.readdir(u);for(const b of c){if(b==="tcf.json")continue;const i=(0,j.$jc)(u,b),r=await I.Promises.stat(i);r.isDirectory()&&h-r.mtime.getTime()>this.a&&(this.c.trace(`[language pack cache cleanup]: Removing language pack cache folder: ${(0,j.$jc)(f,b)}`),await I.Promises.rm(i))}}}catch(E){(0,N.$1)(E)}}};e.$eRc=C,e.$eRc=C=Se([Z(0,P.$di),Z(1,R.$qj),Z(2,m.$Ij)],C)}),define(ue[207],de([0,1,16,4]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=e.$fU=void 0,e.$fU=(0,N.$8h)("IV8InspectProfilingService");var L;(function(j){function I(R){return!!(R.samples&&R.timeDeltas)}j.isValidProfile=I;function P(R,m="noAbsolutePaths"){for(const C of R.nodes)C.callFrame&&C.callFrame.url&&((0,D.$ic)(C.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(C.callFrame.url))&&(C.callFrame.url=(0,D.$jc)(m,(0,D.$nc)(C.callFrame.url)));return R}j.rewriteAbsolutePaths=P})(L||(e.Utils=L={}))}),define(ue[208],de([0,1,31]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$vRc=void 0;class N{constructor(){this.a=new Map}async startProfiling(j){const P=await(await new Promise((m,C)=>{oe(["v8-inspect-profiler"],m,C)})).startProfiling({port:j.port,checkForPaused:!0}),R=(0,D.$sg)();return this.a.set(R,P),R}async stopProfiling(j){const I=this.a.get(j);if(!I)throw new Error(`UNKNOWN session '${j}'`);const P=await I.stop();return this.a.delete(j),P.profile}}e.$vRc=N}),define(ue[41],de([0,1,127,12]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Qn=void 0;class L{constructor(){this.a=new Map}add(I,P){D.ok(N.$Kf(I)),D.ok(N.$Mf(P)),D.ok(!this.a.has(I),"There is already an extension with this id"),this.a.set(I,P)}knows(I){return this.a.has(I)}as(I){return this.a.get(I)||null}}e.$Qn=new L}),define(ue[103],de([0,1,3,41]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Rn=void 0,e.$Rn={JSONContribution:"base.contributions.json"};function L(P){return P.length>0&&P.charAt(P.length-1)==="#"?P.substring(0,P.length-1):P}class j{constructor(){this.b=new D.$Wd,this.onDidChangeSchema=this.b.event,this.a={}}registerSchema(R,m){this.a[L(R)]=m,this.b.fire(R)}notifySchemaChanged(R){this.b.fire(R)}getSchemaContributions(){return{schemas:this.a}}}const I=new j;N.$Qn.add(e.$Rn.JSONContribution,I)}),define(ue[44],de([0,1,17,3,12,148,21,103,41]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$$n=e.$0n=e.$9n=e.$8n=e.$7n=e.$6n=e.$5n=e.$4n=e.$3n=e.$2n=e.$1n=e.$Zn=e.$Yn=e.$Xn=e.$Wn=e.ConfigurationScope=e.$Vn=e.EditPresentationTypes=void 0;var m;(function(b){b.Multiline="multilineText",b.Singleline="singlelineText"})(m||(e.EditPresentationTypes=m={})),e.$Vn={Configuration:"base.contributions.configuration"};var C;(function(b){b[b.APPLICATION=1]="APPLICATION",b[b.MACHINE=2]="MACHINE",b[b.WINDOW=3]="WINDOW",b[b.RESOURCE=4]="RESOURCE",b[b.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",b[b.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(C||(e.ConfigurationScope=C={})),e.$Wn={properties:{},patternProperties:{}},e.$Xn={properties:{},patternProperties:{}},e.$Yn={properties:{},patternProperties:{}},e.$Zn={properties:{},patternProperties:{}},e.$1n={properties:{},patternProperties:{}},e.$2n={properties:{},patternProperties:{}},e.$3n="vscode://schemas/settings/resourceLanguage",e.$4n="vscode://schemas/settings/configurationDefaults";const k=R.$Qn.as(P.$Rn.JSONContribution);class E{constructor(){this.h=new Set,this.i=new N.$Wd,this.onDidSchemaChange=this.i.event,this.j=new N.$Wd,this.onDidUpdateConfiguration=this.j.event,this.a=new Map,this.b={id:"defaultOverrides",title:j.localize(0,null),properties:{}},this.c=[this.b],this.g={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.d={},this.e=new Map,this.f={},k.registerSchema(e.$3n,this.g),this.v()}registerConfiguration(i,r=!0){this.registerConfigurations([i],r)}registerConfigurations(i,r=!0){const n=new Set;this.n(i,r,n),k.registerSchema(e.$3n,this.g),this.i.fire(),this.j.fire({properties:n})}deregisterConfigurations(i){const r=new Set;this.o(i,r),k.registerSchema(e.$3n,this.g),this.i.fire(),this.j.fire({properties:r})}updateConfigurations({add:i,remove:r}){const n=new Set;this.o(r,n),this.n(i,!1,n),k.registerSchema(e.$3n,this.g),this.i.fire(),this.j.fire({properties:n})}registerDefaultConfigurations(i){const r=new Set;this.k(i,r),this.i.fire(),this.j.fire({properties:r,defaultsOverrides:!0})}k(i,r){const n=[];for(const{overrides:s,source:t}of i)for(const o in s)if(r.add(o),e.$6n.test(o)){const a=this.a.get(o),y=a?.valuesSources??new Map;if(t)for(const S of Object.keys(s[o]))y.set(S,t);const $={...a?.value||{},...s[o]};this.a.set(o,{source:t,value:$,valuesSources:y});const d=(0,I.$Li)(o),v={type:"object",default:$,description:j.localize(1,null,d),$ref:e.$3n,defaultDefaultValue:$,source:L.$Kf(t)?void 0:t,defaultValueSource:t};n.push(...p(o)),this.d[o]=v,this.b.properties[o]=v}else{this.a.set(o,{value:s[o],source:t});const a=this.d[o];a&&(this.w(o,a),this.r(o,a))}this.m(n)}deregisterDefaultConfigurations(i){const r=new Set;this.l(i,r),this.i.fire(),this.j.fire({properties:r,defaultsOverrides:!0})}l(i,r){for(const{overrides:n,source:s}of i)for(const t in n){const o=this.a.get(t),a=L.$Kf(s)?s:s?.id,y=L.$Kf(o?.source)?o?.source:o?.source?.id;if(a===y)if(r.add(t),this.a.delete(t),e.$6n.test(t))delete this.d[t],delete this.b.properties[t];else{const $=this.d[t];$&&(this.w(t,$),this.r(t,$))}}this.u()}deltaConfiguration(i){let r=!1;const n=new Set;i.removedDefaults&&(this.l(i.removedDefaults,n),r=!0),i.addedDefaults&&(this.k(i.addedDefaults,n),r=!0),i.removedConfigurations&&this.o(i.removedConfigurations,n),i.addedConfigurations&&this.n(i.addedConfigurations,!1,n),this.i.fire(),this.j.fire({properties:n,defaultsOverrides:r})}notifyConfigurationSchemaUpdated(...i){this.i.fire()}registerOverrideIdentifiers(i){this.m(i),this.i.fire()}m(i){for(const r of i)this.h.add(r);this.u()}n(i,r,n){i.forEach(s=>{this.p(s,r,s.extensionInfo,s.restrictedProperties,void 0,n),this.c.push(s),this.q(s)})}o(i,r){const n=s=>{if(s.properties)for(const t in s.properties){r.add(t);const o=this.d[t];o?.policy?.name&&this.e.delete(o.policy.name),delete this.d[t],this.s(t,s.properties[t])}s.allOf?.forEach(t=>n(t))};for(const s of i){n(s);const t=this.c.indexOf(s);t!==-1&&this.c.splice(t,1)}}p(i,r=!0,n,s,t=3,o){t=L.$Tf(i.scope)?t:i.scope;const a=i.properties;if(a)for(const $ in a){const d=a[$];if(r&&u($,d)){delete a[$];continue}if(d.source=n,d.defaultDefaultValue=a[$].default,this.w($,d),e.$6n.test($)?d.scope=void 0:(d.scope=L.$Tf(d.scope)?t:d.scope,d.restricted=L.$Tf(d.restricted)?!!s?.includes($):d.restricted),a[$].hasOwnProperty("included")&&!a[$].included){this.f[$]=a[$],delete a[$];continue}else this.d[$]=a[$],a[$].policy?.name&&this.e.set(a[$].policy.name,$);!a[$].deprecationMessage&&a[$].markdownDeprecationMessage&&(a[$].deprecationMessage=a[$].markdownDeprecationMessage),o.add($)}const y=i.allOf;if(y)for(const $ of y)this.p($,r,n,s,t,o)}getConfigurations(){return this.c}getConfigurationProperties(){return this.d}getPolicyConfigurations(){return this.e}getExcludedConfigurationProperties(){return this.f}getConfigurationDefaultsOverrides(){return this.a}q(i){const r=n=>{const s=n.properties;if(s)for(const o in s)this.r(o,s[o]);n.allOf?.forEach(r)};r(i)}r(i,r){switch(e.$Wn.properties[i]=r,r.scope){case 1:e.$Xn.properties[i]=r;break;case 2:e.$Yn.properties[i]=r;break;case 6:e.$Zn.properties[i]=r;break;case 3:e.$1n.properties[i]=r;break;case 4:e.$2n.properties[i]=r;break;case 5:e.$2n.properties[i]=r,this.g.properties[i]=r;break}}s(i,r){switch(delete e.$Wn.properties[i],r.scope){case 1:delete e.$Xn.properties[i];break;case 2:delete e.$Yn.properties[i];break;case 6:delete e.$Zn.properties[i];break;case 3:delete e.$1n.properties[i];break;case 4:case 5:delete e.$2n.properties[i],delete this.g.properties[i];break}}u(){for(const i of this.h.values()){const r=`[${i}]`,n={type:"object",description:j.localize(2,null),errorMessage:j.localize(3,null),$ref:e.$3n};this.w(r,n),e.$Wn.properties[r]=n,e.$Xn.properties[r]=n,e.$Yn.properties[r]=n,e.$Zn.properties[r]=n,e.$1n.properties[r]=n,e.$2n.properties[r]=n}}v(){const i={type:"object",description:j.localize(4,null),errorMessage:j.localize(5,null),$ref:e.$3n};e.$Wn.patternProperties[e.$5n]=i,e.$Xn.patternProperties[e.$5n]=i,e.$Yn.patternProperties[e.$5n]=i,e.$Zn.patternProperties[e.$5n]=i,e.$1n.patternProperties[e.$5n]=i,e.$2n.patternProperties[e.$5n]=i,this.i.fire()}w(i,r){const n=this.a.get(i);let s=n?.value,t=n?.source;L.$Rf(s)&&(s=r.defaultDefaultValue,t=void 0),L.$Rf(s)&&(s=h(r.type)),r.default=s,r.defaultValueSource=t}}const l="\\[([^\\]]+)\\]",g=new RegExp(l,"g");e.$5n=`^(${l})+$`,e.$6n=new RegExp(e.$5n);function p(b){const i=[];if(e.$6n.test(b)){let r=g.exec(b);for(;r?.length;){const n=r[1].trim();n&&i.push(n),r=g.exec(b)}}return(0,D.$Mb)(i)}e.$7n=p;function w(b){return b.reduce((i,r)=>`${i}[${r}]`,"")}e.$8n=w;function h(b){switch(Array.isArray(b)?b[0]:b){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}e.$9n=h;const f=new E;R.$Qn.add(e.$Vn.Configuration,f);function u(b,i){return b.trim()?e.$6n.test(b)?j.localize(7,null,b):f.getConfigurationProperties()[b]!==void 0?j.localize(8,null,b):i.policy?.name&&f.getPolicyConfigurations().get(i.policy?.name)!==void 0?j.localize(9,null,b,i.policy?.name,f.getPolicyConfigurations().get(i.policy?.name)):null:j.localize(6,null)}e.$0n=u;function c(){const b=[],i=f.getConfigurationProperties();for(const r of Object.keys(i))b.push([r,i[r].scope]);return b.push(["launch",4]),b.push(["task",4]),b}e.$$n=c}),define(ue[77],de([0,1,17,3,34,2,35,30,12,10,21,44,41]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$eo=e.$do=e.$co=e.$bo=e.$ao=e.$_n=void 0;function l(r){return Object.isFrozen(r)?r:P.$Fn(r)}class g{constructor(n={},s=[],t=[],o){this.b=n,this.c=s,this.d=t,this.raw=o,this.a=new Map}get rawConfiguration(){if(!this.f)if(this.raw?.length){const n=this.raw.map(s=>{if(s instanceof g)return s;const t=new p("");return t.parseRaw(s),t.configurationModel});this.f=n.reduce((s,t)=>t===s?t:s.merge(t),n[0])}else this.f=this;return this.f}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(n){return n?(0,C.$Ji)(this.contents,n):this.contents}inspect(n,s){const t=this.rawConfiguration.getValue(n),o=s?this.rawConfiguration.getOverrideValue(n,s):void 0,a=s?this.rawConfiguration.override(s).getValue(n):t;return{value:t,override:o,merged:a}}getOverrideValue(n,s){const t=this.i(s);return t?n?(0,C.$Ji)(t,n):t:void 0}getKeysForOverrideIdentifier(n){const s=[];for(const t of this.overrides)t.identifiers.includes(n)&&s.push(...t.keys);return D.$Mb(s)}getAllOverrideIdentifiers(){const n=[];for(const s of this.overrides)n.push(...s.identifiers);return D.$Mb(n)}override(n){let s=this.a.get(n);return s||(s=this.g(n),this.a.set(n,s)),s}merge(...n){const s=P.$En(this.contents),t=P.$En(this.overrides),o=[...this.keys],a=this.raw?.length?[...this.raw]:[this];for(const y of n)if(a.push(...y.raw?.length?y.raw:[y]),!y.isEmpty()){this.h(s,y.contents);for(const $ of y.overrides){const[d]=t.filter(v=>D.$ub(v.identifiers,$.identifiers));d?(this.h(d.contents,$.contents),d.keys.push(...$.keys),d.keys=D.$Mb(d.keys)):t.push(P.$En($))}for(const $ of y.keys)o.indexOf($)===-1&&o.push($)}return new g(s,o,t,a.every(y=>y instanceof g)?void 0:a)}g(n){const s=this.i(n);if(!s||typeof s!="object"||!Object.keys(s).length)return this;const t={};for(const o of D.$Mb([...Object.keys(this.contents),...Object.keys(s)])){let a=this.contents[o];const y=s[o];y&&(typeof a=="object"&&typeof y=="object"?(a=P.$En(a),this.h(a,y)):a=y),t[o]=a}return new g(t,this.keys,this.overrides)}h(n,s){for(const t of Object.keys(s)){if(t in n&&R.$Mf(n[t])&&R.$Mf(s[t])){this.h(n[t],s[t]);continue}n[t]=P.$En(s[t])}}i(n){let s=null,t=null;const o=a=>{a&&(t?this.h(t,a):t=P.$En(a))};for(const a of this.overrides)a.identifiers.length===1&&a.identifiers[0]===n?s=a.contents:a.identifiers.includes(n)&&o(a.contents);return o(s),t}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(n,s){this.j(n,s,!0)}setValue(n,s){this.j(n,s,!1)}removeValue(n){const s=this.keys.indexOf(n);s!==-1&&(this.keys.splice(s,1),(0,C.$Ii)(this.contents,n),k.$6n.test(n)&&this.overrides.splice(this.overrides.findIndex(t=>D.$ub(t.identifiers,(0,k.$7n)(n))),1))}j(n,s,t){(0,C.$Hi)(this.contents,n,s,o=>console.error(o)),t=t||this.keys.indexOf(n)===-1,t&&this.keys.push(n),k.$6n.test(n)&&this.overrides.push({identifiers:(0,k.$7n)(n),keys:Object.keys(this.contents[n]),contents:(0,C.$Gi)(this.contents[n],o=>console.error(o))})}}e.$_n=g;class p{constructor(n){this.f=n,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||new g}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(n,s){if(!R.$Tf(n)){const t=this.g(n);this.parseRaw(t,s)}}reparse(n){this.a&&this.parseRaw(this.a,n)}parseRaw(n,s){this.a=n;const{contents:t,keys:o,overrides:a,restricted:y,hasExcludedProperties:$}=this.h(n,s);this.b=new g(t,o,a,$?[n]:void 0),this.c=y||[]}g(n){let s={},t=null,o=[];const a=[],y=[];function $(v){Array.isArray(o)?o.push(v):t!==null&&(o[t]=v)}const d={onObjectBegin:()=>{const v={};$(v),a.push(o),o=v,t=null},onObjectProperty:v=>{t=v},onObjectEnd:()=>{o=a.pop()},onArrayBegin:()=>{const v=[];$(v),a.push(o),o=v,t=null},onArrayEnd:()=>{o=a.pop()},onLiteralValue:$,onError:(v,S,A)=>{y.push({error:v,offset:S,length:A})}};if(n)try{L.$sn(n,d),s=o[0]||{}}catch(v){console.error(`Error while parsing settings file ${this.f}: ${v}`),this.d=[v]}return s}h(n,s){const t=E.$Qn.as(k.$Vn.Configuration).getConfigurationProperties(),o=this.i(n,t,!0,s);n=o.raw;const a=(0,C.$Gi)(n,d=>console.error(`Conflict in settings file ${this.f}: ${d}`)),y=Object.keys(n),$=this.j(n,d=>console.error(`Conflict in settings file ${this.f}: ${d}`));return{contents:a,keys:y,overrides:$,restricted:o.restricted,hasExcludedProperties:o.hasExcludedProperties}}i(n,s,t,o){let a=!1;if(!o?.scopes&&!o?.skipRestricted&&!o?.exclude?.length)return{raw:n,restricted:[],hasExcludedProperties:a};const y={},$=[];for(const d in n)if(k.$6n.test(d)&&t){const v=this.i(n[d],s,!1,o);y[d]=v.raw,a=a||v.hasExcludedProperties,$.push(...v.restricted)}else{const v=s[d],S=v?typeof v.scope<"u"?v.scope:3:void 0;v?.restricted&&$.push(d),!o.exclude?.includes(d)&&(o.include?.includes(d)||(S===void 0||o.scopes===void 0||o.scopes.includes(S))&&!(o.skipRestricted&&v?.restricted))?y[d]=n[d]:a=!0}return{raw:y,restricted:$,hasExcludedProperties:a}}j(n,s){const t=[];for(const o of Object.keys(n))if(k.$6n.test(o)){const a={};for(const y in n[o])a[y]=n[o][y];t.push({identifiers:(0,k.$7n)(o),keys:Object.keys(a),contents:(0,C.$Gi)(a,s)})}return t}}e.$ao=p;class w extends j.$Tc{constructor(n,s,t,o){super(),this.c=n,this.f=s,this.g=o,this.b=this.D(new N.$Wd),this.onDidChange=this.b.event,this.a=new p(this.c.toString()),this.D(this.g.watch(t.dirname(this.c))),this.D(this.g.watch(this.c)),this.D(N.Event.any(N.Event.filter(this.g.onDidFilesChange,a=>a.contains(this.c)),N.Event.filter(this.g.onDidRunOperation,a=>(a.isOperation(0)||a.isOperation(3)||a.isOperation(1)||a.isOperation(4))&&t.isEqual(a.resource,n)))(()=>this.b.fire()))}async loadConfiguration(){try{const n=await this.g.readFile(this.c);return this.a.parse(n.value.toString()||"{}",this.f),this.a.configurationModel}catch{return new g}}reparse(n){return n&&(this.f=n),this.a.reparse(this.f),this.a.configurationModel}getRestrictedSettings(){return this.a.restrictedConfigurations}}e.$bo=w;class h{constructor(n,s,t,o,a,y,$,d,v,S,A,T,q){this.a=n,this.b=s,this.c=t,this.overrideIdentifiers=o,this.d=a,this.f=y,this.g=$,this.h=d,this.i=v,this.j=S,this.k=A,this.l=T,this.m=q}get value(){return l(this.c)}n(n,s,t){const o=n.inspect(s,t);return{get value(){return l(o.value)},get override(){return l(o.override)},get merged(){return l(o.merged)}}}get q(){return this.p||(this.p=this.n(this.d,this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.q.value!==void 0||this.q.override!==void 0?{value:this.q.value,override:this.q.override}:void 0}get s(){return this.r===void 0&&(this.r=this.f?this.n(this.f,this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.n(this.g,this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.u?.value!==void 0||this.u?.override!==void 0?{value:this.u.value,override:this.u.override}:void 0}get w(){return this.v||(this.v=this.n(this.h,this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.w.value!==void 0||this.w.override!==void 0?{value:this.w.value,override:this.w.override}:void 0}get y(){return this.x||(this.x=this.n(this.i,this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.y.value!==void 0||this.y.override!==void 0?{value:this.y.value,override:this.y.override}:void 0}get A(){return this.z||(this.z=this.n(this.j,this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.A.value!==void 0||this.A.override!==void 0?{value:this.A.value,override:this.A.override}:void 0}get D(){return this.B===void 0&&(this.B=this.k?this.n(this.k,this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.D?.value!==void 0||this.D?.override!==void 0?{value:this.D.value,override:this.D.override}:void 0}get F(){return this.E===void 0&&(this.E=this.l?this.n(this.l,this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.F?.value!==void 0||this.F?.override!==void 0?{value:this.F.value,override:this.F.override}:void 0}get H(){return this.G===void 0&&(this.G=this.n(this.m,this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.H.value!==void 0||this.H.override!==void 0?{value:this.H.value,override:this.H.override}:void 0}}class f{constructor(n,s,t,o,a=new g,y=new g,$=new I.$Ac,d=new g,v=new I.$Ac){this.c=n,this.d=s,this.f=t,this.g=o,this.h=a,this.i=y,this.j=$,this.l=d,this.m=v,this.a=null,this.b=new I.$Ac,this.n=null}getValue(n,s,t){return this.p(n,s,t).getValue(n)}updateValue(n,s,t={}){let o;t.resource?(o=this.m.get(t.resource),o||(o=new g,this.m.set(t.resource,o))):o=this.l,s===void 0?o.removeValue(n):o.setValue(n,s),t.resource||(this.a=null)}inspect(n,s,t){const o=this.p(n,s,t),a=this.t(s.resource,t),y=s.resource?this.m.get(s.resource)||this.l:this.l,$=new Set;for(const d of o.overrides)for(const v of d.identifiers)o.getOverrideValue(n,v)!==void 0&&$.add(v);return new h(n,s,o.getValue(n),$.size?[...$]:void 0,this.c,this.d.isEmpty()?void 0:this.d,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,t?this.i:void 0,a||void 0,y)}keys(n){const s=this.t(void 0,n);return{default:this.c.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.i.keys.slice(0),workspaceFolder:s?s.keys.slice(0):[]}}updateDefaultConfiguration(n){this.c=n,this.a=null,this.b.clear()}updatePolicyConfiguration(n){this.d=n}updateApplicationConfiguration(n){this.f=n,this.a=null,this.b.clear()}updateLocalUserConfiguration(n){this.g=n,this.n=null,this.a=null,this.b.clear()}updateRemoteUserConfiguration(n){this.h=n,this.n=null,this.a=null,this.b.clear()}updateWorkspaceConfiguration(n){this.i=n,this.a=null,this.b.clear()}updateFolderConfiguration(n,s){this.j.set(n,s),this.b.delete(n)}deleteFolderConfiguration(n){this.folderConfigurations.delete(n),this.b.delete(n)}compareAndUpdateDefaultConfiguration(n,s){const t=[];if(!s){const{added:o,updated:a,removed:y}=b(this.c,n);s=[...o,...a,...y]}for(const o of s)for(const a of(0,k.$7n)(o)){const y=this.c.getKeysForOverrideIdentifier(a),$=n.getKeysForOverrideIdentifier(a),d=[...$.filter(v=>y.indexOf(v)===-1),...y.filter(v=>$.indexOf(v)===-1),...y.filter(v=>!P.$In(this.c.override(a).getValue(v),n.override(a).getValue(v)))];t.push([a,d])}return this.updateDefaultConfiguration(n),{keys:s,overrides:t}}compareAndUpdatePolicyConfiguration(n){const{added:s,updated:t,removed:o}=b(this.d,n),a=[...s,...t,...o];return a.length&&this.updatePolicyConfiguration(n),{keys:a,overrides:[]}}compareAndUpdateApplicationConfiguration(n){const{added:s,updated:t,removed:o,overrides:a}=b(this.applicationConfiguration,n),y=[...s,...t,...o];return y.length&&this.updateApplicationConfiguration(n),{keys:y,overrides:a}}compareAndUpdateLocalUserConfiguration(n){const{added:s,updated:t,removed:o,overrides:a}=b(this.localUserConfiguration,n),y=[...s,...t,...o];return y.length&&this.updateLocalUserConfiguration(n),{keys:y,overrides:a}}compareAndUpdateRemoteUserConfiguration(n){const{added:s,updated:t,removed:o,overrides:a}=b(this.remoteUserConfiguration,n),y=[...s,...t,...o];return y.length&&this.updateRemoteUserConfiguration(n),{keys:y,overrides:a}}compareAndUpdateWorkspaceConfiguration(n){const{added:s,updated:t,removed:o,overrides:a}=b(this.workspaceConfiguration,n),y=[...s,...t,...o];return y.length&&this.updateWorkspaceConfiguration(n),{keys:y,overrides:a}}compareAndUpdateFolderConfiguration(n,s){const t=this.folderConfigurations.get(n),{added:o,updated:a,removed:y,overrides:$}=b(t,s),d=[...o,...a,...y];return(d.length||!t)&&this.updateFolderConfiguration(n,s),{keys:d,overrides:$}}compareAndDeleteFolderConfiguration(n){const s=this.folderConfigurations.get(n);if(!s)throw new Error("Unknown folder");this.deleteFolderConfiguration(n);const{added:t,updated:o,removed:a,overrides:y}=b(s,void 0);return{keys:[...t,...o,...a],overrides:y}}get defaults(){return this.c}get applicationConfiguration(){return this.f}get userConfiguration(){return this.n||(this.n=this.h.isEmpty()?this.g:this.g.merge(this.h)),this.n}get localUserConfiguration(){return this.g}get remoteUserConfiguration(){return this.h}get workspaceConfiguration(){return this.i}get folderConfigurations(){return this.j}p(n,s,t){let o=this.q(s,t);return s.overrideIdentifier&&(o=o.override(s.overrideIdentifier)),!this.d.isEmpty()&&this.d.getValue(n)!==void 0&&(o=o.merge(this.d)),o}q({resource:n},s){let t=this.r();if(s&&n){const o=s.getFolder(n);o&&(t=this.s(o.uri)||t);const a=this.m.get(n);a&&(t=t.merge(a))}return t}r(){return this.a||(this.a=this.c.merge(this.applicationConfiguration,this.userConfiguration,this.i,this.l)),this.a}s(n){let s=this.b.get(n);if(!s){const t=this.r(),o=this.j.get(n);o?(s=t.merge(o),this.b.set(n,s)):s=t}return s}t(n,s){if(s&&n){const t=s.getFolder(n);if(t)return this.j.get(t.uri)}}toData(){return{defaults:{contents:this.c.contents,overrides:this.c.overrides,keys:this.c.keys},policy:{contents:this.d.contents,overrides:this.d.overrides,keys:this.d.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this.i.contents,overrides:this.i.overrides,keys:this.i.keys},folders:[...this.j.keys()].reduce((n,s)=>{const{contents:t,overrides:o,keys:a}=this.j.get(s);return n.push([s,{contents:t,overrides:o,keys:a}]),n},[])}}allKeys(){const n=new Set;return this.c.keys.forEach(s=>n.add(s)),this.userConfiguration.keys.forEach(s=>n.add(s)),this.i.keys.forEach(s=>n.add(s)),this.j.forEach(s=>s.keys.forEach(t=>n.add(t))),[...n.values()]}u(){const n=new Set;return this.c.getAllOverrideIdentifiers().forEach(s=>n.add(s)),this.userConfiguration.getAllOverrideIdentifiers().forEach(s=>n.add(s)),this.i.getAllOverrideIdentifiers().forEach(s=>n.add(s)),this.j.forEach(s=>s.getAllOverrideIdentifiers().forEach(t=>n.add(t))),[...n.values()]}v(n){const s=new Set;return this.c.getKeysForOverrideIdentifier(n).forEach(t=>s.add(t)),this.userConfiguration.getKeysForOverrideIdentifier(n).forEach(t=>s.add(t)),this.i.getKeysForOverrideIdentifier(n).forEach(t=>s.add(t)),this.j.forEach(t=>t.getKeysForOverrideIdentifier(n).forEach(o=>s.add(o))),[...s.values()]}static parse(n){const s=this.w(n.defaults),t=this.w(n.policy),o=this.w(n.application),a=this.w(n.user),y=this.w(n.workspace),$=n.folders.reduce((d,v)=>(d.set(m.URI.revive(v[0]),this.w(v[1])),d),new I.$Ac);return new f(s,t,o,a,new g,y,$,new g,new I.$Ac)}static w(n){return new g(n.contents,n.keys,n.overrides)}}e.$co=f;function u(...r){if(r.length===0)return{keys:[],overrides:[]};if(r.length===1)return r[0];const n=new Set,s=new Map;for(const o of r)o.keys.forEach(a=>n.add(a)),o.overrides.forEach(([a,y])=>{const $=(0,I.$xc)(s,a,new Set);y.forEach(d=>$.add(d))});const t=[];return s.forEach((o,a)=>t.push([a,[...o.values()]])),{keys:[...n.values()],overrides:t}}e.$do=u;class c{constructor(n,s,t,o){this.change=n,this.f=s,this.g=t,this.h=o,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=".".charCodeAt(0),this.affectedKeys=new Set,this.i=void 0;for(const a of n.keys)this.affectedKeys.add(a);for(const[,a]of n.overrides)for(const y of a)this.affectedKeys.add(y);this.d=this.a;for(const a of this.affectedKeys)this.d+=a+this.a}get previousConfiguration(){return!this.i&&this.f&&(this.i=f.parse(this.f.data)),this.i}affectsConfiguration(n,s){const t=this.a+n,o=this.d.indexOf(t);if(o<0)return!1;const a=o+t.length;if(a>=this.d.length)return!1;const y=this.d.charCodeAt(a);if(y!==this.b&&y!==this.c)return!1;if(s){const $=this.previousConfiguration?this.previousConfiguration.getValue(n,s,this.f?.workspace):void 0,d=this.g.getValue(n,s,this.h);return!P.$In($,d)}return!0}}e.$eo=c;function b(r,n){const{added:s,removed:t,updated:o}=i(n?.rawConfiguration,r?.rawConfiguration),a=[],y=r?.getAllOverrideIdentifiers()||[],$=n?.getAllOverrideIdentifiers()||[];if(n){const d=$.filter(v=>!y.includes(v));for(const v of d)a.push([v,n.getKeysForOverrideIdentifier(v)])}if(r){const d=y.filter(v=>!$.includes(v));for(const v of d)a.push([v,r.getKeysForOverrideIdentifier(v)])}if(n&&r){for(const d of y)if($.includes(d)){const v=i({contents:r.getOverrideValue(void 0,d)||{},keys:r.getKeysForOverrideIdentifier(d)},{contents:n.getOverrideValue(void 0,d)||{},keys:n.getKeysForOverrideIdentifier(d)});a.push([d,[...v.added,...v.removed,...v.updated]])}}return{added:s,removed:t,updated:o,overrides:a}}function i(r,n){const s=r?n?r.keys.filter(a=>n.keys.indexOf(a)===-1):[...r.keys]:[],t=n?r?n.keys.filter(a=>r.keys.indexOf(a)===-1):[...n.keys]:[],o=[];if(r&&n){for(const a of n.keys)if(r.keys.indexOf(a)!==-1){const y=(0,C.$Ji)(n.contents,a),$=(0,C.$Ji)(r.contents,a);P.$In(y,$)||o.push(a)}}return{added:s,removed:t,updated:o}}}),define(ue[209],de([0,1,17,3,2,30,12,77,44,8,59,41]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ho=e.$go=e.$fo=void 0;class E extends L.$Tc{constructor(){super(...arguments),this.a=this.D(new N.$Wd),this.onDidChangeConfiguration=this.a.event,this.b=new P.$_n}get configurationModel(){return this.b}async initialize(){return this.g(),this.D(k.$Qn.as(R.$Vn.Configuration).onDidUpdateConfiguration(({properties:w,defaultsOverrides:h})=>this.c(Array.from(w),h))),this.configurationModel}reload(){return this.g(),this.configurationModel}c(w,h){this.h(w,k.$Qn.as(R.$Vn.Configuration).getConfigurationProperties()),this.a.fire({defaults:this.configurationModel,properties:w})}f(){return{}}g(){this.b=new P.$_n;const w=k.$Qn.as(R.$Vn.Configuration).getConfigurationProperties();this.h(Object.keys(w),w)}h(w,h){const f=this.f();for(const u of w){const c=f[u],b=h[u];c!==void 0?this.b.addValue(u,c):b?this.b.addValue(u,b.default):this.b.removeValue(u)}}}e.$fo=E;class l{constructor(){this.onDidChangeConfiguration=N.Event.None,this.configurationModel=new P.$_n}async initialize(){return this.configurationModel}}e.$go=l;let g=class extends L.$Tc{get configurationModel(){return this.b}constructor(w,h,f){super(),this.c=w,this.f=h,this.g=f,this.a=this.D(new N.$Wd),this.onDidChangeConfiguration=this.a.event,this.b=new P.$_n}async initialize(){return this.g.trace("PolicyConfiguration#initialize"),this.m(await this.h(this.c.configurationModel.keys),!1),this.D(this.f.onDidChange(w=>this.j(w))),this.D(this.c.onDidChangeConfiguration(async({properties:w})=>this.m(await this.h(w),!0))),this.b}async h(w){this.g.trace("PolicyConfiguration#updatePolicyDefinitions",w);const h={},f=[],u=k.$Qn.as(R.$Vn.Configuration).getConfigurationProperties();for(const c of w){const b=u[c];if(!b){f.push(c);continue}if(b.policy){if(b.type!=="string"&&b.type!=="number"){this.g.warn(`Policy ${b.policy.name} has unsupported type ${b.type}`);continue}f.push(c),h[b.policy.name]={type:b.type}}}return(0,I.$Xf)(h)||await this.f.updatePolicyDefinitions(h),f}j(w){this.g.trace("PolicyConfiguration#onDidChangePolicies",w);const h=k.$Qn.as(R.$Vn.Configuration).getPolicyConfigurations(),f=(0,D.$Hb)(w.map(u=>h.get(u)));this.m(f,!0)}m(w,h){this.g.trace("PolicyConfiguration#update",w);const f=k.$Qn.as(R.$Vn.Configuration).getConfigurationProperties(),u=[],c=this.b.isEmpty();for(const b of w){const i=f[b]?.policy?.name;if(i){const r=this.f.getPolicyValue(i);(c?r!==void 0:!(0,j.$In)(this.b.getValue(b),r))&&u.push([b,r])}else this.b.getValue(b)!==void 0&&u.push([b,void 0])}if(u.length){this.g.trace("PolicyConfiguration#changed",u);const b=this.b;this.b=new P.$_n;for(const i of b.keys)this.b.setValue(i,b.getValue(i));for(const[i,r]of u)r===void 0?this.b.removeValue(i):this.b.setValue(i,r);h&&this.a.fire(this.b)}}};e.$ho=g,e.$ho=g=Se([Z(1,C.$Sn),Z(2,m.$qj)],g)}),define(ue[210],de([0,1,17,6,14,3,34,64,2,30,5,20,21,77,44,209,59]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$io=void 0;class h extends R.$Tc{constructor(c,b,i,r){super(),this.m=c,this.h=this.D(new j.$Wd),this.onDidChangeConfiguration=this.h.event,this.b=this.D(new p.$fo),this.c=i instanceof w.$Un?new p.$go:this.D(new p.$ho(this.b,i,r)),this.f=this.D(new l.$bo(this.m,{},k.$Ag,b)),this.a=new l.$co(this.b.configurationModel,this.c.configurationModel,new l.$_n,new l.$_n),this.j=new f(c,b,this),this.g=this.D(new N.$hh(()=>this.reloadConfiguration(),50)),this.D(this.b.onDidChangeConfiguration(({defaults:n,properties:s})=>this.q(n,s))),this.D(this.c.onDidChangeConfiguration(n=>this.r(n))),this.D(this.f.onDidChange(()=>this.g.schedule()))}async initialize(){const[c,b,i]=await Promise.all([this.b.initialize(),this.c.initialize(),this.f.loadConfiguration()]);this.a=new l.$co(c,b,new l.$_n,i)}getConfigurationData(){return this.a.toData()}getValue(c,b){const i=typeof c=="string"?c:void 0,r=(0,E.$Ci)(c)?c:(0,E.$Ci)(b)?b:{};return this.a.getValue(i,r,void 0)}async updateValue(c,b,i,r,n){const s=(0,E.$Di)(i)?i:(0,E.$Ci)(i)?{resource:i.resource,overrideIdentifiers:i.overrideIdentifier?[i.overrideIdentifier]:void 0}:void 0,t=s?r:i;if(t!==void 0&&t!==3&&t!==2)throw new Error(`Unable to write ${c} to target ${t}.`);s?.overrideIdentifiers&&(s.overrideIdentifiers=(0,D.$Mb)(s.overrideIdentifiers),s.overrideIdentifiers=s.overrideIdentifiers.length?s.overrideIdentifiers:void 0);const o=this.inspect(c,{resource:s?.resource,overrideIdentifier:s?.overrideIdentifiers?s.overrideIdentifiers[0]:void 0});if(o.policyValue!==void 0)throw new Error(`Unable to write ${c} because it is configured in system policy.`);if((0,m.$In)(b,o.defaultValue)&&(b=void 0),s?.overrideIdentifiers?.length&&s.overrideIdentifiers.length>1){const y=s.overrideIdentifiers.sort(),$=this.a.localUserConfiguration.overrides.find(d=>(0,D.$ub)([...d.identifiers].sort(),y));$&&(s.overrideIdentifiers=$.identifiers)}const a=s?.overrideIdentifiers?.length?[(0,g.$8n)(s.overrideIdentifiers),c]:[c];await this.j.write(a,b),await this.reloadConfiguration()}inspect(c,b={}){return this.a.inspect(c,b,void 0)}keys(){return this.a.keys(void 0)}async reloadConfiguration(){const c=await this.f.loadConfiguration();this.n(c)}n(c){const b=this.a.toData(),i=this.a.compareAndUpdateLocalUserConfiguration(c);this.s(i,b,2)}q(c,b){const i=this.a.toData(),r=this.a.compareAndUpdateDefaultConfiguration(c,b);this.s(r,i,7)}r(c){const b=this.a.toData(),i=this.a.compareAndUpdatePolicyConfiguration(c);this.s(i,b,7)}s(c,b,i){const r=new l.$eo(c,{data:b},this.a);r.source=i,this.h.fire(r)}}e.$io=h;class f{constructor(c,b,i){this.b=c,this.c=b,this.d=i,this.a=new N.$ch}write(c,b){return this.a.queue(()=>this.e(c,b))}async e(c,b){let i;try{i=(await this.c.readFile(this.b)).value.toString()}catch(s){if(s.fileOperationResult===1)i="{}";else throw s}const r=[];if((0,I.$ln)(i,r,{allowTrailingComma:!0,allowEmptyContent:!0}),r.length>0)throw new Error("Unable to write into the settings file. Please open the file to correct errors/warnings in the file and try again.");const n=this.f(i,c,b);i=(0,P.$Dn)(i,n),await this.c.writeFile(this.b,L.$ke.fromString(i))}f(c,b,i){const{tabSize:r,insertSpaces:n,eol:s}=this.h;if(!b.length){const t=JSON.stringify(i,null,n?" ".repeat(r):"	");return[{content:t,length:t.length,offset:0}]}return(0,P.$An)(c,b,i,{tabSize:r,insertSpaces:n,eol:s})}get h(){if(!this.g){let c=C.OS===3||C.OS===2?`
`:`\r
`;const b=this.d.getValue("files.eol",{overrideIdentifier:"jsonc"});b&&typeof b=="string"&&b!=="auto"&&(c=b),this.g={eol:c,insertSpaces:!!this.d.getValue("editor.insertSpaces",{overrideIdentifier:"jsonc"}),tabSize:this.d.getValue("editor.tabSize",{overrideIdentifier:"jsonc"})}}return this.g}}}),define(ue[211],de([0,1,14,3,2,69]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Tac=e.$Sac=e.$Rac=e.$Qac=void 0;const I=(m,C,k)=>{const E=new Uint8Array(16);for(let p=0;p<16;p++)E[p]=Math.round(Math.random()*256);const l=(0,D.$Fe)(D.$ke.wrap(E));return[`GET ws://localhost${m}?${C}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${l}`].join(`\r
`)+`\r
\r
`};e.$Qac=I,e.$Rac=D.$ke.fromString(`\r
\r
`);async function P(m,C,k,E,l){m.write(D.$ke.fromString((0,e.$Qac)(C,k,E)));const g=new L.$Sc;try{return await new Promise((p,w)=>{let h;g.add(m.onData(f=>{h?h=D.$ke.concat([h,f],h.byteLength+f.byteLength):h=f;const u=h.indexOf(e.$Rac);if(u===-1)return;p(m),m.pauseData();const c=h.slice(u+e.$Rac.byteLength);c.byteLength&&l.onData.fire(c)})),g.add(m.onClose(f=>w(f??new Error("socket closed")))),g.add(m.onEnd(()=>w(new Error("socket ended"))))})}catch(p){throw m.dispose(),p}finally{g.dispose()}}e.$Sac=P;class R extends L.$Tc{constructor(C,k){super(),this.g=C,this.a=this.D(new N.$Zd),this.onData=(...E)=>(this.a.isPaused&&queueMicrotask(()=>this.a.resume()),this.a.event(...E)),this.b=this.D(new N.$Wd),this.onDidDispose=this.b.event,this.f=!1,this.D(k.onData),this.D(k.onData.event(E=>this.a.fire(E))),this.onClose=this.D(k.onClose).event,this.onEnd=this.D(k.onEnd).event}pauseData(){this.a.pause()}drain(){return Promise.resolve()}end(){this.f=!0,this.h()}traceSocketEvent(C,k){j.SocketDiagnostics.traceSocketEvent(this,this.g,C,k)}dispose(){this.f||this.h(),this.b.fire(),super.dispose()}}e.$Tac=R}),define(ue[212],de([0,1,7,4]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$fl=e.$el=e.RemoteAuthorityResolverErrorCode=e.$dl=e.$cl=e.RemoteConnectionType=e.$bl=void 0,e.$bl=(0,N.$8h)("remoteAuthorityResolverService");var L;(function(C){C[C.WebSocket=0]="WebSocket",C[C.Managed=1]="Managed"})(L||(e.RemoteConnectionType=L={}));class j{constructor(k){this.id=k,this.type=1}toString(){return`Managed(${this.id})`}}e.$cl=j;class I{constructor(k,E){this.host=k,this.port=E,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}}e.$dl=I;var P;(function(C){C.Unknown="Unknown",C.NotAvailable="NotAvailable",C.TemporarilyNotAvailable="TemporarilyNotAvailable",C.NoResolverFound="NoResolverFound",C.InvalidAuthority="InvalidAuthority"})(P||(e.RemoteAuthorityResolverErrorCode=P={}));class R extends D.$bb{static isNotAvailable(k){return k instanceof R&&k._code===P.NotAvailable}static isTemporarilyNotAvailable(k){return k instanceof R&&k._code===P.TemporarilyNotAvailable}static isNoResolverFound(k){return k instanceof R&&k._code===P.NoResolverFound}static isInvalidAuthority(k){return k instanceof R&&k._code===P.InvalidAuthority}static isHandled(k){return k instanceof R&&k.isHandled}constructor(k,E=P.Unknown,l){super(k),this._message=k,this._code=E,this._detail=l,this.isHandled=E===P.NotAvailable&&l===!0,Object.setPrototypeOf(this,R.prototype)}}e.$el=R;function m(C){const k=C.indexOf("+");return k===-1?C:C.substring(0,k)}e.$fl=m}),define(ue[78],de([0,1,25]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$kl=e.$jl=e.$il=e.$hl=e.$gl=void 0;function N(m){return m.scheme===D.Schemas.vscodeRemote?m.authority:void 0}e.$gl=N;function L(m){if(!m)return;const C=m.indexOf("+");return C<0?m:m.substr(0,C)}e.$hl=L;function j(m){return`/${m.quality??"oss"}-${m.commit??"dev"}`}e.$il=j;function I(m){const{host:C,port:k}=R(m);if(typeof k>"u")throw new Error(`Invalid remote authority: ${m}. It must either be a remote of form <remoteName>+<arg> or a remote host of form <host>:<port>.`);return{host:C,port:k}}e.$jl=I;function P(m,C){let{host:k,port:E}=R(m);return typeof E>"u"&&(E=C),{host:k,port:E}}e.$kl=P;function R(m){const C=m.match(/^(\[[0-9a-z:]+\]):(\d+)$/);if(C)return{host:C[1],port:parseInt(C[2],10)};const k=m.match(/^(\[[0-9a-z:]+\])$/);if(k)return{host:k[1],port:void 0};const E=m.match(/(.*):(\d+)$/);return E?{host:E[1],port:parseInt(E[2],10)}:{host:m,port:void 0}}}),define(ue[45],de([0,1,27,4,78]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Am=e.$zm=e.$ym=e.$xm=e.$wm=e.$vm=e.$um=e.$tm=e.TargetPlatform=e.ExtensionType=e.$sm=e.$rm=e.$qm=e.$pm=e.$om=e.$nm=void 0,e.$nm="extensions.user.cache",e.$om="extensions.builtin.cache",e.$pm="undefined_publisher",e.$qm=["ui","workspace","web"];function j(p){if(typeof p=="object"&&p!==null&&p.supported!==!0)return p.description}e.$rm=j,e.$sm=["Azure","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var I;(function(p){p[p.System=0]="System",p[p.User=1]="User"})(I||(e.ExtensionType=I={}));var P;(function(p){p.WIN32_X64="win32-x64",p.WIN32_ARM64="win32-arm64",p.LINUX_X64="linux-x64",p.LINUX_ARM64="linux-arm64",p.LINUX_ARMHF="linux-armhf",p.ALPINE_X64="alpine-x64",p.ALPINE_ARM64="alpine-arm64",p.DARWIN_X64="darwin-x64",p.DARWIN_ARM64="darwin-arm64",p.WEB="web",p.UNIVERSAL="universal",p.UNKNOWN="unknown",p.UNDEFINED="undefined"})(P||(e.TargetPlatform=P={}));class R{constructor(w){this.value=w,this._lower=w.toLowerCase()}static equals(w,h){if(typeof w>"u"||w===null)return typeof h>"u"||h===null;if(typeof h>"u"||h===null)return!1;if(typeof w=="string"||typeof h=="string"){const f=typeof w=="string"?w:w.value,u=typeof h=="string"?h:h.value;return D.$bf(f,u)}return w._lower===h._lower}static toKey(w){return typeof w=="string"?w.toLowerCase():w._lower}}e.$tm=R;class m{get size(){return this.c.size}constructor(w){if(this.c=new Set,w)for(const h of w)this.add(h)}add(w){this.c.add(R.toKey(w))}delete(w){return this.c.delete(R.toKey(w))}has(w){return this.c.has(R.toKey(w))}}e.$um=m;class C{constructor(){this.c=new Map}clear(){this.c.clear()}delete(w){this.c.delete(R.toKey(w))}get(w){return this.c.get(R.toKey(w))}has(w){return this.c.has(R.toKey(w))}set(w,h){this.c.set(R.toKey(w),h)}values(){return this.c.values()}forEach(w){this.c.forEach(w)}[Symbol.iterator](){return this.c[Symbol.iterator]()}}e.$vm=C;function k(p){return E(p)}e.$wm=k;function E(p){return p.contributes&&p.contributes.localizations?p.contributes.localizations.length>0:!1}e.$xm=E;function l(p){return p.contributes&&p.contributes.authentication?p.contributes.authentication.length>0:!1}e.$ym=l;function g(p,w){if(w){const h=`onResolveRemoteAuthority:${(0,L.$hl)(w)}`;return!!p.activationEvents?.includes(h)}return!1}e.$zm=g,e.$Am=(0,N.$8h)("IBuiltinExtensionsScannerService")}),define(ue[213],de([0,1,2,45,11]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$pq=void 0;class j extends D.$Tc{constructor(P,R,m,C,k){super(),this.a=P,this.b=R,this.c=m,this.f=k,this.D(C.onDidInstallExtensions(E=>this.g(E))),this.D(C.onDidUninstallExtension(E=>this.h(E)))}g(P){for(const R of P)R.local&&this.invalidate(R.profileLocation)}h(P){P.error||this.invalidate(P.profileLocation)}async invalidate(P){if(P)for(const R of this.a.profiles)this.c.extUri.isEqual(R.extensionsResource,P)&&await this.j(R);else await this.j(this.a.defaultProfile)}async j(P){try{await this.b.del(this.c.extUri.joinPath(P.cacheHome,N.$nm))}catch(R){(0,L.$Nk)(R)!==1&&this.f.error(R)}}}e.$pq=j}),define(ue[214],de([0,1,6,14,26,7,3,2,101,65,31,69,212,78]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$zl=e.$yl=e.$xl=e.$wl=e.$vl=e.$ul=e.$tl=e.$sl=e.PersistentConnectionEventType=e.$rl=e.$ql=e.$pl=e.ConnectionType=void 0;const g=30*1e3;var p;(function(z){z[z.Management=1]="Management",z[z.ExtensionHost=2]="ExtensionHost",z[z.Tunnel=3]="Tunnel"})(p||(e.ConnectionType=p={}));function w(z){switch(z){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function h(z){const U=new L.$7d;return setTimeout(()=>U.cancel(),z),U.token}function f(z,U){if(z.isCancellationRequested||U.isCancellationRequested)return L.CancellationToken.Cancelled;const O=new L.$7d;return z.onCancellationRequested(()=>O.cancel()),U.onCancellationRequested(()=>O.cancel()),O.token}class u{get didTimeout(){return this.c==="timedout"}constructor(U){this.c="pending",this.d=new P.$Sc,this.promise=new Promise((O,W)=>{this.f=O,this.g=W}),U.isCancellationRequested?this.h():this.d.add(U.onCancellationRequested(()=>this.h()))}registerDisposable(U){this.c==="pending"?this.d.add(U):U.dispose()}h(){this.c==="pending"&&(this.d.dispose(),this.c="timedout",this.g(this.i()))}i(){const U=new Error("Time limit reached");return U.code="ETIMEDOUT",U.syscall="connect",U}resolve(U){this.c==="pending"&&(this.d.dispose(),this.c="resolved",this.f(U))}reject(U){this.c==="pending"&&(this.d.dispose(),this.c="rejected",this.g(U))}}function c(z,U){const O=new u(U);return O.registerDisposable(z.onControlMessage(W=>{const B=JSON.parse(W.toString()),_=J(B);_?O.reject(_):O.resolve(B)})),O.promise}function b(z,U,O,W,B,_,ee,X){const ie=new u(X),ce=m.$Sd.create(!1);return z.info(`Creating a socket (${ee})...`),R.mark(`code/willCreateSocket/${_}`),U.connect(O,W,B,ee).then(fe=>{ie.didTimeout?(R.mark(`code/didCreateSocketError/${_}`),z.info(`Creating a socket (${ee}) finished after ${ce.elapsed()} ms, but this is too late and has timed out already.`),fe?.dispose()):(R.mark(`code/didCreateSocketOK/${_}`),z.info(`Creating a socket (${ee}) was successful after ${ce.elapsed()} ms.`),ie.resolve(fe))},fe=>{R.mark(`code/didCreateSocketError/${_}`),z.info(`Creating a socket (${ee}) returned an error after ${ce.elapsed()} ms.`),z.error(fe),ie.reject(fe)}),ie.promise}function i(z,U){const O=new u(U);return z.then(W=>{O.didTimeout||O.resolve(W)},W=>{O.didTimeout||O.reject(W)}),O.promise}async function r(z,U,O,W){const B=ne(z,U);z.logService.trace(`${B} 1/6. invoking socketFactory.connect().`);let _;try{_=await b(z.logService,z.remoteSocketFactoryService,z.connectTo,(0,l.$il)(z),`reconnectionToken=${z.reconnectionToken}&reconnection=${z.reconnectionProtocol?"true":"false"}`,w(U),`renderer-${w(U)}-${z.reconnectionToken}`,W)}catch(fe){throw z.logService.error(`${B} socketFactory.connect() failed or timed out. Error:`),z.logService.error(fe),fe}z.logService.trace(`${B} 2/6. socketFactory.connect() was successful.`);let ee,X;z.reconnectionProtocol?(z.reconnectionProtocol.beginAcceptReconnection(_,null),ee=z.reconnectionProtocol,X=!1):(ee=new k.$Vh({socket:_}),X=!0),z.logService.trace(`${B} 3/6. sending AuthRequest control message.`);const ie=await i(z.signService.createNewMessage((0,C.$sg)()),W),ce={type:"auth",auth:z.connectionToken||"00000000000000000000",data:ie.data};ee.sendControl(N.$ke.fromString(JSON.stringify(ce)));try{const fe=await c(ee,f(W,h(1e4)));if(fe.type!=="sign"||typeof fe.data!="string"){const me=new Error("Unexpected handshake message");throw me.code="VSCODE_CONNECTION_ERROR",me}if(z.logService.trace(`${B} 4/6. received SignRequest control message.`),!await i(z.signService.validate(ie,fe.signedData),W)){const me=new Error("Refused to connect to unsupported server");throw me.code="VSCODE_CONNECTION_ERROR",me}const le=await i(z.signService.sign(fe.data),W),re={type:"connectionType",commit:z.commit,signedData:le,desiredConnectionType:U};return O&&(re.args=O),z.logService.trace(`${B} 5/6. sending ConnectionTypeRequest control message.`),ee.sendControl(N.$ke.fromString(JSON.stringify(re))),{protocol:ee,ownsProtocol:X}}catch(fe){throw fe&&fe.code==="ETIMEDOUT"&&(z.logService.error(`${B} the handshake timed out. Error:`),z.logService.error(fe)),fe&&fe.code==="VSCODE_CONNECTION_ERROR"&&(z.logService.error(`${B} received error control message when negotiating connection. Error:`),z.logService.error(fe)),X&&H(ee),fe}}async function n(z,U,O,W){const B=Date.now(),_=ne(z,U),{protocol:ee,ownsProtocol:X}=await r(z,U,O,W),ie=new u(W);return ie.registerDisposable(ee.onControlMessage(ce=>{const fe=JSON.parse(ce.toString()),be=J(fe);be?(z.logService.error(`${_} received error control message when negotiating connection. Error:`),z.logService.error(be),X&&H(ee),ie.reject(be)):(z.reconnectionProtocol?.endAcceptReconnection(),z.logService.trace(`${_} 6/6. handshake finished, connection is up and running after ${K(B)}!`),ie.resolve({protocol:ee,firstMessage:fe}))})),ie.promise}async function s(z,U){const{protocol:O}=await n(z,1,void 0,U);return{protocol:O}}async function t(z,U,O){const{protocol:W,firstMessage:B}=await n(z,2,U,O),_=B&&B.debugPort;return{protocol:W,debugPort:_}}async function o(z,U,O){const W=Date.now(),B=ne(z,3),{protocol:_}=await r(z,3,U,O);return z.logService.trace(`${B} 6/6. handshake finished, connection is up and running after ${K(W)}!`),_}async function a(z,U,O){const{connectTo:W,connectionToken:B}=await z.addressProvider.getAddress();return{commit:z.commit,quality:z.quality,connectTo:W,connectionToken:B,reconnectionToken:U,reconnectionProtocol:O,remoteSocketFactoryService:z.remoteSocketFactoryService,signService:z.signService,logService:z.logService}}async function y(z,U,O){return d(z,async W=>{const{protocol:B}=await s(W,L.CancellationToken.None);return new F(z,U,O,W.reconnectionToken,B)})}e.$pl=y;async function $(z,U){return d(z,async O=>{const{protocol:W,debugPort:B}=await t(O,U,L.CancellationToken.None);return new te(z,U,O.reconnectionToken,W,B)})}e.$ql=$;async function d(z,U){for(let W=1;;W++)try{const B=(0,C.$sg)(),_=await a(z,B,null);return await U(_)}catch(B){if(W<5)z.logService.error(`[remote-connection][attempt ${W}] An error occurred in initial connection! Will retry... Error:`),z.logService.error(B);else throw z.logService.error(`[remote-connection][attempt ${W}]  An error occurred in initial connection! It will be treated as a permanent error. Error:`),z.logService.error(B),Q.triggerPermanentFailure(0,0,E.$el.isHandled(B)),B}}async function v(z,U,O){const W=await a(z,(0,C.$sg)(),null);return await o(W,{host:U,port:O},L.CancellationToken.None)}e.$rl=v;function S(z){return(0,D.$Vg)(U=>new Promise((O,W)=>{const B=setTimeout(O,z*1e3);U.onCancellationRequested(()=>{clearTimeout(B),O()})}))}var A;(function(z){z[z.ConnectionLost=0]="ConnectionLost",z[z.ReconnectionWait=1]="ReconnectionWait",z[z.ReconnectionRunning=2]="ReconnectionRunning",z[z.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",z[z.ConnectionGain=4]="ConnectionGain"})(A||(e.PersistentConnectionEventType=A={}));class T{constructor(U,O){this.reconnectionToken=U,this.millisSinceLastIncomingData=O,this.type=0}}e.$sl=T;class q{constructor(U,O,W,B){this.reconnectionToken=U,this.millisSinceLastIncomingData=O,this.durationSeconds=W,this.c=B,this.type=1}skipWait(){this.c.cancel()}}e.$tl=q;class M{constructor(U,O,W){this.reconnectionToken=U,this.millisSinceLastIncomingData=O,this.attempt=W,this.type=2}}e.$ul=M;class Y{constructor(U,O,W){this.reconnectionToken=U,this.millisSinceLastIncomingData=O,this.attempt=W,this.type=4}}e.$vl=Y;class G{constructor(U,O,W,B){this.reconnectionToken=U,this.millisSinceLastIncomingData=O,this.attempt=W,this.handled=B,this.type=3}}e.$wl=G;class Q extends P.$Tc{static triggerPermanentFailure(U,O,W){this._permanentFailure=!0,this.f=U,this.g=O,this.h=W,this.j.forEach(B=>B.C(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(U=>U.w())}static debugPauseSocketWriting(){this.j.forEach(U=>U.F())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||Q._permanentFailure}constructor(U,O,W,B,_){super(),this.s=U,this.t=O,this.reconnectionToken=W,this.protocol=B,this.u=_,this.m=this.D(new I.$Wd),this.onDidStateChange=this.m.event,this.c=!1,this.q=!1,this.r=!1,this.m.fire(new Y(this.reconnectionToken,0,0)),this.D(B.onSocketClose(ee=>{const X=V(this.s,this.reconnectionToken,!0);ee?ee.type===0?(this.t.logService.info(`${X} received socket close event (hadError: ${ee.hadError}).`),ee.error&&this.t.logService.error(ee.error)):(this.t.logService.info(`${X} received socket close event (wasClean: ${ee.wasClean}, code: ${ee.code}, reason: ${ee.reason}).`),ee.event&&this.t.logService.error(ee.event)):this.t.logService.info(`${X} received socket close event.`),this.w()})),this.D(B.onSocketTimeout(ee=>{const X=V(this.s,this.reconnectionToken,!0);this.t.logService.info(`${X} received socket timeout event (unacknowledgedMsgCount: ${ee.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${ee.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${ee.timeSinceLastReceivedSomeData}).`),this.w()})),Q.j.push(this),this.D((0,P.$Rc)(()=>{const ee=Q.j.indexOf(this);ee>=0&&Q.j.splice(ee,1)})),this.n&&this.C(Q.f,Q.g,Q.h)}dispose(){super.dispose(),this.r=!0}async w(){if(!this.q)try{this.q=!0,await this.y()}finally{this.q=!1}}async y(){if(this.n||this.r)return;const U=V(this.s,this.reconnectionToken,!0);this.t.logService.info(`${U} starting reconnecting loop. You can get more information with the trace log level.`),this.m.fire(new T(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const O=[0,5,5,10,10,10,10,10,30];let W=-1;do{W++;const B=W<O.length?O[W]:O[O.length-1];try{if(B>0){const ee=S(B);this.m.fire(new q(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),B,ee)),this.t.logService.info(`${U} waiting for ${B} seconds before reconnecting...`);try{await ee}catch{}}if(this.n){this.t.logService.error(`${U} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new M(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),W+1)),this.t.logService.info(`${U} resolving connection...`);const _=await a(this.t,this.reconnectionToken,this.protocol);this.t.logService.info(`${U} connecting to ${_.connectTo}...`),await this.G(_,h(g)),this.t.logService.info(`${U} reconnected!`),this.m.fire(new Y(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),W+1));break}catch(_){if(_.code==="VSCODE_CONNECTION_ERROR"){this.t.logService.error(`${U} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.t.logService.error(_),this.z(this.protocol.getMillisSinceLastIncomingData(),W+1,!1);break}if(W>360){this.t.logService.error(`${U} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.t.logService.error(_),this.z(this.protocol.getMillisSinceLastIncomingData(),W+1,!1);break}if(E.$el.isTemporarilyNotAvailable(_)){this.t.logService.info(`${U} A temporarily not available error occurred while trying to reconnect, will try again...`),this.t.logService.trace(_);continue}if((_.code==="ETIMEDOUT"||_.code==="ENETUNREACH"||_.code==="ECONNREFUSED"||_.code==="ECONNRESET")&&_.syscall==="connect"){this.t.logService.info(`${U} A network error occurred while trying to reconnect, will try again...`),this.t.logService.trace(_);continue}if((0,j.$4)(_)){this.t.logService.info(`${U} A promise cancelation error occurred while trying to reconnect, will try again...`),this.t.logService.trace(_);continue}if(_ instanceof E.$el){this.t.logService.error(`${U} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.t.logService.error(_),this.z(this.protocol.getMillisSinceLastIncomingData(),W+1,E.$el.isHandled(_));break}this.t.logService.error(`${U} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.t.logService.error(_),this.z(this.protocol.getMillisSinceLastIncomingData(),W+1,!1);break}}while(!this.n&&!this.r)}z(U,O,W){this.u?Q.triggerPermanentFailure(U,O,W):this.C(U,O,W)}C(U,O,W){this.m.fire(new G(this.reconnectionToken,U,O,W)),H(this.protocol)}F(){this.protocol.pauseSocketWriting()}}e.$xl=Q;class F extends Q{constructor(U,O,W,B,_){super(1,U,B,_,!0),this.client=this.D(new k.$Th(_,{remoteAuthority:O,clientId:W},U.ipcLogger))}async G(U,O){await s(U,O)}}e.$yl=F;class te extends Q{constructor(U,O,W,B,_){super(2,U,W,B,!1),this.H=O,this.debugPort=_}async G(U,O){await t(U,this.H,O)}}e.$zl=te;function H(z){try{z.acceptDisconnect();const U=z.getSocket();z.dispose(),U.dispose()}catch(U){(0,j.$1)(U)}}function J(z){if(z&&z.type==="error"){const U=new Error(`Connection error: ${z.reason}`);return U.code="VSCODE_CONNECTION_ERROR",U}return null}function x(z,U){for(;z.length<U;)z+=" ";return z}function se(z,U){return`[remote-connection][${x(w(z),13)}][${U.substr(0,5)}\u2026]`}function V(z,U,O){return`${se(z,U)}[${O?"reconnect":"initial"}]`}function ne(z,U){return`${V(U,z.reconnectionToken,!!z.reconnectionProtocol)}[${z.connectTo}]`}function K(z){return`${Date.now()-z} ms`}}),define(ue[104],de([0,1,2,4]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ml=e.$ll=void 0,e.$ll=(0,N.$8h)("remoteSocketFactoryService");class L{constructor(){this.a={}}register(I,P){return this.a[I]??=[],this.a[I].push(P),(0,D.$Rc)(()=>{const R=this.a[I]?.indexOf(P);typeof R=="number"&&R>=0&&this.a[I]?.splice(R,1)})}b(I){return(this.a[I.type]||[]).find(R=>R.supports(I))}connect(I,P,R,m){const C=this.b(I);if(!C)throw new Error(`No socket factory found for ${I}`);return C.connect(I,P,R,m)}}e.$ml=L}),define(ue[215],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$tRc=e.$sRc=void 0,e.$sRc=(0,D.$8h)("sharedProcessTunnelService"),e.$tRc="sharedProcessTunnel"}),define(ue[105],de([0,1,4,163]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$DRc=e.$CRc=e.$BRc=e.$ARc=e.$zRc=e.TunnelStates=e.$yRc=e.$xRc=void 0,e.$xRc=(0,D.$8h)("IRemoteTunnelService"),e.$yRc={active:!1};var L;(function(j){j.disconnected=I=>({type:"disconnected",onTokenFailed:I}),j.connected=(I,P)=>({type:"connected",info:I,serviceInstallFailed:P}),j.connecting=I=>({type:"connecting",progress:I}),j.uninitialized={type:"uninitialized"}})(L||(e.TunnelStates=L={})),e.$zRc="remote.tunnels.access",e.$ARc=e.$zRc+".hostNameOverride",e.$BRc=e.$zRc+".preventSleep",e.$CRc="remoteTunnelService",e.$DRc=(0,N.localize)(0,null)}),define(ue[61],de([0,1,14,7,2,165,44,4,8,41]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Np=e.$Mp=e.$Lp=e.$Kp=e.$Jp=e.$Ip=e.$Hp=e.$Gp=void 0,e.$Gp=(0,P.$8h)("requestService");class C{constructor(b){this.b=b}toJSON(){if(!this.a){const b=Object.create(null);for(const i in this.b)i.toLowerCase()==="authorization"||i.toLowerCase()==="proxy-authorization"?b[i]="*****":b[i]=this.b[i];this.a=b}return this.a}}class k extends L.$Tc{constructor(b){super(),this.b=0,this.a=b.createLogger("network",{name:(0,j.localize)(0,null),when:R.$Hj.isEqualTo((0,R.$Fj)(R.LogLevel.Trace)).serialize()})}async c(b,i,r){const n=`${b} #${++this.b}: ${i.url}`;this.a.trace(`${n} - begin`,i.type,new C(i.headers??{}));try{const s=await r();return this.a.trace(`${n} - end`,i.type,s.res.statusCode,s.res.headers),s}catch(s){throw this.a.error(`${n} - error`,i.type,(0,N.$0)(s)),s}}}e.$Hp=k;function E(c){return c.res.statusCode&&c.res.statusCode>=200&&c.res.statusCode<300||c.res.statusCode===1223}e.$Ip=E;function l(c){return c.res.statusCode===204}e.$Jp=l;async function g(c){return l(c)?null:(await(0,D.$we)(c.stream)).toString()}e.$Kp=g;async function p(c){if(!E(c))throw new Error("Server returned "+c.res.statusCode);return g(c)}e.$Lp=p;async function w(c){if(!E(c))throw new Error("Server returned "+c.res.statusCode);if(l(c))return null;const i=(await(0,D.$we)(c.stream)).toString();try{return JSON.parse(i)}catch(r){throw r.message+=`:
`+i,r}}e.$Mp=w;function h(c){u(c)}e.$Np=h;let f;function u(c){const b=m.$Qn.as(I.$Vn.Configuration),i=f;f={id:"http",order:15,title:(0,j.localize)(1,null),type:"object",scope:c,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:(0,j.localize)(2,null),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:(0,j.localize)(3,null),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:(0,j.localize)(4,null),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:(0,j.localize)(5,null),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[(0,j.localize)(6,null),(0,j.localize)(7,null),(0,j.localize)(8,null),(0,j.localize)(9,null)],default:"override",description:(0,j.localize)(10,null),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:(0,j.localize)(11,null),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:(0,j.localize)(12,null),restricted:!0}}},b.updateConfigurations({add:[f],remove:i?[i]:[]})}u(1)}),define(ue[216],de([0,1,26,25,11,61]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$T4=void 0;let I=class{constructor(R,m){this.a=R,this.b=m}async download(R,m,C=D.CancellationToken.None){if(R.scheme===N.Schemas.file||R.scheme===N.Schemas.vscodeRemote){await this.b.copy(R,m);return}const k={type:"GET",url:R.toString(!0)},E=await this.a.request(k,C);if(E.res.statusCode===200)await this.b.writeFile(m,E.stream);else{const l=await(0,j.$Lp)(E);throw new Error(`Expected 200, got back ${E.res.statusCode} instead.

${l}`)}}};e.$T4=I,e.$T4=I=Se([Z(0,j.$Gp),Z(1,L.$wk)],I)}),define(ue[217],de([0,1,14,26]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Hr=e.$Gr=void 0;class L{constructor(P){this.a=P}listen(P,R){throw new Error("Invalid listen")}call(P,R,m,C=N.CancellationToken.None){switch(R){case"request":return this.a.request(m[0],C).then(async({res:k,stream:E})=>{const l=await(0,D.$we)(E);return[{statusCode:k.statusCode,headers:k.headers},l]});case"resolveProxy":return this.a.resolveProxy(m[0]);case"loadCertificates":return this.a.loadCertificates()}throw new Error("Invalid call")}}e.$Gr=L;class j{constructor(P){this.a=P}async request(P,R){const[m,C]=await this.a.call("request",[P],R);return{res:m,stream:(0,D.$ye)(C)}}async resolveProxy(P){return this.a.call("resolveProxy",[P])}async loadCertificates(){return this.a.call("loadCertificates")}}e.$Hr=j}),define(ue[218],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$YPc=e.$XPc=e.$WPc=void 0,e.$WPc={exit:"vscode:electron-main->shared-process=exit",ipcReady:"vscode:shared-process->electron-main=ipc-ready",initDone:"vscode:shared-process->electron-main=init-done"},e.$XPc={request:"vscode:createSharedProcessChannelConnection",response:"vscode:createSharedProcessChannelConnectionResult"},e.$YPc={request:"vscode:createSharedProcessRawConnection",response:"vscode:createSharedProcessRawConnectionResult"}}),define(ue[219],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$RLc=void 0;class D{constructor(){this.b=new Map}static{this.a=1}async createNewMessage(L){try{const j=await this.c();if(j){const I=String(D.a++);return this.b.set(I,j),{id:I,data:j.createNewMessage(L)}}}catch{}return{id:"",data:L}}async validate(L,j){if(!L.id)return!0;const I=this.b.get(L.id);if(!I)return!1;this.b.delete(L.id);try{return I.validate(j)==="ok"}catch{return!1}finally{I.dispose?.()}}async sign(L){try{return await this.d(L)}catch{}return L}}e.$RLc=D}),define(ue[106],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ol=e.$nl=void 0,e.$nl="signService",e.$ol=(0,D.$8h)(e.$nl)}),define(ue[220],de([0,1,219]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$MQc=void 0;class N extends D.$RLc{c(){return this.h().then(j=>new j.validator)}d(j){return this.h().then(I=>new I.signer().sign(j))}h(){return new Promise((j,I)=>oe(["vsda"],j,I))}}e.$MQc=N}),define(ue[79],de([0,1,3,2]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Yjc=e.$Xjc=e.$Wjc=e.$Vjc=void 0;class L extends N.$Tc{constructor(k,E,l){super(),this.a=k,this.b=E,this.c=l}async getItems(){const k={profile:this.b,workspace:this.c},E=await this.a.call("getItems",k);return new Map(E)}updateItems(k){const E={profile:this.b,workspace:this.c};return k.insert&&(E.insert=Array.from(k.insert.entries())),k.delete&&(E.delete=Array.from(k.delete.values())),this.a.call("updateItems",E)}optimize(){const k={profile:this.b,workspace:this.c};return this.a.call("optimize",k)}}class j extends L{constructor(k,E){super(k,E,void 0),this.f=this.D(new D.$Wd),this.onDidChangeItemsExternal=this.f.event,this.g()}g(){this.D(this.a.listen("onDidChangeStorage",{profile:this.b})(k=>this.h(k)))}h(k){(Array.isArray(k.changed)||Array.isArray(k.deleted))&&this.f.fire({changed:k.changed?new Map(k.changed):void 0,deleted:k.deleted?new Set(k.deleted):void 0})}}class I extends j{constructor(k){super(k,void 0)}async close(){this.dispose()}}e.$Vjc=I;class P extends j{constructor(k,E){super(k,E)}async close(){this.dispose()}}e.$Wjc=P;class R extends L{constructor(k,E){super(k,void 0,E),this.onDidChangeItemsExternal=D.Event.None}async close(){this.dispose()}}e.$Xjc=R;class m{constructor(k){this.a=k}isUsed(k){const E={payload:k,profile:void 0,workspace:void 0};return this.a.call("isUsed",E)}}e.$Yjc=m}),define(ue[221],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$r4=void 0;class D{constructor(L,j,I,P,R){this.d=L,this.e=j,this.f=I,this.g=R,this.f||(this.f={}),typeof P=="function"?this.a=P():this.a=P,this.b=null}registerAuthId(L){this.c=L}h(L){}log(L,j){}capture(L,j){let I=j["common.machineId"]??"unknown";j["common.authId"]=this.c;const P=L.startsWith("$identify")?"$identify":L;this.fetch("https://api2.amplitude.com/2/httpapi",{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify({api_key:"e22f5af30b4da626f53370760b2d271b",events:[{device_id:I,event_type:P,event_properties:j,user_id:this.c,time:Date.now(),ip:"$remote"}]})}).catch(R=>console.error("Error sending event to Amplitude:",R))}flush(){return this.a?new Promise(L=>{this.h(j=>{j.unload(!0,()=>{this.a=void 0,L(void 0)})})}):Promise.resolve(void 0)}}e.$r4=D}),define(ue[107],de([0,1,5,37,31]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Vo=e.$Uo=void 0;function j(R){if(D.$u===2&&/^penguin(\.|$)/i.test(R))return"chromebook"}function I(R,m,C,k,E,l,g,p,w){const h=Object.create(null);h["common.machineId"]=l,h["common.sqmId"]=g,h.sessionID=(0,L.$sg)()+Date.now(),h.commitHash=k,h.version=E,h["common.platformVersion"]=(R||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),h["common.platform"]=(0,D.$h)(D.$u),h["common.nodePlatform"]=N.$dc,h["common.nodeArch"]=C,h["common.product"]=w||"desktop",p&&(h["common.msftInternal"]=p);let f=0;const u=Date.now();Object.defineProperties(h,{timestamp:{get:()=>new Date,enumerable:!0},"common.timesincesessionstart":{get:()=>Date.now()-u,enumerable:!0},"common.sequence":{get:()=>f++,enumerable:!0}}),D.$l&&(h["common.snap"]="true");const c=j(m);return c&&(h["common.platformDetail"]=c),h}e.$Uo=I;function P(R){const m=N.env.USERDNSDOMAIN;if(!m)return!1;const C=m.toLowerCase();return R.some(k=>C===k)}e.$Vo=P}),define(ue[22],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryConfiguration=e.TelemetryLevel=e.$Ml=e.$Ll=e.$Kl=e.$Jl=e.$Il=e.$Hl=e.$Gl=e.$Fl=e.$El=e.$Dl=e.$Cl=e.$Bl=e.$Al=void 0,e.$Al=(0,D.$8h)("telemetryService"),e.$Bl="inlineDiffAccept",e.$Cl="inlineDiffReject",e.$Dl=(0,D.$8h)("customEndpointTelemetryService"),e.$El="telemetry.currentSessionDate",e.$Fl="telemetry.firstSessionDate",e.$Gl="telemetry.lastSessionDate",e.$Hl="telemetry.machineId",e.$Il="telemetry.sqmId",e.$Jl="telemetry",e.$Kl="telemetry.telemetryLevel",e.$Ll="telemetry.enableCrashReporter",e.$Ml="telemetry.enableTelemetry";var N;(function(j){j[j.NONE=0]="NONE",j[j.CRASH=1]="CRASH",j[j.ERROR=2]="ERROR",j[j.USAGE=3]="USAGE"})(N||(e.TelemetryLevel=N={}));var L;(function(j){j.OFF="off",j.CRASH="crash",j.ERROR="error",j.ON="all"})(L||(e.TelemetryConfiguration=L={}))}),define(ue[222],de([0,1,36,6,34,25,16,5,10,142,32,145,96,11,23,22]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ss=e.$rs=e.$qs=e.$ps=void 0;const w=new Map;async function h(i,r){const n=`${i}::${r.join(":")}`,s=w.get(n);if(s)return s;const t=[{tag:"grunt.js",filePattern:/^gruntfile\.js$/i},{tag:"gulp.js",filePattern:/^gulpfile\.js$/i},{tag:"tsconfig.json",filePattern:/^tsconfig\.json$/i},{tag:"package.json",filePattern:/^package\.json$/i},{tag:"jsconfig.json",filePattern:/^jsconfig\.json$/i},{tag:"tslint.json",filePattern:/^tslint\.json$/i},{tag:"eslint.json",filePattern:/^eslint\.json$/i},{tag:"tasks.json",filePattern:/^tasks\.json$/i},{tag:"launch.json",filePattern:/^launch\.json$/i},{tag:"settings.json",filePattern:/^settings\.json$/i},{tag:"webpack.config.js",filePattern:/^webpack\.config\.js$/i},{tag:"project.json",filePattern:/^project\.json$/i},{tag:"makefile",filePattern:/^makefile$/i},{tag:"sln",filePattern:/^.+\.sln$/i},{tag:"csproj",filePattern:/^.+\.csproj$/i},{tag:"cmake",filePattern:/^.+\.cmake$/i},{tag:"github-actions",filePattern:/^.+\.ya?ml$/i,relativePathPattern:/^\.github(?:\/|\\)workflows$/i},{tag:"devcontainer.json",filePattern:/^devcontainer\.json$/i},{tag:"dockerfile",filePattern:/^(dockerfile|docker\-compose\.ya?ml)$/i}],o=new Map,a=new Map,y=2e4;function $(v,S,A,T){const q=S.substring(v.length+1);return N.Promises.withAsyncBody(async M=>{let Y;try{Y=await C.Promises.readdir(S,{withFileTypes:!0})}catch{M();return}if(T.count>=y){T.count+=Y.length,T.maxReached=!0,M();return}let G=Y.length;if(G===0){M();return}let Q=Y;T.count+Y.length>y&&(T.maxReached=!0,G=y-T.count,Q=Y.slice(0,G)),T.count+=Y.length;for(const F of Q)if(F.isDirectory()){if(A.includes(F.name)||await $(v,(0,I.$jc)(S,F.name),A,T),--G===0){M();return}}else{const te=F.name.lastIndexOf(".");if(te>=0){const H=F.name.substring(te+1);H&&o.set(H,(o.get(H)??0)+1)}for(const H of t)H.relativePathPattern?.test(q)!==!1&&H.filePattern.test(F.name)&&a.set(H.tag,(a.get(H.tag)??0)+1);if(--G===0){M();return}}})}const d=N.Promises.withAsyncBody(async v=>{const S={count:0,maxReached:!1};await $(i,i,r,S);const A=await c(i);v({configFiles:f(a),fileTypes:f(o),fileCount:S.count,maxFilesReached:S.maxReached,launchConfigFiles:A})});return w.set(n,d),d}e.$ps=h;function f(i){return Array.from(i.entries(),([r,n])=>({name:r,count:n})).sort((r,n)=>n.count-r.count)}function u(){const i={os:`${D.type()} ${D.arch()} ${D.release()}`,memory:`${(D.totalmem()/l.$5k.GB).toFixed(2)}GB (${(D.freemem()/l.$5k.GB).toFixed(2)}GB free)`,vmHint:`${Math.round(m.$fn.value()*100)}%`},r=D.cpus();return r&&r.length>0&&(i.cpus=`${r[0].model} (${r.length} x ${r[0].speed})`),i}e.$qs=u;async function c(i){try{const r=new Map,n=(0,I.$jc)(i,".vscode","launch.json"),s=await C.Promises.readFile(n),t=[],o=(0,L.$ln)(s.toString(),t);if(t.length)return console.log(`Unable to parse ${n}`),[];if((0,L.$un)(o)==="object"&&o.configurations)for(const a of o.configurations){const y=a.type;y&&(r.has(y)?r.set(y,r.get(y)+1):r.set(y,1))}return f(r)}catch{return[]}}e.$rs=c;let b=class{constructor(r,n){this.c=r,this.d=n}f(r){const n=[];return n.push(`OS Version:       ${r.os}`),n.push(`CPUs:             ${r.cpus}`),n.push(`Memory (System):  ${r.memory}`),n.push(`VM:               ${r.vmHint}`),n.join(`
`)}g(r){const n=[];n.push(`Version:          ${this.d.nameShort} ${this.d.version} (${this.d.commit||"Commit unknown"}, ${this.d.date||"Date unknown"})`),n.push(`OS Version:       ${D.type()} ${D.arch()} ${D.release()}`);const s=D.cpus();return s&&s.length>0&&n.push(`CPUs:             ${s[0].model} (${s.length} x ${s[0].speed})`),n.push(`Memory (System):  ${(D.totalmem()/l.$5k.GB).toFixed(2)}GB (${(D.freemem()/l.$5k.GB).toFixed(2)}GB free)`),P.$i||n.push(`Load (avg):       ${D.loadavg().map(t=>Math.round(t)).join(", ")}`),n.push(`VM:               ${Math.round(m.$fn.value()*100)}%`),n.push(`Screen Reader:    ${r.screenReader?"yes":"no"}`),n.push(`Process Argv:     ${r.mainArguments.join(" ")}`),n.push(`GPU Status:       ${this.j(r.gpuFeatureStatus)}`),n.join(`
`)}async getPerformanceInfo(r,n){return Promise.all([(0,k.$os)(r.mainPID),this.k(r)]).then(async s=>{let[t,o]=s,a=this.m(r,t);return n.forEach(y=>{if((0,E.$Rm)(y))a+=`
${y.errorMessage}`,o+=`
${y.errorMessage}`;else if(a+=`

Remote: ${y.hostName}`,y.processes&&(a+=`
${this.m(r,y.processes)}`),y.workspaceMetadata){o+=`
|  Remote: ${y.hostName}`;for(const $ of Object.keys(y.workspaceMetadata)){const d=y.workspaceMetadata[$];let v=`${d.fileCount} files`;d.maxFilesReached&&(v=`more than ${v}`),o+=`|    Folder (${$}): ${v}`,o+=this.h(d)}}}),{processInfo:a,workspaceInfo:o}})}async getSystemInfo(r,n){const{memory:s,vmHint:t,os:o,cpus:a}=u(),y={os:o,memory:s,cpus:a,vmHint:t,processArgs:`${r.mainArguments.join(" ")}`,gpuStatus:r.gpuFeatureStatus,screenReader:`${r.screenReader?"yes":"no"}`,remoteData:n};return P.$i||(y.load=`${D.loadavg().map($=>Math.round($)).join(", ")}`),P.$k&&(y.linuxEnv={desktopSession:process.env.DESKTOP_SESSION,xdgSessionDesktop:process.env.XDG_SESSION_DESKTOP,xdgCurrentDesktop:process.env.XDG_CURRENT_DESKTOP,xdgSessionType:process.env.XDG_SESSION_TYPE}),Promise.resolve(y)}async getDiagnostics(r,n){const s=[];return(0,k.$os)(r.mainPID).then(async t=>(s.push(""),s.push(this.g(r)),s.push(""),s.push(this.m(r,t)),r.windows.some(o=>o.folderURIs&&o.folderURIs.length>0&&!o.remoteAuthority)&&(s.push(""),s.push("Workspace Stats: "),s.push(await this.k(r))),n.forEach(o=>{if((0,E.$Rm)(o))s.push(`
${o.errorMessage}`);else if(s.push(`

`),s.push(`Remote:           ${o.hostName}`),s.push(this.f(o.machineInfo)),o.processes&&s.push(this.m(r,o.processes)),o.workspaceMetadata)for(const a of Object.keys(o.workspaceMetadata)){const y=o.workspaceMetadata[a];let $=`${y.fileCount} files`;y.maxFilesReached&&($=`more than ${$}`),s.push(`Folder (${a}): ${$}`),s.push(this.h(y))}}),s.push(""),s.push(""),s.join(`
`)))}h(r){const n=[];let t=0;const o=(d,v)=>{const S=` ${d}(${v})`;t+S.length>60?(n.push(a),a="|                 ",t=a.length):t+=S.length,a+=S};let a="|      File types:";const y=10,$=r.fileTypes.length>y?y:r.fileTypes.length;for(let d=0;d<$;d++){const v=r.fileTypes[d];o(v.name,v.count)}if(n.push(a),r.configFiles.length>=0&&(a="|      Conf files:",t=0,r.configFiles.forEach(d=>{o(d.name,d.count)}),n.push(a)),r.launchConfigFiles.length>0){let d="|      Launch Configs:";r.launchConfigFiles.forEach(v=>{const S=v.count>1?` ${v.name}(${v.count})`:` ${v.name}`;d+=S}),n.push(d)}return n.join(`
`)}j(r){const n=Math.max(...Object.keys(r).map(s=>s.length));return Object.keys(r).map(s=>`${s}:  ${" ".repeat(n-s.length)}  ${r[s]}`).join(`
                  `)}k(r){const n=[],s=[];return r.windows.forEach(t=>{t.folderURIs.length===0||t.remoteAuthority||(n.push(`|  Window (${t.title})`),t.folderURIs.forEach(o=>{const a=R.URI.revive(o);if(a.scheme===j.Schemas.file){const y=a.fsPath;s.push(h(y,["node_modules",".git"]).then($=>{let d=`${$.fileCount} files`;$.maxFilesReached&&(d=`more than ${d}`),n.push(`|    Folder (${(0,I.$nc)(y)}): ${d}`),n.push(this.h($))}).catch($=>{n.push(`|      Error: Unable to collect workspace stats for folder ${y} (${$.toString()})`)}))}else n.push(`|    Folder (${a.toString()}): Workspace stats not available.`)}))}),Promise.all(s).then(t=>n.join(`
`)).catch(t=>`Unable to collect workspace stats: ${t}`)}m(r,n){const s=new Map;r.windows.forEach(o=>s.set(o.pid,`window [${o.id}] (${o.title})`)),r.pidToNames.forEach(({pid:o,name:a})=>s.set(o,a));const t=[];return t.push("CPU %	Mem MB	   PID	Process"),n&&this.n(r.mainPID,s,t,n,0),t.join(`
`)}n(r,n,s,t,o){const a=o===0;let y;a?y=t.pid===r?`${this.d.applicationName} main`:"remote agent":n.has(t.pid)?y=n.get(t.pid):y=`${"  ".repeat(o)} ${t.name}`;const $=process.platform==="win32"?t.mem:D.totalmem()*(t.mem/100);s.push(`${t.load.toFixed(0).padStart(5," ")}	${($/l.$5k.MB).toFixed(0).padStart(6," ")}	${t.pid.toFixed(0).padStart(6," ")}	${y}`),Array.isArray(t.children)&&t.children.forEach(d=>this.n(r,n,s,d,o+1))}async getWorkspaceFileExtensions(r){const n=new Set;for(const{uri:s}of r.folders){const t=R.URI.revive(s);if(t.scheme!==j.Schemas.file)continue;const o=t.fsPath;try{(await h(o,["node_modules",".git"])).fileTypes.forEach(y=>n.add(y.name))}catch{}}return{extensions:[...n]}}async reportWorkspaceStats(r){for(const{uri:n}of r.folders){const s=R.URI.revive(n);if(s.scheme!==j.Schemas.file)continue;const t=s.fsPath;try{const o=await h(t,["node_modules",".git"]);this.c.publicLog2("workspace.stats",{"workspace.id":r.telemetryId,rendererSessionId:r.rendererSessionId}),o.fileTypes.forEach(a=>{this.c.publicLog2("workspace.stats.file",{rendererSessionId:r.rendererSessionId,type:a.name,count:a.count})}),o.launchConfigFiles.forEach(a=>{this.c.publicLog2("workspace.stats.launchConfigFile",{rendererSessionId:r.rendererSessionId,type:a.name,count:a.count})}),o.configFiles.forEach(a=>{this.c.publicLog2("workspace.stats.configFiles",{rendererSessionId:r.rendererSessionId,type:a.name,count:a.count})})}catch{}}}};e.$ss=b,e.$ss=b=Se([Z(0,p.$Al),Z(1,g.$Ij)],b)}),define(ue[108],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3Pc=e.$2Pc=void 0;class D{constructor(j){this.b=j}listen(j,I){throw new Error(`Event not found: ${I}`)}call(j,I,{eventName:P,data:R}){return I==="capture"?(this.b.forEach(m=>m.capture(P,R)),Promise.resolve(null)):I==="registerAuthId"?(this.b.forEach(m=>m.registerAuthId(R)),Promise.resolve(null)):(this.b.forEach(m=>m.log(P,R)),Promise.resolve(null))}}e.$2Pc=D;class N{constructor(j){this.b=j}log(j,I){return this.b.call("log",{eventName:j,data:I}).then(void 0,P=>`Failed to log telemetry: ${console.warn(P)}`),Promise.resolve(null)}flush(){return Promise.resolve()}registerAuthId(j){this.b.call("registerAuthId",{eventName:"registerAuthId",data:j})}capture(j,I){return this.b.call("capture",{eventName:j,data:I}).then(void 0,P=>`Failed to log telemetry: ${console.warn(P)}`),Promise.resolve(null)}}e.$3Pc=N}),define(ue[51],de([0,1,30,12,78,107,22]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$_o=e.$$o=e.$0o=e.$9o=e.$8o=e.$7o=e.$6o=e.$5o=e.$4o=e.$3o=e.$2o=e.$1o=e.$Zo=e.$Yo=e.$Xo=e.$Wo=void 0;class P{constructor(n){this.value=n,this.isTrustedTelemetryValue=!0}}e.$Wo=P;class R{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}registerAuthId(){}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}publicLogCapture(){}setExperimentProperty(){}}e.$Xo=R,e.$Yo=new R;class m{async publicLog(n,s,t){}async publicLogError(n,s,t){}}e.$Zo=m,e.$1o="telemetry",e.$2o="extensionTelemetryLog",e.$3o={registerAuthId:()=>null,log:()=>null,flush:()=>Promise.resolve(null),capture:()=>null};function C(r,n){return!n.isBuilt&&!n.disableTelemetry?!0:!(n.disableTelemetry||!r.enableTelemetry)}e.$4o=C;function k(r,n){return n.extensionTestsLocationURI?!0:!(n.isBuilt||n.disableTelemetry||r.enableTelemetry&&r.aiConfig?.ariaKey)}e.$5o=k;function E(r){const n=r.getValue(I.$Kl),s=r.getValue(I.$Ll);if(r.getValue(I.$Ml)===!1||s===!1)return 0;switch(n??"all"){case"all":return 3;case"error":return 2;case"crash":return 1;case"off":return 0}}e.$6o=E;function l(r){const n={},s={},t={};h(r,t);for(let o in t){o=o.length>150?o.substr(o.length-149):o;const a=t[o];typeof a=="number"?s[o]=a:typeof a=="boolean"?s[o]=a?1:0:typeof a=="string"?(a.length>8192&&console.warn(`Telemetry property: ${o} has been trimmed to 8192, the original length is ${a.length}`),n[o]=a.substring(0,8191)):typeof a<"u"&&a!==null&&(n[o]=a)}return{properties:n,measurements:s}}e.$7o=l;const g=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function p(r){return r}e.$8o=p;function w(r){if(!r)return"none";const n=(0,L.$hl)(r);return g.has(n)?n:"other"}e.$9o=w;function h(r,n,s=0,t){if(r)for(const o of Object.getOwnPropertyNames(r)){const a=r[o],y=t?t+o:o;Array.isArray(a)?n[y]=(0,D.$Jn)(a):a instanceof Date?n[y]=a.toISOString():(0,N.$Mf)(a)?s<2?h(a,n,s+1,y+"."):n[y]=(0,D.$Jn)(a):n[y]=a}}function f(r,n){const s=r.msftInternalDomains||[],t=n.getValue("telemetry.internalTesting");return(0,j.$Vo)(s)||t}e.$0o=f;function u(r){return[r.appRoot,r.extensionsPath,r.userHome.fsPath,r.tmpDir.fsPath,r.userDataPath]}e.$$o=u;function c(r,n){if(!r||!r.includes("/")&&!r.includes("\\"))return r;let s=r;const t=[];for(const $ of n)for(;;){const d=$.exec(r);if(!d)break;t.push([d.index,$.lastIndex])}const o=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,a=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let y=0;for(s="";;){const $=a.exec(r);if(!$)break;const d=t.some(([v,S])=>$.index<S&&v<a.lastIndex);!o.test($[0])&&!d&&(s+=r.substring(y,$.index)+"<REDACTED: user-file-path>",y=a.lastIndex)}return y<r.length&&(s+=r.substr(y)),s}function b(r){if(!r)return r;const n=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const s of n)if(s.regex.test(r))return`<REDACTED: ${s.label}>`;return r}function i(r,n){return(0,D.$Gn)(r,s=>{if(s instanceof P||Object.hasOwnProperty.call(s,"isTrustedTelemetryValue"))return s.value;if(typeof s=="string"){let t=s.replaceAll("%20"," ");t=c(t,n);for(const o of n)t=t.replace(o,"");return t=b(t),t}})}e.$_o=i}),define(ue[33],de([0,1,27,29,45,5,10,7,37,51]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$lp=e.$kp=e.$jp=e.$ip=e.$hp=e.$gp=e.$fp=e.$ep=e.$dp=e.$cp=e.$bp=e.$ap=void 0;function C(n,s){return n.uuid&&s.uuid?n.uuid===s.uuid:n.id===s.id?!0:(0,D.$9e)(n.id,s.id)===0}e.$ap=C;const k=/^([^.]+\..+)-(\d+\.\d+\.\d+)(-(.+))?$/;class E{static create(s){const t=s.manifest?s.manifest.version:s.version,o=s.manifest?s.targetPlatform:s.properties.targetPlatform;return new E(s.identifier,t,o)}static parse(s){const t=k.exec(s);return t&&t[1]&&t[2]?new E({id:t[1]},t[2],t[4]||void 0):null}constructor(s,t,o="undefined"){this.version=t,this.targetPlatform=o,this.id=s.id}toString(){return`${this.id}-${this.version}${this.targetPlatform!=="undefined"?`-${this.targetPlatform}`:""}`}equals(s){return s instanceof E?C(this,s)&&this.version===s.version&&this.targetPlatform===s.targetPlatform:!1}}e.$bp=E;const l=/^([^.]+\..+)@((prerelease)|(\d+\.\d+\.\d+(-.*)?))$/;function g(n){const s=l.exec(n);return s&&s[1]?[w(s[1]),s[2]]:[w(n),void 0]}e.$cp=g;function p(n,s){return`${n}.${s}`}e.$dp=p;function w(n){return n.toLowerCase()}e.$ep=w;function h(n,s){return w(p(n??L.$pm,s))}e.$fp=h;function f(n,s){const t=[],o=a=>{for(const y of t)if(y.some($=>C(s($),s(a))))return y;return null};for(const a of n){const y=o(a);y?y.push(a):t.push([a])}return t}e.$gp=f;function u(n){return{id:n.identifier.id,name:n.manifest.name,galleryId:null,publisherId:n.publisherId,publisherName:n.manifest.publisher,publisherDisplayName:n.publisherDisplayName,dependencies:n.manifest.extensionDependencies&&n.manifest.extensionDependencies.length>0}}e.$hp=u;function c(n){return{id:new m.$Wo(n.identifier.id),name:new m.$Wo(n.name),galleryId:n.identifier.uuid,publisherId:n.publisherId,publisherName:n.publisher,publisherDisplayName:n.publisherDisplayName,isPreReleaseVersion:n.properties.isPreReleaseVersion,dependencies:!!(n.properties.dependencies&&n.properties.dependencies.length>0),isSigned:n.isSigned,...n.telemetryData}}e.$ip=c,e.$jp=new L.$tm("pprice.better-merge");function b(n,s){const t=[],o=s.manifest.extensionDependencies?.slice(0)??[];for(;o.length;){const a=o.shift();if(a&&t.every(y=>!C(y.identifier,{id:a}))){const y=n.filter($=>C($.identifier,{id:a}));y.length===1&&(t.push(y[0]),o.push(...y[0].manifest.extensionDependencies?.slice(0)??[]))}}return t}e.$kp=b;async function i(n,s){if(!j.$k)return!1;let t;try{t=(await n.readFile(I.URI.file("/etc/os-release"))).value.toString()}catch{try{t=(await n.readFile(I.URI.file("/usr/lib/os-release"))).value.toString()}catch(a){s.debug("Error while getting the os-release file.",(0,P.$0)(a))}}return!!t&&(t.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]==="alpine"}async function r(n,s){const t=await i(n,s),o=(0,N.$Fo)(t?"alpine":j.$u,R.$ec);return s.debug("ComputeTargetPlatform:",o),o}e.$lp=r}),define(ue[223],de([0,1,17,2,20,10,11,23,6,3,16,5,37,33]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ZNc=e.$YNc=void 0;let g=class extends N.$Tc{constructor(u,c){super(),this.b=u,this.c=c,this.a=new Map,this.c.configBasedExtensionTips&&Object.entries(this.c.configBasedExtensionTips).forEach(([,b])=>this.a.set(b.configPath,b))}getConfigBasedTips(u){return this.f(u)}async getImportantExecutableBasedTips(){return[]}async getOtherExecutableBasedTips(){return[]}async f(u){const c=[];for(const[b,i]of this.a)if(!(i.configScheme&&i.configScheme!==u.scheme))try{const r=(await this.b.readFile((0,L.$Jg)(u,b))).value.toString();for(const[n,s]of Object.entries(i.recommendations))(!s.contentPattern||new RegExp(s.contentPattern,"mig").test(r))&&c.push({extensionId:n,extensionName:s.name,configName:i.configName,important:!!s.important,isExtensionPack:!!s.isExtensionPack,whenNotInstalled:s.whenNotInstalled})}catch{}return c}};e.$YNc=g,e.$YNc=g=Se([Z(0,I.$wk),Z(1,P.$Ij)],g);const p="extensionTips/promptedExecutableTips",w="extensionTips/lastPromptedMediumImpExeTime";class h extends g{constructor(u,c,b,i,r,n,s,t){super(s,t),this.q=u,this.r=c,this.s=b,this.t=i,this.u=r,this.w=n,this.g=new Map,this.h=new Map,this.j=new Map,this.m=new Map,this.n=new Map,t.exeBasedExtensionTips&&Object.entries(t.exeBasedExtensionTips).forEach(([o,a])=>{const y=[],$=[],d=[];Object.entries(a.recommendations).forEach(([v,S])=>{S.important?a.important?y.push({extensionId:v,extensionName:S.name,isExtensionPack:!!S.isExtensionPack}):$.push({extensionId:v,extensionName:S.name,isExtensionPack:!!S.isExtensionPack}):d.push({extensionId:v,extensionName:S.name,isExtensionPack:!!S.isExtensionPack})}),y.length&&this.g.set(o,{exeFriendlyName:a.friendlyName,windowsPath:a.windowsPath,recommendations:y}),$.length&&this.h.set(o,{exeFriendlyName:a.friendlyName,windowsPath:a.windowsPath,recommendations:$}),d.length&&this.j.set(o,{exeFriendlyName:a.friendlyName,windowsPath:a.windowsPath,recommendations:d})}),(0,R.$0g)(async()=>{await this.z(),this.F(),this.G()},3e3,this.B)}async getImportantExecutableBasedTips(){const u=await this.O(this.g),c=await this.O(this.h);return[...u,...c]}getOtherExecutableBasedTips(){return this.O(this.j)}async z(){const u=await this.O(this.g),c=await this.O(this.h),b=await this.t.getInstalled();this.m=this.C(u,b),this.n=this.C(c,b)}C(u,c){const b=new Map;u.forEach(t=>b.set(t.extensionId.toLowerCase(),t));const{installed:i,uninstalled:r}=this.N([...b.keys()],c);for(const t of i){const o=b.get(t);o&&this.s.publicLog2("exeExtensionRecommendations:alreadyInstalled",{extensionId:t,exeName:o.exeName})}for(const t of r){const o=b.get(t);o&&this.s.publicLog2("exeExtensionRecommendations:notInstalled",{extensionId:t,exeName:o.exeName})}const n=this.L(),s=new Map;for(const t of r){const o=b.get(t);if(o&&(!n[o.exeName]||!n[o.exeName].includes(o.extensionId))){let a=s.get(o.exeName);a||(a=[],s.set(o.exeName,a)),a.push(o)}}return s}F(){if(this.m.size===0)return;const[u,c]=[...this.m.entries()][0];this.H(c).then(b=>{switch(b){case"reacted":this.M(c[0].exeName,c);break;case"ignored":this.m.delete(u);break;case"incompatibleWindow":{const i=m.Event.once(m.Event.latch(m.Event.any(this.r.onDidOpenMainWindow,this.r.onDidFocusMainWindow)));this.D(i(()=>this.F()));break}case"toomany":{const i=this.D(new N.$Uc);i.value=(0,R.$0g)(()=>{i.dispose(),this.F()},60*60*1e3);break}}})}G(){if(this.n.size===0)return;const u=this.I(),c=Date.now()-u,b=7*24*60*60*1e3;if(c<b){const n=this.D(new N.$Uc);n.value=(0,R.$0g)(()=>{n.dispose(),this.G()},b-c);return}const[i,r]=[...this.n.entries()][0];this.H(r).then(n=>{switch(n){case"reacted":{this.J(Date.now()),this.n.delete(i),this.M(r[0].exeName,r);const s=this.D(new N.$Uc);s.value=(0,R.$0g)(()=>{s.dispose(),this.G()},b);break}case"ignored":this.n.delete(i),this.G();break;case"incompatibleWindow":{const s=m.Event.once(m.Event.latch(m.Event.any(this.r.onDidOpenMainWindow,this.r.onDidFocusMainWindow)));this.D(s(()=>this.G()));break}case"toomany":{const s=this.D(new N.$Uc);s.value=(0,R.$0g)(()=>{s.dispose(),this.G()},60*60*1e3);break}}})}async H(u){const c=await this.t.getInstalled(1),b=u.filter(i=>!i.whenNotInstalled||i.whenNotInstalled.every(r=>c.every(n=>!(0,l.$ap)(n.identifier,{id:r})))).map(({extensionId:i})=>i.toLowerCase());return this.w.promptImportantExtensionsInstallNotification({extensions:b,source:3,name:u[0].exeFriendlyName,searchValue:`@exe:"${u[0].exeName}"`})}I(){let u=this.u.getNumber(w,-1);return u||(u=Date.now(),this.J(u)),u}J(u){this.u.store(w,u,-1,1)}L(){return JSON.parse(this.u.get(p,-1,"{}"))}M(u,c){const b=this.L();b[u]=c.map(({extensionId:i})=>i.toLowerCase()),this.u.store(p,JSON.stringify(b),-1,0)}N(u,c){const b=[],i=[],r=c.reduce((n,s)=>(n.add(s.identifier.id.toLowerCase()),n),new Set);return u.forEach(n=>{r.has(n.toLowerCase())?b.push(n):i.push(n)}),{installed:b,uninstalled:i}}async O(u){const c=[],b=new Map;for(const i of u.keys()){const r=u.get(i);if(!r||!(0,D.$Lb)(r.recommendations))continue;const n=[];k.$i?r.windowsPath&&n.push(r.windowsPath.replace("%USERPROFILE%",()=>E.env.USERPROFILE).replace("%ProgramFiles(x86)%",()=>E.env["ProgramFiles(x86)"]).replace("%ProgramFiles%",()=>E.env.ProgramFiles).replace("%APPDATA%",()=>E.env.APPDATA).replace("%WINDIR%",()=>E.env.WINDIR)):(n.push((0,C.$jc)("/usr/local/bin",i)),n.push((0,C.$jc)("/usr/bin",i)),n.push((0,C.$jc)(this.q.fsPath,i)));for(const s of n){let t=b.get(s);if(t===void 0&&(t=await this.b.exists(j.URI.file(s)),b.set(s,t)),t)for(const{extensionId:o,extensionName:a,isExtensionPack:y,whenNotInstalled:$}of r.recommendations)c.push({extensionId:o,extensionName:a,isExtensionPack:y,exeName:i,exeFriendlyName:r.exeFriendlyName,windowsPath:r.windowsPath,whenNotInstalled:$})}}return c}}e.$ZNc=h}),define(ue[224],de([0,1,26,33]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$bEc=void 0;async function L(j,I,P,R,m){try{const C=await j.getExtensionsControlManifest();if(!C.deprecated)return;const k=await j.getInstalled(1);for(const[E,l]of Object.entries(C.deprecated)){if(!l?.extension)continue;const{id:g,autoMigrate:p,preRelease:w}=l.extension;if(!p)continue;const h=k.find(u=>(0,N.$ap)(u.identifier,{id:E}));if(!h)continue;const f=(await I.getExtensions([{id:g,preRelease:w}],{targetPlatform:await j.getTargetPlatform(),compatible:!0},D.CancellationToken.None))[0];if(!f){m.info(`Skipping migrating '${h.identifier.id}' extension because, the comaptible target '${g}' extension is not found`);continue}try{m.info(`Migrating '${h.identifier.id}' extension to '${g}' extension...`);const u=!R.getDisabledExtensions().some(b=>(0,N.$ap)(b,h.identifier));await j.uninstall(h),m.info(`Uninstalled the unsupported extension '${h.identifier.id}'`);let c=k.find(b=>(0,N.$ap)(b.identifier,{id:g}));(!c||!c.isPreReleaseVersion&&u)&&(c=await j.installFromGallery(f,{installPreReleaseVersion:!0,isMachineScoped:h.isMachineScoped,operation:4}),m.info(`Installed the pre-release extension '${c.identifier.id}'`),u||(await R.disableExtension(c.identifier),m.info(`Disabled the pre-release extension '${c.identifier.id}' because the unsupported extension '${h.identifier.id}' is disabled`)),p.storage&&(P.addToMigrationList((0,N.$dp)(h.manifest.publisher,h.manifest.name),(0,N.$dp)(c.manifest.publisher,c.manifest.name)),m.info("Added pre-release extension to the storage migration list"))),m.info(`Migrated '${h.identifier.id}' extension to '${g}' extension.`)}catch(u){m.error(u)}}}catch(C){m.error(C)}}e.$bEc=L}),define(ue[225],de([0,1,6,7,2,25,20,49,12,31,32,71,21,15,29,33,100,11,8]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f){"use strict";var u;Object.defineProperty(e,"__esModule",{value:!0}),e.$mq=void 0;let c=class extends L.$Tc{static{u=this}static{this.c=".sigzip"}constructor(i,r,n,s,t,o){super(),this.h=r,this.j=n,this.m=s,this.n=t,this.q=o,this.extensionsDownloadDir=i.extensionsDownloadLocation,this.f=20,this.g=this.w()}async download(i,r,n){await this.g;const s=(0,I.$Jg)(this.extensionsDownloadDir,this.j.galleryId+"-"+this.y(i));try{await this.u(i,s,o=>this.j.download(i,o,r))}catch(o){throw new g.$Ko(o.message,g.ExtensionManagementErrorCode.Download)}let t=!1;if(n&&this.r(i)){const o=await this.t(i);try{t=await this.n.verify(s.fsPath,o.fsPath,this.q.getLevel()===f.LogLevel.Trace)}catch(a){const y=a;if(t=y.code,y.output&&this.q.trace(`Extension signature verification details for ${i.identifier.id} ${i.version}:
${y.output}`),t===g.ExtensionSignaturetErrorCode.PackageIsInvalidZip||t===g.ExtensionSignaturetErrorCode.SignatureArchiveIsInvalidZip){try{await this.delete(s)}catch($){this.q.error($)}throw new g.$Ko(k.$6p,g.ExtensionManagementErrorCode.CorruptZip)}}finally{try{await this.delete(o)}catch(a){this.q.error(a)}}}return t===!0?this.q.info(`Extension signature is verified: ${i.identifier.id}`):t===!1?this.q.info(`Extension signature verification is not done: ${i.identifier.id}`):this.q.warn(`Extension signature verification failed with error '${t}': ${i.identifier.id}`),{location:s,verificationStatus:t}}r(i){if(!i.isSigned)return this.q.info(`Extension is not signed: ${i.identifier.id}`),!1;const r=this.m.getValue("extensions.verifySignature");return(0,R.$Qf)(r)?r:!0}async t(i){await this.g;const r=(0,I.$Jg)(this.extensionsDownloadDir,`${this.y(i)}${u.c}`);try{await this.u(i,r,n=>this.j.downloadSignatureArchive(i,n))}catch(n){throw new g.$Ko(n.message,g.ExtensionManagementErrorCode.DownloadSignature)}return r}async u(i,r,n){if(this.q.info("Started downloading extension:",i.identifier.id,i.version,r.toString()),await this.h.exists(r)){this.q.info("No need to download extension as it exists already.",i.identifier.id,i.version,r.toString());return}if(r.scheme!==j.Schemas.file){this.q.info("Downloading extension from web:",i.identifier.id,i.version,r.toString()),await n(r);return}const s=(0,I.$Jg)(this.extensionsDownloadDir,`.${(0,m.$sg)()}`);await this.h.exists(s)||(this.q.info("Downloading extension to temp location:",i.identifier.id,i.version,s.toString()),await n(s));try{await C.Promises.rename(s.fsPath,r.fsPath,2*60*1e3)}catch(t){try{await this.h.del(s)}catch{}if(t.code==="ENOTEMPTY")this.q.info("Rename failed because the file was downloaded by another source. So ignoring renaming.",i.identifier.id,r.path);else throw this.q.info(`Rename failed because of ${(0,N.$0)(t)}. Deleted the file from downloaded location`,s.path),t}}async delete(i){await this.g,await this.h.del(i)}async w(){try{if(!await this.h.exists(this.extensionsDownloadDir)){this.q.trace("Extension VSIX downloads cache dir does not exist");return}const i=await this.h.resolve(this.extensionsDownloadDir,{resolveMetadata:!0});if(i.children){const r=[],n=[],s=[];for(const a of i.children)if(a.name.endsWith(u.c))s.push(a.resource);else{const y=p.$bp.parse(a.name);y&&n.push([y,a])}const t=(0,p.$gp)(n,([a])=>a),o=[];for(const a of t)a.sort((y,$)=>P.rcompare(y[0].version,$[0].version)),r.push(...a.slice(1).map(y=>y[1].resource)),o.push(a[0][1]);o.sort((a,y)=>a.mtime-y.mtime),r.push(...o.slice(0,Math.max(0,o.length-this.f)).map(a=>a.resource)),r.push(...s),await D.Promises.settled(r.map(a=>(this.q.trace("Deleting from cache",a.path),this.h.del(a))))}}catch(i){this.q.error(i)}}y(i){return this.f?p.$bp.create(i).toString().toLowerCase():(0,m.$sg)()}};e.$mq=c,e.$mq=c=u=Se([Z(0,l.$di),Z(1,h.$wk),Z(2,g.$Jo),Z(3,E.$Bi),Z(4,w.$Zp),Z(5,f.$qj)],c)}),define(ue[226],de([0,1,3,2,35,33,45]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$qq=void 0;class P extends N.$Tc{constructor(m,C,k,E,l,g,p){super(),this.f=m,this.g=C,this.h=k,this.j=E,this.m=l,this.n=g,this.q=p,this.a=this.D(new D.$Wd),this.onDidChangeExtensionsByAnotherSource=this.a.event,this.b=new Map,this.c=this.D(new N.$3c),this.r().then(null,w=>p.error(w))}async r(){await this.g.initializeDefaultProfileExtensions(),await this.t(this.h.profiles),this.s(),await this.H()}s(){this.D(this.h.onDidChangeProfiles(m=>this.t(m.added))),this.D(this.j.onAddExtensions(m=>this.u(m))),this.D(this.j.onDidAddExtensions(m=>this.w(m))),this.D(this.j.onRemoveExtensions(m=>this.y(m))),this.D(this.j.onDidRemoveExtensions(m=>this.z(m))),this.D(this.n.onDidFilesChange(m=>this.C(m)))}async t(m){try{m.length&&await Promise.all(m.map(C=>(this.c.set(C.id,(0,N.$Qc)(this.n.watch(this.m.extUri.dirname(C.extensionsResource)),this.n.watch(C.extensionsResource))),this.G(C.extensionsResource))))}catch(C){throw this.q.error(C),C}}async u(m){for(const C of m.extensions)this.I(this.L(C.identifier,C.version),m.profileLocation)}async w(m){for(const C of m.extensions){const k=this.L(C.identifier,C.version);m.error?this.J(k,m.profileLocation):this.I(k,m.profileLocation)}}async y(m){for(const C of m.extensions)this.J(this.L(C.identifier,C.version),m.profileLocation)}async z(m){const C=[],k=[];for(const E of m.extensions){const l=this.L(E.identifier,E.version);m.error?this.I(l,m.profileLocation):(this.J(l,m.profileLocation),this.b.has(l)||(this.q.debug("Extension is removed from all profiles",E.identifier.id,E.version),k.push(this.f.scanInstalledExtensionAtLocation(E.location).then(g=>{g?C.push(g):this.q.info("Extension not found at the location",E.location.toString())},g=>this.q.error(g)))))}try{await Promise.all(k),C.length&&await this.H(C)}catch(E){this.q.error(E)}}C(m){for(const C of this.h.profiles)m.contains(C.extensionsResource,0,1)&&this.F(C.extensionsResource)}async F(m){const C=[],k=[],E=await this.j.scanProfileExtensions(m),l=new Set,g=new Set;for(const[p,w]of this.b)w.has(m)&&g.add(p);for(const p of E){const w=this.L(p.identifier,p.version);l.add(w),g.has(w)||(C.push(p.identifier),this.I(w,m))}for(const p of g)if(!l.has(p)){const w=this.M(p);w&&(k.push(w.identifier),this.J(p,m))}(C.length||k.length)&&this.a.fire({added:C.length?{extensions:C,profileLocation:m}:void 0,removed:k.length?{extensions:k,profileLocation:m}:void 0})}async G(m){const C=await this.j.scanProfileExtensions(m);for(const k of C)this.I(this.L(k.identifier,k.version),m)}async H(m){m||(m=(await this.f.scanAllUserInstalledExtensions()).filter(k=>!this.b.has(this.L(k.identifier,k.manifest.version)))),m.length&&await this.f.markAsUninstalled(...m)}I(m,C){let k=this.b.get(m);k||this.b.set(m,k=new L.$Bc(E=>this.m.extUri.getComparisonKey(E))),k.add(C)}J(m,C){const k=this.b.get(m);k&&k.delete(C),k?.size||this.b.delete(m)}L(m,C){return`${I.$tm.toKey(m.id)}@${C}`}M(m){const[C,k]=(0,j.$cp)(m);return k?{identifier:{id:C},version:k}:void 0}}e.$qq=P}),define(ue[227],de([0,1,43,51]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fp=void 0;async function L(R,m,C,k,E,l){const g={"X-Market-Client-Id":`${j(R)} ${I(R)}`,"User-Agent":`${j(R)} ${I(R)} (${P(R)})`};if((0,N.$4o)(R,m)&&(0,N.$6o)(C)===3){const p=await(0,D.$Ep)(m,k,E);g["X-Market-User-Id"]=p,g[`${j(R)}-SessionId`]=l.machineId||p}return g}e.$Fp=L;function j(R){return R.extensionsGallery?.galleryId==="vscode"||R.extensionsGallery?.galleryId==="cursor"?"VSCode":"Cursor"}function I(R){return R.vscodeVersion}function P(R){return R.extensionsGallery?.galleryId==="vscode"||R.extensionsGallery?.galleryId==="cursor"?"Code":R.nameShort}}),define(ue[228],de([0,1,74,17,6,2,25,16,32,15,29,33,8,76,10]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Fr=void 0;let p=class extends l.$Er{constructor(u,c,b,i){super(b),this.h=u,this.j=i,this.g=this.D(new w(c,i)),this.h.registerParticipant({postInstall:async r=>this.m(r),postUninstall:async r=>this.n(r)})}async getBuiltInExtensionTranslationsUri(u,c){const i=(await this.g.getLanguagePacks())[c];if(!i){this.j.warn(`No language pack found for ${c}`);return}const r=i.translations[u];return r?g.URI.file(r):void 0}async getInstalledLanguages(){const u=await this.g.getLanguagePacks(),c=Object.keys(u).map(b=>{const i=u[b];return{...this.f(b,i.label),extensionId:i.extensions[0].extensionIdentifier.id}});return c.push(this.f("en","English")),c.sort((b,i)=>b.label.localeCompare(i.label)),c}async m(u){u&&u.manifest&&u.manifest.contributes&&u.manifest.contributes.localizations&&u.manifest.contributes.localizations.length&&(this.j.info("Adding language packs from the extension",u.identifier.id),await this.update())}async n(u){const c=await this.g.getLanguagePacks();Object.keys(c).some(b=>c[b]&&c[b].extensions.some(i=>(0,k.$ap)(i.extensionIdentifier,u.identifier)))&&(this.j.info("Removing language packs from the extension",u.identifier.id),await this.update())}async update(){const[u,c]=await Promise.all([this.g.getLanguagePacks(),this.h.getInstalled()]),b=await this.g.update(c);return!(0,N.$ub)(Object.keys(u),Object.keys(b))}};e.$Fr=p,e.$Fr=p=Se([Z(0,C.$Mo),Z(1,m.$di),Z(2,C.$Jo),Z(3,E.$qj)],p);let w=class extends j.$Tc{constructor(u,c){super(),this.j=c,this.c={},this.f=(0,P.$jc)(u.userDataPath,"languagepacks.json"),this.g=new L.$ch}getLanguagePacks(){return this.g.size||!this.h?this.r().then(()=>this.c):Promise.resolve(this.c)}update(u){return this.r(c=>{Object.keys(c).forEach(b=>delete c[b]),this.m(c,...u)}).then(()=>this.c)}m(u,...c){for(const b of c)b&&b.manifest&&b.manifest.contributes&&b.manifest.contributes.localizations&&b.manifest.contributes.localizations.length&&this.n(u,b);Object.keys(u).forEach(b=>this.q(u[b]))}n(u,c){const b=c.identifier,i=c.manifest.contributes&&c.manifest.contributes.localizations?c.manifest.contributes.localizations:[];for(const r of i)if(c.location.scheme===I.Schemas.file&&h(r)){let n=u[r.languageId];n||(n={hash:"",extensions:[],translations:{},label:r.localizedLanguageName??r.languageName},u[r.languageId]=n);const s=n.extensions.filter(t=>(0,k.$ap)(t.extensionIdentifier,b))[0];s?s.version=c.manifest.version:n.extensions.push({extensionIdentifier:b,version:c.manifest.version});for(const t of r.translations)n.translations[t.id]=(0,P.$jc)(c.location.fsPath,t.path)}}q(u){if(u){const c=(0,D.createHash)("md5");for(const b of u.extensions)c.update(b.extensionIdentifier.uuid||b.extensionIdentifier.id).update(b.version);u.hash=c.digest("hex")}}r(u=()=>null){return this.g.queue(()=>{let c=null;return R.Promises.readFile(this.f,"utf8").then(void 0,b=>b.code==="ENOENT"?Promise.resolve("{}"):Promise.reject(b)).then(b=>{try{return JSON.parse(b)}catch{return{}}}).then(b=>(c=u(b),b)).then(b=>{for(const r of Object.keys(b))b[r]||delete b[r];this.c=b,this.h=!0;const i=JSON.stringify(this.c);return this.j.debug("Writing language packs",i),R.Promises.writeFile(this.f,i)}).then(()=>c,b=>this.j.error(b))})}};w=Se([Z(0,m.$di),Z(1,E.$qj)],w);function h(f){if(typeof f.languageId!="string"||!Array.isArray(f.translations)||f.translations.length===0)return!1;for(const u of f.translations)if(typeof u.id!="string"||typeof u.path!="string")return!1;return!(f.languageName&&typeof f.languageName!="string"||f.localizedLanguageName&&typeof f.localizedLanguageName!="string")}}),define(ue[109],de([0,1,2,166,15,8,23,51]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$mNc=void 0;let R=class extends D.$Tc{registerAuthId(C){}constructor(C,k,E,l,g=""){super(),this.b=g;const p=k.getLogger(P.$1o);if(p)this.a=this.D(p);else{const h=(0,P.$5o)(l,E)?" (Not Sent)":"",f=()=>(0,P.$4o)(l,E)&&C.getLevel()===j.LogLevel.Trace;this.a=this.D(k.createLogger(P.$1o,{name:(0,N.localize)(0,null,h),hidden:!f()})),this.D(C.onDidChangeLogLevel(()=>k.setVisibility(P.$1o,f()))),this.a.info("Below are logs for every telemetry event sent from VS Code once the log level is set to trace."),this.a.info("===========================================================")}}flush(){return Promise.resolve(void 0)}log(C,k){this.a.trace(`${this.b}telemetry/${C}`,(0,P.$7o)(k))}capture(C,k){this.log(C,k)}};e.$mNc=R,e.$mNc=R=Se([Z(0,j.$qj),Z(1,j.$rj),Z(2,L.$ci),Z(3,I.$Ij)],R)}),define(ue[110],de([0,1,2,30,5,27,167,21,44,60,23,41,22,51]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Lr=void 0;let g=class{static{this.IDLE_START_EVENT_NAME="UserIdleStart"}static{this.IDLE_STOP_EVENT_NAME="UserIdleStop"}constructor(h,f,u){this.k=f,this.l=u,this.d={},this.i=new D.$Sc,this.j=[],this.b=h.appenders,this.c=h.commonProperties??Object.create(null),this.sessionId=this.c.sessionID,this.machineId=this.c["common.machineId"],this.sqmId=this.c["common.sqmId"],this.firstSessionDate=this.c["common.firstSessionDate"],this.msftInternal=this.c["common.msftInternal"],this.f=h.piiPaths||[],this.g=3,this.h=!!h.sendErrorTelemetry,this.j=[/(vscode-)?file:\/\/\/.*?\/resources\/app\//gi];for(const c of this.f)this.j.push(new RegExp((0,j.$Qe)(c),"gi")),c.indexOf("\\")>=0&&this.j.push(new RegExp((0,j.$Qe)(c.replace(/\\/g,"/")),"gi"));this.m(),this.i.add(this.k.onDidChangeConfiguration(c=>{(c.affectsConfiguration(E.$Kl)||c.affectsConfiguration(E.$Ml)||c.affectsConfiguration(E.$Ll))&&this.m()}))}setExperimentProperty(h,f){this.d[h]=f}m(){let h=(0,l.$6o)(this.k);const f=this.l.enabledTelemetryLevels;if(f){this.h=this.sendErrorTelemetry?f.error:!1;const u=f.usage?3:f.error?2:0;h=Math.min(h,u)}this.g=h}get sendErrorTelemetry(){return this.h}get telemetryLevel(){return this.g}dispose(){this.i.dispose()}n(h,f,u){this.g<f||(u=(0,N.$Hn)(u,this.d),u=(0,l.$_o)(u,this.j),u=(0,N.$Hn)(u,this.c),this.b.forEach(c=>c.log(h,u)))}o(h,f,u){this.g<f||(u=(0,N.$Hn)(u,this.d),u=(0,l.$_o)(u,this.j),u=(0,N.$Hn)(u,this.c),this.b.forEach(c=>{c.capture(h,u)}))}registerAuthId(h){this.b.forEach(f=>f.registerAuthId(h))}publicLog(h,f){this.n(h,3,f)}publicLog2(h,f){this.publicLog(h,f)}publicLogError(h,f){this.h&&this.n(h,2,f)}publicLogError2(h,f){this.publicLogError(h,f)}publicLogCapture(h,f){this.o(h,3,f)}};e.$Lr=g,e.$Lr=g=Se([Z(1,P.$Bi),Z(2,C.$Ij)],g);function p(){const w=(0,I.localize)(0,null,m.default.nameLong),h=m.default.privacyStatementUrl?(0,I.localize)(2,null,"https://aka.ms/vscode-telemetry",m.default.privacyStatementUrl):(0,I.localize)(1,null,"https://aka.ms/vscode-telemetry"),f=L.$o?"":(0,I.localize)(3,null),u=(0,I.localize)(4,null),c=(0,I.localize)(5,null),b=(0,I.localize)(6,null),i=(0,I.localize)(7,null),r=`
|       | ${u} | ${c} | ${b} |
|:------|:---------------------:|:---------------:|:--------------:|
| all   |            \u2713          |        \u2713        |        \u2713       |
| error |            \u2713          |        \u2713        |        -       |
| crash |            \u2713          |        -        |        -       |
| off   |            -          |        -        |        -       |
`,n=(0,I.localize)(8,null);return`
${w} ${h} ${f}

&nbsp;

${i}
${r}

&nbsp;

${n}
`}k.$Qn.as(R.$Vn.Configuration).registerConfiguration({id:E.$Jl,order:1,type:"object",title:(0,I.localize)(9,null),properties:{[E.$Kl]:{type:"string",enum:["all","error","crash","off"],enumDescriptions:[(0,I.localize)(10,null),(0,I.localize)(11,null),(0,I.localize)(12,null),(0,I.localize)(13,null)],markdownDescription:p(),default:"all",restricted:!0,scope:1,tags:["usesOnlineServices","telemetry"]}}}),k.$Qn.as(R.$Vn.Configuration).registerConfiguration({id:E.$Jl,order:110,type:"object",title:(0,I.localize)(14,null),properties:{[E.$Ml]:{type:"boolean",markdownDescription:m.default.privacyStatementUrl?(0,I.localize)(16,null,m.default.nameLong,m.default.privacyStatementUrl):(0,I.localize)(15,null,m.default.nameLong),default:!0,restricted:!0,markdownDeprecationMessage:(0,I.localize)(17,null,`\`#${E.$Kl}#\``),scope:1,tags:["usesOnlineServices","telemetry"]}}})}),define(ue[229],de([0,1,14,26,270,221,271]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$s4=void 0;async function P(k,E){const l=await E.request(k,N.CancellationToken.None),g=(await(0,D.$we)(l.stream)).toString(),p=l.res.statusCode??200;return{headers:l.res.headers,statusCode:p,responseData:g}}async function R(k){const E={method:k.type,headers:k.headers};return new Promise((g,p)=>{const w=L.request(k.url??"",E,h=>{h.on("data",function(f){g({headers:h.headers,statusCode:h.statusCode??200,responseData:f.toString()})}),h.on("error",function(f){p(f)})});w.write(k.data,h=>{h&&p(h)}),w.end()})}async function m(k,E,l){const g=typeof E.data=="string"?E.data:new TextDecoder().decode(E.data),p={type:"POST",headers:{...E.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(E.data).toString()},url:E.urlString,data:g};try{const w=k?await P(p,k):await R(p);l(w.statusCode,w.headers,w.responseData)}catch{l(0,{})}}class C extends j.$r4{constructor(E,l,g,p,w){console.log("FaroSystemAppender constructor");const h={sendPOST:(f,u)=>{m(E,f,u)}};super(l,g,p,w,h)}fetch(E,l){return(0,I.default)(E,l)}}e.$s4=C}),define(ue[230],de([0,1,25,94,21,15,8,23,22,108,109,110]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$kRc=void 0;let E=class{constructor(g,p,w,h,f,u){this.b=g,this.c=p,this.d=w,this.e=h,this.f=f,this.g=u,this.a=new Map}h(g){if(!this.a.has(g.id)){const p=Object.create(null);p["common.vscodemachineid"]=this.c.machineId,p["common.vscodesessionid"]=this.c.sessionId;const w=[g.id,JSON.stringify(p),g.aiKey],f=new N.$Lq(D.$qg.asFileUri("bootstrap-fork").fsPath,{serverName:"Debug Telemetry",timeout:1e3*60*5,args:w,env:{ELECTRON_RUN_AS_NODE:1,VSCODE_PIPE_LOGGING:"true",VSCODE_AMD_ENTRYPOINT:"vs/workbench/contrib/debug/node/telemetryApp"}}).getChannel("telemetryAppender"),u=[new m.$3Pc(f),new C.$mNc(this.d,this.e,this.f,this.g,`[${g.id}] `)];this.a.set(g.id,new k.$Lr({appenders:u,sendErrorTelemetry:g.sendErrorTelemetry},this.b,this.g))}return this.a.get(g.id)}publicLog(g,p,w){this.h(g).publicLog(p,w)}publicLogError(g,p,w){this.h(g).publicLogError(p,w)}};e.$kRc=E,e.$kRc=E=Se([Z(0,L.$Bi),Z(1,R.$Al),Z(2,I.$qj),Z(3,I.$rj),Z(4,j.$ci),Z(5,P.$Ij)],E)}),define(ue[80],de([0,1,3,21,4,8]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$UI=e.$TI=e.$SI=e.$RI=e.$QI=e.$PI=e.$OI=e.$NI=e.ProvidedOnAutoForward=e.$MI=e.TunnelPrivacyId=e.TunnelProtocol=e.$LI=e.$KI=void 0,e.$KI=(0,L.$8h)("tunnelService"),e.$LI=(0,L.$8h)("sharedTunnelsService");var I;(function(w){w.Http="http",w.Https="https"})(I||(e.TunnelProtocol=I={}));var P;(function(w){w.ConstantPrivate="constantPrivate",w.Private="private",w.Public="public"})(P||(e.TunnelPrivacyId=P={}));function R(w){return!!w.forwardPort}e.$MI=R;var m;(function(w){w[w.Notify=1]="Notify",w[w.OpenBrowser=2]="OpenBrowser",w[w.OpenPreview=3]="OpenPreview",w[w.Silent=4]="Silent",w[w.Ignore=5]="Ignore",w[w.OpenBrowserOnce=6]="OpenBrowserOnce"})(m||(e.ProvidedOnAutoForward=m={}));function C(w){if(w.scheme!=="http"&&w.scheme!=="https")return;const h=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(w.authority);if(h)return{address:h[1],port:+h[2]}}e.$NI=C,e.$OI=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function k(w){return e.$OI.indexOf(w)>=0}e.$PI=k,e.$QI=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function E(w){return e.$QI.indexOf(w)>=0}e.$RI=E;function l(w,h,f,u){if(f===1)return!1;if(f===2&&E(h)){const c=/(\d+)\.(\d+)\.(\d+)/g.exec(u);if(c?.length===4&&parseInt(c[1])>=18)return!1}return w<1024}e.$SI=l;class g{constructor(h,f,u){this.remoteAddress=h,this.localAddress=f,this.b=u,this.a=new D.$Wd,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}}e.$TI=g;let p=class{constructor(h,f){this.k=h,this.l=f,this.a=new D.$Wd,this.onTunnelOpened=this.a.event,this.b=new D.$Wd,this.onTunnelClosed=this.b.event,this.c=new D.$Wd,this.onAddedTunnelProvider=this.c.event,this.e=new Map,this.g=!1,this.h=!0,this.i=[],this.j=new Set}get hasTunnelProvider(){return!!this.f}get m(){const h=this.l.getValue("remote.localPortHost");return!h||h==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(h){return this.f=h,h?(this.c.fire(),{dispose:()=>{this.f=void 0,this.g=!1,this.i=[]}}):(this.g=!1,this.i=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(h){this.g=h.elevation,this.i=h.privacyOptions,this.h=h.protocol}get canChangeProtocol(){return this.h}get canElevate(){return this.g}get canChangePrivacy(){return this.i.length>0}get privacyOptions(){return this.i}get tunnels(){return this.n()}async n(){const h=[],f=Array.from(this.e.values());for(const u of f){const c=Array.from(u.values());for(const b of c){const i=await b.value;i&&typeof i!="string"&&h.push(i)}}return h}async dispose(){for(const h of this.e.values()){for(const{value:f}of h.values())await f.then(u=>typeof u!="string"?u?.dispose():void 0);h.clear()}this.e.clear()}setEnvironmentTunnel(h,f,u,c,b){this.q(h,f,Promise.resolve({tunnelRemoteHost:h,tunnelRemotePort:f,localAddress:u,privacy:c,protocol:b,dispose:()=>Promise.resolve()}))}async getExistingTunnel(h,f){(E(h)||k(h))&&(h=e.$OI[0]);const u=this.s(h,f);if(u)return++u.refcount,u.value}openTunnel(h,f,u,c,b,i=!1,r,n){this.k.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${f}:${u} on local port ${b}.`);const s=this.f??h;if(!s)return;if(f||(f="localhost"),c||(c=this.m),this.f&&this.j.has(u)){this.k.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const t=this.t(s,f,u,c,b,i,r,n);return t?t.then(o=>{if(o){if(typeof o=="string")return this.k.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.r(f,u),o}else{this.k.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.r(f,u);return}this.k.trace("ForwardedPorts: (TunnelService) New tunnel established.");const a=this.o(o);return(o.tunnelRemoteHost!==f||o.tunnelRemotePort!==u)&&this.k.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),r&&o.privacy!==r&&this.k.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(a),a}):(this.k.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),t)}o(h){return{tunnelRemotePort:h.tunnelRemotePort,tunnelRemoteHost:h.tunnelRemoteHost,tunnelLocalPort:h.tunnelLocalPort,localAddress:h.localAddress,privacy:h.privacy,protocol:h.protocol,dispose:async()=>{this.k.trace(`ForwardedPorts: (TunnelService) dispose request for ${h.tunnelRemoteHost}:${h.tunnelRemotePort} `);const f=this.e.get(h.tunnelRemoteHost);if(f){const u=f.get(h.tunnelRemotePort);u&&(u.refcount--,await this.p(h.tunnelRemoteHost,h.tunnelRemotePort,u))}}}}async p(h,f,u){if(u.refcount<=0){this.k.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${h}:${f}.`);const c=u.value.then(async b=>{b&&typeof b!="string"&&(await b.dispose(!0),this.b.fire({host:b.tunnelRemoteHost,port:b.tunnelRemotePort}))});return this.e.has(h)&&this.e.get(h).delete(f),c}}async closeTunnel(h,f){this.k.trace(`ForwardedPorts: (TunnelService) close request for ${h}:${f} `);const u=this.e.get(h);if(u&&u.has(f)){const c=u.get(f);c.refcount=0,await this.p(h,f,c)}}q(h,f,u){this.e.has(h)||this.e.set(h,new Map),this.e.get(h).set(f,{refcount:1,value:u})}async r(h,f){const u=this.e.get(h);if(u){const c=u.get(f),b=c?await c.value:void 0;(!b||typeof b=="string")&&u.delete(f),u.size===0&&this.e.delete(h)}}s(h,f){const u=[h];k(h)?(u.push(...e.$OI),u.push(...e.$QI)):E(h)&&u.push(...e.$QI);const c=u.map(b=>this.e.get(b));for(const b of c){const i=b?.get(f);if(i)return i}}canTunnel(h){return!!C(h)}u(h,f,u,c,b,i,r){this.k.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${f}:${u} on local port ${c}.`);const n=u;this.j.add(n);const s=c===void 0?u:c,t={elevationRequired:b?this.isPortPrivileged(s):!1},o={remoteAddress:{host:f,port:u},localAddressPort:c,privacy:i,public:i?i!==P.Private:void 0,protocol:r},a=h.forwardPort(o,t);return a?(this.q(f,u,a),a.finally(()=>{this.k.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.j.delete(n)})):this.j.delete(n),a}};e.$UI=p,e.$UI=p=Se([Z(0,j.$qj),Z(1,N.$Bi)],p)}),define(ue[231],de([0,1,8,80,2,7,6]),function(oe,e,D,N,L,j,I){"use strict";var P;Object.defineProperty(e,"__esModule",{value:!0}),e.$uRc=void 0;class R extends L.$Tc{constructor(){super(),this.a=null,this.b=null}async getAddress(){return this.a?this.a:(this.b||(this.b=new I.$sh),this.b.p)}setAddress(k){this.a=k,this.b&&(this.b.complete(k),this.b=null)}setTunnel(k){this.D(k)}}let m=class extends L.$Tc{static{P=this}static{this.a=0}constructor(k,E){super(),this.f=k,this.g=E,this.b=new Map,this.c=new Set}dispose(){super.dispose(),this.b.forEach(k=>k.dispose())}async createTunnel(){return{id:String(++P.a)}}async startTunnel(k,E,l,g,p,w,h){const f=new R,u=await Promise.resolve(this.f.openTunnel(k,f,l,g,p,w,h));if(!u||typeof u=="string")throw this.g.info(`[SharedProcessTunnelService] Could not create a tunnel to ${l}:${g} (remote).`),f.dispose(),new Error("Could not create tunnel");if(this.c.has(E))throw this.c.delete(E),f.dispose(),await u.dispose(),(0,j.$6)();return f.setTunnel(u),this.b.set(E,f),this.g.info(`[SharedProcessTunnelService] Created tunnel ${E}: ${u.localAddress} (local) to ${l}:${g} (remote).`),{tunnelLocalPort:u.tunnelLocalPort,localAddress:u.localAddress}}async setAddress(k,E){const l=this.b.get(k);l&&l.setAddress(E)}async destroyTunnel(k){const E=this.b.get(k);if(E){this.g.info(`[SharedProcessTunnelService] Disposing tunnel ${k}.`),this.b.delete(k),await E.dispose();return}this.c.add(k)}};e.$uRc=m,e.$uRc=m=P=Se([Z(0,N.$LI),Z(1,D.$qj)],m)}),define(ue[28],de([0,1,4]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$7k=void 0,e.$7k=(0,D.$8h)("IUriIdentityService")}),define(ue[232],de([0,1,28,185,11,20,128,3,2]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ls=void 0;class m{static{this._clock=0}constructor(E){this.uri=E,this.time=m._clock++}touch(){return this.time=m._clock++,this}}let C=class{constructor(E){this.g=E,this.c=new R.$Sc,this.f=2**16;const l=new Map,g=p=>{let w=l.get(p.scheme);return w===void 0&&(w=E.hasProvider(p)&&!this.g.hasCapability(p,1024),l.set(p.scheme,w)),w};this.c.add(P.Event.any(E.onDidChangeFileSystemProviderRegistrations,E.onDidChangeFileSystemProviderCapabilities)(p=>{l.delete(p.scheme)})),this.extUri=new j.$yg(g),this.d=new I.$ks((p,w)=>this.extUri.compare(p,w,!0),this.f)}dispose(){this.c.dispose(),this.d.clear()}asCanonicalUri(E){this.g.hasProvider(E)&&(E=(0,j.$Kg)(E));const l=this.d.get(E);return l?l.touch().uri.with({fragment:E.fragment}):(this.d.set(E,new m(E)),this.h(),E)}h(){if(this.d.size<this.f)return;const E=[...this.d.entries()].sort((g,p)=>g[1].time<p[1].time?1:g[1].time>p[1].time?-1:0);m._clock=0,this.d.clear();const l=this.f*.5;for(let g=0;g<l;g++)this.d.set(E[g][0],E[g][1].touch())}};e.$ls=C,e.$ls=C=Se([Z(0,L.$wk)],C),(0,N.$is)(D.$7k,C,1)}),define(ue[233],de([0,1,3,2,11,47,35]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$PQc=void 0;class P extends N.$Tc{constructor(m,C,k,E,l,g){super(),this.f=m,this.g=C,this.h=k,this.j=E,this.m=l,this.n=g,this.capabilities=this.g.capabilities,this.onDidChangeCapabilities=this.g.onDidChangeCapabilities,this.a=this.D(new D.$Wd),this.onDidChangeFile=this.a.event,this.b=j.$bi.forUris(()=>!(this.capabilities&1024)),this.c=new I.$Bc(p=>this.m.extUri.getComparisonKey(this.s(p))),this.q(),this.D(E.onDidChangeProfiles(()=>this.q())),this.D(this.g.onDidChangeFile(p=>this.r(p)))}q(){this.c.clear();for(const m of this.j.profiles)this.c.add(m.settingsResource),this.c.add(m.keybindingsResource),this.c.add(m.tasksResource),this.c.add(m.extensionsResource)}open(m,C){return this.g.open(this.s(m),C)}close(m){return this.g.close(m)}read(m,C,k,E,l){return this.g.read(m,C,k,E,l)}write(m,C,k,E,l){return this.g.write(m,C,k,E,l)}watch(m,C){this.b.set(m,m);const k=this.g.watch(this.s(m),C);return(0,N.$Rc)(()=>{this.b.delete(m),k.dispose()})}stat(m){return this.g.stat(this.s(m))}mkdir(m){return this.g.mkdir(this.s(m))}rename(m,C,k){return this.g.rename(this.s(m),this.s(C),k)}readFile(m,C){return this.g.readFile(this.s(m),C)}readFileStream(m,C,k){return this.g.readFileStream(this.s(m),C,k)}readdir(m){return this.g.readdir(this.s(m))}enforceAtomicReadFile(m){return this.c.has(m)}writeFile(m,C,k){return this.g.writeFile(this.s(m),C,k)}enforceAtomicWriteFile(m){return this.c.has(m)?{postfix:".vsctmp"}:!1}delete(m,C){return this.g.delete(this.s(m),C)}copy(m,C,k){if((0,L.$Ak)(this.g))return this.g.copy(this.s(m),this.s(C),k);throw new Error("copy not supported")}cloneFile(m,C){if((0,L.$Bk)(this.g))return this.g.cloneFile(this.s(m),this.s(C));throw new Error("clone not supported")}r(m){const C=[];for(const k of m){if(k.resource.scheme!==this.f)continue;const E=this.t(k.resource);this.b.findSubstr(E)&&C.push({resource:E,type:k.type,cId:k.cId})}C.length&&(this.n.debug("User data changed"),this.a.fire(C))}s(m){return m.with({scheme:this.f})}t(m){return m.with({scheme:this.h})}}e.$PQc=P}),define(ue[81],de([0,1,64]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Cjc=e.$Bjc=e.edit=void 0;function N(I,P,R,m){const C=(0,D.$An)(I,P,R,m)[0];return C&&(I=I.substring(0,C.offset)+C.content+I.substring(C.offset+C.length)),I}e.edit=N;function L(I,P,R){let m=R;for(;m>=0;){if(I.charAt(m)===P.charAt(P.length-1)&&P.length===1)return m+1;if(m--,P.length===2&&m>=0&&I.charAt(m)===P.charAt(0))return m+2}return 0}e.$Bjc=L;function j(I,P,R){let m=R;for(;m>=0;)if(I.charAt(m)===P.charAt(P.length-1)&&P.length===1||(m++,P.length===2&&m>=0&&I.charAt(m)===P.charAt(1)))return m;return I.length-1}e.$Cjc=j}),define(ue[234],de([0,1,30,49,12]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$5Lc=void 0;function j(l,g,p,w,h,f){const u=[],c=[],b=[];if(!g){const M=l.filter(({identifier:Y})=>h.every(G=>G.toLowerCase()!==Y.id.toLowerCase()));return{local:{added:u,removed:c,updated:b},remote:M.length>0?{added:M,updated:[],removed:[],all:M}:null}}l=l.map(k),g=g.map(k),p=p?p.map(k):null;const i=new Map,r=M=>{M.uuid&&i.set(M.id.toLowerCase(),M.uuid)};l.forEach(({identifier:M})=>r(M)),g.forEach(({identifier:M})=>r(M)),p?.forEach(({identifier:M})=>r(M)),w?.forEach(({identifier:M})=>r(M)),f?.forEach(M=>r(M));const n=M=>{const Y=M.identifier.uuid||i.get(M.identifier.id.toLowerCase());return Y?`uuid:${Y}`:`id:${M.identifier.id.toLowerCase()}`},s=(M,Y)=>(M.set(n(Y),Y),M),t=l.reduce(s,new Map),o=g.reduce(s,new Map),a=g.reduce((M,Y)=>s(M,(0,D.$En)(Y)),new Map),y=p?p.reduce(s,new Map):null,$=w.reduce(s,new Map),d=h.reduce((M,Y)=>{const G=i.get(Y.toLowerCase());return M.add(G?`uuid:${G}`:`id:${Y.toLowerCase()}`)},new Set),v=f?f.reduce((M,{id:Y,uuid:G})=>(G=G??i.get(Y.toLowerCase()),M.add(G?`uuid:${G}`:`id:${Y.toLowerCase()}`)),new Set):null,S=I(t,o,d,!1);if(S.added.size>0||S.removed.size>0||S.updated.size>0){const M=I(y,t,d,!1),Y=I(y,o,d,!0),G=(Q,F,te,H)=>{let J,x,se;return F.installed?(J=H.pinned,se=H.preRelease,J&&(x=H.version)):(J=te.pinned,se=te.preRelease,J&&(x=te.version)),J===void 0&&(J=F.pinned,J&&(x=F.version)),se===void 0&&(se=F.preRelease),{...H,installed:F.installed||te.installed,pinned:J,preRelease:se,version:x??(te.version&&(!F.installed||N.gt(te.version,F.version))?te.version:F.version),state:R(F,te,y?.get(Q))}};for(const Q of Y.removed.values()){const F=t.get(Q);if(!F)continue;const te=(0,L.$Vf)(y?.get(Q)),H=v&&!v.has(Q)&&te.installed;F.installed&&H?c.push(F.identifier):a.set(Q,F)}for(const Q of Y.added.values()){const F=(0,L.$Vf)(o.get(Q)),te=t.get(Q);if(te){if(S.updated.has(Q)){const H=G(Q,te,F,F);P(te,F,!1,!1)||b.push(E(H,Q)),a.set(Q,H)}}else F.installed&&u.push(E(F,Q))}for(const Q of Y.updated.values()){const F=(0,L.$Vf)(o.get(Q)),te=(0,L.$Vf)(y?.get(Q)),H=t.get(Q);if(H)if(v&&!v.has(Q)&&te.installed&&H.installed&&!F.installed)c.push(H.identifier);else{const x=G(Q,H,F,F);b.push(E(x,Q)),a.set(Q,x)}else F.installed&&u.push(E(F,Q))}for(const Q of M.added.values())Y.added.has(Q)||a.set(Q,(0,L.$Vf)(t.get(Q)));for(const Q of M.updated.values()){if(Y.removed.has(Q)||Y.updated.has(Q))continue;const F=(0,L.$Vf)(t.get(Q)),te=(0,L.$Vf)(o.get(Q));a.set(Q,G(Q,F,te,F))}for(const Q of M.removed.values())Y.updated.has(Q)||Y.removed.has(Q)||$.has(Q)||(0,L.$Vf)(o.get(Q)).installed&&v&&(v.has(Q)||!(0,L.$Vf)(y?.get(Q)).installed||a.delete(Q))}const A=[],T=I(o,a,new Set,!0),q=T.added.size>0||T.updated.size>0||T.removed.size>0;return q&&a.forEach((M,Y)=>A.push(E(M,Y))),{local:{added:u,removed:c,updated:b},remote:q?{added:[...T.added].map(M=>a.get(M)),updated:[...T.updated].map(M=>a.get(M)),removed:[...T.removed].map(M=>o.get(M)),all:A}:null}}e.$5Lc=j;function I(l,g,p,w){const h=l?[...l.keys()].filter(i=>!p.has(i)):[],f=[...g.keys()].filter(i=>!p.has(i)),u=f.filter(i=>!h.includes(i)).reduce((i,r)=>(i.add(r),i),new Set),c=h.filter(i=>!f.includes(i)).reduce((i,r)=>(i.add(r),i),new Set),b=new Set;for(const i of h){if(c.has(i))continue;const r=l.get(i),n=g.get(i);(!n||!P(r,n,w,!0))&&b.add(i)}return{added:u,removed:c,updated:b}}function P(l,g,p,w){return!(l.disabled!==g.disabled||!!l.isApplicationScoped!=!!g.isApplicationScoped||w&&l.installed!==g.installed||l.installed&&g.installed&&(l.preRelease!==g.preRelease||l.pinned!==g.pinned||g.pinned&&l.version!==g.version)||!C(l.state,g.state)||p&&l.version!==g.version)}function R(l,g,p){const w=l.state,h=g.state,f=p?.state;if(!g.version||w&&N.gt(l.version,g.version))return w;if(h&&N.gt(g.version,l.version)||!w)return h;if(!h)return w;const u=(0,D.$En)(w),c=f?m(f,h):{added:Object.keys(h).reduce((i,r)=>(i.add(r),i),new Set),removed:new Set,updated:new Set},b=f?m(f,w):{added:Object.keys(w).reduce((i,r)=>(i.add(r),i),new Set),removed:new Set,updated:new Set};for(const i of[...c.added.values(),...c.updated.values()])u[i]=h[i];for(const i of c.removed.values())b.updated.has(i)||delete u[i];return u}function m(l,g){const p=Object.keys(l),w=Object.keys(g),h=w.filter(c=>!p.includes(c)).reduce((c,b)=>(c.add(b),c),new Set),f=p.filter(c=>!w.includes(c)).reduce((c,b)=>(c.add(b),c),new Set),u=new Set;for(const c of p){if(f.has(c))continue;const b=l[c],i=g[c];(0,D.$In)(b,i)||u.add(c)}return{added:h,removed:f,updated:u}}function C(l={},g={}){const{added:p,removed:w,updated:h}=m(l,g);return p.size===0&&w.size===0&&h.size===0}function k(l){return{...l,disabled:!!l.disabled,installed:!!l.installed}}function E(l,g){const p={...l,identifier:{id:l.identifier.id,uuid:g.startsWith("uuid:")?g.substring(5):void 0},preRelease:!!l.preRelease,pinned:!!l.pinned};return l.disabled||delete p.disabled,l.installed||delete p.installed,l.state||delete p.state,l.isApplicationScoped||delete p.isApplicationScoped,p}}),define(ue[111],de([0,1,17,21,4]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Clc=e.$Blc=void 0,e.$Blc=(0,L.$8h)("IIgnoredExtensionsManagementService");let j=class{constructor(P){this.a=P}hasToNeverSyncExtension(P){return this.b().includes(P.toLowerCase())}hasToAlwaysSyncExtension(P){return this.b().includes(`-${P.toLowerCase()}`)}updateIgnoredExtensions(P,R){let m=[...this.a.getValue("settingsSync.ignoredExtensions")].map(C=>C.toLowerCase());return m=m.filter(C=>C!==P&&C!==`-${P}`),R&&m.push(P.toLowerCase()),this.a.updateValue("settingsSync.ignoredExtensions",m.length?m:void 0,2)}updateSynchronizedExtensions(P,R){let m=[...this.a.getValue("settingsSync.ignoredExtensions")].map(C=>C.toLowerCase());return m=m.filter(C=>C!==P&&C!==`-${P}`),R&&m.push(`-${P.toLowerCase()}`),this.a.updateValue("settingsSync.ignoredExtensions",m.length?m:void 0,2)}getIgnoredExtensions(P){const R=P.filter(E=>E.isMachineScoped).map(E=>E.identifier.id.toLowerCase()),m=this.b().map(E=>E.toLowerCase()),C=[],k=[];if(Array.isArray(m))for(const E of m)E.startsWith("-")?k.push(E.substring(1)):C.push(E);return(0,D.$Mb)([...R,...C].filter(E=>!k.includes(E)))}b(){let P=this.a.inspect("settingsSync.ignoredExtensions").userValue;return P!==void 0||(P=this.a.inspect("sync.ignoredExtensions").userValue,P!==void 0)?P:(this.a.getValue("settingsSync.ignoredExtensions")||[]).map(R=>R.toLowerCase())}};e.$Clc=j,e.$Clc=j=Se([Z(0,N.$Bi)],j)}),define(ue[235],de([0,1,17,34,30,95,81]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$$Lc=void 0;function P(c){return(0,N.$ln)(c)||[]}async function R(c,b,i,r,n){const s=P(c),t=P(b),o=i?P(i):null,a=[...s,...t,...o||[]].map(G=>G.key),y=await n.resolveUserBindings(a),$=C(s,t,o,y);if(!$.hasLocalForwarded&&!$.hasRemoteForwarded)return{mergeContent:c,hasChanges:!1,hasConflicts:!1};if(!$.hasLocalForwarded&&$.hasRemoteForwarded)return{mergeContent:b,hasChanges:!0,hasConflicts:!1};if($.hasLocalForwarded&&!$.hasRemoteForwarded)return{mergeContent:c,hasChanges:!0,hasConflicts:!1};const d=E(s),v=E(t),S=o?E(o):null,A=g(d,v,y),T=S?g(S,d,y):{added:[...d.keys()].reduce((G,Q)=>(G.add(Q),G),new Set),removed:new Set,updated:new Set},q=S?g(S,v,y):{added:[...v.keys()].reduce((G,Q)=>(G.add(Q),G),new Set),removed:new Set,updated:new Set},M=m(A,T,q);let Y=c;for(const G of M.removed.values())M.conflicts.has(G)||(Y=f(Y,G,r));for(const G of M.added.values()){if(M.conflicts.has(G))continue;const Q=v.get(G);if(Q.some(F=>F.command!==`-${G}`&&$.conflicts.has(y[F.key]))){M.conflicts.add(G);continue}Y=h(Y,Q,r)}for(const G of M.updated.values()){if(M.conflicts.has(G))continue;const Q=v.get(G);if(Q.some(F=>F.command!==`-${G}`&&$.conflicts.has(y[F.key]))){M.conflicts.add(G);continue}Y=u(Y,G,Q,r)}return{mergeContent:Y,hasChanges:!0,hasConflicts:M.conflicts.size>0}}e.$$Lc=R;function m(c,b,i){const r=new Set,n=new Set,s=new Set,t=new Set;for(const o of b.removed.values())i.updated.has(o)&&t.add(o);for(const o of i.removed.values())t.has(o)||(b.updated.has(o)?t.add(o):n.add(o));for(const o of b.added.values())t.has(o)||i.added.has(o)&&c.updated.has(o)&&t.add(o);for(const o of i.added.values())t.has(o)||(b.added.has(o)?c.updated.has(o)&&t.add(o):r.add(o));for(const o of b.updated.values())t.has(o)||i.updated.has(o)&&c.updated.has(o)&&t.add(o);for(const o of i.updated.values())t.has(o)||(b.updated.has(o)?c.updated.has(o)&&t.add(o):s.add(o));return{added:r,removed:n,updated:s,conflicts:t}}function C(c,b,i,r){const n=new Set,s=k(c,r),t=k(b,r),o=i?k(i,r):null,a=l(s,t);if(a.added.size===0&&a.removed.size===0&&a.updated.size===0)return{hasLocalForwarded:!1,hasRemoteForwarded:!1,added:n,removed:n,updated:n,conflicts:n};const y=o?l(o,s):{added:[...s.keys()].reduce((T,q)=>(T.add(q),T),new Set),removed:new Set,updated:new Set};if(y.added.size===0&&y.removed.size===0&&y.updated.size===0)return{hasLocalForwarded:!1,hasRemoteForwarded:!0,added:n,removed:n,updated:n,conflicts:n};const $=o?l(o,t):{added:[...t.keys()].reduce((T,q)=>(T.add(q),T),new Set),removed:new Set,updated:new Set};if($.added.size===0&&$.removed.size===0&&$.updated.size===0)return{hasLocalForwarded:!0,hasRemoteForwarded:!1,added:n,removed:n,updated:n,conflicts:n};const{added:d,removed:v,updated:S,conflicts:A}=m(a,y,$);return{hasLocalForwarded:!0,hasRemoteForwarded:!0,added:d,removed:v,updated:S,conflicts:A}}function k(c,b){const i=new Map;for(const r of c){const n=b[r.key];let s=i.get(n);s||(s=[],i.set(n,s)),s.push(r)}return i}function E(c){const b=new Map;for(const i of c){const r=i.command[0]==="-"?i.command.substring(1):i.command;let n=b.get(r);n||(n=[],b.set(r,n)),n.push(i)}return b}function l(c,b){const i=[...c.keys()],r=[...b.keys()],n=r.filter(o=>!i.includes(o)).reduce((o,a)=>(o.add(a),o),new Set),s=i.filter(o=>!r.includes(o)).reduce((o,a)=>(o.add(a),o),new Set),t=new Set;for(const o of i){if(s.has(o))continue;const a=c.get(o).map($=>({...$,key:o})),y=b.get(o).map($=>({...$,key:o}));(0,D.$ub)(a,y,($,d)=>w($,d))||t.add(o)}return{added:n,removed:s,updated:t}}function g(c,b,i){const r=[...c.keys()],n=[...b.keys()],s=n.filter(a=>!r.includes(a)).reduce((a,y)=>(a.add(y),a),new Set),t=r.filter(a=>!n.includes(a)).reduce((a,y)=>(a.add(y),a),new Set),o=new Set;for(const a of r){if(t.has(a))continue;const y=c.get(a).map(d=>({...d,key:i[d.key]})),$=b.get(a).map(d=>({...d,key:i[d.key]}));p(y,$)||o.add(a)}return{added:s,removed:t,updated:o}}function p(c,b){return!(!(0,D.$ub)(c.filter(({command:i})=>i[0]!=="-"),b.filter(({command:i})=>i[0]!=="-"),(i,r)=>w(i,r))||!(0,D.$ub)(c.filter(({command:i})=>i[0]==="-"),b.filter(({command:i})=>i[0]==="-"),(i,r)=>w(i,r)))}function w(c,b){if(c.command!==b.command||c.key!==b.key)return!1;const i=j.$6i.deserialize(c.when),r=j.$6i.deserialize(b.when);return!(i&&!r||!i&&r||i&&r&&!i.equals(r)||!L.$In(c.args,b.args))}function h(c,b,i){for(const r of b)c=I.edit(c,[-1],r,i);return c}function f(c,b,i){const r=P(c);for(let n=r.length-1;n>=0;n--)(r[n].command===b||r[n].command===`-${b}`)&&(c=I.edit(c,[n],void 0,i));return c}function u(c,b,i,r){const n=P(c),s=n.findIndex(t=>t.command===b||t.command===`-${b}`);for(let t=n.length-1;t>=0;t--)(n[t].command===b||n[t].command===`-${b}`)&&(c=I.edit(c,[t],void 0,r));for(let t=i.length-1;t>=0;t--)c=I.edit(c,[s],i[t],r);return c}}),define(ue[236],de([0,1]),function(oe,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$gMc=e.$fMc=void 0;function D(j,I,P){const R={},m={},C=new Set;if(!I)return{local:{added:R,updated:m,removed:[...C.values()]},remote:{added:j,updated:{},removed:[]},conflicts:[]};const k=N(j,I);if(k.added.size===0&&k.removed.size===0&&k.updated.size===0)return{local:{added:R,updated:m,removed:[...C.values()]},remote:{added:{},updated:{},removed:[]},conflicts:[]};const E=N(P,j),l=N(P,I),g={},p={},w=new Set,h=new Set;for(const f of E.removed.values())l.updated.has(f)?R[f]=I[f]:w.add(f);for(const f of l.removed.values())h.has(f)||(E.updated.has(f)?h.add(f):C.add(f));for(const f of E.updated.values())h.has(f)||(l.updated.has(f)?k.updated.has(f)&&h.add(f):p[f]=j[f]);for(const f of l.updated.values())h.has(f)||(E.updated.has(f)?k.updated.has(f)&&h.add(f):j[f]!==void 0&&(m[f]=I[f]));for(const f of E.added.values())h.has(f)||(l.added.has(f)?k.updated.has(f)&&h.add(f):g[f]=j[f]);for(const f of l.added.values())h.has(f)||(E.added.has(f)?k.updated.has(f)&&h.add(f):R[f]=I[f]);return{local:{added:R,removed:[...C.values()],updated:m},remote:{added:g,removed:[...w.values()],updated:p},conflicts:[...h.values()]}}e.$fMc=D;function N(j,I){const P=j?Object.keys(j):[],R=I?Object.keys(I):[],m=R.filter(E=>!P.includes(E)).reduce((E,l)=>(E.add(l),E),new Set),C=P.filter(E=>!R.includes(E)).reduce((E,l)=>(E.add(l),E),new Set),k=new Set;for(const E of P){if(C.has(E))continue;const l=j[E],g=I[E];l!==g&&k.add(E)}return{added:m,removed:C,updated:k}}function L(j,I){const{added:P,removed:R,updated:m}=N(j,I);return P.size===0&&R.size===0&&m.size===0}e.$gMc=L}),define(ue[237],de([0,1,30]),function(oe,e,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$3Nc=void 0;function N(j,I,P,R){const m={added:[],removed:[],updated:[]};let C={added:[],removed:[],updated:[]};if(!I){const E=j.filter(({id:l})=>!R.includes(l));return E.length?C.added=E:C=null,{local:m,remote:C}}const k=L(j,I,R);if(k.added.length>0||k.removed.length>0||k.updated.length>0){const E=L(P,j,R),l=L(P,I,R);for(const g of l.removed){const p=j.find(w=>w.id===g);p&&m.removed.push(p)}for(const g of l.added){const p=I.find(w=>w.id===g);E.added.includes(g)?k.updated.includes(g)&&m.updated.push(p):m.added.push(p)}for(const g of l.updated)m.updated.push(I.find(p=>p.id===g));for(const g of E.added)l.added.includes(g)||C.added.push(j.find(p=>p.id===g));for(const g of E.updated)l.removed.includes(g)||l.updated.includes(g)||C.updated.push(j.find(p=>p.id===g));for(const g of E.removed){const p=I.find(w=>w.id===g);p&&C.removed.push(p)}}return C.added.length===0&&C.removed.length===0&&C.updated.length===0&&(C=null),{local:m,remote:C}}e.$3Nc=N;function L(j,I,P){j=j?j.filter(({id:l})=>!P.includes(l)):[],I=I.filter(({id:l})=>!P.includes(l));const R=j.map(({id:l})=>l),m=I.map(({id:l})=>l),C=m.filter(l=>!R.includes(l)),k=R.filter(l=>!m.includes(l)),E=[];for(const{id:l,name:g,shortName:p,icon:w,useDefaultFlags:h}of j){if(k.includes(l))continue;const f=I.find(u=>u.id===l);(!f||f.name!==g||f.shortName!==p||f.icon!==w||!(0,D.$In)(f.useDefaultFlags,h))&&E.push(l)}return{added:C,removed:k,updated:E}}}),define(ue[24],de([0,1,17,12,173,44,29,4,103,41]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$iTb=e.$hTb=e.$gTb=e.$fTb=e.$eTb=e.$dTb=e.$cTb=e.$bTb=e.$aTb=e.$_Sb=e.$$Sb=e.MergeState=e.Change=e.SyncStatus=e.$0Sb=e.$9Sb=e.$8Sb=e.UserDataSyncErrorCode=e.$7Sb=e.$6Sb=e.$5Sb=e.$4Sb=e.$3Sb=e.$2Sb=e.$1Sb=e.$ZSb=e.$YSb=e.SyncResource=e.$XSb=e.$WSb=e.$VSb=e.$USb=e.$TSb=e.$SSb=void 0;function C(){const t=m.$Qn.as(j.$Vn.Configuration).getConfigurationProperties();return Object.keys(t).filter(o=>!!t[o].disallowSyncIgnore)}e.$SSb=C;function k(){const t=m.$Qn.as(j.$Vn.Configuration).getConfigurationProperties(),o=Object.keys(t).filter($=>!!t[$].ignoreSync),a=Object.keys(t).filter($=>t[$].scope===2||t[$].scope===6),y=C();return(0,D.$Mb)([...o,...a,...y])}e.$TSb=k,e.$USb="settingsSync",e.$VSb="settingsSync.keybindingsPerPlatform";function E(){const t="vscode://schemas/ignoredSettings",o=m.$Qn.as(j.$Vn.Configuration);o.registerConfiguration({id:"settingsSync",order:30,title:(0,L.localize)(0,null),type:"object",properties:{[e.$VSb]:{type:"boolean",description:(0,L.localize)(1,null),default:!0,scope:1,tags:["sync","usesOnlineServices"]},"settingsSync.ignoredExtensions":{type:"array",markdownDescription:(0,L.localize)(2,null),items:[{type:"string",pattern:I.$xo,errorMessage:(0,L.localize)(3,null)}],default:[],scope:1,uniqueItems:!0,disallowSyncIgnore:!0,tags:["sync","usesOnlineServices"]},"settingsSync.ignoredSettings":{type:"array",description:(0,L.localize)(4,null),default:[],scope:1,$ref:t,additionalProperties:!0,uniqueItems:!0,disallowSyncIgnore:!0,tags:["sync","usesOnlineServices"]}}});const a=m.$Qn.as(R.$Rn.JSONContribution),y=()=>{const $=C(),d=k(),v=Object.keys(j.$Wn.properties).filter(T=>!d.includes(T)),S=d.filter(T=>!$.includes(T)),A={items:{type:"string",enum:[...v,...S.map(T=>`-${T}`)]}};a.registerSchema(t,A)};return o.onDidUpdateConfiguration(()=>y())}e.$WSb=E;function l(t){return t&&(0,N.$Mf)(t)&&(0,N.$Kf)(t.id)&&Array.isArray(t.scopes)}e.$XSb=l;var g;(function(t){t.Settings="settings",t.Keybindings="keybindings",t.Snippets="snippets",t.Tasks="tasks",t.Extensions="extensions",t.GlobalState="globalState",t.Profiles="profiles",t.WorkspaceState="workspaceState"})(g||(e.SyncResource=g={})),e.$YSb=["settings","keybindings","snippets","tasks","extensions","globalState","profiles"];function p(t,...o){return t?[t,...o]:o}e.$ZSb=p;function w(t,o,a,y){return y.joinPath(a.userDataSyncHome,...p(t,o,`lastSync${o}.json`))}e.$1Sb=w,e.$2Sb=(0,P.$8h)("IUserDataSyncStoreManagementService"),e.$3Sb=(0,P.$8h)("IUserDataSyncStoreService"),e.$4Sb=(0,P.$8h)("IUserDataSyncLocalStoreService"),e.$5Sb="x-operation-id",e.$6Sb="X-Execution-Id";function h(t){const o={};return o[e.$6Sb]=t,o}e.$7Sb=h;var f;(function(t){t.Unauthorized="Unauthorized",t.Forbidden="Forbidden",t.NotFound="NotFound",t.MethodNotFound="MethodNotFound",t.Conflict="Conflict",t.Gone="Gone",t.PreconditionFailed="PreconditionFailed",t.TooLarge="TooLarge",t.UpgradeRequired="UpgradeRequired",t.PreconditionRequired="PreconditionRequired",t.TooManyRequests="RemoteTooManyRequests",t.TooManyRequestsAndRetryAfter="TooManyRequestsAndRetryAfter",t.RequestFailed="RequestFailed",t.RequestCanceled="RequestCanceled",t.RequestTimeout="RequestTimeout",t.RequestProtocolNotSupported="RequestProtocolNotSupported",t.RequestPathNotEscaped="RequestPathNotEscaped",t.RequestHeadersNotObject="RequestHeadersNotObject",t.NoCollection="NoCollection",t.NoRef="NoRef",t.EmptyResponse="EmptyResponse",t.TurnedOff="TurnedOff",t.SessionExpired="SessionExpired",t.ServiceChanged="ServiceChanged",t.DefaultServiceChanged="DefaultServiceChanged",t.LocalTooManyProfiles="LocalTooManyProfiles",t.LocalTooManyRequests="LocalTooManyRequests",t.LocalPreconditionFailed="LocalPreconditionFailed",t.LocalInvalidContent="LocalInvalidContent",t.LocalError="LocalError",t.IncompatibleLocalContent="IncompatibleLocalContent",t.IncompatibleRemoteContent="IncompatibleRemoteContent",t.Unknown="Unknown"})(f||(e.UserDataSyncErrorCode=f={}));class u extends Error{constructor(o,a,y,$){super(o),this.code=a,this.resource=y,this.operationId=$,this.name=`${this.code} (UserDataSyncError) syncResource:${this.resource||"unknown"} operationId:${this.operationId||"unknown"}`}}e.$8Sb=u;class c extends u{constructor(o,a,y,$,d){super(o,y,void 0,d),this.url=a,this.serverCode=$}}e.$9Sb=c;class b extends u{constructor(o,a){super(o,a)}}e.$0Sb=b,function(t){function o(a){if(a instanceof t)return a;const y=/^(.+) \(UserDataSyncError\) syncResource:(.+) operationId:(.+)$/.exec(a.name);if(y&&y[1]){const $=y[2]==="unknown"?void 0:y[2],d=y[3]==="unknown"?void 0:y[3];return new t(a.message,y[1],$,d)}return new t(a.message,"Unknown")}t.toUserDataSyncError=o}(u||(e.$8Sb=u={}));var i;(function(t){t.Uninitialized="uninitialized",t.Idle="idle",t.Syncing="syncing",t.HasConflicts="hasConflicts"})(i||(e.SyncStatus=i={}));var r;(function(t){t[t.None=0]="None",t[t.Added=1]="Added",t[t.Modified=2]="Modified",t[t.Deleted=3]="Deleted"})(r||(e.Change=r={}));var n;(function(t){t.Preview="preview",t.Conflict="conflict",t.Accepted="accepted"})(n||(e.MergeState=n={})),e.$$Sb="sync.store.url.type";function s(t){return`sync.enable.${t}`}e.$_Sb=s,e.$aTb=(0,P.$8h)("IUserDataSyncEnablementService"),e.$bTb=(0,P.$8h)("IUserDataSyncService"),e.$cTb=(0,P.$8h)("IUserDataSyncResourceProviderService"),e.$dTb=(0,P.$8h)("IUserDataAutoSyncService"),e.$eTb=(0,P.$8h)("IUserDataSyncUtilService"),e.$fTb=(0,P.$8h)("IUserDataSyncLogService"),e.$gTb="userDataSync",e.$hTb="vscode-userdata-sync",e.$iTb="preview"}),define(ue[238],de([0,1,30,24]),function(oe,e,D,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ykc=void 0;function L(I,P,R,m,C){if(!P)return{remote:{added:Object.keys(I),removed:[],updated:[],all:Object.keys(I).length>0?I:null},local:{added:{},removed:[],updated:{}}};const k=j(I,P);if(k.added.size===0&&k.removed.size===0&&k.updated.size===0)return{remote:{added:[],removed:[],updated:[],all:null},local:{added:{},removed:[],updated:{}}};const E=R?j(R,P):{added:Object.keys(P).reduce((f,u)=>(f.add(u),f),new Set),removed:new Set,updated:new Set},l=R?j(R,I):{added:Object.keys(I).reduce((f,u)=>(f.add(u),f),new Set),removed:new Set,updated:new Set},g={added:{},removed:[],updated:{}},p=D.$En(P),w=!R;for(const f of l.added.values())f!==N.$$Sb&&w&&E.added.has(f)||(p[f]=I[f]);for(const f of l.updated.values())p[f]=I[f];for(const f of l.removed.values())m.unregistered.includes(f)||delete p[f];for(const f of E.added.values()){const u=P[f];if(m.machine.includes(f)){C.info(`GlobalState: Skipped adding ${f} in local storage because it is declared as machine scoped.`);continue}if(R&&l.added.has(f))continue;const c=I[f];c&&c.value===u.value||f===N.$$Sb&&w&&l.added.has(f)||(c?g.updated[f]=u:g.added[f]=u)}for(const f of E.updated.values()){const u=P[f];if(m.machine.includes(f)){C.info(`GlobalState: Skipped updating ${f} in local storage because it is declared as machine scoped.`);continue}if(l.updated.has(f)||l.removed.has(f))continue;const c=I[f];c&&c.value===u.value||(g.updated[f]=u)}for(const f of E.removed.values()){if(m.machine.includes(f)){C.trace(`GlobalState: Skipped removing ${f} in local storage because it is declared as machine scoped.`);continue}l.updated.has(f)||l.removed.has(f)||g.removed.push(f)}const h=j(P,p);return{local:g,remote:{added:[...h.added],updated:[...h.updated],removed:[...h.removed],all:h.added.size===0&&h.removed.size===0&&h.updated.size===0?null:p}}}e.$Ykc=L;function j(I,P){const R=Object.keys(I),m=Object.keys(P),C=m.filter(l=>!R.includes(l)).reduce((l,g)=>(l.add(g),l),new Set),k=R.filter(l=>!m.includes(l)).reduce((l,g)=>(l.add(g),l),new Set),E=new Set;for(const l of R){if(k.has(l))continue;const g=I[l],p=P[l];D.$In(g,p)||E.add(l)}return{added:C,removed:k,updated:E}}}),define(ue[239],de([0,1,17,34,64,42,30,81,24]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ijc=e.$Hjc=e.$Gjc=e.$Fjc=e.$Ejc=e.$Djc=void 0;function m(a,y,$){let d=[];$?d=k($):d=C(y);const v=[],S=[...(0,R.$SSb)()];if(Array.isArray(d))for(const A of d)A.startsWith("-")?S.push(A.substring(1)):v.push(A);return(0,D.$Mb)([...a,...v].filter(A=>!S.includes(A)))}e.$Djc=m;function C(a){let y=a.inspect("settingsSync.ignoredSettings").userValue;return y!==void 0||(y=a.inspect("sync.ignoredSettings").userValue,y!==void 0)?y:a.getValue("settingsSync.ignoredSettings")||[]}function k(a){const y=(0,N.$ln)(a);return y?y["settingsSync.ignoredSettings"]||y["sync.ignoredSettings"]||[]:[]}function E(a,y){const $=(0,N.$ln)(a)||{};let d="{}";for(const v of Object.keys($)){const S=(0,L.$An)(d,[v],$[v],y);d=(0,L.$Dn)(d,S)}return d}e.$Ejc=E;function l(a,y,$,d){if($.length){const v=o(y),S=(0,N.$ln)(y)||{},A=(0,N.$ln)(a);if(!A)return a;const T=[];for(const q of $){const M=S[q],Y=A[q];M===void 0?a=P.edit(a,[q],void 0,d):Y!==void 0?a=P.edit(a,[q],M,d):T.push(i(q,v))}T.sort((q,M)=>q.startOffset-M.startOffset),T.forEach(q=>a=f(q.setting.key,y,a,d))}return a}e.$Fjc=l;function g(a,y,$,d,v,S){const A=l(a,y,d,S),T=$!==A,q=$!==y;if(!T&&!q)return{conflictsSettings:[],localContent:null,remoteContent:null,hasConflicts:!1};if(T&&!q)return{conflictsSettings:[],localContent:null,remoteContent:A,hasConflicts:!1};if(q&&!T)return{conflictsSettings:[],localContent:l(y,a,d,S),remoteContent:null,hasConflicts:!1};if($===null&&w(a)){const O=p(a,y,d)?null:l(y,a,d,S);return{conflictsSettings:[],localContent:O,remoteContent:null,hasConflicts:!1}}let M=a,Y=y;const G=(0,N.$ln)(a),Q=(0,N.$ln)(y),F=$?(0,N.$ln)($):null,te=d.reduce((O,W)=>(O.add(W),O),new Set),H=h(G,Q,te),J=h(F,G,te),x=h(F,Q,te),se=new Map,V=new Set,ne=O=>{V.add(O);const W=v.filter(({key:B})=>B===O)[0];W?(M=P.edit(M,[O],W.value,S),Y=P.edit(Y,[O],W.value,S)):se.set(O,{key:O,localValue:G[O],remoteValue:Q[O]})};for(const O of J.removed.values())x.updated.has(O)?ne(O):Y=P.edit(Y,[O],void 0,S);for(const O of x.removed.values())V.has(O)||(J.updated.has(O)?ne(O):M=P.edit(M,[O],void 0,S));for(const O of J.updated.values())V.has(O)||(x.updated.has(O)?H.updated.has(O)&&ne(O):Y=P.edit(Y,[O],G[O],S));for(const O of x.updated.values())V.has(O)||(J.updated.has(O)?H.updated.has(O)&&ne(O):M=P.edit(M,[O],Q[O],S));for(const O of J.added.values())V.has(O)||(x.added.has(O)?H.updated.has(O)&&ne(O):Y=f(O,M,Y,S));for(const O of x.added.values())V.has(O)||(J.added.has(O)?H.updated.has(O)&&ne(O):M=f(O,Y,M,S));const K=se.size>0||!p(M,Y,d),z=K||!p(M,a,[]),U=K||!p(Y,y,[]);return{localContent:z?M:null,remoteContent:U?Y:null,conflictsSettings:[...se.values()],hasConflicts:K}}e.$Gjc=g;function p(a,y,$){if(a===y)return!0;const d=(0,N.$ln)(a),v=(0,N.$ln)(y),S=$.reduce((q,M)=>(q.add(M),q),new Set),A=o(a).filter(q=>!(q.setting&&S.has(q.setting.key))),T=o(y).filter(q=>!(q.setting&&S.has(q.setting.key)));if(A.length!==T.length)return!1;for(let q=0;q<A.length;q++){const M=A[q],Y=T[q];if(M.setting&&Y.setting){if(M.setting.key!==Y.setting.key||!I.$In(d[M.setting.key],v[M.setting.key]))return!1}else if(!M.setting&&!Y.setting){if(M.value!==Y.value)return!1}else return!1}return!0}function w(a){return a?o(a).length===0:!0}e.$Hjc=w;function h(a,y,$){const d=a?Object.keys(a).filter(q=>!$.has(q)):[],v=Object.keys(y).filter(q=>!$.has(q)),S=v.filter(q=>!d.includes(q)).reduce((q,M)=>(q.add(M),q),new Set),A=d.filter(q=>!v.includes(q)).reduce((q,M)=>(q.add(M),q),new Set),T=new Set;if(a)for(const q of d){if(A.has(q))continue;const M=a[q],Y=y[q];I.$In(M,Y)||T.add(q)}return{added:S,removed:A,updated:T}}function f(a,y,$,d){const v=(0,N.$ln)(y),S=o(y),A=o($),T=u(a,S,A);return c($,a,v[a],T,A,d)}e.$Ijc=f;function u(a,y,$){const d=y.findIndex(S=>S.setting?.key===a),v=y[d-1];if(v){if(v.setting){const A=i(v.setting.key,$);if(A)return{index:$.indexOf(A),insertAfter:!0}}else{const A=r(d,y);if(A){const T=i(A.setting.key,$);if(T){const q=n($.indexOf(T),$),M=s(y,A,y[d]);if(q){const Y=s($,T,q),G=t(M,Y);return G?{index:$.indexOf(G),insertAfter:!0}:{index:$.indexOf(q),insertAfter:!1}}else{const Y=s($,T,$[$.length-1]),G=t(M,Y);return G?{index:$.indexOf(G),insertAfter:!0}:{index:$.length-1,insertAfter:!0}}}}}const S=y[d+1];if(S)if(S.setting){const A=i(S.setting.key,$);if(A)return{index:$.indexOf(A),insertAfter:!1}}else{const A=n(d,y);if(A){const T=i(A.setting.key,$);if(T){const q=r($.indexOf(T),$),M=s(y,y[d],A);if(q){const Y=s($,q,T),G=t(M.reverse(),Y.reverse());return G?{index:$.indexOf(G),insertAfter:!1}:{index:$.indexOf(q),insertAfter:!0}}else{const Y=s($,$[0],T),G=t(M.reverse(),Y.reverse());return G?{index:$.indexOf(G),insertAfter:!1}:{index:0,insertAfter:!1}}}}}}return{index:$.length-1,insertAfter:!0}}function c(a,y,$,d,v,S){let A;return d.index===-1?A=(0,L.$An)(a,[y],$,S):A=b(a,y,$,d,v,S).map(T=>(0,L.$Bn)(a,T,S)[0]),(0,L.$Dn)(a,A)}function b(a,y,$,d,v,S){const A=`${JSON.stringify(y)}: ${JSON.stringify($)}`,T=(0,j.$xn)(S,a),q=v[d.index];if(d.insertAfter){const M=[];if(q.setting)M.push({offset:q.endOffset,length:0,content:","+A});else{const Y=n(d.index,v),G=r(d.index,v),Q=G?.setting?.commaOffset;G&&Q===void 0&&M.push({offset:G.endOffset,length:0,content:","});const F=Q!==void 0&&Q>q.endOffset;M.push({offset:F?Q+1:q.endOffset,length:0,content:Y?T+A+",":T+A})}return M}else{if(q.setting)return[{offset:q.startOffset,length:0,content:A+","}];const M=(v[d.index-1]&&!v[d.index-1].setting?T:"")+A+(n(d.index,v)?",":"")+T;return[{offset:q.startOffset,length:0,content:M}]}}function i(a,y){return y.filter($=>$.setting?.key===a)[0]}function r(a,y){for(let $=a-1;$>=0;$--)if(y[$].setting)return y[$]}function n(a,y){for(let $=a+1;$<y.length;$++)if(y[$].setting)return y[$]}function s(a,y,$){const d=a.indexOf(y),v=a.indexOf($);return a.filter((S,A)=>d<A&&A<v)}function t(a,y){if(a.length&&y.length){let $=0;for(;$<y.length&&$<a.length;$++)if(a[$].value!==y[$].value)return y[$-1];return y[$-1]}}function o(a){const y=[];let $=-1,d,v;const S={onObjectBegin:A=>{$++},onObjectProperty:(A,T,q)=>{$===0&&(d=T,v=A)},onObjectEnd:(A,T)=>{$--,$===0&&y.push({startOffset:d,endOffset:A+T,value:a.substring(d,A+T),setting:{key:v,commaOffset:void 0}})},onArrayBegin:(A,T)=>{$++},onArrayEnd:(A,T)=>{$--,$===0&&y.push({startOffset:d,endOffset:A+T,value:a.substring(d,A+T),setting:{key:v,commaOffset:void 0}})},onLiteralValue:(A,T,q)=>{$===0&&y.push({startOffset:d,endOffset:T+q,value:a.substring(d,T+q),setting:{key:v,commaOffset:void 0}})},onSeparator:(A,T,q)=>{if($===0&&A===","){let M=y.length-1;for(;M>=0&&!y[M].setting;M--);const Y=y[M];Y&&y.splice(M,1,{startOffset:Y.startOffset,endOffset:Y.endOffset,value:Y.value,setting:{key:Y.setting.key,commaOffset:T}})}},onComment:(A,T)=>{$===0&&y.push({startOffset:A,endOffset:A+T,value:a.substring(A,A+T)})}};return(0,N.$sn)(a,S),y}}),define(ue[82],de([0,1,3,2,4,24]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ojc=e.$njc=void 0,e.$njc=(0,L.$8h)("IUserDataSyncAccountService");let I=class extends N.$Tc{get account(){return this.a}constructor(R,m){super(),this.g=R,this.h=m,this.b=this.D(new D.$Wd),this.onDidChangeAccount=this.b.event,this.c=this.D(new D.$Wd),this.onTokenFailed=this.c.event,this.f=!1,this.D(R.onTokenFailed(C=>{this.h.info("Settings Sync auth token failed",this.account?.authenticationProviderId,this.f,C),this.updateAccount(void 0),C==="Forbidden"?this.c.fire(!0):this.c.fire(this.f),this.f=!0})),this.D(R.onTokenSucceed(()=>this.f=!1))}async updateAccount(R){(R&&this.a?R.token!==this.a.token||R.authenticationProviderId!==this.a.authenticationProviderId:R!==this.a)&&(this.a=R,this.a&&this.g.setAuthToken(this.a.token,this.a.authenticationProviderId),this.b.fire(R))}};e.$ojc=I,e.$ojc=I=Se([Z(0,j.$3Sb),Z(1,j.$fTb)],I)}),define(ue[240],de([0,1,20,174,15,8,24]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Dlc=void 0;let P=class extends j.$vj{constructor(m,C){super(),this.g=this.D(m.createLogger((0,D.$Jg)(C.logsHome,`${I.$gTb}.log`),{id:I.$gTb,name:(0,N.localize)(0,null)}))}trace(m,...C){this.g.trace(m,...C)}debug(m,...C){this.g.debug(m,...C)}info(m,...C){this.g.info(m,...C)}warn(m,...C){this.g.warn(m,...C)}error(m,...C){this.g.error(m,...C)}flush(){this.g.flush()}};e.$Dlc=P,e.$Dlc=P=Se([Z(0,j.$rj),Z(1,L.$ci)],P)}),define(ue[241],de([0,1,6,3,2]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$kQc=void 0;class j extends L.$Tc{constructor({onDidOpenMainWindow:P,onDidFocusMainWindow:R,getActiveWindowId:m}){super(),this.a=this.D(new L.$Sc),N.Event.latch(N.Event.any(P,R))(this.f,this,this.a),this.b=(0,D.$Vg)(()=>m()),(async()=>{try{const k=await this.b;this.c=typeof this.c=="number"?this.c:k}catch{}finally{this.b=void 0}})()}f(P){this.b&&(this.b.cancel(),this.b=void 0),this.c=P}async getActiveClientId(){return`window:${this.b?await this.b:this.c}`}}e.$kQc=j}),define(ue[112],de([0,1,177,16,47,20,10,4,25]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Ai=e.$zi=e.$yi=e.$xi=e.$wi=e.$vi=e.$ui=e.$ti=e.$si=e.$ri=e.$qi=e.$pi=e.$oi=e.$ni=e.$mi=e.WorkbenchState=e.$li=e.$ki=e.$ji=e.$ii=e.$hi=e.$gi=e.$fi=e.$ei=void 0,e.$ei=(0,P.$8h)("contextService");function m(s){const t=s;return typeof t?.id=="string"&&I.URI.isUri(t.uri)}e.$fi=m;function C(s){return typeof s?.id=="string"&&!m(s)&&!E(s)}e.$gi=C,e.$hi={id:"ext-dev"},e.$ii={id:"empty-window"};function k(s,t){if(typeof s=="string"||typeof s>"u")return typeof s=="string"?{id:(0,N.$nc)(s)}:t?e.$hi:e.$ii;const o=s;return o.configuration?{id:o.id,configPath:o.configuration}:o.folders.length===1?{id:o.id,uri:o.folders[0].uri}:{id:o.id}}e.$ji=k;function E(s){const t=s;return typeof t?.id=="string"&&I.URI.isUri(t.configPath)}e.$ki=E;function l(s){const t=s;if(t?.uri)return{id:t.id,uri:I.URI.revive(t.uri)};const o=s;if(o?.configPath)return{id:o.id,configPath:I.URI.revive(o.configPath)};if(s?.id)return{id:s.id}}e.$li=l;var g;(function(s){s[s.EMPTY=1]="EMPTY",s[s.FOLDER=2]="FOLDER",s[s.WORKSPACE=3]="WORKSPACE"})(g||(e.WorkbenchState=g={}));function p(s){const t=s;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&Array.isArray(t.folders))}e.$mi=p;function w(s){const t=s;return!!(t&&typeof t=="object"&&I.URI.isUri(t.uri)&&typeof t.name=="string"&&typeof t.toResource=="function")}e.$ni=w;class h{constructor(t,o,a,y,$){this.h=t,this.j=a,this.k=y,this.l=$,this.c=L.$bi.forUris(this.l,()=>!0),this.folders=o}update(t){this.h=t.id,this.k=t.configuration,this.j=t.transient,this.l=t.l,this.folders=t.folders}get folders(){return this.g}set folders(t){this.g=t,this.n()}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(t){this.k=t}getFolder(t){return t&&this.c.findSubstr(t)||null}n(){this.c=L.$bi.forUris(this.l,()=>!0);for(const t of this.folders)this.c.set(t.uri,t)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}e.$oi=h;class f{constructor(t,o){this.raw=o,this.uri=t.uri,this.index=t.index,this.name=t.name}toResource(t){return(0,j.$Jg)(this.uri,t)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}e.$pi=f;function u(s){return new f({uri:s,index:0,name:(0,j.$Fg)(s)},{uri:s.toString()})}e.$qi=u,e.$ri="code-workspace",e.$si=`.${e.$ri}`,e.$ti=[{name:(0,D.localize)(0,null),extensions:[e.$ri]}],e.$ui="workspace.json";function c(s,t){return j.$Ag.isEqualOrParent(s,t.untitledWorkspacesHome)}e.$vi=c;function b(s){let t;return I.URI.isUri(s)?t=s:t=s.configuration,t?.scheme===R.Schemas.tmp}e.$wi=b,e.$xi="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function i(s){return s.id===e.$xi}e.$yi=i;function r(s,t){return!c(s,t)&&!b(s)}e.$zi=r;function n(s){return(typeof s=="string"?(0,N.$oc)(s):(0,j.$Hg)(s))===e.$si}e.$Ai=n}),define(ue[18],de([0,1,54,3,2,20,10,168,15,11,4,8,112,35,28,6,31,27,12]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$al=e.$_k=e.$$k=e.$0k=e.$9k=e.$8k=e.ProfileResourceType=void 0;var u;(function(s){s.Settings="settings",s.Keybindings="keybindings",s.Snippets="snippets",s.Tasks="tasks",s.Extensions="extensions",s.GlobalState="globalState"})(u||(e.ProfileResourceType=u={}));function c(s){const t=s;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&I.URI.isUri(t.location)&&I.URI.isUri(t.globalStorageHome)&&I.URI.isUri(t.settingsResource)&&I.URI.isUri(t.keybindingsResource)&&I.URI.isUri(t.tasksResource)&&I.URI.isUri(t.snippetsHome)&&I.URI.isUri(t.extensionsResource))}e.$8k=c,e.$9k=(0,C.$8h)("IUserDataProfilesService");function b(s,t){return{id:s.id,isDefault:s.isDefault,name:s.name,shortName:s.shortName,icon:s.icon,location:I.URI.revive(s.location).with({scheme:t}),globalStorageHome:I.URI.revive(s.globalStorageHome).with({scheme:t}),settingsResource:I.URI.revive(s.settingsResource).with({scheme:t}),keybindingsResource:I.URI.revive(s.keybindingsResource).with({scheme:t}),tasksResource:I.URI.revive(s.tasksResource).with({scheme:t}),snippetsHome:I.URI.revive(s.snippetsHome).with({scheme:t}),extensionsResource:I.URI.revive(s.extensionsResource).with({scheme:t}),cacheHome:I.URI.revive(s.cacheHome).with({scheme:t}),useDefaultFlags:s.useDefaultFlags,isTransient:s.isTransient}}e.$0k=b;function i(s,t,o,a,y,$){return{id:s,name:t,location:o,isDefault:!1,shortName:y?.shortName,icon:y?.icon,globalStorageHome:$&&y?.useDefaultFlags?.globalState?$.globalStorageHome:(0,j.$Jg)(o,"globalStorage"),settingsResource:$&&y?.useDefaultFlags?.settings?$.settingsResource:(0,j.$Jg)(o,"settings.json"),keybindingsResource:$&&y?.useDefaultFlags?.keybindings?$.keybindingsResource:(0,j.$Jg)(o,"keybindings.json"),tasksResource:$&&y?.useDefaultFlags?.tasks?$.tasksResource:(0,j.$Jg)(o,"tasks.json"),snippetsHome:$&&y?.useDefaultFlags?.snippets?$.snippetsHome:(0,j.$Jg)(o,"snippets"),extensionsResource:$&&y?.useDefaultFlags?.extensions?$.extensionsResource:(0,j.$Jg)(o,"extensions.json"),cacheHome:(0,j.$Jg)(a,s),useDefaultFlags:y?.useDefaultFlags,isTransient:y?.transient}}e.$$k=i;let r=class extends L.$Tc{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.z.profiles,...this.r.profiles]}constructor(t,o,a,y){super(),this.s=t,this.t=o,this.u=a,this.w=y,this.f=!0,this.h=this.D(new N.$Wd),this.onDidChangeProfiles=this.h.event,this.j=this.D(new N.$Wd),this.onWillCreateProfile=this.j.event,this.m=this.D(new N.$Wd),this.onWillRemoveProfile=this.m.event,this.n=this.D(new N.$Wd),this.onDidResetWorkspaces=this.n.event,this.q=new Map,this.r={profiles:[],workspaces:new l.$Ac,emptyWindows:new Map},this.profilesHome=(0,j.$Jg)(this.s.userRoamingDataHome,"profiles"),this.g=(0,j.$Jg)(this.s.cacheHome,"CachedProfilesData")}init(){this.y=void 0}setEnablement(t){this.f!==t&&(this.y=void 0,this.f=t)}isEnabled(){return this.f}get z(){if(!this.y){const t=this.C(),o=[t];if(this.f)try{for(const $ of this.O()){if(!$.name||!(0,f.$Kf)($.name)||!$.location){this.w.warn("Skipping the invalid stored profile",$.location||$.name);continue}o.push(i((0,j.$Gg)($.location),$.name,$.location,this.g,{shortName:$.shortName,icon:$.icon,useDefaultFlags:$.useDefaultFlags},t))}}catch($){this.w.error($)}const a=new l.$Ac,y=new Map;if(o.length)try{const $=this.Q();if($.workspaces)for(const[d,v]of Object.entries($.workspaces)){const S=I.URI.parse(d),A=o.find(T=>T.id===v);A&&a.set(S,A)}if($.emptyWindows)for(const[d,v]of Object.entries($.emptyWindows)){const S=o.find(A=>A.id===v);S&&y.set(d,S)}}catch($){this.w.error($)}this.y={profiles:o,workspaces:a,emptyWindows:y}}return this.y}C(){const t=i("__default__profile__",(0,P.localize)(0,null),this.s.userRoamingDataHome,this.g);return{...t,extensionsResource:this.S()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const o="Temp",a=new RegExp(`${(0,h.$Qe)(o)}\\s(\\d+)`);let y=0;for(const d of this.profiles){const v=a.exec(d.name),S=v?parseInt(v[1]):0;y=S>y?S:y}const $=`${o} ${y+1}`;return this.createProfile((0,D.$Vi)((0,w.$sg)()).toString(16),$,{transient:!0},t)}async createNamedProfile(t,o,a){return this.createProfile((0,D.$Vi)((0,w.$sg)()).toString(16),t,o,a)}async createProfile(t,o,a,y){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const $=await this.F(t,o,a);return y&&await this.setProfileForWorkspace(y,$),$}async F(t,o,a){if(!(0,f.$Kf)(o)||!o)throw new Error("Name of the profile is mandatory and must be of type `string`");let y=this.q.get(o);return y||(y=(async()=>{try{const $=this.profiles.find(S=>S.name===o||S.id===t);if($)return $;const d=i(t,o,(0,j.$Jg)(this.profilesHome,t),this.g,a,this.defaultProfile);await this.t.createFolder(d.location);const v=[];return this.j.fire({profile:d,join(S){v.push(S)}}),await p.Promises.settled(v),this.I([d],[],[]),d}finally{this.q.delete(o)}})(),this.q.set(o,y)),y}async updateProfile(t,o){if(!this.f)throw new Error("Profiles are disabled in the current environment.");let a=this.profiles.find(y=>y.id===t.id);if(!a)throw new Error(`Profile '${t.name}' does not exist`);return a=i(a.id,o.name??a.name,a.location,this.g,{shortName:o.shortName??a.shortName,icon:o.icon===null?void 0:o.icon??a.icon,transient:o.transient??a.isTransient,useDefaultFlags:o.useDefaultFlags??a.useDefaultFlags},this.defaultProfile),this.I([],[],[a]),a}async removeProfile(t){if(!this.f)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");const o=this.profiles.find(y=>y.id===t.id);if(!o)throw new Error(`Profile '${t.name}' does not exist`);const a=[];this.m.fire({profile:o,join(y){a.push(y)}});try{await Promise.allSettled(a)}catch(y){this.w.error(y)}for(const y of[...this.z.emptyWindows.keys()])o.id===this.z.emptyWindows.get(y)?.id&&this.z.emptyWindows.delete(y);for(const y of[...this.z.workspaces.keys()])o.id===this.z.workspaces.get(y)?.id&&this.z.workspaces.delete(y);this.M(),this.I([],[o],[]);try{await this.t.del(o.cacheHome,{recursive:!0})}catch(y){(0,m.$Nk)(y)!==1&&this.w.error(y)}}async setProfileForWorkspace(t,o){if(!this.f)throw new Error("Profiles are disabled in the current environment.");const a=this.profiles.find(y=>y.id===o.id);if(!a)throw new Error(`Profile '${o.name}' does not exist`);this.L(t,a)}unsetWorkspace(t,o){if(!this.f)throw new Error("Profiles are disabled in the current environment.");this.L(t,void 0,o)}async resetWorkspaces(){this.r.workspaces.clear(),this.r.emptyWindows.clear(),this.z.workspaces.clear(),this.z.emptyWindows.clear(),this.M(),this.n.fire()}async cleanUp(){if(this.f&&await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(o=>o.isDirectory&&this.profiles.every(a=>!this.u.extUri.isEqual(a.location,o.resource))).map(o=>this.t.del(o.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.f)return;const t=this.r.profiles.filter(o=>!this.H(o));await Promise.allSettled(t.map(o=>this.removeProfile(o)))}getProfileForWorkspace(t){const o=this.G(t);return I.URI.isUri(o)?this.r.workspaces.get(o)??this.z.workspaces.get(o):this.r.emptyWindows.get(o)??this.z.emptyWindows.get(o)}G(t){return(0,E.$fi)(t)?t.uri:(0,E.$ki)(t)?t.configPath:t.id}H(t){return!!([...this.r.emptyWindows.values()].some(o=>this.u.extUri.isEqual(o.location,t.location))||[...this.r.workspaces.values()].some(o=>this.u.extUri.isEqual(o.location,t.location))||[...this.z.emptyWindows.values()].some(o=>this.u.extUri.isEqual(o.location,t.location))||[...this.z.workspaces.values()].some(o=>this.u.extUri.isEqual(o.location,t.location)))}I(t,o,a){const y=[...this.profiles,...t],$=[];this.r.profiles=[];for(let d of y)d.isDefault||o.some(v=>d.id===v.id)||(d=a.find(v=>d.id===v.id)??d,d.isTransient?this.r.profiles.push(d):$.push({location:d.location,name:d.name,shortName:d.shortName,icon:d.icon,useDefaultFlags:d.useDefaultFlags}));this.P($),this.y=void 0,this.J(t,o,a)}J(t,o,a){this.h.fire({added:t,removed:o,updated:a,all:this.profiles})}L(t,o,a){a=o?.isTransient?!0:a,a||this.L(t,void 0,!0);const y=this.G(t),$=a?this.r:this.z;I.URI.isUri(y)?($.workspaces.delete(y),o&&$.workspaces.set(y,o)):($.emptyWindows.delete(y),o&&$.emptyWindows.set(y,o)),a||this.M()}M(){const t={};for(const[a,y]of this.z.workspaces.entries())t[a.toString()]=y.id;const o={};for(const[a,y]of this.z.emptyWindows.entries())o[a.toString()]=y.id;this.R({workspaces:t,emptyWindows:o}),this.y=void 0}N(t){const o={},a=this.C();if(t.workspaces)for(const[$,d]of Object.entries(t.workspaces)){const v=I.URI.parse(d);o[$]=this.u.extUri.isEqual(v,a.location)?a.id:this.u.extUri.basename(v)}const y={};if(t.emptyWindows)for(const[$,d]of Object.entries(t.emptyWindows)){const v=I.URI.parse(d);y[$]=this.u.extUri.isEqual(v,a.location)?a.id:this.u.extUri.basename(v)}return{workspaces:o,emptyWindows:y}}O(){return[]}P(t){throw new Error("not implemented")}Q(){return{}}R(t){throw new Error("not implemented")}S(){}};e.$_k=r,e.$_k=r=Se([Z(0,R.$ci),Z(1,m.$wk),Z(2,g.$7k),Z(3,k.$qj)],r);class n extends r{constructor(){super(...arguments),this.a=[],this.X={}}O(){return this.a}P(t){this.a=t}Q(){return this.X}R(t){this.X=t}}e.$al=n}),define(ue[242],de([0,1,6,2,18]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$wRc=void 0;let j=class extends N.$Tc{constructor(P){super(),this.D(new D.$hh(()=>{P.cleanUp()},10*1e3)).schedule()}};e.$wRc=j,e.$wRc=j=Se([Z(0,L.$9k)],j)}),define(ue[52],de([0,1,6,14,2,3,35,10,29,33,11,4,8,18,28,12,7,22]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$eq=e.$dq=e.$cq=e.ExtensionsProfileScanningErrorCode=void 0;var f;(function(r){r.ERROR_PROFILE_NOT_FOUND="ERROR_PROFILE_NOT_FOUND",r.ERROR_INVALID_CONTENT="ERROR_INVALID_CONTENT"})(f||(e.ExtensionsProfileScanningErrorCode=f={}));class u extends Error{constructor(n,s){super(n),this.code=s}}e.$cq=u,e.$dq=(0,k.$8h)("IExtensionsProfileScannerService");let c=class extends L.$Tc{constructor(n,s,t,o,a,y){super(),this.j=n,this.m=s,this.n=t,this.q=o,this.r=a,this.s=y,this.b=this.D(new j.$Wd),this.onAddExtensions=this.b.event,this.c=this.D(new j.$Wd),this.onDidAddExtensions=this.c.event,this.f=this.D(new j.$Wd),this.onRemoveExtensions=this.f.event,this.g=this.D(new j.$Wd),this.onDidRemoveExtensions=this.g.event,this.h=new I.$Ac}scanProfileExtensions(n,s){return this.t(n,void 0,s)}async addExtensionsToProfile(n,s){const t=[],o=[];try{return await this.t(s,a=>{const y=[];for(const $ of a)n.some(([d])=>(0,m.$ap)(d.identifier,$.identifier)&&(d.manifest.version!==$.version||d.location.toString()!==$.location.toString()))?t.push($):y.push($);for(const[$,d]of n){const v=y.findIndex(A=>(0,m.$ap)(A.identifier,$.identifier)&&A.version===$.manifest.version&&A.location.toString()===$.location.toString()),S={identifier:$.identifier,version:$.manifest.version,location:$.location,metadata:d};v===-1?(o.push(S),y.push(S)):y.splice(v,1,S)}return o.length&&this.b.fire({extensions:o,profileLocation:s}),t.length&&this.f.fire({extensions:t,profileLocation:s}),y}),o.length&&this.c.fire({extensions:o,profileLocation:s}),t.length&&this.g.fire({extensions:t,profileLocation:s}),o}catch(a){throw o.length&&this.c.fire({extensions:o,error:a,profileLocation:s}),t.length&&this.g.fire({extensions:t,error:a,profileLocation:s}),a}}async updateMetadata(n,s){const t=[];return await this.t(s,o=>{const a=[];for(const y of o){const $=n.find(([d])=>(0,m.$ap)(d.identifier,y.identifier)&&d.manifest.version===y.version);$&&(y.metadata={...y.metadata,...$[1]},t.push(y)),a.push(y)}return a}),t}async removeExtensionFromProfile(n,s){const t=[];try{await this.t(s,o=>{const a=[];for(const y of o)(0,m.$ap)(y.identifier,n.identifier)?t.push(y):a.push(y);return t.length&&this.f.fire({extensions:t,profileLocation:s}),a}),t.length&&this.g.fire({extensions:t,profileLocation:s})}catch(o){throw t.length&&this.g.fire({extensions:t,error:o,profileLocation:s}),o}}async t(n,s,t){return this.F(n).queue(async()=>{let o=[],a;try{const y=await this.m.readFile(n);a=JSON.parse(y.value.toString().trim()||"[]")}catch(y){if((0,C.$Nk)(y)!==1)throw y;if(this.q.extUri.isEqual(n,this.n.defaultProfile.extensionsResource)&&(a=await this.C()),!a&&t?.bailOutWhenFileNotFound)throw new u((0,w.$0)(y),"ERROR_PROFILE_NOT_FOUND")}if(a){Array.isArray(a)||this.u(n);let y=!1;for(const $ of a){b($)||this.u(n);let d;if((0,p.$Kf)($.relativeLocation)&&$.relativeLocation)d=this.y($.relativeLocation);else if((0,p.$Kf)($.location)){this.s.warn(`Extensions profile: Ignoring extension with invalid location: ${$.location}`);continue}else{d=P.URI.revive($.location);const v=this.w(d);v&&(y=!0,$.relativeLocation=v)}(0,p.$Rf)($.metadata?.hasPreReleaseVersion)&&$.metadata?.preRelease&&(y=!0,$.metadata.hasPreReleaseVersion=!0),o.push({identifier:$.identifier,location:d,version:$.version,metadata:$.metadata})}y&&await this.m.writeFile(n,N.$ke.fromString(JSON.stringify(a)))}if(s){o=s(o);const y=o.map($=>({identifier:$.identifier,version:$.version,location:$.location.toJSON(),relativeLocation:this.w($.location),metadata:$.metadata}));await this.m.writeFile(n,N.$ke.fromString(JSON.stringify(y)))}return o})}u(n){const s=new u(`Invalid extensions content in ${n.toString()}`,"ERROR_INVALID_CONTENT");throw this.r.publicLogError2("extensionsProfileScanningError",{code:s.code}),s}w(n){return this.q.extUri.isEqual(this.q.extUri.dirname(n),this.j)?this.q.extUri.basename(n):void 0}y(n){return this.q.extUri.joinPath(this.j,n)}async C(){return this.z||(this.z=(async()=>{const n=this.q.extUri.joinPath(this.n.defaultProfile.location,"extensions.json"),s=this.q.extUri.joinPath(this.j,".init-default-profile-extensions");let t;try{t=(await this.m.readFile(n)).value.toString()}catch(a){if((0,C.$Nk)(a)===1)return;throw a}this.s.info("Migrating extensions from old default profile location",n.toString());let o;try{const a=JSON.parse(t);Array.isArray(a)&&a.every(y=>b(y))?o=a:this.s.warn("Skipping migrating from old default profile locaiton: Found invalid data",a)}catch(a){this.s.error(a)}if(o)try{await this.m.createFile(this.n.defaultProfile.extensionsResource,N.$ke.fromString(JSON.stringify(o)),{overwrite:!1}),this.s.info("Migrated extensions from old default profile location to new location",n.toString(),this.n.defaultProfile.extensionsResource.toString())}catch(a){if((0,C.$Nk)(a)===3)this.s.info("Migration from old default profile location to new location is done by another window",n.toString(),this.n.defaultProfile.extensionsResource.toString());else throw a}try{await this.m.del(n)}catch(a){(0,C.$Nk)(a)!==1&&this.s.error(a)}try{await this.m.del(s)}catch(a){(0,C.$Nk)(a)!==1&&this.s.error(a)}return o})()),this.z}F(n){let s=this.h.get(n);return s||(s=new D.$ch,this.h.set(n,s)),s}};e.$eq=c,e.$eq=c=Se([Z(1,C.$wk),Z(2,l.$9k),Z(3,g.$7k),Z(4,h.$Al),Z(5,E.$qj)],c);function b(r){return(0,p.$Mf)(r)&&(0,R.$Io)(r.identifier)&&(i(r.location)||(0,p.$Kf)(r.location)&&r.location)&&((0,p.$Rf)(r.relativeLocation)||(0,p.$Kf)(r.relativeLocation))&&r.version&&(0,p.$Kf)(r.version)}function i(r){return r?(0,p.$Kf)(r.path)&&(0,p.$Kf)(r.scheme):!1}}),define(ue[83],de([0,1,17,6,30,14,7,34,138,2,25,16,5,20,49,90,12,10,154,15,33,45,72,11,4,8,23,3,68,52,18,28,182]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i,r,n,s,t,o,a,y,$,d,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$lq=e.$kq=e.$jq=e.$iq=e.$hq=e.Translations=void 0;var S;(function(Q){function F(te,H){if(te===H)return!0;const J=Object.keys(te),x=new Set;for(const se of Object.keys(H))x.add(se);if(J.length!==x.size)return!1;for(const se of J){if(te[se]!==H[se])return!1;x.delete(se)}return x.size===0}Q.equals=F})(S||(e.Translations=S={})),e.$hq=(0,n.$8h)("IExtensionsScannerService");let A=class extends m.$Tc{constructor(F,te,H,J,x,se,V,ne,K,z,U,O){super(),this.systemExtensionsLocation=F,this.userExtensionsLocation=te,this.q=H,this.r=J,this.s=x,this.t=se,this.u=V,this.w=ne,this.y=K,this.z=z,this.C=U,this.F=O,this.g=this.D(new o.$Wd),this.onDidChangeCache=this.g.event,this.h=(0,l.$Jg)(this.userExtensionsLocation,".obsolete"),this.j=this.D(this.F.createInstance(M,this.r,this.h)),this.m=this.D(this.F.createInstance(M,this.r,this.h)),this.n=this.D(this.F.createInstance(q,this.h)),this.H=void 0,this.D(this.j.onDidChangeCache(()=>this.g.fire(0))),this.D(this.m.onDidChangeCache(()=>this.g.fire(1)))}getTargetPlatform(){return this.G||(this.G=(0,c.$lp)(this.u,this.w)),this.G}async scanAllExtensions(F,te,H){const[J,x]=await Promise.all([this.scanSystemExtensions(F),this.scanUserExtensions(te)]),se=H?await this.scanExtensionsUnderDevelopment(F,[...J,...x]):[];return this.L(J,x,se,await this.getTargetPlatform(),!0)}async scanSystemExtensions(F){const te=[];te.push(this.M(!!F.useCache,F.language)),te.push(this.N(F.language,!!F.checkControlFile));const[H,J]=await Promise.all(te);return this.J([...H,...J],0,F,!1)}async scanUserExtensions(F){const te=F.profileLocation??this.userExtensionsLocation;this.w.trace("Started scanning user extensions",te);const H=this.C.extUri.isEqual(F.profileLocation,this.s.defaultProfile.extensionsResource)?{bailOutWhenFileNotFound:!0}:void 0,J=await this.P(te,!!F.profileLocation,1,!F.includeUninstalled,F.language,!0,H),x=F.useCache&&!J.devMode&&J.excludeObsolete?this.m:this.n;let se;try{se=await x.scanExtensions(J)}catch(V){if(V instanceof y.$cq&&V.code==="ERROR_PROFILE_NOT_FOUND")await this.I(),se=await x.scanExtensions(J);else throw V}return se=await this.J(se,1,F,!0),this.w.trace("Scanned user extensions:",se.length),se}async scanExtensionsUnderDevelopment(F,te){if(this.y.isExtensionDevelopment&&this.y.extensionDevelopmentLocationURI){const H=(await Promise.all(this.y.extensionDevelopmentLocationURI.filter(J=>J.scheme===C.Schemas.file).map(async J=>{const x=await this.P(J,!1,1,!0,F.language,!1,void 0);return(await this.n.scanOneOrMultipleExtensions(x)).map(V=>(V.type=te.find(ne=>(0,c.$ap)(ne.identifier,V.identifier))?.type??V.type,this.n.validate(V,x)))}))).flat();return this.J(H,"development",F,!0)}return[]}async scanExistingExtension(F,te,H){const J=await this.P(F,!1,te,!0,H.language,!0,void 0),x=await this.n.scanExtension(J);return!x||!H.includeInvalid&&!x.isValid?null:x}async scanOneOrMultipleExtensions(F,te,H){const J=await this.P(F,!1,te,!0,H.language,!0,void 0),x=await this.n.scanOneOrMultipleExtensions(J);return this.J(x,te,H,!0)}async scanMetadata(F){const te=(0,l.$Jg)(F,"package.json"),H=(await this.u.readFile(te)).value.toString();return JSON.parse(H).__metadata}async updateMetadata(F,te){const H=(0,l.$Jg)(F,"package.json"),J=(await this.u.readFile(H)).value.toString(),x=JSON.parse(J);te.isMachineScoped===!1&&delete te.isMachineScoped,te.isBuiltin===!1&&delete te.isBuiltin,x.__metadata={...x.__metadata,...te},await this.u.writeFile((0,l.$Jg)(F,"package.json"),j.$ke.fromString(JSON.stringify(x,null,"	")))}async initializeDefaultProfileExtensions(){try{await this.t.scanProfileExtensions(this.s.defaultProfile.extensionsResource,{bailOutWhenFileNotFound:!0})}catch(F){if(F instanceof y.$cq&&F.code==="ERROR_PROFILE_NOT_FOUND")await this.I();else throw F}}async I(){return this.H||(this.H=(async()=>{try{this.w.info("Started initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString());const F=await this.scanUserExtensions({includeInvalid:!0});if(F.length)await this.t.addExtensionsToProfile(F.map(te=>[te,te.metadata]),this.s.defaultProfile.extensionsResource);else try{await this.u.createFile(this.s.defaultProfile.extensionsResource,j.$ke.fromString(JSON.stringify([])))}catch(te){(0,r.$Nk)(te)!==1&&this.w.warn("Failed to create default profile extensions manifest in extensions installation folder.",this.userExtensionsLocation.toString(),(0,I.$0)(te))}this.w.info("Completed initializing default profile extensions in extensions installation folder.",this.userExtensionsLocation.toString())}catch(F){this.w.error(F)}finally{this.H=void 0}})()),this.H}async J(F,te,H,J){return H.includeAllVersions||(F=this.L(te===0?F:void 0,te===1?F:void 0,te==="development"?F:void 0,await this.getTargetPlatform(),J)),H.includeInvalid||(F=F.filter(x=>x.isValid)),F.sort((x,se)=>{const V=k.$nc(x.location.fsPath),ne=k.$nc(se.location.fsPath);return V<ne?-1:V>ne?1:0})}L(F,te,H,J,x){const se=(ne,K,z)=>{if(ne.isValid&&!K.isValid)return!1;if(ne.isValid===K.isValid){if(x&&g.gt(ne.manifest.version,K.manifest.version))return this.w.debug(`Skipping extension ${K.location.path} with lower version ${K.manifest.version} in favour of ${ne.location.path} with version ${ne.manifest.version}`),!1;if(g.eq(ne.manifest.version,K.manifest.version)){if(ne.type===0)return this.w.debug(`Skipping extension ${K.location.path} in favour of system extension ${ne.location.path} with same version`),!1;if(ne.targetPlatform===J)return this.w.debug(`Skipping extension ${K.location.path} from different target platform ${K.targetPlatform}`),!1}}return z?this.w.warn(`Overwriting user extension ${ne.location.path} with ${K.location.path}.`):this.w.debug(`Overwriting user extension ${ne.location.path} with ${K.location.path}.`),!0},V=new b.$vm;return F?.forEach(ne=>{const K=V.get(ne.identifier.id);(!K||se(K,ne,!1))&&V.set(ne.identifier.id,ne)}),te?.forEach(ne=>{const K=V.get(ne.identifier.id);if(!K&&F&&ne.type===0){this.w.debug(`Skipping obsolete system extension ${ne.location.path}.`);return}(!K||se(K,ne,!1))&&V.set(ne.identifier.id,ne)}),H?.forEach(ne=>{const K=V.get(ne.identifier.id);(!K||se(K,ne,!0))&&V.set(ne.identifier.id,ne),V.set(ne.identifier.id,ne)}),[...V.values()]}async M(F,te){this.w.trace("Started scanning system extensions");const H=await this.P(this.systemExtensionsLocation,!1,0,!0,te,!0,void 0),x=await(F&&!H.devMode?this.j:this.n).scanExtensions(H);return this.w.trace("Scanned system extensions:",x.length),x}async N(F,te){const H=this.y.isBuilt?[]:this.z.builtInExtensions;if(!H?.length)return[];this.w.trace("Started scanning dev system extensions");const J=te?await this.O():{},x=[],se=h.URI.file(k.$hc(k.$jc(C.$qg.asFileUri("").fsPath,"..",".build","builtInExtensions")));for(const ne of H){const K=J[ne.name]||"marketplace";switch(K){case"disabled":break;case"marketplace":x.push((0,l.$Jg)(se,ne.name));break;default:x.push(h.URI.file(K));break}}const V=await Promise.all(x.map(async ne=>this.n.scanExtension(await this.P(ne,!1,0,!0,F,!0,void 0))));return this.w.trace("Scanned dev system extensions:",V.length),(0,D.$Hb)(V)}async O(){try{const F=await this.u.readFile(this.q);return JSON.parse(F.value.toString())}catch{return{}}}async P(F,te,H,J,x,se,V){const ne=await this.f(x??E.$w),K=await this.Q(F),z=te&&!this.C.extUri.isEqual(F,this.s.defaultProfile.extensionsResource)?this.s.defaultProfile.extensionsResource:void 0,U=z?await this.Q(z):void 0;return new T(F,K,z,U,te,V,H,J,se,this.z.vscodeVersion,this.z.date,this.z.commit,!this.y.isBuilt,x,ne)}async Q(F){try{const te=await this.u.stat(F);if(typeof te.mtime=="number")return te.mtime}catch{}}};e.$iq=A,e.$iq=A=Se([Z(4,$.$9k),Z(5,y.$dq),Z(6,r.$wk),Z(7,s.$qj),Z(8,u.$ci),Z(9,t.$Ij),Z(10,d.$7k),Z(11,n.$7h)],A);class T{constructor(F,te,H,J,x,se,V,ne,K,z,U,O,W,B,_){this.location=F,this.mtime=te,this.applicationExtensionslocation=H,this.applicationExtensionslocationMtime=J,this.profile=x,this.profileScanOptions=se,this.type=V,this.excludeObsolete=ne,this.validate=K,this.productVersion=z,this.productDate=U,this.productCommit=O,this.devMode=W,this.language=B,this.translations=_}static createNlsConfiguration(F){return{language:F.language,pseudo:F.language==="pseudo",devMode:F.devMode,translations:F.translations}}static equals(F,te){return(0,l.$Cg)(F.location,te.location)&&F.mtime===te.mtime&&(0,l.$Cg)(F.applicationExtensionslocation,te.applicationExtensionslocation)&&F.applicationExtensionslocationMtime===te.applicationExtensionslocationMtime&&F.profile===te.profile&&L.$In(F.profileScanOptions,te.profileScanOptions)&&F.type===te.type&&F.excludeObsolete===te.excludeObsolete&&F.validate===te.validate&&F.productVersion===te.productVersion&&F.productDate===te.productDate&&F.productCommit===te.productCommit&&F.devMode===te.devMode&&F.language===te.language&&S.equals(F.translations,te.translations)}}e.$jq=T;let q=class extends m.$Tc{constructor(F,te,H,J,x){super(),this.f=F,this.g=te,this.h=H,this.j=J,this.m=x}async scanExtensions(F){const te=F.profile?await this.q(F):await this.n(F);let H={};if(F.excludeObsolete&&F.type===1)try{const J=(await this.j.readFile(this.f)).value.toString();H=JSON.parse(J)}catch{}return(0,w.$Xf)(H)?te:te.filter(J=>!H[c.$bp.create(J).toString()])}async n(F){const te=await this.j.resolve(F.location);if(!te.children?.length)return[];const H=await Promise.all(te.children.map(async J=>{if(!J.isDirectory||F.type===1&&(0,l.$Gg)(J.resource).indexOf(".")===0)return null;const x=new T(J.resource,F.mtime,F.applicationExtensionslocation,F.applicationExtensionslocationMtime,F.profile,F.profileScanOptions,F.type,F.excludeObsolete,F.validate,F.productVersion,F.productDate,F.productCommit,F.devMode,F.language,F.translations);return this.scanExtension(x)}));return(0,D.$Hb)(H).sort((J,x)=>J.location.path<x.location.path?-1:1)}async q(F){let te=await this.r(F.location,()=>!0,F);if(F.applicationExtensionslocation&&!this.h.extUri.isEqual(F.location,F.applicationExtensionslocation)){te=te.filter(J=>!J.metadata?.isApplicationScoped);const H=await this.r(F.applicationExtensionslocation,J=>!!J.metadata?.isBuiltin||!!J.metadata?.isApplicationScoped,F);te.push(...H)}return te}async r(F,te,H){const J=await this.g.scanProfileExtensions(F,H.profileScanOptions);if(!J.length)return[];const x=await Promise.all(J.map(async se=>{if(te(se)){const V=new T(se.location,H.mtime,H.applicationExtensionslocation,H.applicationExtensionslocationMtime,H.profile,H.profileScanOptions,H.type,H.excludeObsolete,H.validate,H.productVersion,H.productDate,H.productCommit,H.devMode,H.language,H.translations);return this.scanExtension(V,se.metadata)}return null}));return(0,D.$Hb)(x)}async scanOneOrMultipleExtensions(F){try{if(await this.j.exists((0,l.$Jg)(F.location,"package.json"))){const te=await this.scanExtension(F);return te?[te]:[]}else return await this.scanExtensions(F)}catch(te){return this.m.error(`Error scanning extensions at ${F.location.path}:`,(0,I.$0)(te)),[]}}async scanExtension(F,te){try{let H=await this.scanExtensionManifest(F.location);if(H){H.publisher||(H.publisher=b.$pm),te=te??H.__metadata,delete H.__metadata;const J=(0,c.$fp)(H.publisher,H.name),x=te?.id?{id:J,uuid:te.id}:{id:J},se=te?.isSystem?0:F.type,V=se===0||!!te?.isBuiltin;H=await this.s(F.location,H,T.createNlsConfiguration(F));const ne={type:se,identifier:x,manifest:H,location:F.location,isBuiltin:V,targetPlatform:te?.targetPlatform??"undefined",metadata:te,isValid:!0,validations:[]};return F.validate?this.validate(ne,F):ne}}catch(H){F.type!==0&&this.m.error(H)}return null}validate(F,te){let H=!0;const J=(0,i.$qp)(te.productVersion,te.productDate,te.location,F.manifest,F.isBuiltin);for(const[x,se]of J)x===p.default.Error&&(H=!1,this.m.error(this.y(te.location,se)));return F.isValid=H,F.validations=J,F}async scanExtensionManifest(F){const te=(0,l.$Jg)(F,"package.json");let H;try{H=(await this.j.readFile(te)).value.toString()}catch(x){return(0,r.$Nk)(x)!==1&&this.m.error(this.y(F,(0,f.localize)(0,null,te.path,x.message))),null}let J;try{J=JSON.parse(H)}catch{const se=[];(0,P.$ln)(H,se);for(const V of se)this.m.error(this.y(F,(0,f.localize)(1,null,te.path,V.offset,V.length,(0,R.$fq)(V.error))));return null}return(0,P.$un)(J)!=="object"?(this.m.error(this.y(F,(0,f.localize)(2,null,te.path))),null):J}async s(F,te,H){const J=await this.t(F,te,H);if(J)try{const x=[],se=await this.u(J.default,x);if(x.length>0)return x.forEach(ne=>{this.m.error(this.y(F,(0,f.localize)(3,null,J.default?.path,(0,R.$fq)(ne.error))))}),te;if((0,P.$un)(J)!=="object")return this.m.error(this.y(F,(0,f.localize)(4,null,J.default?.path))),te;const V=J.values||Object.create(null);return(0,v.$gq)(this.m,te,V,se)}catch{}return te}async t(F,te,H){const J=(0,l.$Jg)(F,"package.nls.json"),x=(K,z)=>{z.forEach(U=>{this.m.error(this.y(F,(0,f.localize)(5,null,K?.path,(0,R.$fq)(U.error))))})},se=K=>{this.m.error(this.y(F,(0,f.localize)(6,null,K?.path)))},V=`${te.publisher}.${te.name}`,ne=H.translations[V];if(ne)try{const K=h.URI.file(ne),z=(await this.j.readFile(K)).value.toString(),U=[],O=(0,P.$ln)(z,U);return U.length>0?(x(K,U),{values:void 0,default:J}):(0,P.$un)(O)!=="object"?(se(K),{values:void 0,default:J}):{values:O.contents?O.contents.package:void 0,default:J}}catch{return{values:void 0,default:J}}else{if(!await this.j.exists(J))return;let z;try{z=await this.w(F,H)}catch{return}if(!z.localized)return{values:void 0,default:z.original};try{const U=(await this.j.readFile(z.localized)).value.toString(),O=[],W=(0,P.$ln)(U,O);return O.length>0?(x(z.localized,O),{values:void 0,default:z.original}):(0,P.$un)(W)!=="object"?(se(z.localized),{values:void 0,default:z.original}):{values:W,default:z.original}}catch{return{values:void 0,default:z.original}}}}async u(F,te){if(F)try{const H=(await this.j.readFile(F)).value.toString();return(0,P.$ln)(H,te)}catch{}}w(F,te){return new Promise((H,J)=>{const x=se=>{const V=(0,l.$Jg)(F,`package.nls.${se}.json`);this.j.exists(V).then(ne=>{ne&&H({localized:V,original:(0,l.$Jg)(F,"package.nls.json")});const K=se.lastIndexOf("-");K===-1?H({localized:(0,l.$Jg)(F,"package.nls.json"),original:null}):(se=se.substring(0,K),x(se))})};if(te.devMode||te.pseudo||!te.language)return H({localized:(0,l.$Jg)(F,"package.nls.json"),original:null});x(te.language)})}y(F,te){return`[${F.path}]: ${te}`}};q=Se([Z(1,y.$dq),Z(2,d.$7k),Z(3,r.$wk),Z(4,s.$qj)],q);let M=class extends q{constructor(F,te,H,J,x,se,V){super(te,J,x,se,V),this.G=F,this.H=H,this.C=this.D(new N.$6g(3e3)),this.F=this.D(new o.$Wd),this.onDidChangeCache=this.F.event}async scanExtensions(F){const te=this.M(F),H=await this.I(te);if(this.z=F,H&&H.input&&T.equals(H.input,this.z))return this.m.debug("Using cached extensions scan result",F.location.toString()),this.C.trigger(()=>this.L()),H.result.map(x=>(x.location=h.URI.revive(x.location),x));const J=await super.scanExtensions(F);return await this.J(te,{input:F,result:J}),J}async I(F){try{const te=await this.j.readFile(F),H=JSON.parse(te.value.toString());return{result:H.result,input:(0,a.$Eh)(H.input)}}catch(te){this.m.debug("Error while reading the extension cache file:",F.path,(0,I.$0)(te))}return null}async J(F,te){try{await this.j.writeFile(F,j.$ke.fromString(JSON.stringify(te)))}catch(H){this.m.debug("Error while writing the extension cache file:",F.path,(0,I.$0)(H))}}async L(){if(!this.z)return;const F=this.M(this.z),te=await this.I(F);if(!te)return;const H=te.result,J=JSON.parse(JSON.stringify(await super.scanExtensions(this.z)));if(!L.$In(J,H))try{this.m.info("Invalidating Cache",H,J),await this.j.del(F),this.F.fire()}catch(x){this.m.error(x)}}M(F){const te=this.N(F);return this.h.extUri.joinPath(te.cacheHome,F.type===0?b.$om:b.$nm)}N(F){return F.type===0?this.H.defaultProfile:F.profile?this.h.extUri.isEqual(F.location,this.G.extensionsResource)?this.G:this.H.profiles.find(te=>this.h.extUri.isEqual(F.location,te.extensionsResource))??this.G:this.H.defaultProfile}};M=Se([Z(2,$.$9k),Z(3,y.$dq),Z(4,d.$7k),Z(5,r.$wk),Z(6,s.$qj)],M);function Y(Q,F){const te=(0,c.$dp)(Q.manifest.publisher,Q.manifest.name);return{id:te,identifier:new b.$tm(te),isBuiltin:Q.type===0,isUserBuiltin:Q.type===1&&Q.isBuiltin,isUnderDevelopment:F,extensionLocation:Q.location,uuid:Q.identifier.uuid,targetPlatform:Q.targetPlatform,...Q.manifest}}e.$kq=Y;class G extends A{constructor(F,te,H,J,x,se,V,ne,K,z,U,O){super(F,te,(0,l.$Jg)(H,".cursor-dev","extensions","control.json"),J,x,se,V,ne,K,z,U,O),this.R=(async()=>{if(E.$z)try{const W=await this.u.readFile(h.URI.file(E.$z));return JSON.parse(W.value.toString())}catch{}return Object.create(null)})()}f(F){return this.R}}e.$lq=G}),define(ue[243],de([0,1,55,6,38,3,2,25,16,32,8,18]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$nq=void 0;let E=class extends I.$Tc{constructor(g,p){super(),this.b=g,this.f=p,this.a=new N.$bh(5)}async postUninstall(g){const p=this.g(g,"uninstall");p&&(this.f.info(g.identifier.id,g.manifest.version,"Running post uninstall script"),await this.a.queue(async()=>{try{await this.h(p.script,"uninstall",p.args,!0,g),this.f.info("Finished running post uninstall script",g.identifier.id,g.manifest.version)}catch(w){this.f.error("Failed to run post uninstall script",g.identifier.id,g.manifest.version),this.f.error(w)}}));try{await m.Promises.rm(this.m(g))}catch(w){this.f.error("Error while removing extension storage path",g.identifier.id),this.f.error(w)}}g(g,p){const w=`vscode:${p}`;if(g.location.scheme===P.Schemas.file&&g.manifest&&g.manifest.scripts&&typeof g.manifest.scripts[w]=="string"){const h=g.manifest.scripts[w].split(" ");return h.length<2||h[0]!=="node"||!h[1]?(this.f.warn(g.identifier.id,g.manifest.version,`${w} should be a node script`),null):{script:(0,R.$jc)(g.location.fsPath,h[1]),args:h.slice(2)||[]}}return null}h(g,p,w,h,f){return new Promise((u,c)=>{const b=this.j(g,p,w,f);let i;const r=n=>{i&&(clearTimeout(i),i=null),n?c(n):u(void 0)};b.on("error",n=>{r((0,L.$Si)(n)||"Unknown")}),b.on("exit",(n,s)=>{r(n?`post-${p} process exited with code ${n}`:void 0)}),h&&(i=setTimeout(()=>{i=null,b.kill(),c("timed out")},5e3))})}j(g,p,w,h){const f={silent:!0,execArgv:void 0},u=(0,D.fork)(g,[`--type=extension-post-${p}`,...w],f);u.stdout.setEncoding("utf8"),u.stderr.setEncoding("utf8");const c=j.Event.fromNodeEventEmitter(u.stdout,"data"),b=j.Event.fromNodeEventEmitter(u.stderr,"data");c(n=>this.f.info(h.identifier.id,h.manifest.version,`post-${p}`,n)),b(n=>this.f.error(h.identifier.id,h.manifest.version,`post-${p}`,n));const i=j.Event.any(j.Event.map(c,n=>({data:`%c${n}`,format:[""]})),j.Event.map(b,n=>({data:`%c${n}`,format:["color: red"]})));return j.Event.debounce(i,(n,s)=>n?{data:n.data+s.data,format:[...n.format,...s.format]}:{data:s.data,format:s.format},100)(n=>{console.group(h.identifier.id),console.log(n.data,...n.format),console.groupEnd()}),u}m(g){return(0,R.$jc)(this.b.defaultProfile.globalStorageHome.fsPath,g.identifier.id.toLowerCase())}};e.$nq=E,e.$nq=E=Se([Z(0,k.$9k),Z(1,C.$qj)],E)}),define(ue[244],de([0,1,8,18,28,22,52,11,15,10]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$D4=void 0;let C=class extends I.$eq{constructor(E,l,g,p,w,h){super(m.URI.file(E.extensionsPath),l,g,p,w,h)}};e.$D4=C,e.$D4=C=Se([Z(0,R.$di),Z(1,P.$wk),Z(2,N.$9k),Z(3,L.$7k),Z(4,j.$Al),Z(5,D.$qj)],C)}),define(ue[245],de([0,1,10,15,52,83,11,4,8,23,28,18]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$oQc=void 0;let E=class extends j.$lq{constructor(g,p,w,h,f,u,c,b){super(D.URI.file(f.builtinExtensionsPath),D.URI.file(f.extensionsPath),f.userHome,g.defaultProfile,g,p,w,h,f,u,c,b)}};e.$oQc=E,e.$oQc=E=Se([Z(0,k.$9k),Z(1,L.$dq),Z(2,I.$wk),Z(3,R.$qj),Z(4,N.$di),Z(5,m.$Ij),Z(6,C.$7k),Z(7,P.$7h)],E)}),define(ue[19],de([0,1,6,3,2,101,12,70,4,18]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Dp=e.$Cp=e.$Bp=e.$Ap=e.$zp=e.StorageTarget=e.StorageScope=e.WillSaveStateReason=e.$yp=e.$xp=e.$wp=void 0,e.$wp="__$__isNewStorageMarker",e.$xp="__$__targetStorageMarker",e.$yp=(0,R.$8h)("storageService");var C;(function(f){f[f.NONE=0]="NONE",f[f.SHUTDOWN=1]="SHUTDOWN"})(C||(e.WillSaveStateReason=C={}));var k;(function(f){f[f.APPLICATION=-1]="APPLICATION",f[f.PROFILE=0]="PROFILE",f[f.WORKSPACE=1]="WORKSPACE"})(k||(e.StorageScope=k={}));var E;(function(f){f[f.USER=0]="USER",f[f.MACHINE=1]="MACHINE"})(E||(e.StorageTarget=E={}));function l(f){const u=f.get(e.$xp);if(u)try{return JSON.parse(u)}catch{}return Object.create(null)}e.$zp=l;class g extends L.$Tc{static{this.a=60*1e3}constructor(u={flushInterval:g.a}){super(),this.m=u,this.b=this.D(new N.$Zd),this.c=this.D(new N.$Zd),this.onDidChangeTarget=this.c.event,this.f=this.D(new N.$Wd),this.onWillSaveState=this.f.event,this.h=this.D(new D.$hh(()=>this.n(),this.m.flushInterval)),this.j=this.D(new L.$Uc),this.z=void 0,this.F=void 0,this.H=void 0}onDidChangeValue(u,c,b){return N.Event.filter(this.b.event,i=>i.scope===u&&(c===void 0||i.key===c),b)}n(){this.j.value=(0,D.$lh)(()=>{this.q()&&this.flush(),this.h.schedule()})}q(){return!0}r(){(0,L.$Oc)([this.j,this.h])}initialize(){return this.g||(this.g=(async()=>{(0,j.mark)("code/willInitStorage");try{await this.O()}finally{(0,j.mark)("code/didInitStorage")}this.h.schedule()})()),this.g}t(u,c){const{key:b,external:i}=c;if(b===e.$xp){switch(u){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.z=void 0;break}this.c.fire({scope:u})}else this.b.fire({scope:u,key:b,target:this.J(u)[b],external:i})}u(u){this.f.fire({reason:u})}get(u,c,b){return this.P(c)?.get(u,b)}getBoolean(u,c,b){return this.P(c)?.getBoolean(u,b)}getNumber(u,c,b){return this.P(c)?.getNumber(u,b)}getObject(u,c,b){return this.P(c)?.getObject(u,b)}storeAll(u,c){this.w(()=>{for(const b of u)this.store(b.key,b.value,b.scope,b.target,c)})}store(u,c,b,i,r=!1){if((0,I.$Tf)(c)){this.remove(u,b,r);return}this.w(()=>{this.y(u,b,i),this.P(b)?.set(u,c,r)})}remove(u,c,b=!1){this.w(()=>{this.y(u,c,void 0),this.P(c)?.delete(u,b)})}w(u){this.b.pause(),this.c.pause();try{u()}finally{this.b.resume(),this.c.resume()}}keys(u,c){const b=[],i=this.J(u);for(const r of Object.keys(i))i[r]===c&&b.push(r);return b}y(u,c,b,i=!1){const r=this.J(c);typeof b=="number"?r[u]!==b&&(r[u]=b,this.P(c)?.set(e.$xp,JSON.stringify(r),i)):typeof r[u]=="number"&&(delete r[u],this.P(c)?.set(e.$xp,JSON.stringify(r),i))}get C(){return this.z||(this.z=this.L(1)),this.z}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(u){switch(u){case-1:return this.I;case 0:return this.G;default:return this.C}}L(u){const c=this.P(u);return c?l(c):Object.create(null)}isNew(u){return this.getBoolean(e.$wp,u)===!0}async flush(u=C.NONE){this.f.fire({reason:u});const c=this.P(-1),b=this.P(0),i=this.P(1);switch(u){case C.NONE:await D.Promises.settled([c?.whenFlushed()??Promise.resolve(),b?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve()]);break;case C.SHUTDOWN:await D.Promises.settled([c?.flush(0)??Promise.resolve(),b?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve()]);break}}async log(){const u=this.P(-1)?.items??new Map,c=this.P(0)?.items??new Map,b=this.P(1)?.items??new Map;return h(u,c,b,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(u){return await this.flush(),this.P(u)?.optimize()}async switch(u,c){return this.u(C.NONE),(0,m.$8k)(u)?this.R(u,c):this.S(u,c)}M(u,c){return!(u.id===c.id||p(c)&&p(u))}N(u,c,b){this.w(()=>{const i=new Set;for(const[r,n]of u)i.add(r),c.get(r)!==n&&this.t(b,{key:r,external:!0});for(const[r]of c.items)i.has(r)||this.t(b,{key:r,external:!0})})}}e.$Ap=g;function p(f){return f.isDefault||!!f.useDefaultFlags?.globalState}e.$Bp=p;class w extends g{constructor(){super(),this.U=this.D(new P.$up(new P.$vp,{hint:P.StorageHint.STORAGE_IN_MEMORY})),this.W=this.D(new P.$up(new P.$vp,{hint:P.StorageHint.STORAGE_IN_MEMORY})),this.X=this.D(new P.$up(new P.$vp,{hint:P.StorageHint.STORAGE_IN_MEMORY})),this.D(this.X.onDidChangeStorage(u=>this.t(1,u))),this.D(this.W.onDidChangeStorage(u=>this.t(0,u))),this.D(this.U.onDidChangeStorage(u=>this.t(-1,u)))}P(u){switch(u){case-1:return this.U;case 0:return this.W;default:return this.X}}Q(u){switch(u){case-1:return"inMemory (application)";case 0:return"inMemory (profile)";default:return"inMemory (workspace)"}}async O(){}async R(){}async S(){}q(){return!1}hasScope(u){return!1}}e.$Cp=w;async function h(f,u,c,b,i,r){const n=S=>{try{return JSON.parse(S)}catch{return S}},s=new Map,t=new Map;f.forEach((S,A)=>{s.set(A,S),t.set(A,n(S))});const o=new Map,a=new Map;u.forEach((S,A)=>{o.set(A,S),a.set(A,n(S))});const y=new Map,$=new Map;c.forEach((S,A)=>{y.set(A,S),$.set(A,n(S))}),console.group(b!==i?`Storage: Application (path: ${b})`:`Storage: Application & Profile (path: ${b}, default profile)`);const d=[];if(s.forEach((S,A)=>{d.push({key:A,value:S})}),console.table(d),console.groupEnd(),console.log(t),b!==i){console.group(`Storage: Profile (path: ${i}, profile specific)`);const S=[];o.forEach((A,T)=>{S.push({key:T,value:A})}),console.table(S),console.groupEnd(),console.log(a)}console.group(`Storage: Workspace (path: ${r})`);const v=[];y.forEach((S,A)=>{v.push({key:A,value:S})}),console.table(v),console.groupEnd(),console.log($)}e.$Dp=h}),define(ue[113],de([0,1,3,2,12,29,33,19]),function(oe,e,D,N,L,j,I,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$mjc=e.$ljc=void 0;let R=class extends N.$Tc{constructor(k,E){super(),this.a=new D.$Wd,this.onDidChangeEnablement=this.a.event,this.b=this.D(new m(k)),this.D(this.b.onDidChange(l=>this.a.fire({extensions:l,source:"storage"}))),this.D(E.onDidInstallExtensions(l=>l.forEach(({local:g,operation:p})=>{g&&p===4&&this.f(g.identifier)})))}async enableExtension(k,E){return this.f(k)?(this.a.fire({extensions:[k],source:E}),!0):!1}async disableExtension(k,E){return this.c(k)?(this.a.fire({extensions:[k],source:E}),!0):!1}getDisabledExtensions(){return this.h(j.$No)}async getDisabledExtensionsAsync(){return this.getDisabledExtensions()}c(k){const E=this.getDisabledExtensions();return E.every(l=>!(0,I.$ap)(l,k))?(E.push(k),this.g(E),!0):!1}f(k){const E=this.getDisabledExtensions();for(let l=0;l<E.length;l++){const g=E[l];if((0,I.$ap)(g,k))return E.splice(l,1),this.g(E),!0}return!1}g(k){this.j(j.$No,k)}h(k){return this.b.get(k,0)}j(k,E){this.b.set(k,E,0)}};e.$ljc=R,e.$ljc=R=Se([Z(0,P.$yp),Z(1,j.$Mo)],R);class m extends N.$Tc{constructor(k){super(),this.c=k,this.a=Object.create(null),this.b=this.D(new D.$Wd),this.onDidChange=this.b.event,this.D(k.onDidChangeValue(0,void 0,this.D(new N.$Sc))(E=>this.f(E)))}get(k,E){let l;return E===0?((0,L.$Tf)(this.a[k])&&(this.a[k]=this.g(k,E)),l=this.a[k]):l=this.g(k,E),JSON.parse(l)}set(k,E,l){const g=JSON.stringify(E.map(({id:w,uuid:h})=>({id:w,uuid:h})));this.g(k,l)!==g&&(l===0&&(E.length?this.a[k]=g:delete this.a[k]),this.h(k,E.length?g:void 0,l))}f(k){if(!(0,L.$Tf)(this.a[k.key])&&this.g(k.key,k.scope)!==this.a[k.key]){const l=this.get(k.key,k.scope);delete this.a[k.key];const g=this.get(k.key,k.scope),p=l.filter(h=>!g.some(f=>(0,I.$ap)(h,f))),w=g.filter(h=>!l.some(f=>(0,I.$ap)(f,h)));(p.length||w.length)&&this.b.fire([...p,...w])}}g(k,E){return this.c.get(k,E,"[]")}h(k,E,l){E?this.c.store(k,E,l,1):this.c.remove(k,l)}}e.$mjc=m}),define(ue[114],de([0,1,17,26,7,5,37,12,10,31,21,15,29,33,72,227,11,8,60,23,61,19,22,49,65]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Yp=e.$Xp=e.$Wp=e.$Vp=e.$Up=e.$Tp=e.$Sp=e.$Rp=e.$Qp=e.$Pp=e.$Op=void 0;const s=j.$o?"web":(0,E.$Fo)(j.$u,I.$ec),t="X-Market-Search-Activity-Id",o="X-Cursor-Activity-Id";e.$Op=(f.default.extensionMaxVersions?Object.keys(f.default.extensionMaxVersions):[]).map(le=>le.toLowerCase());const a=le=>e.$Op.some(re=>le.toLowerCase()===re);e.$Pp=a;const y=le=>{const re=f.default.extensionMaxVersions;if(re&&Object.keys(re).includes(le.toLowerCase()))return re[le.toLowerCase()].maxVersion};e.$Qp=y;const $=le=>{const re=f.default.extensionMaxVersions;if(!re)return!0;for(const me of e.$Op)if(me===(0,l.$fp)(le.publisher,le.name).toLowerCase()){const ye=r.lte(le.version,re[me].maxVersion),Re=re[me].minVersion,Ce=Re===void 0?!0:r.gte(le.version,Re);return ye&&Ce}return!0};e.$Rp=$,e.$Sp=(f.default.bannedExtensions?Object.keys(f.default.bannedExtensions):[]).map(le=>le.toLowerCase()),e.$Tp=(f.default.cannotImportExtensions??[]).map(le=>le.toLowerCase());const d=le=>e.$Sp.includes((0,l.$fp)(le.publisher,le.name).toLowerCase());e.$Up=d;const v=le=>{const re=f.default.bannedExtensions;if(!re)return;const me=(0,l.$fp)(le.publisher,le.name).toLowerCase();if(Object.keys(re).includes(me))return re[me].message};e.$Vp=v;var S;(function(le){le[le.None=0]="None",le[le.IncludeVersions=1]="IncludeVersions",le[le.IncludeFiles=2]="IncludeFiles",le[le.IncludeCategoryAndTags=4]="IncludeCategoryAndTags",le[le.IncludeSharedAccounts=8]="IncludeSharedAccounts",le[le.IncludeVersionProperties=16]="IncludeVersionProperties",le[le.ExcludeNonValidated=32]="ExcludeNonValidated",le[le.IncludeInstallationTargets=64]="IncludeInstallationTargets",le[le.IncludeAssetUri=128]="IncludeAssetUri",le[le.IncludeStatistics=256]="IncludeStatistics",le[le.IncludeLatestVersionOnly=512]="IncludeLatestVersionOnly",le[le.Unpublished=4096]="Unpublished",le[le.IncludeNameConflictInfo=32768]="IncludeNameConflictInfo"})(S||(S={}));function A(...le){return String(le.reduce((re,me)=>re|me,0))}var T;(function(le){le[le.Tag=1]="Tag",le[le.ExtensionId=4]="ExtensionId",le[le.Category=5]="Category",le[le.ExtensionName=7]="ExtensionName",le[le.Target=8]="Target",le[le.Featured=9]="Featured",le[le.SearchText=10]="SearchText",le[le.ExcludeWithFlags=12]="ExcludeWithFlags"})(T||(T={}));const q={Icon:"Microsoft.VisualStudio.Services.Icons.Default",Details:"Microsoft.VisualStudio.Services.Content.Details",Changelog:"Microsoft.VisualStudio.Services.Content.Changelog",Manifest:"Microsoft.VisualStudio.Code.Manifest",VSIX:"Microsoft.VisualStudio.Services.VSIXPackage",License:"Microsoft.VisualStudio.Services.Content.License",Repository:"Microsoft.VisualStudio.Services.Links.Source",Signature:"Microsoft.VisualStudio.Services.VsixSignature"},M={Dependency:"Microsoft.VisualStudio.Code.ExtensionDependencies",ExtensionPack:"Microsoft.VisualStudio.Code.ExtensionPack",Engine:"Microsoft.VisualStudio.Code.Engine",PreRelease:"Microsoft.VisualStudio.Code.PreRelease",LocalizedLanguages:"Microsoft.VisualStudio.Code.LocalizedLanguages",WebExtension:"Microsoft.VisualStudio.Code.WebExtension",SponsorLink:"Microsoft.VisualStudio.Code.SponsorLink",SupportLink:"Microsoft.VisualStudio.Services.Links.Support"},G={pageNumber:1,pageSize:10,sortBy:0,sortOrder:0,flags:S.None,criteria:[],assetTypes:[]};class Q{constructor(re=G){this.d=re}get pageNumber(){return this.d.pageNumber}get pageSize(){return this.d.pageSize}get sortBy(){return this.d.sortBy}get sortOrder(){return this.d.sortOrder}get flags(){return this.d.flags}get criteria(){return this.d.criteria}withPage(re,me=this.d.pageSize){return new Q({...this.d,pageNumber:re,pageSize:me})}withFilter(re,...me){const ye=[...this.d.criteria,...me.length?me.map(Re=>({filterType:re,value:Re})):[{filterType:re}]];return new Q({...this.d,criteria:ye})}withSortBy(re){return new Q({...this.d,sortBy:re})}withSortOrder(re){return new Q({...this.d,sortOrder:re})}withFlags(...re){return new Q({...this.d,flags:re.reduce((me,ye)=>me|ye,0)})}withAssetTypes(...re){return new Q({...this.d,assetTypes:re})}withSource(re){return new Q({...this.d,source:re})}get raw(){const{criteria:re,pageNumber:me,pageSize:ye,sortBy:Re,sortOrder:Ce,flags:he,assetTypes:$e}=this.d;return{filters:[{criteria:re,pageNumber:me,pageSize:ye,sortBy:Re,sortOrder:Ce}],assetTypes:$e,flags:he}}get searchText(){const re=this.d.criteria.filter(me=>me.filterType===T.SearchText)[0];return re&&re.value?re.value:""}get telemetryData(){return{filterTypes:this.d.criteria.map(re=>String(re.filterType)),flags:this.d.flags,sortBy:String(this.sortBy),sortOrder:String(this.sortOrder),pageNumber:String(this.pageNumber),source:this.d.source,searchTextLength:this.searchText.length}}}function F(le,re){const me=(le||[]).filter(ye=>ye.statisticName===re)[0];return me?me.value:0}function te(le){const re="Microsoft.VisualStudio.Code.Translation.";return le.files.filter(ye=>ye.assetType.indexOf(re)===0).reduce((ye,Re)=>{const Ce=x(le,Re.assetType);return Ce&&ye.push([Re.assetType.substring(re.length),Ce]),ye},[])}function H(le){if(le.properties){const re=le.properties.filter(Re=>Re.key===q.Repository),me=new RegExp("((git|ssh|http(s)?)|(git@[\\w.]+))(:(//)?)([\\w.@:/\\-~]+)(.git)(/)?"),ye=re.filter(Re=>me.test(Re.value))[0];return ye?{uri:ye.value,fallbackUri:ye.value}:null}return x(le,q.Repository)}function J(le){return{uri:`${le.fallbackAssetUri}/${q.VSIX}?redirect=true${le.targetPlatform?`&targetPlatform=${le.targetPlatform}`:""}`,fallbackUri:`${le.fallbackAssetUri}/${q.VSIX}${le.targetPlatform?`?targetPlatform=${le.targetPlatform}`:""}`}}function x(le,re){return le.files.filter(ye=>ye.assetType===re)[0]?{uri:`${le.assetUri}/${re}${le.targetPlatform?`?targetPlatform=${le.targetPlatform}`:""}`,fallbackUri:`${le.fallbackAssetUri}/${re}${le.targetPlatform?`?targetPlatform=${le.targetPlatform}`:""}`}:null}function se(le,re){const me=le.properties?le.properties.filter(Re=>Re.key===re):[],ye=me.length>0&&me[0].value;return ye?ye.split(",").map(Re=>(0,l.$ep)(Re)):[]}function V(le){return se(le,M.Dependency).map(me=>f.default.modifiedExtensionDependencies?.[me]??me)}function ne(le){const re=le.properties?le.properties.filter(me=>me.key===M.Engine):[];return re.length>0&&re[0].value||""}function K(le){const re=le.properties?le.properties.filter(me=>me.key===M.PreRelease):[];return re.length>0&&re[0].value==="true"}function z(le){const re=le.properties?le.properties.filter(ye=>ye.key===M.LocalizedLanguages):[],me=re.length>0&&re[0].value||"";return me?me.split(","):[]}function U(le){return le.properties?.find(re=>re.key===M.SponsorLink)?.value}function O(le){return le.properties?.find(re=>re.key===M.SupportLink)?.value}function W(le){return le.indexOf("preview")!==-1}function B(le){return le.targetPlatform?(0,E.$Eo)(le.targetPlatform):"undefined"}function _(le){const re=(0,D.$Mb)(le.versions.map(B)),me=!!le.tags?.includes(E.$zo),ye=re.indexOf("web");return me?ye===-1&&re.push("web"):ye!==-1&&re.splice(ye,1),re}function ee(le,re){for(let me=0;me<le.length;me++){const ye=le[me];if(ye.version===le[me-1]?.version){let Re=me;if(B(ye)===re)for(;Re>0&&le[Re-1].version===ye.version;)Re--;Re!==me&&(le.splice(me,1),le.splice(Re,0,ye))}}return le}e.$Wp=ee;function X(le,re,me){le.telemetryData={index:re,querySource:me,queryActivityId:le.queryContext?.[t]}}function ie(le,re,me,ye){const Re=le.versions[0],Ce={manifest:x(re,q.Manifest),readme:x(re,q.Details),changelog:x(re,q.Changelog),license:x(re,q.License),repository:H(re),download:J(re),icon:x(re,q.Icon),signature:x(re,q.Signature),coreTranslations:te(re)};return{identifier:{id:(0,l.$fp)(le.publisher.publisherName,le.extensionName),uuid:le.extensionId},name:le.extensionName,version:re.version,displayName:le.displayName,publisherId:le.publisher.publisherId,publisher:le.publisher.publisherName,publisherDisplayName:le.publisher.displayName,publisherDomain:le.publisher.domain?{link:le.publisher.domain,verified:!!le.publisher.isDomainVerified}:void 0,publisherSponsorLink:U(Re),description:le.shortDescription||"",installCount:F(le.statistics,"install"),rating:F(le.statistics,"averagerating"),ratingCount:F(le.statistics,"ratingcount"),categories:le.categories||[],tags:le.tags||[],releaseDate:Date.parse(le.releaseDate),lastUpdated:Date.parse(le.lastUpdated),allTargetPlatforms:me,assets:Ce,properties:{dependencies:V(re),extensionPack:se(re,M.ExtensionPack),engine:ne(re),localizedLanguages:z(re),targetPlatform:B(re),isPreReleaseVersion:K(re)},hasPreReleaseVersion:K(Re),hasReleaseVersion:!0,preview:W(le.flags),isSigned:!!Ce.signature,queryContext:ye,supportLink:O(Re)}}let ce=class{constructor(re,me,ye,Re,Ce,he,$e,we){this.l=me,this.n=ye,this.o=Re,this.q=Ce,this.u=he,this.w=$e,this.y=we,this.k=()=>Promise.resolve(void 0);const ke=$e.extensionsGallery,Pe=ke?.servicePPEUrl&&we.getValue("_extensionsGallery.enablePPE");this.galleryId=ke?.galleryId||"",this.d=Pe?ke.servicePPEUrl:ke?.serviceUrl,this.g=Pe?void 0:ke?.searchUrl,this.h=ke?.controlUrl,this.j=(0,p.$Fp)($e,this.o,this.y,this.u,re,this.q)}registerBearerTokenProvider(re){this.k=re}z(re=""){return`${this.d}${re}`}isEnabled(){return!!this.d}async getExtensions(re,me,ye,Re){const Ce=N.CancellationToken.isCancellationToken(me)?{}:me,he=N.CancellationToken.isCancellationToken(me)?me:ye,$e=[],we=[],ke=[],Pe=[];let Le=!0;for(const je of re){je.uuid?we.push(je.uuid):$e.push(je.id);const Ne=!!(je.version||je.preRelease);ke.push({id:je.id,uuid:je.uuid,includePreRelease:Ne}),je.version&&Pe.push({id:je.id,uuid:je.uuid,version:je.version}),Le=Le&&!!je.hasPreRelease&&!Ne}if(!we.length&&!$e.length)return[];let Oe=new Q().withPage(1,re.length);we.length&&(Oe=Oe.withFilter(T.ExtensionId,...we)),$e.length&&(Oe=Oe.withFilter(T.ExtensionName,...$e)),(Ce.queryAllVersions||Le)&&(Oe=Oe.withFlags(Oe.flags,S.IncludeVersions)),Ce.source&&(Oe=Oe.withSource(Ce.source));const{extensions:qe}=await this.B(Oe,{targetPlatform:Ce.targetPlatform??s,includePreRelease:ke,versions:Pe,compatible:!!Ce.compatible},he,Re);return Ce.source&&qe.forEach((je,Ne)=>X(je,Ne,Ce.source)),qe}async getCompatibleExtension(re,me,ye){if((0,E.$Go)(re.allTargetPlatforms,ye))return null;if(await this.isExtensionCompatible(re,me,ye))return re;const Re=new Q().withFlags(S.IncludeVersions).withPage(1,1).withFilter(T.ExtensionId,re.identifier.uuid),{extensions:Ce}=await this.B(Re,{targetPlatform:ye,compatible:!0,includePreRelease:me},N.CancellationToken.None,re.queryContext);return Ce.filter(e.$Rp)[0]||null}async isExtensionCompatible(re,me,ye){if(!(0,e.$Rp)(re)||!(0,E.$Ho)(re.properties.targetPlatform,re.allTargetPlatforms,ye)||!me&&re.properties.isPreReleaseVersion)return!1;let Re=re.properties.engine;if(!Re){const Ce=await this.getManifest(re,N.CancellationToken.None);if(!Ce)throw new Error("Manifest was not found");Re=Ce.engines.vscode}return(0,g.$sp)(Re,this.w.vscodeVersion,this.w.date)}async A(re,me,ye,Re,Ce){if(!(0,E.$Ho)(B(re),Re,Ce)||me!=="any"&&K(re)!==(me==="prerelease"))return!1;if(ye)try{const he=await this.G(re);if(!(0,g.$sp)(he,this.w.vscodeVersion,this.w.date))return!1}catch(he){return this.n.error(`Error while getting the engine for the version ${re.version}.`,(0,L.$0)(he)),!1}return!0}async query(re,me){let ye=re.text||"";const Re=re.pageSize??50;let Ce=new Q().withPage(1,Re);ye?(ye=ye.replace(/\bcategory:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(Pe,Le,Oe)=>(Ce=Ce.withFilter(T.Category,Oe||Le),"")),ye=ye.replace(/\btag:("([^"]*)"|([^"]\S*))(\s+|\b|$)/g,(Pe,Le,Oe)=>(Ce=Ce.withFilter(T.Tag,Oe||Le),"")),ye=ye.replace(/\bfeatured(\s+|\b|$)/g,()=>(Ce=Ce.withFilter(T.Featured),"")),ye=ye.trim(),ye&&(ye=ye.length<200?ye:ye.substring(0,200),Ce=Ce.withFilter(T.SearchText,ye)),Ce=Ce.withSortBy(0)):re.ids?Ce=Ce.withFilter(T.ExtensionId,...re.ids):re.names?Ce=Ce.withFilter(T.ExtensionName,...re.names):Ce=Ce.withSortBy(4),typeof re.sortBy=="number"&&(Ce=Ce.withSortBy(re.sortBy)),typeof re.sortOrder=="number"&&(Ce=Ce.withSortOrder(re.sortOrder)),re.source&&(Ce=Ce.withSource(re.source));const he=async(Pe,Le)=>{const{extensions:Oe,total:qe}=await this.B(Pe,{targetPlatform:s,compatible:!1,includePreRelease:!!re.includePreRelease},Le);return Oe.forEach((je,Ne)=>X(je,(Pe.pageNumber-1)*Pe.pageSize+Ne,re.source)),{extensions:Oe,total:qe}},{extensions:$e,total:we}=await he(Ce,me),ke=async(Pe,Le)=>{if(Le.isCancellationRequested)throw new L.$5;const{extensions:Oe}=await he(Ce.withPage(Pe+1),Le);return Oe};return{firstPage:$e,total:we,pageSize:Ce.pageSize,getPage:ke}}async B(re,me,ye,Re){const Ce=re.flags;re.flags&S.IncludeLatestVersionOnly&&re.flags&S.IncludeVersions&&(re=re.withFlags(re.flags&~S.IncludeVersions,S.IncludeLatestVersionOnly)),!(re.flags&S.IncludeLatestVersionOnly)&&!(re.flags&S.IncludeVersions)&&(re=re.withFlags(re.flags,S.IncludeLatestVersionOnly)),me.versions?.length&&(re=re.withFlags(re.flags&~S.IncludeLatestVersionOnly,S.IncludeVersions)),re=re.withFlags(re.flags,S.IncludeAssetUri,S.IncludeCategoryAndTags,S.IncludeFiles,S.IncludeStatistics,S.IncludeVersionProperties);const{galleryExtensions:he,total:$e,context:we}=await this.D(re,ye,Re);if(!(re.flags&S.IncludeLatestVersionOnly)){const Oe=[];for(const qe of he){const je=await this.C(qe,me,we);je&&Oe.push(je)}return{extensions:Oe,total:$e}}const Pe=[],Le=new Map;for(let Oe=0;Oe<he.length;Oe++){const qe=he[Oe],je={id:(0,l.$fp)(qe.publisher.publisherName,qe.extensionName),uuid:qe.extensionId},Ne=(0,P.$Qf)(me.includePreRelease)?me.includePreRelease:!!me.includePreRelease.find(ae=>(0,l.$ap)(ae,je))?.includePreRelease;if(me.compatible&&(0,E.$Go)(_(qe),me.targetPlatform))continue;const Me=await this.C(qe,me,we);!Me||Me.properties.isPreReleaseVersion&&(!Ne||!Me.hasReleaseVersion)||!Me.properties.isPreReleaseVersion&&Me.properties.targetPlatform!==me.targetPlatform&&Me.hasPreReleaseVersion?Le.set(qe.extensionId,Oe):Pe.push([Oe,Me])}if(Le.size){const Oe=new n.$Sd,qe=new Q().withFlags(Ce&~S.IncludeLatestVersionOnly,S.IncludeVersions).withPage(1,Le.size).withFilter(T.ExtensionId,...Le.keys()),{extensions:je}=await this.B(qe,me,ye,Re);this.q.publicLog2("galleryService:additionalQuery",{duration:Oe.elapsed(),count:Le.size});for(const Ne of je){const Me=Le.get(Ne.identifier.uuid);Pe.push([Me,Ne])}}return{extensions:Pe.sort((Oe,qe)=>Oe[0]-qe[0]).map(([,Oe])=>Oe),total:$e}}async C(re,me,ye){const Re={id:(0,l.$fp)(re.publisher.publisherName,re.extensionName),uuid:re.extensionId},Ce=me.versions?.find(ke=>(0,l.$ap)(ke,Re))?.version,he=(0,P.$Qf)(me.includePreRelease)?me.includePreRelease:!!me.includePreRelease.find(ke=>(0,l.$ap)(ke,Re))?.includePreRelease,$e=_(re),we=ee(re.versions,me.targetPlatform);if(me.compatible&&(0,E.$Go)($e,me.targetPlatform))return null;for(let ke=0;ke<we.length;ke++){const Pe=we[ke];if(!(Ce&&Pe.version!==Ce)){if(await this.A(Pe,he?"any":"release",me.compatible,$e,me.targetPlatform))return ie(re,Pe,$e,ye);if(Ce&&Pe.version===Ce)return null}}return Ce||me.compatible?null:ie(re,re.versions[0],$e)}async D(re,me,ye){if(!this.isEnabled())throw new Error("No extension gallery service configured.");re=re.withFlags(re.flags,S.ExcludeNonValidated).withFilter(T.Target,"Microsoft.VisualStudio.Code").withFilter(T.ExcludeWithFlags,A(S.Unpublished));const Re=await this.j,Ce=await this.k(),he=`Bearer ${Ce}`,$e=this.galleryId==="cursor"&&Ce?{Authorization:he}:{},we=this.galleryId==="cursor"&&ye&&o in ye?{[o]:ye[o]}:{[o]:(0,m.$sg)()},ke=JSON.stringify(re.raw),Pe={...Re,"Content-Type":"application/json",Accept:"application/json;api-version=3.0-preview.1","Accept-Encoding":"gzip","Content-Length":String(ke.length),...$e,...we},Le=new n.$Sd;let Oe,qe,je=0;try{const Ne=this.g&&re.criteria.some(ae=>ae.filterType===T.SearchText)?this.g:this.z("/extensionquery");if(Oe=await this.l.request({type:"POST",url:Ne,data:ke,headers:Pe},me),Oe.res.statusCode&&Oe.res.statusCode>=400&&Oe.res.statusCode<500)return{galleryExtensions:[],total:je};const Me=await(0,c.$Mp)(Oe);if(Me){const ae=Me.results[0];let ge=ae.extensions;const pe=ae.resultMetadata&&ae.resultMetadata.filter(ve=>ve.metadataType==="ResultCount")[0];return je=pe&&pe.metadataItems.filter(ve=>ve.name==="TotalCount")[0].count||0,ge.forEach((ve,Ee)=>{let Ie=ve.versions;(0,e.$Pp)((0,l.$fp)(ve.publisher.publisherName,ve.extensionName))&&Ie.find(Te=>(0,e.$Rp)({name:ve.extensionName,publisher:ve.publisher.publisherName,version:Te.version}))!==void 0&&(Ie=Ie.filter(Te=>(0,e.$Rp)({name:ve.extensionName,publisher:ve.publisher.publisherName,version:Te.version})),Ie.length>0&&(ge[Ee]={...ve,versions:Ie}));const Ae=Ie.filter(Te=>{const Fe=ne(Te);return Fe===""||(0,g.$sp)(Fe,this.w.vscodeVersion,this.w.date)});Ae.length<Ie.length&&(Ie=Ae,Ie.length>0&&(ge[Ee]={...ve,versions:Ie}))}),{galleryExtensions:ge,total:je,context:{[t]:Oe.res.headers.activityid,...we}}}return{galleryExtensions:[],total:je}}catch(Ne){const Me=(0,L.$4)(Ne)?E.ExtensionGalleryErrorCode.Cancelled:(0,L.$0)(Ne).startsWith("XHR timeout")?E.ExtensionGalleryErrorCode.Timeout:E.ExtensionGalleryErrorCode.Failed;throw qe=new E.$Lo((0,L.$0)(Ne),Me),qe}finally{this.q.publicLog2("galleryService:query",{...re.telemetryData,requestBodySize:String(ke.length),duration:Le.elapsed(),success:!!Oe&&(0,c.$Ip)(Oe),responseBodySize:Oe?.res.headers["Content-Length"],statusCode:Oe?String(Oe.res.statusCode):void 0,errorCode:qe?.code,count:String(je)})}}async reportStatistic(re,me,ye,Re){if(!this.isEnabled())return;const Ce=j.$o?this.z(`/itemName/${re}.${me}/version/${ye}/statType/${Re==="install"?"1":"3"}/vscodewebextension`):this.z(`/publishers/${re}/extensions/${me}/${ye}/stats?statType=${Re}`),he=j.$o?"api-version=6.1-preview.1":"*/*;api-version=4.0-preview.1",we={...await this.j,Accept:he};try{await this.l.request({type:"POST",url:Ce,headers:we},N.CancellationToken.None)}catch{}}async download(re,me,ye){this.n.trace("ExtensionGalleryService#download",re.identifier.id);const Re=(0,l.$ip)(re),Ce=new Date().getTime(),he=Le=>this.q.publicLog("galleryService:downloadVSIX",{...Re,duration:Le}),$e=ye===2?"install":ye===3?"update":"",we=$e?{uri:`${re.assets.download.uri}${R.URI.parse(re.assets.download.uri).query?"&":"?"}${$e}=true`,fallbackUri:`${re.assets.download.fallbackUri}${R.URI.parse(re.assets.download.fallbackUri).query?"&":"?"}${$e}=true`}:re.assets.download,ke=re.queryContext?.[t]?{[t]:re.queryContext[t]}:void 0,Pe=await this.F(we,ke?{headers:ke}:void 0);await this.u.writeFile(me,Pe.stream),he(new Date().getTime()-Ce)}async downloadSignatureArchive(re,me){if(!re.assets.signature)throw new Error("No signature asset found");this.n.trace("ExtensionGalleryService#downloadSignatureArchive",re.identifier.id);const ye=await this.F(re.assets.signature);await this.u.writeFile(me,ye.stream)}async getReadme(re,me){if(re.assets.readme){const ye=await this.F(re.assets.readme,{},me);return await(0,c.$Lp)(ye)||""}return""}async getManifest(re,me){if(re.assets.manifest){const ye=await this.F(re.assets.manifest,{},me),Re=await(0,c.$Lp)(ye);return Re?JSON.parse(Re):null}return null}async E(re,me){const ye=x(re,q.Manifest);if(!ye)throw new Error("Manifest was not found");const Re={"Accept-Encoding":"gzip"},Ce=await this.F(ye,{headers:Re});return await(0,c.$Mp)(Ce)}async getCoreTranslation(re,me){const ye=re.assets.coreTranslations.filter(Re=>Re[0]===me.toUpperCase())[0];if(ye){const Re=await this.F(ye[1]),Ce=await(0,c.$Lp)(Re);return Ce?JSON.parse(Ce):null}return null}async getChangelog(re,me){if(re.assets.changelog){const ye=await this.F(re.assets.changelog,{},me);return await(0,c.$Lp)(ye)||""}return""}async getAllCompatibleVersions(re,me,ye){let Re=new Q().withFlags(S.IncludeVersions,S.IncludeCategoryAndTags,S.IncludeFiles,S.IncludeVersionProperties).withPage(1,1);re.identifier.uuid?Re=Re.withFilter(T.ExtensionId,re.identifier.uuid):Re=Re.withFilter(T.ExtensionName,re.identifier.id);const{galleryExtensions:Ce}=await this.D(Re,N.CancellationToken.None,re.queryContext);if(!Ce.length)return[];const he=_(Ce[0]);if((0,E.$Go)(he,ye))return[];const $e=[];await Promise.all(Ce[0].versions.map(async Pe=>{try{await this.A(Pe,me?"any":"release",!0,he,ye)&&$e.push(Pe)}catch{}}));const we=[],ke=new Set;for(const Pe of ee($e,ye))ke.has(Pe.version)||(ke.add(Pe.version),we.push({version:Pe.version,date:Pe.lastUpdated,isPreReleaseVersion:K(Pe)}));return we}async F(re,me={},ye=N.CancellationToken.None){const Re=await this.j,Ce={type:"GET"},he={...Re,...me.headers||{}};me={...me,...Ce,headers:he};const $e=re.uri,we=re.fallbackUri,ke={...me,url:$e};try{const Pe=await this.l.request(ke,ye);if(Pe.res.statusCode===200)return Pe;const Le=await(0,c.$Lp)(Pe);throw new Error(`Expected 200, got back ${Pe.res.statusCode} instead.

${Le}`)}catch(Pe){if((0,L.$4)(Pe))throw Pe;const Le=(0,L.$0)(Pe);this.q.publicLog2("galleryService:cdnFallback",{url:$e,message:Le});const Oe={...me,url:we};return this.l.request(Oe,ye)}}async G(re){let me=ne(re);if(!me){const ye=await this.E(re,N.CancellationToken.None);if(!ye)throw new Error("Manifest was not found");me=ye.engines.vscode}return me}async getExtensionsControlManifest(){if(!this.isEnabled())throw new Error("No extension gallery service configured.");if(!this.h)return{malicious:[],deprecated:{},search:[]};const re=await this.l.request({type:"GET",url:this.h},N.CancellationToken.None);if(re.res.statusCode!==200)throw new Error("Could not get extensions report.");const me=await(0,c.$Mp)(re),ye=[],Re={},Ce=[];if(me){for(const he of me.malicious)ye.push({id:he});if(me.migrateToPreRelease)for(const[he,$e]of Object.entries(me.migrateToPreRelease))(!$e.engine||(0,g.$sp)($e.engine,this.w.vscodeVersion,this.w.date))&&(Re[he.toLowerCase()]={disallowInstall:!0,extension:{id:$e.id,displayName:$e.displayName,autoMigrate:{storage:!!$e.migrateStorage},preRelease:!0}});if(me.deprecated)for(const[he,$e]of Object.entries(me.deprecated))$e&&(Re[he.toLowerCase()]=(0,P.$Qf)($e)?{}:$e);if(me.search)for(const he of me.search)Ce.push(he)}return{malicious:ye,deprecated:Re,search:Ce}}};ce=Se([Z(1,c.$Gp),Z(2,h.$qj),Z(3,k.$ci),Z(4,i.$Al),Z(5,w.$wk),Z(6,u.$Ij),Z(7,C.$Bi)],ce);let fe=class extends ce{constructor(re,me,ye,Re,Ce,he,$e,we){super(re,me,ye,Re,Ce,he,$e,we)}};e.$Xp=fe,e.$Xp=fe=Se([Z(0,b.$yp),Z(1,c.$Gp),Z(2,h.$qj),Z(3,k.$ci),Z(4,i.$Al),Z(5,w.$wk),Z(6,u.$Ij),Z(7,C.$Bi)],fe);let be=class extends ce{constructor(re,me,ye,Re,Ce,he,$e){super(void 0,re,me,ye,Re,Ce,he,$e)}};e.$Yp=be,e.$Yp=be=Se([Z(0,c.$Gp),Z(1,h.$qj),Z(2,k.$ci),Z(3,i.$Al),Z(4,w.$wk),Z(5,u.$Ij),Z(6,C.$Bi)],be)}),define(ue[246],de([0,1,17,6,26,7,3,2,5,12,10,151,114,29,33,45,8,60,23,22,28,18]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$bq=e.$aq=e.$_p=e.$$p=void 0;let i=class extends P.$Tc{get onInstallExtension(){return this.n.event}get onDidInstallExtensions(){return this.q.event}get onUninstallExtension(){return this.s.event}get onDidUninstallExtension(){return this.t.event}get onDidUpdateExtensionMetadata(){return this.u.event}constructor(a,y,$,d,v,S){super(),this.y=a,this.z=y,this.C=$,this.F=d,this.G=v,this.H=S,this.h=0,this.j=new Map,this.m=new Map,this.n=this.D(new I.$Wd),this.q=this.D(new I.$Wd),this.s=this.D(new I.$Wd),this.t=this.D(new I.$Wd),this.u=this.D(new I.$Wd),this.w=[],this.D((0,P.$Rc)(()=>{this.j.forEach(({task:A})=>A.cancel()),this.m.forEach(A=>A.cancel()),this.j.clear(),this.m.clear()}))}async canInstall(a){const y=await this.getTargetPlatform();return a.allTargetPlatforms.some($=>(0,l.$Ho)($,a.allTargetPlatforms,y))}async installFromGallery(a,y={}){try{const d=(await this.installGalleryExtensions([{extension:a,options:y}])).find(({identifier:v})=>(0,g.$ap)(v,a.identifier));if(d?.local)return d?.local;throw d?.error?d.error:new l.$Ko(`Unknown error while installing extension ${a.identifier.id}`,l.ExtensionManagementErrorCode.Unknown)}catch($){throw n($)}}async installGalleryExtensions(a){if(!this.y.isEnabled())throw new l.$Ko(k.localize(0,null),l.ExtensionManagementErrorCode.NotAllowed);const y=[],$=[];await Promise.allSettled(a.map(async({extension:d,options:v})=>{try{const S=await this.O(d,!!v?.installGivenVersion,!!v?.installPreReleaseVersion);$.push({...S,options:v})}catch(S){y.push({identifier:d.identifier,operation:2,source:d,error:S})}})),$.length&&y.push(...await this.I($));for(const d of y)d.error&&(this.F.error("Failed to install extension.",d.identifier.id),this.F.error(d.error),d.source&&!C.URI.isUri(d.source)&&s(this.z,"extensionGallery:install",{extensionData:(0,g.$ip)(d.source),error:d.error}));return y}async uninstall(a,y={}){return this.F.trace("ExtensionManagementService#uninstall",a.identifier.id),this.Q(a,y)}async toggleAppliationScope(a,y){if((0,p.$wm)(a.manifest)||a.isBuiltin)return a;if(a.isApplicationScoped){let $=await this.updateMetadata(a,{isApplicationScoped:!1},this.H.defaultProfile.extensionsResource);this.C.extUri.isEqual(y,this.H.defaultProfile.extensionsResource)||($=await this.ab(a,this.H.defaultProfile.extensionsResource,y));for(const d of this.H.profiles){const v=(await this.getInstalled(1,d.extensionsResource)).find(S=>(0,g.$ap)(S.identifier,a.identifier));v?this.u.fire(v):this.t.fire({identifier:a.identifier,profileLocation:d.extensionsResource})}return $}else{const $=this.C.extUri.isEqual(y,this.H.defaultProfile.extensionsResource)?await this.updateMetadata(a,{isApplicationScoped:!0},this.H.defaultProfile.extensionsResource):await this.ab(a,y,this.H.defaultProfile.extensionsResource,{isApplicationScoped:!0});return this.q.fire([{identifier:$.identifier,operation:2,local:$,profileLocation:this.H.defaultProfile.extensionsResource,applicationScoped:!0}]),$}}getExtensionsControlManifest(){const a=new Date().getTime();return(!this.g||a-this.h>1e3*60*5)&&(this.g=this.X(),this.h=a),this.g}registerParticipant(a){this.w.push(a)}async I(a){const y=[];return await Promise.allSettled(a.map(async $=>{try{const d=await this.J($,(v,S)=>a.some(A=>(0,g.$ep)(S.identifier.id)===(0,g.$fp)(A.manifest.publisher,A.manifest.name))?!1:this.L(v,S));y.push(...d)}catch(d){y.push({identifier:{id:(0,g.$fp)($.manifest.publisher,$.manifest.name)},operation:2,source:$.extension,error:d})}})),this.q.fire(y),y}async J({manifest:a,extension:y,options:$},d){const v=$.isApplicationScoped||$.isBuiltin||(0,p.$wm)(a),S={...$,installOnlyNewlyAddedFromExtensionPack:C.URI.isUri(y)?$.installOnlyNewlyAddedFromExtensionPack:!0,isApplicationScoped:v,profileLocation:v?this.H.defaultProfile.extensionsResource:$.profileLocation??this.Y()},A=Q=>`${g.$bp.create(Q).toString()}${S.profileLocation?`-${S.profileLocation.toString()}`:""}`;if(!C.URI.isUri(y)){const Q=this.j.get(A(y));if(Q)return this.F.info("Extensions is already requested to install",y.identifier.id),await Q.task.waitUntilTaskIsFinished(),[]}const T=[],q=[],M=[],Y=this.Z(a,y,S);C.URI.isUri(y)||this.j.set(A(y),{task:Y,waitingTasks:[]}),this.n.fire({identifier:Y.identifier,source:y,profileLocation:S.profileLocation}),this.F.info("Installing extension:",Y.identifier.id),T.push({task:Y,manifest:a});let G=!1;try{if(S.donotIncludePackAndDependencies)this.F.info("Installing the extension without checking dependencies and pack",Y.identifier.id);else try{const F=await this.N(Y.identifier,a,!!S.installOnlyNewlyAddedFromExtensionPack,!!S.installPreReleaseVersion,S.profileLocation,C.URI.isUri(y)?void 0:y.queryContext),te=await this.getInstalled(void 0,S.profileLocation),H={...S,donotIncludePackAndDependencies:!0,context:{...S.context,[l.$Co]:!0}};for(const{gallery:J,manifest:x}of(0,D.$Mb)(F,({gallery:se})=>se.identifier.id)){G=G||!!x.extensionDependencies?.some(ne=>(0,g.$ap)({id:ne},Y.identifier));const se=A(J),V=this.j.get(se);if(V){if(d(Y,V.task)){const ne=V.task.identifier;this.F.info("Waiting for already requested installing extension",ne.id,Y.identifier.id),V.waitingTasks.push(Y),q.push(I.Event.toPromise(I.Event.filter(this.onDidInstallExtensions,K=>K.some(z=>(0,g.$ap)(z.identifier,ne)))).then(K=>{if(this.F.info("Finished waiting for already requested installing extension",ne.id,Y.identifier.id),!K.find(U=>(0,g.$ap)(U.identifier,ne))?.local)throw new Error(`Extension ${ne.id} is not installed`)}))}}else if(!te.some(({identifier:ne})=>(0,g.$ap)(ne,J.identifier))){const ne=this.Z(x,J,H);this.j.set(se,{task:ne,waitingTasks:[Y]}),this.n.fire({identifier:ne.identifier,source:J,profileLocation:S.profileLocation}),this.F.info("Installing extension:",ne.identifier.id,Y.identifier.id),T.push({task:ne,manifest:x})}}}catch(F){if(C.URI.isUri(Y.source))(0,D.$Lb)(a.extensionDependencies)&&this.F.warn("Cannot install dependencies of extension:",Y.identifier.id,F.message),(0,D.$Lb)(a.extensionPack)&&this.F.warn("Cannot install packed extensions of extension:",Y.identifier.id,F.message);else throw this.F.error("Error while preparing to install dependencies and extension packs of the extension:",Y.identifier.id),F}const Q=T.reduce((F,{task:te,manifest:H})=>(F.set(te.identifier.id.toLowerCase(),{task:te,manifest:H}),F),new Map);for(;Q.size;){let F;const te=[...Q.values()].filter(({manifest:H})=>!H.extensionDependencies?.some(J=>Q.has(J.toLowerCase())));te.length?F=Q.size===1?te:te.filter(({task:H})=>!(H===Y&&!G)):(this.F.info("Found extensions with circular dependencies",te.map(({task:H})=>H.identifier.id)),F=[...Q.values()]),await this.M(F.map(async({task:H})=>{const J=new Date().getTime();try{const x=await H.run();if(await this.M(this.w.map(se=>se.postInstall(x,H.source,S,L.CancellationToken.None))),!C.URI.isUri(H.source)){const se=H.operation===3,V=se?void 0:(new Date().getTime()-H.source.lastUpdated)/1e3;if(s(this.z,se?"extensionGallery:update":"extensionGallery:install",{extensionData:(0,g.$ip)(H.source),verificationStatus:H.verificationStatus,duration:new Date().getTime()-J,durationSinceUpdate:V}),R.$o&&H.operation!==3)try{await this.y.reportStatistic(x.manifest.publisher,x.manifest.name,x.manifest.version,"install")}catch{}}M.push({local:x,identifier:H.identifier,operation:H.operation,source:H.source,context:H.options.context,profileLocation:H.profileLocation,applicationScoped:x.isApplicationScoped})}catch(x){throw this.F.error("Error while installing the extension",H.identifier.id,(0,j.$0)(x)),x}finally{Q.delete(H.identifier.id.toLowerCase())}}))}return q.length&&await this.M(q),M.forEach(({identifier:F})=>this.F.info("Extension installed successfully:",F.id)),M}catch(Q){if(T.forEach(({task:F})=>F.cancel()),M.length)try{const F=await Promise.allSettled(M.map(({local:te})=>this.$(te,{versionOnly:!0,profileLocation:S.profileLocation}).run()));for(let te=0;te<F.length;te++){const H=F[te],{identifier:J}=M[te];H.status==="fulfilled"?this.F.info("Rollback: Uninstalled extension",J.id):this.F.warn("Rollback: Error while uninstalling extension",J.id,(0,j.$0)(H.reason))}}catch(F){this.F.warn("Error while rolling back extensions",(0,j.$0)(F),M.map(({identifier:te})=>te.id))}return T.map(({task:F})=>({identifier:F.identifier,operation:2,source:F.source,context:S.context,profileLocation:S.profileLocation,error:Q}))}finally{for(const{task:Q}of T)Q.source&&!C.URI.isUri(Q.source)&&this.j.delete(A(Q.source))}}L(a,y){for(const[,{task:$,waitingTasks:d}]of this.j.entries())if($===a&&(d.includes(y)||d.some(v=>this.L(v,y)))||$===y&&d[0]&&!this.L(a,d[0]))return!1;return!0}async M(a){const y=[],$=[],d=await Promise.allSettled(a);for(const v of d)v.status==="fulfilled"?y.push(v.value):$.push(v.reason);if($.length)throw r($);return y}async N(a,y,$,d,v,S){if(!this.y.isEnabled())return[];const A=await this.getInstalled(void 0,v),T=[],q=[],M=async(Y,G)=>{T.push(Y);let Q=G.extensionDependencies||[];if(h.default.modifiedExtensionDependencies!==void 0){const te=h.default.modifiedExtensionDependencies;Q=Q.map(H=>te[H]!==void 0?te[H]:H)}const F=[...Q];if(G.extensionPack){const te=$?A.find(H=>(0,g.$ap)(H.identifier,Y)):void 0;for(const H of G.extensionPack)te&&te.manifest.extensionPack&&te.manifest.extensionPack.some(J=>(0,g.$ap)({id:J},{id:H}))||F.every(J=>!(0,g.$ap)({id:J},{id:H}))&&F.push(H)}if(F.length){const te=F.filter(H=>T.every(J=>!(0,g.$ap)(J,{id:H})));if(te.length){const H=await this.y.getExtensions(te.map(J=>({id:J,preRelease:d})),{},L.CancellationToken.None,S);for(const J of H){if(T.find(V=>(0,g.$ap)(V,J.identifier)))continue;const x=Q.some(V=>(0,g.$ap)({id:V},J.identifier));let se;try{se=await this.O(J,!1,d)}catch(V){if(x)throw V;this.F.info("Skipping the packed extension as it cannot be installed",J.identifier.id,(0,j.$0)(V));continue}q.push({gallery:se.extension,manifest:se.manifest}),await M(se.extension.identifier,se.manifest)}}}};return await M(a,y),q}async O(a,y,$){let d;const v=await this.getExtensionsControlManifest();if(v.malicious.some(T=>(0,g.$ap)(a.identifier,T)))throw new l.$Ko(k.localize(1,null,a.identifier.id),l.ExtensionManagementErrorCode.Malicious);const S=v.deprecated[a.identifier.id.toLowerCase()];if(S?.extension?.autoMigrate){if(this.F.info(`The '${a.identifier.id}' extension is deprecated, fetching the compatible '${S.extension.id}' extension instead.`),d=(await this.y.getExtensions([{id:S.extension.id,preRelease:S.extension.preRelease}],{targetPlatform:await this.getTargetPlatform(),compatible:!0},L.CancellationToken.None))[0],!d)throw new l.$Ko(k.localize(2,null,a.identifier.id,S.extension.id),l.ExtensionManagementErrorCode.Deprecated)}else{if(!await this.canInstall(a)){if((0,E.$Up)(a)){const q=(0,E.$Vp)(a)??"Extension is unsupported in Cursor.";throw new l.$Ko(q,l.ExtensionManagementErrorCode.Incompatible)}const T=await this.getTargetPlatform();throw new l.$Ko(k.localize(3,null,a.identifier.id,this.G.nameLong,(0,l.$Do)(T)),l.ExtensionManagementErrorCode.IncompatibleTargetPlatform)}if(d=await this.P(a,y,$),!d)throw!$&&a.properties.isPreReleaseVersion&&(await this.y.getExtensions([a.identifier],{},L.CancellationToken.None,a.queryContext))[0]?new l.$Ko(k.localize(4,null,a.displayName??a.identifier.id),l.ExtensionManagementErrorCode.ReleaseVersionNotFound):new l.$Ko(k.localize(5,null,a.identifier.id,this.G.nameLong,this.G.version,this.G.vscodeVersion),l.ExtensionManagementErrorCode.Incompatible)}this.F.info("Getting Manifest...",d.identifier.id);const A=await this.y.getManifest(d,L.CancellationToken.None);if(A===null)throw new l.$Ko(`Missing manifest for extension ${d.identifier.id}`,l.ExtensionManagementErrorCode.Invalid);if(A.version!==d.version)throw new l.$Ko(`Cannot install '${d.identifier.id}' extension because of version mismatch in Marketplace`,l.ExtensionManagementErrorCode.Invalid);return{extension:d,manifest:A}}async P(a,y,$){const d=await this.getTargetPlatform();let v=null;return!y&&a.hasPreReleaseVersion&&a.properties.isPreReleaseVersion!==$&&(v=(await this.y.getExtensions([{...a.identifier,preRelease:$}],{targetPlatform:d,compatible:!0},L.CancellationToken.None,a.queryContext)).filter(E.$Rp)[0]||null),!v&&await this.y.isExtensionCompatible(a,$,d)&&(v=a),v||(y?v=(await this.y.getExtensions([{...a.identifier,version:a.version}],{targetPlatform:d,compatible:!0},L.CancellationToken.None,a.queryContext)).filter(E.$Rp)[0]||null:v=await this.y.getCompatibleExtension(a,$,d)),v}async Q(a,y){const $={...y,profileLocation:a.isApplicationScoped?this.H.defaultProfile.extensionsResource:y.profileLocation??this.Y()},d=M=>`${M.id.toLowerCase()}${$.versionOnly?`-${a.manifest.version}`:""}${$.profileLocation?`@${$.profileLocation.toString()}`:""}`,v=this.m.get(d(a.identifier));if(v)return this.F.info("Extensions is already requested to uninstall",a.identifier.id),v.waitUntilTaskIsFinished();const S=M=>{const Y=this.$(M,$);return this.m.set(d(Y.extension.identifier),Y),$.profileLocation?this.F.info("Uninstalling extension from the profile:",`${M.identifier.id}@${M.manifest.version}`,$.profileLocation.toString()):this.F.info("Uninstalling extension:",`${M.identifier.id}@${M.manifest.version}`),this.s.fire({identifier:M.identifier,profileLocation:$.profileLocation,applicationScoped:M.isApplicationScoped}),Y},A=(M,Y)=>{Y?$.profileLocation?this.F.error("Failed to uninstall extension from the profile:",`${M.identifier.id}@${M.manifest.version}`,$.profileLocation.toString(),Y.message):this.F.error("Failed to uninstall extension:",`${M.identifier.id}@${M.manifest.version}`,Y.message):$.profileLocation?this.F.info("Successfully uninstalled extension from the profile",`${M.identifier.id}@${M.manifest.version}`,$.profileLocation.toString()):this.F.info("Successfully uninstalled extension:",`${M.identifier.id}@${M.manifest.version}`),s(this.z,"extensionGallery:uninstall",{extensionData:(0,g.$hp)(M),error:Y}),this.t.fire({identifier:M.identifier,error:Y?.code,profileLocation:$.profileLocation,applicationScoped:M.isApplicationScoped})},T=[],q=[];try{T.push(S(a));const M=await this.getInstalled(1,$.profileLocation);if($.donotIncludePack)this.F.info("Uninstalling the extension without including packed extension",`${a.identifier.id}@${a.manifest.version}`);else{const Y=this.U(a,M);for(const G of Y)this.m.has(d(G.identifier))?this.F.info("Extensions is already requested to uninstall",G.identifier.id):T.push(S(G))}$.donotCheckDependents?this.F.info("Uninstalling the extension without checking dependents",`${a.identifier.id}@${a.manifest.version}`):this.R(T.map(Y=>Y.extension),M,a),await this.M(T.map(async Y=>{try{if(await Y.run(),await this.M(this.w.map(G=>G.postUninstall(Y.extension,$,L.CancellationToken.None))),Y.extension.identifier.uuid)try{await this.y.reportStatistic(Y.extension.manifest.publisher,Y.extension.manifest.name,Y.extension.manifest.version,"uninstall")}catch{}A(Y.extension)}catch(G){const Q=G instanceof l.$Ko?G:new l.$Ko((0,j.$0)(G),l.ExtensionManagementErrorCode.Internal);throw A(Y.extension,Q),Q}finally{q.push(Y)}}))}catch(M){const Y=M instanceof l.$Ko?M:new l.$Ko((0,j.$0)(M),l.ExtensionManagementErrorCode.Internal);for(const G of T){try{G.cancel()}catch{}q.includes(G)||A(G.extension,Y)}throw Y}finally{for(const M of T)this.m.delete(d(M.extension.identifier))||this.F.warn("Uninstallation task is not found in the cache",M.extension.identifier.id)}}R(a,y,$){for(const d of a){const v=this.W(d,y);if(v.length){const S=v.filter(A=>!a.some(T=>(0,g.$ap)(T.identifier,A.identifier)));if(S.length)throw new Error(this.S(d,S,$))}}}S(a,y,$){return $===a?y.length===1?k.localize(6,null,$.manifest.displayName||$.manifest.name,y[0].manifest.displayName||y[0].manifest.name):y.length===2?k.localize(7,null,$.manifest.displayName||$.manifest.name,y[0].manifest.displayName||y[0].manifest.name,y[1].manifest.displayName||y[1].manifest.name):k.localize(8,null,$.manifest.displayName||$.manifest.name,y[0].manifest.displayName||y[0].manifest.name,y[1].manifest.displayName||y[1].manifest.name):y.length===1?k.localize(9,null,$.manifest.displayName||$.manifest.name,a.manifest.displayName||a.manifest.name,y[0].manifest.displayName||y[0].manifest.name):y.length===2?k.localize(10,null,$.manifest.displayName||$.manifest.name,a.manifest.displayName||a.manifest.name,y[0].manifest.displayName||y[0].manifest.name,y[1].manifest.displayName||y[1].manifest.name):k.localize(11,null,$.manifest.displayName||$.manifest.name,a.manifest.displayName||a.manifest.name,y[0].manifest.displayName||y[0].manifest.name,y[1].manifest.displayName||y[1].manifest.name)}U(a,y,$=[]){if($.indexOf(a)!==-1)return[];$.push(a);const d=a.manifest.extensionPack?a.manifest.extensionPack:[];if(d.length){const v=y.filter(A=>!A.isBuiltin&&d.some(T=>(0,g.$ap)({id:T},A.identifier))),S=[];for(const A of v)S.push(...this.U(A,y,$));return[...v,...S]}return[]}W(a,y){return h.default.extensionsWithNoDependents?.includes(a.identifier.id)?[]:y.filter($=>$.manifest.extensionDependencies&&$.manifest.extensionDependencies.some(d=>(0,g.$ap)({id:d},a.identifier)))}async X(){try{this.F.trace("ExtensionManagementService.refreshReportedCache");const a=await this.y.getExtensionsControlManifest();return this.F.trace("ExtensionManagementService.refreshControlCache",a),a}catch{return this.F.trace("ExtensionManagementService.refreshControlCache - failed to get extension control manifest"),{malicious:[],deprecated:{},search:[]}}}};e.$$p=i,e.$$p=i=Se([Z(0,l.$Jo),Z(1,u.$Al),Z(2,c.$7k),Z(3,w.$qj),Z(4,f.$Ij),Z(5,b.$9k)],i);function r(o){const a=Array.isArray(o)?o:[o];return a.length===1?a[0]instanceof Error?a[0]:new Error(a[0]):a.reduce((y,$)=>new Error(`${y.message}${y.message?",":""}${$ instanceof Error?$.message:$}`),new Error(""))}e.$_p=r;function n(o){if(o instanceof l.$Ko)return o;if(o instanceof l.$Lo){const y=new l.$Ko(o.message,l.ExtensionManagementErrorCode.Gallery);return y.stack=o.stack,y}const a=new l.$Ko(o.message,l.ExtensionManagementErrorCode.Internal);return a.stack=o.stack,a}e.$aq=n;function s(o,a,{extensionData:y,verificationStatus:$,duration:d,error:v,durationSinceUpdate:S}){let A,T;(0,m.$Sf)($)&&($===!0?$="Verified":($===!1||(A=l.ExtensionManagementErrorCode.Signature,T=$),$="Unverified")),v&&(v instanceof l.$Ko||v instanceof l.$Lo?(A=v.code,v.code===l.ExtensionManagementErrorCode.Signature&&(T=v.message)):A=l.ExtensionManagementErrorCode.Internal),o.publicLog(a,{...y,verificationStatus:$,success:!v,duration:d,errorcode:A,errorcodeDetail:T,durationSinceUpdate:S})}class t{constructor(){this.d=new N.$7g}async waitUntilTaskIsFinished(){return await this.d.wait(),this.g}async run(){return this.g||(this.g=(0,N.$Vg)(a=>this.h(a))),this.d.open(),this.g}cancel(){this.g||(this.g=(0,N.$Vg)(a=>new Promise((y,$)=>{const d=a.onCancellationRequested(()=>{d.dispose(),$(new j.$5)})})),this.d.open()),this.g.cancel()}}e.$bq=t}),define(ue[84],de([0,1,4,3,2,19,33,23,17,8,12]),function(oe,e,D,N,L,j,I,P,R,m,C){"use strict";var k;Object.defineProperty(e,"__esModule",{value:!0}),e.$xI=e.$wI=void 0,e.$wI=(0,D.$8h)("IExtensionStorageService");const E=/^extensionKeys\/([^.]+\..+)@(\d+\.\d+\.\d+(-.*)?)$/;let l=class extends L.$Tc{static{k=this}static{this.a=512*1024}static b(p){return`extensionKeys/${(0,I.$ep)(p.id)}@${p.version}`}static c(p){const w=E.exec(p);if(w&&w[1])return{id:w[1],version:w[2]}}static async removeOutdatedExtensionVersions(p,w){const h=await p.getInstalled(),f=[];for(const[u,c]of k.f(w)){const b=h.find(i=>(0,I.$ap)(i.identifier,{id:u}))?.manifest.version;for(const i of c)b!==i&&f.push(k.b({id:u,version:i}))}for(const u of f)w.remove(u,0)}static f(p){const w=new Map,h=p.keys(0,1);for(const f of h){const u=k.c(f);if(u){let c=w.get(u.id.toLowerCase());c||w.set(u.id.toLowerCase(),c=[]),c.push(u.version)}}return w}constructor(p,w,h){super(),this.j=p,this.m=w,this.n=h,this.g=this.D(new N.$Wd),this.onDidChangeExtensionStorageToSync=this.g.event,this.h=k.f(p),this.D(this.j.onDidChangeValue(0,void 0,this.D(new L.$Sc))(f=>this.q(f)))}q(p){if(this.h.has(p.key.toLowerCase())){this.g.fire();return}const w=k.c(p.key);if(w){if(this.j.get(p.key,0)===void 0)this.h.delete(w.id.toLowerCase());else{let h=this.h.get(w.id.toLowerCase());h||this.h.set(w.id.toLowerCase(),h=[]),h.push(w.version),this.g.fire()}return}}r(p){if((0,C.$Kf)(p))return p;const w=p.manifest?p.manifest.publisher:p.publisher,h=p.manifest?p.manifest.name:p.name;return(0,I.$dp)(w,h)}getExtensionState(p,w){const h=this.r(p),f=this.getExtensionStateRaw(p,w);if(f)try{return JSON.parse(f)}catch(u){this.n.error(`[mainThreadStorage] unexpected error parsing storage contents (extensionId: ${h}, global: ${w}): ${u}`)}}getExtensionStateRaw(p,w){const h=this.r(p),f=this.j.get(h,w?0:1);return f&&f?.length>k.a&&this.n.warn(`[mainThreadStorage] large extension state detected (extensionId: ${h}, global: ${w}): ${f.length/1024}kb. Consider to use 'storageUri' or 'globalStorageUri' to store this data on disk instead.`),f}setExtensionState(p,w,h){const f=this.r(p);w===void 0?this.j.remove(f,h?0:1):this.j.store(f,JSON.stringify(w),h?0:1,1)}setKeysForSync(p,w){this.j.store(k.b(p),JSON.stringify(w),0,1)}getKeysForSync(p){const w=this.m.extensionSyncedKeys?.[p.id.toLowerCase()],h=this.j.get(k.b(p),0),f=h?JSON.parse(h):void 0;return f&&w?(0,R.$Mb)([...f,...w]):f||w}addToMigrationList(p,w){if(p!==w){const h=this.s.filter(f=>!f.includes(p)&&!f.includes(w));h.push([p,w]),this.s=h}}getSourceExtensionToMigrate(p){const w=this.s.find(([,h])=>p===h);return w?w[0]:void 0}get s(){const p=this.j.get("extensionStorage.migrationList",-1,"[]");try{const w=JSON.parse(p);if(Array.isArray(w))return w}catch{}return[]}set s(p){p.length?this.j.store("extensionStorage.migrationList",JSON.stringify(p),-1,1):this.j.remove("extensionStorage.migrationList",-1)}};e.$xI=l,e.$xI=l=k=Se([Z(0,j.$yp),Z(1,P.$Ij),Z(2,m.$qj)],l)}),define(ue[115],de([0,1,6,14,26,38,7,3,54,2,35,25,16,20,49,12,10,31,32,71,155,97,15,246,29,33,52,83,225,243,183,213,226,72,11,4,8,23,22,28,18]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i,r,n,s,t,o,a,y,$,d,v,S,A,T,q,M,Y,G,Q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$uq=e.$tq=e.$sq=e.$rq=void 0,e.$rq=(0,T.$9h)(n.$Mo);const F=".vsctmp";let te=class extends r.$$p{constructor(K,z,U,O,W,B,_,ee,X,ie,ce,fe){super(K,z,ce,U,ie,fe),this.fb=W,this.gb=B,this.hb=_,this.ib=X,this.eb=new Map,this.rb=new C.$Bc;const be=this.D(ee.createInstance(y.$nq));this.bb=this.D(ee.createInstance(H,re=>be.postUninstall(re))),this.cb=this.D(new d.$pq(fe,X,ce,this,this.F)),this.db=this.D(ee.createInstance(a.$mq));const le=this.D(new v.$qq(this,this.fb,fe,B,ce,X,U));this.D(le.onDidChangeExtensionsByAnotherSource(re=>this.qb(re))),this.sb()}getTargetPlatform(){return this.jb||(this.jb=(0,s.$lp)(this.ib,this.F)),this.jb}async zip(K){this.F.trace("ExtensionManagementService#zip",K.identifier.id);const z=await this.pb(K),U=await(0,u.zip)((0,l.$Jg)(this.db.extensionsDownloadDir,(0,h.$sg)()).fsPath,z);return w.URI.file(U)}async unzip(K){return this.F.trace("ExtensionManagementService#unzip",K.toString()),(await this.install(K)).identifier}async getManifest(K){const{location:z,cleanup:U}=await this.lb(K),O=E.$kc(z.fsPath);try{return await(0,$.$oq)(O)}finally{await U()}}getInstalled(K,z=this.H.defaultProfile.extensionsResource){return this.bb.scanExtensions(K??null,z)}scanAllUserInstalledExtensions(){return this.bb.scanAllUserExtensions(!1)}scanInstalledExtensionAtLocation(K){return this.bb.scanUserExtensionAtLocation(K)}async install(K,z={}){this.F.trace("ExtensionManagementService#install",K.toString());const{location:U,cleanup:O}=await this.lb(K);try{const W=await(0,$.$oq)(E.$kc(U.fsPath)),B=(0,s.$fp)(W.publisher,W.name);if(W.engines&&W.engines.vscode&&!(0,S.$sp)(W.engines.vscode,this.G.vscodeVersion,this.G.date))throw new Error(c.localize(0,null,B,this.G.vscodeVersion));const ee=(await this.I([{manifest:W,extension:U,options:z}])).find(({identifier:X})=>(0,s.$ap)(X,{id:B}));if(ee?.local)return ee.local;throw ee?.error?ee.error:(0,r.$aq)(new Error(`Unknown error while installing extension ${B}`))}finally{await O()}}async installFromLocation(K,z){this.F.trace("ExtensionManagementService#installFromLocation",K.toString());const U=await this.bb.scanUserExtensionAtLocation(K);if(!U)throw new Error(`Cannot find a valid extension from the location ${K.toString()}`);return await this.ub([[U,void 0]],z),this.F.info("Successfully installed extension",U.identifier.id,z.toString()),U}async installExtensionsFromProfile(K,z,U){this.F.trace("ExtensionManagementService#installExtensionsFromProfile",K,z.toString(),U.toString());const O=(await this.bb.scanExtensions(1,z)).filter(W=>K.some(B=>(0,s.$ap)(B,W.identifier)));if(O.length){const W=await Promise.all(O.map(B=>this.bb.scanMetadata(B,z)));await this.ub(O.map((B,_)=>[B,W[_]]),U),this.F.info("Successfully installed extensions",O.map(B=>B.identifier.id),U.toString())}return O}async updateMetadata(K,z,U=this.H.defaultProfile.extensionsResource){return this.F.trace("ExtensionManagementService#updateMetadata",K.identifier.id),z.isPreReleaseVersion&&(z.preRelease=!0,z.hasPreReleaseVersion=!0),z.isMachineScoped===!1&&(z.isMachineScoped=void 0),z.isBuiltin===!1&&(z.isBuiltin=void 0),z.pinned===!1&&(z.pinned=void 0),K=await this.bb.updateMetadata(K,z,U),this.cb.invalidate(U),this.u.fire(K),K}async reinstallFromGallery(K){if(this.F.trace("ExtensionManagementService#reinstallFromGallery",K.identifier.id),!this.y.isEnabled())throw new Error(c.localize(1,null));const z=await this.getTargetPlatform(),[U]=await this.y.getExtensions([{...K.identifier,preRelease:K.preRelease}],{targetPlatform:z,compatible:!0},L.CancellationToken.None);if(!U)throw new Error(c.localize(2,null));await this.bb.setUninstalled(K);try{await this.bb.removeUninstalledExtension(K)}catch(O){throw new Error(c.localize(3,null,(0,j.$Si)(O)))}return this.installFromGallery(U)}ab(K,z,U,O){return this.bb.copyExtension(K,z,U,O)}copyExtensions(K,z){return this.bb.copyExtensions(K,z)}markAsUninstalled(...K){return this.bb.setUninstalled(...K)}async cleanUp(){this.F.trace("ExtensionManagementService#cleanUp");try{await this.bb.cleanUp()}catch(K){this.F.error(K)}}async download(K,z,U){const{location:O}=await this.db.download(K,z,!U);return O}async lb(K){if(K.scheme===k.Schemas.file)return{location:K,async cleanup(){}};this.F.trace("Downloading extension from",K.toString());const z=(0,l.$Jg)(this.db.extensionsDownloadDir,(0,h.$sg)());return await this.hb.download(K,z),this.F.info("Downloaded extension to",z.toString()),{location:z,cleanup:async()=>{try{await this.ib.del(z)}catch(O){this.F.error(O)}}}}Y(){return this.H.defaultProfile.extensionsResource}Z(K,z,U){if(w.URI.isUri(z))return new se(K,z,U,this.y,this.bb,this.C,this.H,this.fb,this.gb,this.F);const O=s.$bp.create(z).toString();let W=this.eb.get(O);return W||(this.eb.set(O,W=new x(K,z,U,this.db,this.bb,this.C,this.H,this.fb,this.gb,this.F)),W.waitUntilTaskIsFinished().finally(()=>this.eb.delete(O))),W}$(K,z){return new V(K,z.profileLocation,this.gb)}async pb(K){const z=async O=>{let W=await f.Promises.readdir(O);W=W.map(ee=>E.$jc(O,ee));const B=await Promise.all(W.map(ee=>f.Promises.stat(ee)));let _=Promise.resolve([]);return B.forEach((ee,X)=>{const ie=W[X];ee.isFile()&&(_=_.then(ce=>[...ce,ie])),ee.isDirectory()&&(_=_.then(ce=>z(ie).then(fe=>[...ce,...fe])))}),_};return(await z(K.location.fsPath)).map(O=>({path:`extension/${E.$lc(K.location.fsPath,O)}`,localPath:O}))}async qb({added:K,removed:z}){if(z){const U=K&&this.C.extUri.isEqual(z.profileLocation,K.profileLocation)?z.extensions.filter(O=>K.extensions.every(W=>!(0,s.$ap)(W,O))):z.extensions;for(const O of U)this.F.info("Extensions removed from another source",O.id,z.profileLocation.toString()),this.t.fire({identifier:O,profileLocation:z.profileLocation})}if(K){const O=(await this.bb.scanExtensions(1,K.profileLocation)).filter(W=>K.extensions.some(B=>(0,s.$ap)(B,W.identifier)));this.q.fire(O.map(W=>(this.F.info("Extensions added from another source",W.identifier.id,K.profileLocation.toString()),{identifier:W.identifier,local:W,profileLocation:K.profileLocation,operation:1})))}}async sb(){this.D(this.bb.onExtract(z=>this.rb.add(z)));const K=await this.ib.resolve(this.fb.userExtensionsLocation);for(const z of K.children??[])z.isDirectory&&this.rb.add(z.resource);this.D(this.ib.watch(this.fb.userExtensionsLocation)),this.D(this.ib.onDidFilesChange(z=>this.tb(z)))}async tb(K){if(!K.affects(this.fb.userExtensionsLocation,1))return;const z=[];for(const U of K.rawAdded){if(this.rb.has(U)||!this.C.extUri.isEqual(this.C.extUri.dirname(U),this.fb.userExtensionsLocation)||this.C.extUri.isEqual(U,this.C.extUri.joinPath(this.fb.userExtensionsLocation,".obsolete"))||this.C.extUri.basename(U).startsWith(".")||!(await this.ib.stat(U)).isDirectory)continue;const O=await this.bb.scanUserExtensionAtLocation(U);O&&O.installedTimestamp===void 0&&(this.rb.add(U),z.push(O))}z.length&&(await this.ub(z.map(U=>[U,void 0]),this.H.defaultProfile.extensionsResource),this.F.info("Added extensions to default profile from external source",z.map(U=>U.identifier.id)))}async ub(K,z){const U=K.map(O=>O[0]);await this.vb(U),await this.gb.addExtensionsToProfile(K,z),this.q.fire(U.map(O=>({local:O,identifier:O.identifier,operation:1,profileLocation:z})))}async vb(K){const z=await this.bb.getUninstalledExtensions();for(const U of K){const O=s.$bp.create(U);z[O.toString()]&&(this.F.trace("Removing the extension from uninstalled list:",O.id),await this.bb.setInstalled(O),this.F.info("Removed the extension from uninstalled list:",O.id))}}};e.$sq=te,e.$sq=te=Se([Z(0,n.$Jo),Z(1,Y.$Al),Z(2,q.$qj),Z(3,i.$di),Z(4,o.$hq),Z(5,t.$dq),Z(6,b.$mo),Z(7,T.$7h),Z(8,A.$wk),Z(9,M.$Ij),Z(10,G.$7k),Z(11,Q.$9k)],te);let H=class extends m.$Tc{constructor(K,z,U,O,W,B){super(),this.j=K,this.m=z,this.n=U,this.q=O,this.s=W,this.t=B,this.h=this.D(new P.$Wd),this.onExtract=this.h.event,this.c=(0,l.$Jg)(this.n.userExtensionsLocation,".obsolete"),this.g=new D.$ch}async cleanUp(){await this.H(),await this.G()}async scanExtensions(K,z){const U={includeInvalid:!0,profileLocation:z};let O=[];return K===null||K===0?O.push(...await this.n.scanAllExtensions({includeInvalid:!0},U,!1)):K===1&&O.push(...await this.n.scanUserExtensions(U)),O=K!==null?O.filter(W=>W.type===K):O,Promise.all(O.map(W=>this.F(W)))}async scanAllUserExtensions(K){const z=await this.n.scanUserExtensions({includeAllVersions:!K,includeInvalid:!0});return Promise.all(z.map(U=>this.F(U)))}async scanUserExtensionAtLocation(K){try{const z=await this.n.scanExistingExtension(K,1,{includeInvalid:!0});if(z)return await this.F(z)}catch(z){this.t.error(z)}return null}async extractUserExtension(K,z,U,O,W){const B=K.toString(),_=w.URI.file(E.$jc(this.n.userExtensionsLocation.fsPath,`.${(0,h.$sg)()}`)),ee=w.URI.file(E.$jc(this.n.userExtensionsLocation.fsPath,B));let X=await this.m.exists(ee);if(X&&O){try{await this.w(K.id,ee,"removeExisting")}catch{throw new n.$Ko(c.localize(4,null,ee.fsPath,K.id),n.ExtensionManagementErrorCode.Delete)}X=!1}if(X)await this.n.updateMetadata(ee,U);else try{try{this.t.trace(`Started extracting the extension from ${z} to ${ee.fsPath}`),await(0,u.$9p)(z,_.fsPath,{sourcePath:"extension",overwrite:!0},W),this.t.info(`Extracted extension to ${ee}:`,K.id)}catch(ie){let ce=n.ExtensionManagementErrorCode.Extract;throw ie instanceof u.$7p&&(ie.type==="CorruptZip"?ce=n.ExtensionManagementErrorCode.CorruptZip:ie.type==="Incomplete"&&(ce=n.ExtensionManagementErrorCode.IncompleteZip)),new n.$Ko(ie.message,ce)}await this.n.updateMetadata(_,U);try{this.t.trace(`Started renaming the extension from ${_.fsPath} to ${ee.fsPath}`),await this.z(_.fsPath,ee.fsPath),this.t.info("Renamed to",ee.fsPath)}catch(ie){if(ie.code==="ENOTEMPTY")this.t.info("Rename failed because extension was installed by another source. So ignoring renaming.",K.id);else throw this.t.info(`Rename failed because of ${(0,I.$0)(ie)}. Deleted from extracted location`,_),ie}this.h.fire(ee)}catch(ie){try{await this.m.del(_,{recursive:!0})}catch{}throw ie}return this.C(ee,1)}async scanMetadata(K,z){return z?(await this.u(K,z))?.metadata:this.n.scanMetadata(K.location)}async u(K,z){return(await this.q.scanProfileExtensions(z)).find(O=>(0,s.$ap)(O.identifier,K.identifier))}async updateMetadata(K,z,U){return U?await this.q.updateMetadata([[K,z]],U):await this.n.updateMetadata(K.location,z),this.C(K.location,K.type,U)}getUninstalledExtensions(){return this.y()}async setUninstalled(...K){const z=K.map(U=>s.$bp.create(U));await this.y(U=>z.forEach(O=>{U[O.toString()]=!0,this.t.info("Marked extension as uninstalled",O.toString())}))}async setInstalled(K){await this.y(z=>delete z[K.toString()])}async removeExtension(K,z){if(this.s.extUri.isEqualOrParent(K.location,this.n.userExtensionsLocation))return this.w(K.identifier.id,K.location,z)}async removeUninstalledExtension(K){await this.removeExtension(K,"uninstalled"),await this.y(z=>delete z[s.$bp.create(K).toString()])}async copyExtension(K,z,U,O){const W=await this.u(K,z),B=await this.u(K,U);return O={...W?.metadata,...O},B?await this.q.updateMetadata([[K,{...B.metadata,...O}]],U):await this.q.addExtensionsToProfile([[K,O]],U),this.C(K.location,K.type,U)}async copyExtensions(K,z){const U=await this.scanExtensions(1,K),O=await Promise.all(U.filter(W=>!W.isApplicationScoped).map(async W=>[W,await this.scanMetadata(W,K)]));await this.q.addExtensionsToProfile(O,z)}async w(K,z,U){this.t.trace(`Deleting ${U} extension from disk`,K,z.fsPath);const O=this.s.extUri.joinPath(this.s.extUri.dirname(z),`${this.s.extUri.basename(z)}.${(0,R.$Vi)((0,h.$sg)()).toString(16)}${F}`);await this.z(z.fsPath,O.fsPath),await this.m.del(O,{recursive:!0}),this.t.info(`Deleted ${U} extension from disk`,K,z.fsPath)}async y(K){return this.g.queue(async()=>{let z;try{z=(await this.m.readFile(this.c,"utf8")).value.toString()}catch(O){if((0,A.$Nk)(O)!==1)throw O}let U={};if(z)try{U=JSON.parse(z)}catch{}return K&&(K(U),Object.keys(U).length?await this.m.writeFile(this.c,N.$ke.fromString(JSON.stringify(U))):await this.m.del(this.c)),U})}async z(K,z){try{await f.Promises.rename(K,z,2*60*1e3)}catch(U){throw new n.$Ko(U.message||c.localize(5,null,K,z),U.code||n.ExtensionManagementErrorCode.Rename)}}async C(K,z,U){if(U){const W=(await this.n.scanUserExtensions({profileLocation:U})).find(B=>this.s.extUri.isEqual(B.location,K));if(W)return this.F(W)}else{const O=await this.n.scanExistingExtension(K,z,{includeInvalid:!0});if(O)return this.F(O)}throw new Error(c.localize(6,null,K.path))}async F(K){const z=await this.m.resolve(K.location);let U,O;return z.children&&(U=z.children.find(({name:W})=>/^readme(\.txt|\.md|)$/i.test(W))?.resource,O=z.children.find(({name:W})=>/^changelog(\.txt|\.md|)$/i.test(W))?.resource),{identifier:K.identifier,type:K.type,isBuiltin:K.isBuiltin||!!K.metadata?.isBuiltin,location:K.location,manifest:K.manifest,targetPlatform:K.targetPlatform,validations:K.validations,isValid:K.isValid,readmeUrl:U,changelogUrl:O,publisherDisplayName:K.metadata?.publisherDisplayName||null,publisherId:K.metadata?.publisherId||null,isApplicationScoped:!!K.metadata?.isApplicationScoped,isMachineScoped:!!K.metadata?.isMachineScoped,isPreReleaseVersion:!!K.metadata?.isPreReleaseVersion,hasPreReleaseVersion:!!K.metadata?.hasPreReleaseVersion,preRelease:!!K.metadata?.preRelease,installedTimestamp:K.metadata?.installedTimestamp,updated:!!K.metadata?.updated,pinned:!!K.metadata?.pinned}}async G(){const K=await this.getUninstalledExtensions();if(Object.keys(K).length===0){this.t.debug("No uninstalled extensions found.");return}this.t.debug("Removing uninstalled extensions:",Object.keys(K));const z=await this.n.scanUserExtensions({includeAllVersions:!0,includeUninstalled:!0,includeInvalid:!0}),U=new Set;for(const W of z)K[s.$bp.create(W).toString()]||U.add(W.identifier.id.toLowerCase());try{const W=(0,s.$gp)(z,B=>B.identifier);await D.Promises.settled(W.map(async B=>{const _=B.sort((ee,X)=>g.rcompare(ee.manifest.version,X.manifest.version))[0];U.has(_.identifier.id.toLowerCase())||await this.j(await this.F(_))}))}catch(W){this.t.error(W)}const O=z.filter(W=>W.metadata&&K[s.$bp.create(W).toString()]);await Promise.allSettled(O.map(W=>this.removeUninstalledExtension(W)))}async H(){this.t.trace("ExtensionManagementService#removeTempDeleteFolders");let K;try{K=await this.m.resolve(this.n.userExtensionsLocation)}catch(z){(0,A.$Nk)(z)!==1&&this.t.error(z);return}if(K?.children)try{await Promise.allSettled(K.children.map(async z=>{if(!(!z.isDirectory||!z.name.endsWith(F))){this.t.trace("Deleting the temporarily deleted folder",z.resource.toString());try{await this.m.del(z.resource,{recursive:!0}),this.t.trace("Deleted the temporarily deleted folder",z.resource.toString())}catch(U){(0,A.$Nk)(U)!==1&&this.t.error(U)}}}))}catch{}}};e.$tq=H,e.$tq=H=Se([Z(1,A.$wk),Z(2,o.$hq),Z(3,t.$dq),Z(4,G.$7k),Z(5,q.$qj)],H);class J extends r.$bq{get profileLocation(){return this.j}get verificationStatus(){return this.k}get operation(){return(0,p.$Rf)(this.options.operation)?this.l:this.options.operation}constructor(K,z,U,O,W,B,_,ee,X){super(),this.identifier=K,this.source=z,this.options=U,this.m=O,this.n=W,this.o=B,this.p=_,this.q=ee,this.s=X,this.j=this.options.profileLocation,this.k=!1,this.l=2}async h(K){const[z,U]=await this.x(K);return this.j=z.isBuiltin||z.isApplicationScoped?this.o.defaultProfile.extensionsResource:this.options.profileLocation,this.n.extUri.isEqual(this.o.defaultProfile.extensionsResource,this.j)&&await this.p.initializeDefaultProfileExtensions(),await this.q.addExtensionsToProfile([[z,U]],this.j),z}async u({zipPath:K,key:z,metadata:U},O,W){let B=await this.v(z);return B?B=await this.m.updateMetadata(B,U):(this.s.trace("Extracting extension...",z.id),B=await this.m.extractUserExtension(z,K,U,O,W),this.s.info("Extracting extension completed.",z.id)),B}async v(K){return await this.w(K)?(this.s.trace("Removing the extension from uninstalled list:",K.id),await this.m.setInstalled(K),this.s.info("Removed the extension from uninstalled list:",K.id),(await this.m.scanAllUserExtensions(!0)).find(O=>s.$bp.create(O).equals(K))):void 0}async w(K){return!!(await this.m.getUninstalledExtensions())[K.toString()]}}class x extends J{constructor(K,z,U,O,W,B,_,ee,X,ie){super(z.identifier,z,U,W,B,_,ee,X,ie),this.y=z,this.z=O}async x(K){let z;try{z=await this.m.scanExtensions(null,this.options.profileLocation)}catch(_){throw new n.$Ko(_,n.ExtensionManagementErrorCode.Scanning)}const U=z.find(_=>(0,s.$ap)(_.identifier,this.y.identifier));U&&(this.l=3);const O={id:this.y.identifier.uuid,publisherId:this.y.publisherId,publisherDisplayName:this.y.publisherDisplayName,targetPlatform:this.y.properties.targetPlatform,isApplicationScoped:this.options.isApplicationScoped||U?.isApplicationScoped,isMachineScoped:this.options.isMachineScoped||U?.isMachineScoped,isBuiltin:this.options.isBuiltin||U?.isBuiltin,isSystem:U?.type===0?!0:void 0,updated:!!U,isPreReleaseVersion:this.y.properties.isPreReleaseVersion,hasPreReleaseVersion:U?.hasPreReleaseVersion||this.y.properties.isPreReleaseVersion,installedTimestamp:Date.now(),pinned:this.options.installGivenVersion?!0:this.options.pinned??U?.pinned,preRelease:(0,p.$Qf)(this.options.preRelease)?this.options.preRelease:this.options.installPreReleaseVersion||this.y.properties.isPreReleaseVersion||U?.preRelease};if(U&&U.manifest.version===this.y.version&&!(!["undefined","web"].includes(U.targetPlatform)&&this.y.properties.targetPlatform!=="web"&&U.targetPlatform!==this.y.properties.targetPlatform)){this.s.info("No difference found in the extension:",this.y.identifier.id," between local and gallery -> skipping download");try{return[await this.m.updateMetadata(U,O),O]}catch(ee){throw new n.$Ko((0,I.$0)(ee),n.ExtensionManagementErrorCode.UpdateMetadata)}}const{location:W,verificationStatus:B}=await this.z.download(this.y,this.l,!this.options.donotVerifySignature);try{return this.k=B,this.B(W.fsPath),[await this.u({zipPath:W.fsPath,key:s.$bp.create(this.y),metadata:O},!1,K),O]}catch(_){try{await this.z.delete(W)}catch(ee){this.s.warn("Error while deleting the downloaded file",W.toString(),(0,I.$0)(ee))}throw _}}async B(K){try{await(0,$.$oq)(K)}catch(z){throw new n.$Ko((0,r.$_p)(z).message,n.ExtensionManagementErrorCode.Invalid)}}}e.$uq=x;class se extends J{constructor(K,z,U,O,W,B,_,ee,X,ie){super({id:(0,s.$fp)(K.publisher,K.name)},z,U,W,B,_,ee,X,ie),this.y=K,this.z=z,this.A=O}async h(K){const z=await super.h(K);return this.D(z,K),z}async x(K){const z=new s.$bp(this.identifier,this.y.version),O=(await this.m.scanExtensions(1,this.options.profileLocation)).find(_=>(0,s.$ap)(this.identifier,_.identifier)),W={isApplicationScoped:this.options.isApplicationScoped||O?.isApplicationScoped,isMachineScoped:this.options.isMachineScoped||O?.isMachineScoped,isBuiltin:this.options.isBuiltin||O?.isBuiltin,installedTimestamp:Date.now(),pinned:this.options.installGivenVersion?!0:this.options.pinned??O?.pinned};if(O)if(this.l=3,z.equals(new s.$bp(O.identifier,O.manifest.version)))try{await this.m.removeExtension(O,"existing")}catch{throw new Error(c.localize(7,null,this.y.displayName||this.y.name))}else!this.options.profileLocation&&g.gt(O.manifest.version,this.y.version)&&await this.m.setUninstalled(O);else{const _=await this.v(z);if(_)try{await this.m.removeExtension(_,"existing")}catch{throw new Error(c.localize(8,null,this.y.displayName||this.y.name))}}return[await this.u({zipPath:E.$kc(this.z.fsPath),key:z,metadata:W},!0,K),W]}async D(K,z){try{let[U]=await this.A.getExtensions([{id:K.identifier.id,version:K.manifest.version}],z);if(U||([U]=await this.A.getExtensions([{id:K.identifier.id}],z)),U){const O={id:U.identifier.uuid,publisherDisplayName:U.publisherDisplayName,publisherId:U.publisherId,isPreReleaseVersion:U.properties.isPreReleaseVersion,hasPreReleaseVersion:K.hasPreReleaseVersion||U.properties.isPreReleaseVersion,preRelease:U.properties.isPreReleaseVersion||this.options.installPreReleaseVersion};await this.m.updateMetadata(K,O,this.options.profileLocation)}}catch{}}}class V extends r.$bq{constructor(K,z,U){super(),this.extension=K,this.j=z,this.k=U}async h(K){await this.k.removeExtensionFromProfile(this.extension,this.j)}}}),define(ue[247],de([0,1,2,29,84,224,115,8,19]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$ERc=void 0;let m=class extends D.$Tc{constructor(k,E,l,g,p,w){super(),k.cleanUp(),(0,j.$bEc)(k,E,l,g,w),L.$xI.removeOutdatedExtensionVersions(k,p)}};e.$ERc=m,e.$ERc=m=Se([Z(0,I.$rq),Z(1,N.$Jo),Z(2,L.$wI),Z(3,N.$Po),Z(4,R.$yp),Z(5,P.$qj)],m)}),define(ue[248],de([0,1,29,11,23,15,98,58,19,22,223]),function(oe,e,D,N,L,j,I,P,R,m,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$LRc=void 0;let k=class extends C.$ZNc{constructor(l,g,p,w,h,f,u,c){super(l.userHome,h,g,p,w,f,u,c)}};e.$LRc=k,e.$LRc=k=Se([Z(0,j.$di),Z(1,m.$Al),Z(2,D.$Mo),Z(3,R.$yp),Z(4,P.$CPc),Z(5,I.$XDc),Z(6,N.$wk),Z(7,L.$Ij)],k)}),define(ue[249],de([0,1,105,3,22,15,2,8,16,55,23,5,6,102,21,164,36,19,12,132,20]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$HRc=void 0;const b=[D.$ARc,D.$BRc],i="remoteTunnelSession",r="remoteTunnelIsService";let n=class extends I.$Tc{constructor(a,y,$,d,v,S,A){super(),this.w=a,this.y=y,this.z=$,this.C=S,this.F=A,this.f=new N.$Wd,this.onDidTokenFailed=this.f.event,this.g=new N.$Wd,this.onDidChangeTunnelStatus=this.g.event,this.h=new N.$Wd,this.onDidChangeMode=this.h.event,this.n=D.$yRc,this.u=!1,this.I=(T,q)=>{q?this.j.error(T):this.j.info(T)},this.j=this.D(d.createLogger((0,c.$Jg)($.logsHome,`${D.$CRc}.log`),{id:D.$CRc,name:D.$DRc})),this.s=new E.$5g(100),this.D(this.j.onDidChangeLogLevel(T=>this.j.info("Log level changed to "+(0,P.$Fj)(T)))),this.D(v.onWillShutdown(()=>{this.q?.cancel(),this.q=void 0,this.dispose()})),this.D(S.onDidChangeConfiguration(T=>{b.some(q=>T.affectsConfiguration(q))&&this.s.trigger(()=>this.L())})),this.n=this.R(),this.r=D.TunnelStates.uninitialized}async getTunnelStatus(){return this.r}G(a){this.r=a,this.g.fire(a)}H(a){t(this.n,a)||(this.n=a,this.S(a),this.h.fire(this.n),a.active?(this.j.info(`Session updated: ${a.session.accountLabel} (${a.session.providerId}) (service=${a.asService})`),a.session.token&&this.j.info(`Session token updated: ${a.session.accountLabel} (${a.session.providerId})`)):this.j.info("Session reset"))}getMode(){return Promise.resolve(this.n)}async initialize(a){if(this.u)return this.r;this.u=!0,this.H(a);try{await this.s.trigger(()=>this.L())}catch(y){this.j.error(y)}return this.r}J(){if(!this.t){let a;k.$j?a=this.z.appRoot:a=(0,R.$mc)((0,R.$mc)(this.z.appRoot)),this.t=(0,R.$jc)(a,"bin",`${this.y.tunnelApplicationName}${k.$i?".exe":""}`)}return this.t}async startTunnel(a){if(t(this.n,a)&&this.r.type!=="disconnected")return this.r;this.H(a);try{await this.s.trigger(()=>this.L())}catch(y){this.j.error(y)}return this.r}async stopTunnel(){if(this.q&&(this.q.cancel(),this.q=void 0),this.n.active){const a=this.n.asService;this.H(D.$yRc);try{a&&this.O("uninstallService",["service","uninstall"])}catch(y){this.j.error(y)}}try{await this.O("stop",["kill"])}catch(a){this.j.error(a)}this.G(D.TunnelStates.disconnected())}async L(){this.w.publicLog2("remoteTunnel.enablement",{enabled:this.n.active,service:this.n.active&&this.n.asService}),this.q&&(this.q.cancel(),this.q=void 0);let a="",y=!1;const $=(q,M)=>{M?this.j.error(q):a+=q,!this.z.isBuilt&&q.startsWith("   Compiling")&&this.G(D.TunnelStates.connecting((0,p.localize)(0,null)))},d=this.O("status",["status"],$);this.q=d;try{if(await d,this.q!==d)return;let q;try{q=JSON.parse(a.trim().split(`
`).find(M=>M.startsWith("{")))}catch{this.j.error(`Could not parse status output: ${JSON.stringify(a.trim())}`),this.G(D.TunnelStates.disconnected());return}if(y=q.service_installed,this.j.info(q.tunnel?"Other tunnel running, attaching...":"No other tunnel running"),!q.tunnel&&!this.n.active){this.G(D.TunnelStates.disconnected());return}}catch(q){this.j.error(q),this.G(D.TunnelStates.disconnected());return}finally{this.q===d&&(this.q=void 0)}const v=this.n.active?this.n.session:void 0;if(v&&v.token){const q=v.token;this.G(D.TunnelStates.connecting((0,p.localize)(1,null,v.accountLabel,v.providerId)));const M=(G,Q)=>{G=G.replaceAll(q,"*".repeat(4)),$(G,Q)},Y=this.O("login",["user","login","--provider",v.providerId,"--access-token",q,"--log",(0,P.$Fj)(this.j.getLevel())],M);this.q=Y;try{if(await Y,this.q!==Y)return}catch(G){this.j.error(G),this.q=void 0,this.f.fire(v),this.G(D.TunnelStates.disconnected(v));return}}const S=this.Q();S?this.G(D.TunnelStates.connecting((0,p.localize)(2,null,S))):this.G(D.TunnelStates.connecting((0,p.localize)(3,null)));const A=["--accept-server-license-terms","--log",(0,P.$Fj)(this.j.getLevel())];S?A.push("--name",S):A.push("--random-name");let T=!1;return this.n.active&&this.n.asService&&!y&&(T=await this.M(A)===!1),this.N(v,A,T)}async M(a){let y;try{y=await this.O("serviceInstall",["service","install",...a])}catch($){this.j.error($),y=1}if(y!==0){const $=(0,p.localize)(4,null);return this.j.warn($),this.G(D.TunnelStates.connecting($)),!1}return!0}async N(a,y,$){y.push("--parent-process-id",String(process.pid)),this.P()&&y.push("--no-sleep");let d=!1;const v=this.O("tunnel",y,(S,A)=>{A?this.j.error(S):this.j.info(S),S.includes("Connected to an existing tunnel process")&&(d=!0);const T=S.match(/Open this link in your browser (https:\/\/([^\/\s]+)\/([^\/\s]+)\/([^\/\s]+))/);if(T){const q={link:T[1],domain:T[2],tunnelName:T[4],isAttached:d};this.G(D.TunnelStates.connected(q,$))}else S.match(/error refreshing token/)&&(v.cancel(),this.f.fire(a),this.G(D.TunnelStates.disconnected(a)))});this.q=v,v.finally(()=>{v===this.q&&(this.j.info("tunnel process terminated"),this.q=void 0,this.n=D.$yRc,this.G(D.TunnelStates.disconnected()))})}O(a,y,$=this.I){return(0,E.$Vg)(d=>new Promise((v,S)=>{d.isCancellationRequested&&v(-1);let A;const T=["ignore","pipe","pipe"];if(d.onCancellationRequested(()=>{A&&(this.j.info(`${a} terminating(${A.pid})`),A.kill())}),!this.z.isBuilt)$(`Building tunnel CLI from sources and run
`,!1),$(`${a} Spawning: cargo run -- tunnel ${y.join(" ")}
`,!1),A=(0,m.spawn)("cargo",["run","--","tunnel",...y],{cwd:(0,R.$jc)(this.z.appRoot,"cli"),stdio:T});else{$(`Running tunnel CLI
`,!1);const q=this.J();$(`${a} Spawning: ${q} tunnel ${y.join(" ")}
`,!1),A=(0,m.spawn)(q,["tunnel",...y],{cwd:(0,w.homedir)(),stdio:T})}A.stdout.pipe(new u.$Idb(`
`)).on("data",q=>{if(A){const M=q.toString();$(M,!1)}}),A.stderr.pipe(new u.$Idb(`
`)).on("data",q=>{if(A){const M=q.toString();$(M,!0)}}),A.on("exit",q=>{A&&($(`${a} exit(${A.pid}): + ${q} `,!1),A=void 0,v(q||0))}),A.on("error",q=>{A&&($(`${a} error(${A.pid}): + ${q} `,!0),A=void 0,S())})}))}async getTunnelName(){return this.Q()}P(){return!!this.C.getValue(D.$BRc)}Q(){let a=this.C.getValue(D.$ARc)||(0,w.hostname)();return a=a.replace(/^-+/g,"").replace(/[^\w-]/g,"").substring(0,20),a||void 0}R(){try{const a=this.F.get(i,-1),y=this.F.getBoolean(r,-1,!1);if(a){const $=JSON.parse(a);if($&&(0,f.$Kf)($.accountLabel)&&(0,f.$Kf)($.sessionId)&&(0,f.$Kf)($.providerId))return{active:!0,session:$,asService:y};this.j.error("Problems restoring session from storage, invalid format",$)}}catch(a){this.j.error("Problems restoring session from storage",a)}return D.$yRc}S(a){if(a.active){const y={providerId:a.session.providerId,sessionId:a.session.sessionId,accountLabel:a.session.accountLabel};this.F.store(i,JSON.stringify(y),-1,1),this.F.store(r,a.asService,-1,1)}else this.F.remove(i,-1),this.F.remove(r,-1)}};e.$HRc=n,e.$HRc=n=Se([Z(0,L.$Al),Z(1,C.$Ij),Z(2,j.$di),Z(3,P.$rj),Z(4,l.$FRc),Z(5,g.$Bi),Z(6,h.$yp)],n);function s(o,a){return o&&a?o.sessionId===a.sessionId&&o.providerId===a.providerId&&o.token===a.token:o===a}const t=(o,a)=>o.active!==a.active?!1:o.active&&a.active?o.asService===a.asService&&s(o.session,a.session):!0}),define(ue[250],de([0,1,6,2,25,20,70,19,79,18]),function(oe,e,D,N,L,j,I,P,R,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$MRc=void 0;class C extends P.$Ap{constructor(E,l,g,p){super(),this.bb=E,this.cb=l,this.db=g,this.eb=p,this.s=this.cb.defaultProfile,this.U=this.fb(),this.W=this.cb.currentProfile,this.X=this.D(new N.$Sc),this.Y=this.gb(this.W),this.Z=this.bb?.id,this.$=this.D(new N.$Sc),this.ab=this.hb(this.bb)}fb(){const E=this.D(new R.$Vjc(this.db.getChannel("storage"))),l=this.D(new I.$up(E));return this.D(l.onDidChangeStorage(g=>this.t(-1,g))),l}gb(E){this.X.clear(),this.W=E;let l;if((0,P.$Bp)(E))l=this.U;else{const g=this.X.add(new R.$Wjc(this.db.getChannel("storage"),E));l=this.X.add(new I.$up(g))}return this.X.add(l.onDidChangeStorage(g=>this.t(0,g))),l}hb(E){this.$.clear(),this.Z=E?.id;let l;if(E){const g=this.$.add(new R.$Xjc(this.db.getChannel("storage"),E));l=this.$.add(new I.$up(g)),this.$.add(l.onDidChangeStorage(p=>this.t(1,p)))}return l}async O(){await D.Promises.settled([this.U.init(),this.Y.init(),this.ab?.init()??Promise.resolve()])}P(E){switch(E){case-1:return this.U;case 0:return this.Y;default:return this.ab}}Q(E){switch(E){case-1:return this.s.globalStorageHome.with({scheme:L.Schemas.file}).fsPath;case 0:return this.W?.globalStorageHome.with({scheme:L.Schemas.file}).fsPath;default:return this.Z?`${(0,j.$Jg)(this.eb.workspaceStorageHome,this.Z,"state.vscdb").with({scheme:L.Schemas.file}).fsPath}`:void 0}}async close(){this.r(),this.u(P.WillSaveStateReason.SHUTDOWN),await D.Promises.settled([this.U.close(),this.Y.close(),this.ab?.close()??Promise.resolve()])}async R(E){if(!this.M(this.W,E))return;const l=this.Y,g=l.items;l!==this.U&&await l.close(),this.Y=this.gb(E),await this.Y.init(),this.N(g,this.Y,0)}async S(E,l){const g=this.ab,p=g?.items??new Map;await g?.close(),this.ab=this.hb(E),await this.ab.init(),this.N(p,this.ab,1)}hasScope(E){return(0,m.$8k)(E)?this.W.id===E.id:this.Z===E.id}}e.$MRc=C}),define(ue[251],de([0,1,3,2,18,93]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$L4=e.$K4=void 0;class I{constructor(m,C){this.a=m,this.b=C}listen(m,C){const k=this.b(m);switch(C){case"onDidChangeProfiles":return D.Event.map(this.a.onDidChangeProfiles,E=>({all:E.all.map(l=>(0,j.$bn)({...l},k)),added:E.added.map(l=>(0,j.$bn)({...l},k)),removed:E.removed.map(l=>(0,j.$bn)({...l},k)),updated:E.updated.map(l=>(0,j.$bn)({...l},k))}))}throw new Error(`Invalid listen ${C}`)}async call(m,C,k){const E=this.b(m);switch(C){case"createProfile":{const l=await this.a.createProfile(k[0],k[1],k[2]);return(0,j.$bn)({...l},E)}case"updateProfile":{let l=(0,L.$0k)((0,j.$cn)(k[0],E),this.a.profilesHome.scheme);return l=await this.a.updateProfile(l,k[1]),(0,j.$bn)({...l},E)}case"removeProfile":{const l=(0,L.$0k)((0,j.$cn)(k[0],E),this.a.profilesHome.scheme);return this.a.removeProfile(l)}}throw new Error(`Invalid call ${C}`)}}e.$K4=I;class P extends N.$Tc{get defaultProfile(){return this.profiles[0]}get profiles(){return this.a}constructor(m,C,k){super(),this.profilesHome=C,this.f=k,this.a=[],this.b=this.D(new D.$Wd),this.onDidChangeProfiles=this.b.event,this.c=!0,this.a=m.map(E=>(0,L.$0k)(E,this.profilesHome.scheme)),this.D(this.f.listen("onDidChangeProfiles")(E=>{const l=E.added.map(w=>(0,L.$0k)(w,this.profilesHome.scheme)),g=E.removed.map(w=>(0,L.$0k)(w,this.profilesHome.scheme)),p=E.updated.map(w=>(0,L.$0k)(w,this.profilesHome.scheme));this.a=E.all.map(w=>(0,L.$0k)(w,this.profilesHome.scheme)),this.b.fire({added:l,removed:g,updated:p,all:this.profiles})})),this.onDidResetWorkspaces=this.f.listen("onDidResetWorkspaces")}setEnablement(m){this.c=m}isEnabled(){return this.c}async createNamedProfile(m,C,k){const E=await this.f.call("createNamedProfile",[m,C,k]);return(0,L.$0k)(E,this.profilesHome.scheme)}async createProfile(m,C,k,E){const l=await this.f.call("createProfile",[m,C,k,E]);return(0,L.$0k)(l,this.profilesHome.scheme)}async createTransientProfile(m){const C=await this.f.call("createTransientProfile",[m]);return(0,L.$0k)(C,this.profilesHome.scheme)}async setProfileForWorkspace(m,C){await this.f.call("setProfileForWorkspace",[m,C])}removeProfile(m){return this.f.call("removeProfile",[m])}async updateProfile(m,C){const k=await this.f.call("updateProfile",[m,C]);return(0,L.$0k)(k,this.profilesHome.scheme)}resetWorkspaces(){return this.f.call("resetWorkspaces")}cleanUp(){return this.f.call("cleanUp")}cleanUpTransientProfiles(){return this.f.call("cleanUpTransientProfiles")}}e.$L4=P}),define(ue[62],de([0,1,2,70,4,19,3,79,18]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2jc=e.$1jc=e.$Zjc=void 0,e.$Zjc=(0,L.$8h)("IUserDataProfileStorageService");let m=class extends D.$Tc{constructor(l){super(),this.a=l}async readStorageData(l){return this.withProfileScopedStorageService(l,async g=>this.b(g))}async updateStorageData(l,g,p){return this.withProfileScopedStorageService(l,async w=>this.c(w,g,p))}async withProfileScopedStorageService(l,g){if(this.a.hasScope(l))return g(this.a);const p=await this.g(l),w=new k(p);try{await w.initialize();const h=await g(w);return await w.flush(),h}finally{w.dispose(),await this.f(p)}}b(l){const g=new Map,p=w=>{for(const h of l.keys(0,w))g.set(h,{value:l.get(h,0),target:w})};return p(0),p(1),g}c(l,g,p){l.storeAll(Array.from(g.entries()).map(([w,h])=>({key:w,value:h,scope:0,target:p})),!0)}async f(l){try{await l.close()}finally{(0,D.$Nc)(l)&&l.dispose()}}};e.$1jc=m,e.$1jc=m=Se([Z(0,j.$yp)],m);class C extends m{constructor(l,g,p,w){super(p),this.j=l;const h=l.getChannel("profileStorageListener"),f=this.D(new D.$Uc);this.h=this.D(new I.$Wd({onWillAddFirstListener:()=>{f.value=h.listen("onDidChange")(u=>{w.trace("profile storage changes",u),this.h.fire({targetChanges:u.targetChanges.map(c=>(0,R.$0k)(c,g.profilesHome.scheme)),valueChanges:u.valueChanges.map(c=>({...c,profile:(0,R.$0k)(c.profile,g.profilesHome.scheme)}))})})},onDidRemoveLastListener:()=>f.value=void 0})),this.onDidChange=this.h.event}async g(l){const g=this.j.getChannel("storage");return(0,j.$Bp)(l)?new P.$Vjc(g):new P.$Wjc(g,l)}}e.$2jc=C;class k extends j.$Ap{constructor(l){super({flushInterval:100}),this.s=this.D(new N.$up(l))}O(){return this.s.init()}P(l){return l===0?this.s:void 0}Q(){}async R(){}async S(){}hasScope(){return!1}}}),define(ue[252],de([0,1,19,8,18,57,62]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$rRc=void 0;let P=class extends I.$2jc{constructor(m,C,k,E){super(m,C,k,E)}};e.$rRc=P,e.$rRc=P=Se([Z(0,j.$QQc),Z(1,L.$9k),Z(2,D.$yp),Z(3,N.$qj)],P)}),define(ue[39],de([0,1,17,6,14,26,3,34,2,27,12,169,21,15,11,8,43,19,22,28,24,18]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Xkc=e.$Wkc=e.$Vkc=e.$Ukc=e.$Tkc=e.$Skc=e.$Rkc=void 0;function i(y){return!!(y&&y.ref!==void 0&&typeof y.ref=="string"&&y.ref!==""&&y.syncData!==void 0&&(y.syncData===null||r(y.syncData)))}e.$Rkc=i;function r(y){return!!(y&&y.version!==void 0&&typeof y.version=="number"&&y.content!==void 0&&typeof y.content=="string"&&(Object.keys(y).length===2||Object.keys(y).length===3&&y.machineId!==void 0&&typeof y.machineId=="string"))}e.$Skc=r;function n(y,$){return`${(0,m.$Cf)(y)}${$.isDefault?"":` (${$.name})`}`}e.$Tkc=n;let s=class extends R.$Tc{get status(){return this.m}get conflicts(){return{...this.syncResource,conflicts:this.q}}constructor($,d,v,S,A,T,q,M,Y,G,Q,F){super(),this.syncResource=$,this.collection=d,this.G=v,this.H=S,this.I=A,this.J=T,this.L=q,this.M=M,this.N=Y,this.O=G,this.P=Q,this.c=null,this.m="idle",this.n=this.D(new I.$Wd),this.onDidChangeStatus=this.n.event,this.q=[],this.s=this.D(new I.$Wd),this.onDidChangeConflicts=this.s.event,this.t=this.D(new N.$6g(50)),this.u=this.D(new I.$Wd),this.onDidChangeLocal=this.u.event,this.y=`${this.collection?`${this.collection}.`:""}${this.syncResource.syncResource}.lastSyncUserData`,this.z=!1,this.F={},this.resource=this.syncResource.syncResource,this.C=n($.syncResource,$.profile),this.h=F.extUri,this.f=this.h.joinPath(S.userDataSyncHome,...(0,c.$ZSb)($.profile.isDefault?void 0:$.profile.id,$.syncResource)),this.g=this.h.joinPath(this.f,c.$iTb),this.w=(0,c.$1Sb)($.profile.isDefault?void 0:$.profile.id,$.syncResource,S,this.h),this.j=(0,w.$Ep)(S,v,A)}Q(){this.t.trigger(()=>this.R())}async R(){if(this.status==="hasConflicts"){this.O.info(`${this.C}: In conflicts state and local change detected. Syncing again...`);const $=await this.c;this.c=null;const d=await this.Y($.remoteUserData,$.lastSyncUserData,!0,this.ob());this.S(d)}else{this.O.trace(`${this.C}: Checking for local changes...`);const $=await this.getLastSyncUserData();($?await this.ub($):!0)&&this.u.fire()}}S($){this.m!==$&&(this.m=$,this.n.fire($))}async sync($,d={}){await this.U($,!0,this.ob(),d)}async preview($,d,v={}){return this.U($,!1,d,v)}async apply($,d={}){try{this.F={...d};const v=await this.ab($);return this.S(v),this.c}finally{this.F={}}}async U($,d,v,S){try{if(this.F={...S},this.status==="hasConflicts")return this.O.info(`${this.C}: Skipped synchronizing ${this.resource.toLowerCase()} as there are conflicts.`),this.c;if(this.status==="syncing")return this.O.info(`${this.C}: Skipped synchronizing ${this.resource.toLowerCase()} as it is running already.`),this.c;this.O.trace(`${this.C}: Started synchronizing ${this.resource.toLowerCase()}...`),this.S("syncing");let A="idle";try{const T=await this.getLastSyncUserData(),q=await this.X($,T);return A=await this.Y(q,T,d,v),A==="hasConflicts"?this.O.info(`${this.C}: Detected conflicts while synchronizing ${this.resource.toLowerCase()}.`):A==="idle"&&this.O.trace(`${this.C}: Finished synchronizing ${this.resource.toLowerCase()}.`),this.c||null}finally{this.S(A)}}finally{this.F={}}}async replace($){const d=this.kb($);if(!d)return!1;await this.stop();try{this.O.trace(`${this.C}: Started resetting ${this.resource.toLowerCase()}...`),this.S("syncing");const v=await this.getLastSyncUserData(),S=await this.X(null,v),A=await this.W(S),T=await this.qb({ref:S.ref,syncData:d},v,A,this.ob(),j.CancellationToken.None),q=[];for(const M of T){const Y=await this.sb(M,M.remoteResource,void 0,j.CancellationToken.None),{remoteChange:G}=await this.sb(M,M.previewResource,M.remoteContent,j.CancellationToken.None);q.push([M,{...Y,remoteChange:G!==0?G:2}])}await this.tb(S,v,q,!1),this.O.info(`${this.C}: Finished resetting ${this.resource.toLowerCase()}.`)}finally{this.S("idle")}return!0}async W($){const d=await this.j;return!!$.syncData?.machineId&&$.syncData.machineId===d}async X($,d){if(d){const v=$?$[this.resource]:void 0;if(d.ref===v||v===void 0&&d.syncData===null)return d}return this.getRemoteUserData(d)}async Y($,d,v,S){if($.syncData&&$.syncData.version>this.pb)throw this.N.publicLog2("sync/incompatible",{source:this.resource}),new c.$8Sb((0,k.localize)(0,null,this.resource,this.pb,$.syncData.version),"IncompatibleLocalContent",this.resource);try{return await this.Z($,d,v,S)}catch(A){if(A instanceof c.$8Sb)switch(A.code){case"LocalPreconditionFailed":return this.O.info(`${this.C}: Failed to synchronize ${this.C} as there is a new local version available. Synchronizing again...`),this.Y($,d,v,S);case"Conflict":case"PreconditionFailed":return this.O.info(`${this.C}: Failed to synchronize as there is a new remote version available. Synchronizing again...`),$=await this.getRemoteUserData(null),d=await this.getLastSyncUserData(),this.Y($,d,v,S)}throw A}}async Z($,d,v,S){try{const A=await this.W($),T=!A&&d===null&&this.gb()!==void 0,q=v&&!T;this.c||(this.c=(0,N.$Vg)(Y=>this.eb($,d,A,q,S,Y)));let M=await this.c;if(v&&T){this.O.info(`${this.C}: Accepting remote because it was synced before and the last sync data is not available.`);for(const Y of M.resourcePreviews)M=await this.accept(Y.remoteResource)||M}return this.cb(M.resourcePreviews),M.resourcePreviews.some(({mergeState:Y})=>Y==="conflict")?"hasConflicts":v?await this.ab(!1):"syncing"}catch(A){throw this.c=null,A}}async merge($){return await this.$($,async d=>{const v=await this.rb(d,j.CancellationToken.None);await this.G.writeFile(d.previewResource,L.$ke.fromString(v?.content||""));const S=v&&!v.hasConflicts?await this.sb(d,d.previewResource,void 0,j.CancellationToken.None):void 0;return d.acceptResult=S,d.mergeState=v.hasConflicts?"conflict":S?"accepted":"preview",d.localChange=S?S.localChange:v.localChange,d.remoteChange=S?S.remoteChange:v.remoteChange,d}),this.c}async accept($,d){return await this.$($,async v=>{const S=await this.sb(v,$,d,j.CancellationToken.None);return v.acceptResult=S,v.mergeState="accepted",v.localChange=S.localChange,v.remoteChange=S.remoteChange,v}),this.c}async discard($){return await this.$($,async d=>{const v=await this.rb(d,j.CancellationToken.None);return await this.G.writeFile(d.previewResource,L.$ke.fromString(v.content||"")),d.acceptResult=void 0,d.mergeState="preview",d.localChange=v.localChange,d.remoteChange=v.remoteChange,d}),this.c}async $($,d){if(!this.c)return;let v=await this.c;const S=v.resourcePreviews.findIndex(({localResource:A,remoteResource:T,previewResource:q})=>this.h.isEqual(A,$)||this.h.isEqual(T,$)||this.h.isEqual(q,$));S!==-1&&(this.c=(0,N.$Vg)(async A=>{const T=[...v.resourcePreviews];return T[S]=await d(T[S]),{...v,resourcePreviews:T}}),v=await this.c,this.cb(v.resourcePreviews),v.resourcePreviews.some(({mergeState:A})=>A==="conflict")?this.S("hasConflicts"):this.S("syncing"))}async ab($){if(!this.c)return"idle";const d=await this.c;return d.resourcePreviews.some(({mergeState:v})=>v==="conflict")?"hasConflicts":d.resourcePreviews.some(({mergeState:v})=>v!=="accepted")?"syncing":(await this.tb(d.remoteUserData,d.lastSyncUserData,d.resourcePreviews.map(v=>[v,v.acceptResult]),$),this.c=null,await this.bb(),"idle")}async bb(){try{await this.G.del(this.g,{recursive:!0})}catch{}}cb($){const d=$.filter(({mergeState:v})=>v==="conflict");(0,D.$ub)(this.q,d,(v,S)=>this.h.isEqual(v.previewResource,S.previewResource))||(this.q=d,this.s.fire(this.conflicts))}async hasPreviouslySynced(){const $=await this.getLastSyncUserData();return!!$&&$.syncData!==null}async db($){const d=this.c?await this.c:null;if(d)for(const v of d.resourcePreviews){if(this.h.isEqual(v.acceptedResource,$))return v.acceptResult?v.acceptResult.content:null;if(this.h.isEqual(v.remoteResource,$))return v.remoteContent;if(this.h.isEqual(v.localResource,$))return v.localContent;if(this.h.isEqual(v.baseResource,$))return v.baseContent}return null}async resetLocal(){this.I.remove(this.y,-1);try{await this.G.del(this.w)}catch($){(0,g.$Nk)($)!==1&&this.O.error($)}}async eb($,d,v,S,A,T){const q=await this.qb($,d,v,A,T),M=[];for(const Y of q){const G=Y.previewResource.with({scheme:c.$hTb,authority:"accepted"});if(Y.localChange===0&&Y.remoteChange===0)M.push({...Y,acceptedResource:G,acceptResult:{content:null,localChange:0,remoteChange:0},mergeState:"accepted"});else{const Q=S?await this.rb(Y,T):void 0;if(T.isCancellationRequested)break;await this.G.writeFile(Y.previewResource,L.$ke.fromString(Q?.content||""));const F=Q&&!Q.hasConflicts?await this.sb(Y,Y.previewResource,void 0,T):void 0;M.push({...Y,acceptResult:F,mergeState:Q?.hasConflicts?"conflict":F?"accepted":"preview",localChange:F?F.localChange:Q?Q.localChange:Y.localChange,remoteChange:F?F.remoteChange:Q?Q.remoteChange:Y.remoteChange})}}return{syncResource:this.resource,profile:this.syncResource.profile,remoteUserData:$,lastSyncUserData:d,resourcePreviews:M,isLastSyncFromCurrentMachine:v}}async getLastSyncUserData(){let $=this.gb();if($||($=await this.jb()),!$)return this.O.info(`${this.C}: Last sync data state does not exist.`),null;const d=JSON.parse($),v=this.M.getResourceSyncStateVersion(this.resource);if(this.z=!!d.version&&!!v&&d.version!==v,this.z)return this.O.info(`${this.C}: Reset last sync state because last sync state version ${d.version} is not compatible with current sync state version ${v}.`),await this.resetLocal(),null;let S,A=1;for(;S===void 0&&A++<6;)try{const T=await this.hb();T&&(T.ref===d.ref?S=T.syncData:this.O.info(`${this.C}: Last sync data stored locally is not same as the last sync state.`));break}catch(T){if(T instanceof g.$Rk&&T.fileOperationResult===1){this.O.info(`${this.C}: Last sync resource does not exist locally.`);break}else{if(T instanceof c.$8Sb)throw T;this.O.error(T,A)}}if(S===void 0)try{const T=await this.J.resolveResourceContent(this.resource,d.ref,this.collection,this.F);S=T===null?null:this.kb(T),await this.ib({ref:d.ref,syncData:S})}catch(T){if(T instanceof c.$8Sb&&T.code==="NotFound")this.O.info(`${this.C}: Last sync resource does not exist remotely.`);else throw T}return S===void 0?null:{...d,syncData:S}}async fb($,d={}){if(d.ref||d.version)throw new Error("Cannot have core properties as additional");const v=this.M.getResourceSyncStateVersion(this.resource),S={ref:$.ref,version:v,...d};this.I.store(this.y,JSON.stringify(S),-1,1),await this.ib($)}gb(){return this.I.get(this.y,-1)}async hb(){const $=(await this.G.readFile(this.w)).value.toString();try{const d=$?JSON.parse($):void 0;if(i(d))return d}catch(d){this.O.error(d)}}async ib($){await this.G.writeFile(this.w,L.$ke.fromString(JSON.stringify($)))}async jb(){try{const $=await this.G.readFile(this.w),d=JSON.parse($.value.toString());await this.G.del(this.w),d.ref&&d.content!==void 0?(this.I.store(this.y,JSON.stringify({...d,content:void 0}),-1,1),await this.ib({ref:d.ref,syncData:d.content===null?null:JSON.parse(d.content)})):this.O.info(`${this.C}: Migrating last sync user data. Invalid data.`,d)}catch($){$ instanceof g.$Rk&&$.fileOperationResult===1?this.O.info(`${this.C}: Migrating last sync user data. Resource does not exist.`):this.O.error($)}return this.I.get(this.y,-1)}async getRemoteUserData($){const{ref:d,content:v}=await this.lb($);let S=null;return v!==null&&(S=this.kb(v)),{ref:d,syncData:S}}kb($){try{const d=JSON.parse($);if(r(d))return d}catch(d){this.O.error(d)}throw new c.$8Sb((0,k.localize)(1,null),"IncompatibleRemoteContent",this.resource)}async lb($){const d=$?{ref:$.ref,content:$.syncData?JSON.stringify($.syncData):null}:null;return this.J.readResource(this.resource,d,this.collection,this.F)}async mb($,d){const v=await this.j,S={version:this.pb,machineId:v,content:$};try{return d=await this.J.writeResource(this.resource,JSON.stringify(S),d,this.collection,this.F),{ref:d,syncData:S}}catch(A){throw A instanceof c.$8Sb&&A.code==="TooLarge"&&(A=new c.$8Sb(A.message,A.code,this.resource)),A}}async nb($){const d={version:this.pb,content:$};return this.L.writeResource(this.resource,JSON.stringify(d),new Date,this.syncResource.profile.isDefault?void 0:this.syncResource.profile.id)}async stop(){this.status!=="idle"&&(this.O.trace(`${this.C}: Stopping synchronizing ${this.resource.toLowerCase()}.`),this.c&&(this.c.cancel(),this.c=null),this.cb([]),await this.bb(),this.S("idle"),this.O.info(`${this.C}: Stopped synchronizing ${this.resource.toLowerCase()}.`))}ob(){return this.P.getValue(c.$USb)}};e.$Ukc=s,e.$Ukc=s=Se([Z(2,g.$wk),Z(3,l.$ci),Z(4,h.$yp),Z(5,c.$3Sb),Z(6,c.$4Sb),Z(7,c.$aTb),Z(8,f.$Al),Z(9,c.$fTb),Z(10,E.$Bi),Z(11,u.$7k)],s);let t=class extends s{constructor($,d,v,S,A,T,q,M,Y,G,Q,F,te){super(d,v,S,A,T,q,M,Y,G,Q,F,te),this.r=$,this.D(this.G.watch(this.h.dirname($))),this.D(this.G.onDidFilesChange(H=>this.yb(H)))}async vb(){try{return await this.G.readFile(this.r)}catch{return null}}async wb($,d,v){try{d?await this.G.writeFile(this.r,L.$ke.fromString($),v?void 0:d):await this.G.createFile(this.r,L.$ke.fromString($),{overwrite:v})}catch(S){throw S instanceof g.$Rk&&S.fileOperationResult===1||S instanceof g.$Rk&&S.fileOperationResult===3?new c.$8Sb(S.message,"LocalPreconditionFailed"):S}}async xb(){try{await this.G.del(this.r)}catch($){if(!($ instanceof g.$Rk&&$.fileOperationResult===1))throw $}}yb($){$.contains(this.r)&&this.Q()}};e.$Vkc=t,e.$Vkc=t=Se([Z(3,g.$wk),Z(4,l.$ci),Z(5,h.$yp),Z(6,c.$3Sb),Z(7,c.$4Sb),Z(8,c.$aTb),Z(9,f.$Al),Z(10,c.$fTb),Z(11,E.$Bi),Z(12,u.$7k)],t);let o=class extends t{constructor($,d,v,S,A,T,q,M,Y,G,Q,F,te,H){super($,d,v,S,A,T,q,M,Y,G,Q,te,H),this.zb=F,this.Bb=void 0}Ab($,d){const v=[],S=(0,P.$ln)($,v,{allowEmptyContent:!0,allowTrailingComma:!0});return v.length>0||!(0,C.$Rf)(S)&&d!==Array.isArray(S)}Cb(){return this.Bb||(this.Bb=this.zb.resolveFormattingOptions(this.r)),this.Bb}};e.$Wkc=o,e.$Wkc=o=Se([Z(3,g.$wk),Z(4,l.$ci),Z(5,h.$yp),Z(6,c.$3Sb),Z(7,c.$4Sb),Z(8,c.$aTb),Z(9,f.$Al),Z(10,c.$fTb),Z(11,c.$eTb),Z(12,E.$Bi),Z(13,u.$7k)],o);let a=class{constructor($,d,v,S,A,T,q){this.resource=$,this.g=d,this.h=v,this.j=S,this.k=A,this.l=T,this.d=q.extUri,this.f=(0,c.$1Sb)(void 0,this.resource,v,this.d)}async initialize({ref:$,content:d}){if(!d){this.j.info("Remote content does not exist.",this.resource);return}const v=this.m(d);if(v)try{await this.o({ref:$,syncData:v})}catch(S){this.j.error(S)}}m($){try{const d=JSON.parse($);if(r(d))return d}catch(d){this.j.error(d)}this.j.info("Cannot parse sync data as it is not compatible with the current version.",this.resource)}async n($,d={}){if(d.ref||d.version)throw new Error("Cannot have core properties as additional");const v={ref:$.ref,version:void 0,...d};this.l.store(`${this.resource}.lastSyncUserData`,JSON.stringify(v),-1,1),await this.k.writeFile(this.f,L.$ke.fromString(JSON.stringify($)))}};e.$Xkc=a,e.$Xkc=a=Se([Z(1,b.$9k),Z(2,l.$ci),Z(3,p.$qj),Z(4,g.$wk),Z(5,h.$yp),Z(6,u.$7k)],a)}),define(ue[116],de([0,1,6,26,7,3,42,2,27,21,15,113,29,33,84,45,11,4,75,8,19,22,28,18,39,234,111,24,62]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i,r,n,s,t,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$0Lc=e.$9Lc=e.$8Lc=e.$7Lc=e.$6Lc=void 0;async function y(T,q){const M=JSON.parse(T.content);if(T.version===1||T.version===2){const Y=(await q.getInstalled(0)).filter(G=>G.isBuiltin);for(const G of M)T.version===1&&(G.enabled===!1&&(G.disabled=!0),delete G.enabled),T.version===2&&Y.every(Q=>!(0,l.$ap)(Q.identifier,G.identifier))&&(G.installed=!0)}return M}function $(T){return JSON.parse(T.content)}e.$6Lc=$;function d(T,q){return T.sort((M,Y)=>!M.identifier.uuid&&Y.identifier.uuid?-1:M.identifier.uuid&&!Y.identifier.uuid?1:(0,R.$7e)(M.identifier.id,Y.identifier.id)),q?(0,I.$wn)(T,{}):JSON.stringify(T)}e.$7Lc=d;let v=class extends n.$Ukc{constructor(q,M,Y,G,Q,F,te,H,J,x,se,V,ne,K,z,U,O){super({syncResource:"extensions",profile:q},M,G,Y,Q,F,te,V,ne,x,se,z),this.Cb=H,this.Db=J,this.Eb=O,this.pb=6,this.wb=this.h.joinPath(this.g,"extensions.json"),this.xb=this.wb.with({scheme:o.$hTb,authority:"base"}),this.yb=this.wb.with({scheme:o.$hTb,authority:"local"}),this.zb=this.wb.with({scheme:o.$hTb,authority:"remote"}),this.Ab=this.wb.with({scheme:o.$hTb,authority:"accepted"}),this.Bb=this.Eb.createInstance(S),this.D(j.Event.any(j.Event.filter(this.Cb.onDidInstallExtensions,W=>W.some(({local:B})=>!!B)),j.Event.filter(this.Cb.onDidUninstallExtension,W=>!W.error),j.Event.filter(U.onDidChange,W=>W.valueChanges.some(({profile:B,changes:_})=>this.syncResource.profile.id===B.id&&_.some(ee=>ee.key===E.$No))),K.onDidChangeExtensionStorageToSync)(()=>this.Q()))}async qb(q,M){const Y=q.syncData?await y(q.syncData,this.Cb):null,G=M?.skippedExtensions??[],Q=M?.builtinExtensions??null,F=M?.syncData?await y(M.syncData,this.Cb):null,{localExtensions:te,ignoredExtensions:H}=await this.Bb.getLocalExtensions(this.syncResource.profile);Y?this.O.trace(`${this.C}: Merging remote extensions with local extensions...`):this.O.trace(`${this.C}: Remote extensions does not exist. Synchronizing extensions for the first time.`);const{local:J,remote:x}=(0,s.$5Lc)(te,Y,F,G,H,Q),se={local:J,remote:x,content:this.Hb(te,J.added,J.updated,J.removed),localChange:J.added.length>0||J.removed.length>0||J.updated.length>0?2:0,remoteChange:x!==null?2:0},V=this.Ob(te,!1);return[{skippedExtensions:G,builtinExtensions:Q,baseResource:this.xb,baseContent:F?this.Ob(F,!1):V,localResource:this.yb,localContent:V,localExtensions:te,remoteResource:this.zb,remoteExtensions:Y,remoteContent:Y?this.Ob(Y,!1):null,previewResource:this.wb,previewResult:se,localChange:se.localChange,remoteChange:se.remoteChange,acceptedResource:this.Ab}]}async ub(q){const M=q.syncData?await y(q.syncData,this.Cb):null,{localExtensions:Y,ignoredExtensions:G}=await this.Bb.getLocalExtensions(this.syncResource.profile),{remote:Q}=(0,s.$5Lc)(Y,M,M,q.skippedExtensions||[],G,q.builtinExtensions||[]);return Q!==null}Hb(q,M,Y,G){const Q=[...M,...Y],F=new Set,te=H=>{F.add(H.id.toLowerCase()),H.uuid&&F.add(H.uuid)};Q.forEach(({identifier:H})=>te(H)),G.forEach(te);for(const H of q)F.has(H.identifier.id.toLowerCase())||H.identifier.uuid&&F.has(H.identifier.uuid)||Q.push(H);return this.Ob(Q,!1)}async rb(q,M){return{...q.previewResult,hasConflicts:!1}}async sb(q,M,Y,G){if(this.h.isEqual(M,this.yb))return this.Kb(q);if(this.h.isEqual(M,this.zb))return this.Lb(q);if(this.h.isEqual(M,this.wb))return q.previewResult;throw new Error(`Invalid Resource: ${M.toString()}`)}async Kb(q){const M=await this.Cb.getInstalled(void 0,this.syncResource.profile.extensionsResource),Y=this.Db.getIgnoredExtensions(M),G=(0,s.$5Lc)(q.localExtensions,null,null,q.skippedExtensions,Y,q.builtinExtensions),{local:Q,remote:F}=G;return{content:q.localContent,local:Q,remote:F,localChange:Q.added.length>0||Q.removed.length>0||Q.updated.length>0?2:0,remoteChange:F!==null?2:0}}async Lb(q){const M=await this.Cb.getInstalled(void 0,this.syncResource.profile.extensionsResource),Y=this.Db.getIgnoredExtensions(M),G=q.remoteContent?JSON.parse(q.remoteContent):null;if(G!==null){const Q=(0,s.$5Lc)(q.localExtensions,G,q.localExtensions,[],Y,q.builtinExtensions),{local:F,remote:te}=Q;return{content:q.remoteContent,local:F,remote:te,localChange:F.added.length>0||F.removed.length>0||F.updated.length>0?2:0,remoteChange:te!==null?2:0}}else return{content:q.remoteContent,local:{added:[],removed:[],updated:[]},remote:null,localChange:0,remoteChange:0}}async tb(q,M,Y,G){let{skippedExtensions:Q,builtinExtensions:F,localExtensions:te}=Y[0][0];const{local:H,remote:J,localChange:x,remoteChange:se}=Y[0][1];if(x===0&&se===0&&this.O.info(`${this.C}: No changes found during synchronizing extensions.`),x!==0&&(await this.nb(JSON.stringify(te)),Q=await this.Bb.updateLocalExtensions(H.added,H.removed,H.updated,Q,this.syncResource.profile)),J){this.O.trace(`${this.C}: Updating remote extensions...`);const V=JSON.stringify(J.all);q=await this.mb(V,G?null:q.ref),this.O.info(`${this.C}: Updated remote extensions.${J.added.length?` Added: ${JSON.stringify(J.added.map(ne=>ne.identifier.id))}.`:""}${J.updated.length?` Updated: ${JSON.stringify(J.updated.map(ne=>ne.identifier.id))}.`:""}${J.removed.length?` Removed: ${JSON.stringify(J.removed.map(ne=>ne.identifier.id))}.`:""}`)}M?.ref!==q.ref&&(this.O.trace(`${this.C}: Updating last synchronized extensions...`),F=this.Nb(te,F),await this.fb(q,{skippedExtensions:Q,builtinExtensions:F}),this.O.info(`${this.C}: Updated last synchronized extensions.${Q.length?` Skipped: ${JSON.stringify(Q.map(V=>V.identifier.id))}.`:""}`))}Nb(q,M){const Y=new Set,G=[];for(const Q of q)Y.add(Q.identifier.id.toLowerCase()),Q.installed||G.push(Q.identifier);if(M)for(const Q of M)Y.has(Q.id.toLowerCase())||G.push(Q);return G}async resolveContent(q){if(this.h.isEqual(this.zb,q)||this.h.isEqual(this.xb,q)||this.h.isEqual(this.yb,q)||this.h.isEqual(this.Ab,q)){const M=await this.db(q);return M&&this.Ob(JSON.parse(M),!0)}return null}Ob(q,M){return d(q,M)}async hasLocalData(){try{const{localExtensions:q}=await this.Bb.getLocalExtensions(this.syncResource.profile);if(q.some(M=>M.installed||M.disabled))return!0}catch{}return!1}};e.$8Lc=v,e.$8Lc=v=Se([Z(2,C.$ci),Z(3,w.$wk),Z(4,c.$yp),Z(5,o.$3Sb),Z(6,o.$4Sb),Z(7,E.$Mo),Z(8,t.$Blc),Z(9,o.$fTb),Z(10,m.$Bi),Z(11,o.$aTb),Z(12,b.$Al),Z(13,g.$wI),Z(14,i.$7k),Z(15,a.$Zjc),Z(16,h.$7h)],v);let S=class{constructor(q,M,Y,G,Q,F){this.a=q,this.b=M,this.c=Y,this.d=G,this.f=Q,this.g=F}async getLocalExtensions(q){const M=await this.a.getInstalled(void 0,q.extensionsResource),Y=this.d.getIgnoredExtensions(M);return{localExtensions:await this.j(q,async(Q,F)=>{const te=Q.getDisabledExtensions();return M.map(H=>{const{identifier:J,isBuiltin:x,manifest:se,preRelease:V,pinned:ne,isApplicationScoped:K}=H,z={identifier:J,preRelease:V,version:se.version,pinned:!!ne};K&&!(0,p.$wm)(se)&&(z.isApplicationScoped=K),te.some(U=>(0,l.$ap)(U,J))&&(z.disabled=!0),x||(z.installed=!0);try{const U=F.getKeysForSync({id:J.id,version:se.version});if(U){const O=F.getExtensionState(H,!0)||{};z.state=Object.keys(O).reduce((W,B)=>(U.includes(B)&&(W[B]=O[B]),W),{})}}catch(U){this.g.info(`${(0,n.$Tkc)("extensions",q)}: Error while parsing extension state`,(0,L.$0)(U))}return z})}),ignoredExtensions:Y}}async updateLocalExtensions(q,M,Y,G,Q){const F=(0,n.$Tkc)("extensions",Q),te=[],H=new Map,J=[],x=[],se=await this.a.getInstalled(void 0,Q.extensionsResource);if((q.length||Y.length)&&await this.j(Q,async(K,z)=>{await D.Promises.settled([...q,...Y].map(async U=>{const O=se.find(_=>(0,l.$ap)(_.identifier,U.identifier));if(O&&O.isBuiltin){U.state&&O.manifest.version===U.version&&this.h(U.state,O,O.manifest.version,z),K.getDisabledExtensions().some(ee=>(0,l.$ap)(ee,U.identifier))!==!!U.disabled&&(U.disabled?(this.g.trace(`${F}: Disabling extension...`,U.identifier.id),await K.disableExtension(U.identifier),this.g.info(`${F}: Disabled extension`,U.identifier.id)):(this.g.trace(`${F}: Enabling extension...`,U.identifier.id),await K.enableExtension(U.identifier),this.g.info(`${F}: Enabled extension`,U.identifier.id))),J.push(U.identifier);return}const W=U.pinned?U.version:void 0,B=(await this.c.getExtensions([{...U.identifier,version:W,preRelease:W?void 0:U.preRelease}],N.CancellationToken.None))[0];if(U.state&&(O?O.manifest.version===U.version:B)&&this.h(U.state,O||B,O?.manifest.version,z),B)try{K.getDisabledExtensions().some(ee=>(0,l.$ap)(ee,U.identifier))!==!!U.disabled&&(U.disabled?(this.g.trace(`${F}: Disabling extension...`,U.identifier.id,B.version),await K.disableExtension(B.identifier),this.g.info(`${F}: Disabled extension`,U.identifier.id,B.version)):(this.g.trace(`${F}: Enabling extension...`,U.identifier.id,B.version),await K.enableExtension(B.identifier),this.g.info(`${F}: Enabled extension`,U.identifier.id,B.version))),(!O||O.preRelease!==U.preRelease||O.pinned!==U.pinned||W&&O.manifest.version!==W)&&(await this.a.canInstall(B)?(te.push({extension:B,options:{isMachineScoped:!1,donotIncludePackAndDependencies:!0,installGivenVersion:U.pinned&&!!U.version,installPreReleaseVersion:U.preRelease,profileLocation:Q.extensionsResource,isApplicationScoped:U.isApplicationScoped,context:{[E.$Ao]:!0,[E.$Bo]:!0}}}),H.set(B.identifier.id.toLowerCase(),U)):(this.g.info(`${F}: Skipped synchronizing extension because it cannot be installed.`,B.displayName||B.identifier.id),x.push(U)))}catch(_){x.push(U),this.g.error(_),this.g.info(`${F}: Skipped synchronizing extension`,B.displayName||B.identifier.id)}else x.push(U),this.g.info(`${F}: Skipped synchronizing extension because the extension is not found.`,U.identifier.id)}))}),M.length){const K=se.filter(({identifier:z,isBuiltin:U})=>!U&&M.some(O=>(0,l.$ap)(z,O)));await D.Promises.settled(K.map(async z=>{this.g.trace(`${F}: Uninstalling local extension...`,z.identifier.id),await this.a.uninstall(z,{donotIncludePack:!0,donotCheckDependents:!0,profileLocation:Q.extensionsResource}),this.g.info(`${F}: Uninstalled local extension.`,z.identifier.id),J.push(z.identifier)}))}const V=await this.a.installGalleryExtensions(te);for(const{identifier:K,local:z,error:U,source:O}of V){const W=O;if(z)this.g.info(`${F}: Installed extension.`,K.id,W.version),J.push(K);else{const B=H.get(K.id.toLowerCase());B&&(x.push(B),this.g.info(`${F}: Skipped synchronizing extension`,W.displayName||W.identifier.id)),U instanceof E.$Ko&&[E.ExtensionManagementErrorCode.Incompatible,E.ExtensionManagementErrorCode.IncompatibleTargetPlatform].includes(U.code)?this.g.info(`${F}: Skipped synchronizing extension because the compatible extension is not found.`,W.displayName||W.identifier.id):U&&this.g.error(U)}}const ne=[];for(const K of G)J.some(z=>(0,l.$ap)(z,K.identifier))||ne.push(K);for(const K of x)ne.some(z=>(0,l.$ap)(z.identifier,K.identifier))||ne.push(K);return ne}h(q,M,Y,G){const Q=G.getExtensionState(M,!0)||{},F=Y?G.getKeysForSync({id:M.identifier.id,version:Y}):void 0;F?F.forEach(te=>{Q[te]=q[te]}):Object.keys(q).forEach(te=>Q[te]=q[te]),G.setExtensionState(M,Q,!0)}async j(q,M){return this.b.withProfileScopedStorageService(q,async Y=>{const G=new P.$Sc,Q=this.f.createChild(new f.$6h([c.$yp,Y])),F=G.add(Q.createInstance(k.$ljc)),te=G.add(Q.createInstance(g.$xI));try{return await M(F,te)}finally{G.dispose()}})}};e.$9Lc=S,e.$9Lc=S=Se([Z(0,E.$Mo),Z(1,a.$Zjc),Z(2,E.$Jo),Z(3,t.$Blc),Z(4,h.$7h),Z(5,o.$fTb)],S);let A=class extends n.$Xkc{constructor(q,M,Y,G,Q,F,te,H){super("extensions",G,Q,F,Y,te,H),this.p=q,this.q=M}async t(q){return q.syncData?await y(q.syncData,this.p):null}u(q,M){const Y=[],G=[],Q=[];for(const F of q){if(this.q.hasToNeverSyncExtension(F.identifier.id))continue;const te=M.find(H=>(0,l.$ap)(H.identifier,F.identifier));te?(Y.push(te),F.disabled&&Q.push(F.identifier)):F.installed&&(G.push({...F.identifier,preRelease:!!F.preRelease}),F.disabled&&Q.push(F.identifier))}return{installedExtensions:Y,newExtensions:G,disabledExtensions:Q,remoteExtensions:q}}};e.$0Lc=A,e.$0Lc=A=Se([Z(0,E.$Mo),Z(1,t.$Blc),Z(2,w.$wk),Z(3,r.$9k),Z(4,C.$ci),Z(5,u.$qj),Z(6,c.$yp),Z(7,i.$7k)],A)}),define(ue[117],de([0,1,14,7,3,34,42,5,31,21,15,11,8,43,19,22,28,39,81,238,24,18,62,4]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$4kc=e.$3kc=e.$2kc=e.$1kc=e.$Zkc=void 0;const n="globalState.argv.",s=["locale"];function t(v,S){const A=v.storage?Object.keys(v.storage).sort():[],T={};return A.forEach(q=>T[q]=v.storage[q]),v.storage=T,S?(0,I.$wn)(v,{}):JSON.stringify(v)}e.$Zkc=t;const o=1;let a=class extends h.$Ukc{constructor(S,A,T,q,M,Y,G,Q,F,te,H,J,x,se){super({syncResource:"globalState",profile:S},A,q,Q,J,M,Y,F,te,G,H,x),this.Bb=T,this.pb=o,this.vb=this.h.joinPath(this.g,"globalState.json"),this.wb=this.vb.with({scheme:c.$hTb,authority:"base"}),this.xb=this.vb.with({scheme:c.$hTb,authority:"local"}),this.yb=this.vb.with({scheme:c.$hTb,authority:"remote"}),this.zb=this.vb.with({scheme:c.$hTb,authority:"accepted"}),this.Ab=se.createInstance(y),this.D(q.watch(this.h.dirname(this.H.argvResource))),this.D(L.Event.any(L.Event.filter(q.onDidFilesChange,V=>V.contains(this.H.argvResource)),L.Event.filter(T.onDidChange,V=>!!(V.targetChanges.some(ne=>this.syncResource.profile.id===ne.id)||V.valueChanges.some(({profile:ne,changes:K})=>this.syncResource.profile.id===ne.id&&K.some(z=>z.target===0)))))(()=>this.Q()))}async qb(S,A,T){const q=S.syncData?JSON.parse(S.syncData.content):null;A=A===null&&T?S:A;const M=A&&A.syncData?JSON.parse(A.syncData.content):null,Y=await this.Ab.getLocalGlobalState(this.syncResource.profile);q?this.O.trace(`${this.C}: Merging remote ui state with local ui state...`):this.O.trace(`${this.C}: Remote ui state does not exist. Synchronizing ui state for the first time.`);const G=await this.Jb(M),{local:Q,remote:F}=(0,u.$Ykc)(Y.storage,q?q.storage:null,M?M.storage:null,G,this.O),te={content:null,local:Q,remote:F,localChange:Object.keys(Q.added).length>0||Object.keys(Q.updated).length>0||Q.removed.length>0?2:0,remoteChange:F.all!==null?2:0},H=t(Y,!1);return[{baseResource:this.wb,baseContent:M?t(M,!1):H,localResource:this.xb,localContent:H,localUserData:Y,remoteResource:this.yb,remoteContent:q?t(q,!1):null,previewResource:this.vb,previewResult:te,localChange:te.localChange,remoteChange:te.remoteChange,acceptedResource:this.zb,storageKeys:G}]}async ub(S){const A=S.syncData?JSON.parse(S.syncData.content):null;if(A===null)return!0;const T=await this.Ab.getLocalGlobalState(this.syncResource.profile),q=await this.Jb(A),{remote:M}=(0,u.$Ykc)(T.storage,A.storage,A.storage,q,this.O);return M.all!==null}async rb(S,A){return{...S.previewResult,hasConflicts:!1}}async sb(S,A,T,q){if(this.h.isEqual(A,this.xb))return this.Gb(S);if(this.h.isEqual(A,this.yb))return this.Hb(S);if(this.h.isEqual(A,this.vb))return S.previewResult;throw new Error(`Invalid Resource: ${A.toString()}`)}async Gb(S){return{content:S.localContent,local:{added:{},removed:[],updated:{}},remote:{added:Object.keys(S.localUserData.storage),removed:[],updated:[],all:S.localUserData.storage},localChange:0,remoteChange:2}}async Hb(S){if(S.remoteContent!==null){const A=JSON.parse(S.remoteContent),{local:T,remote:q}=(0,u.$Ykc)(S.localUserData.storage,A.storage,null,S.storageKeys,this.O);return{content:S.remoteContent,local:T,remote:q,localChange:Object.keys(T.added).length>0||Object.keys(T.updated).length>0||T.removed.length>0?2:0,remoteChange:q!==null?2:0}}else return{content:S.remoteContent,local:{added:{},removed:[],updated:{}},remote:{added:[],removed:[],updated:[],all:null},localChange:0,remoteChange:0}}async tb(S,A,T,q){const{localUserData:M}=T[0][0],{local:Y,remote:G,localChange:Q,remoteChange:F}=T[0][1];if(Q===0&&F===0&&this.O.info(`${this.C}: No changes found during synchronizing ui state.`),Q!==0&&(this.O.trace(`${this.C}: Updating local ui state...`),await this.nb(JSON.stringify(M)),await this.Ab.writeLocalGlobalState(Y,this.syncResource.profile),this.O.info(`${this.C}: Updated local ui state`)),F!==0){this.O.trace(`${this.C}: Updating remote ui state...`);const te=JSON.stringify({storage:G.all});S=await this.mb(te,q?null:S.ref),this.O.info(`${this.C}: Updated remote ui state.${G.added.length?` Added: ${G.added}.`:""}${G.updated.length?` Updated: ${G.updated}.`:""}${G.removed.length?` Removed: ${G.removed}.`:""}`)}A?.ref!==S.ref&&(this.O.trace(`${this.C}: Updating last synchronized ui state...`),await this.fb(S),this.O.info(`${this.C}: Updated last synchronized ui state`))}async resolveContent(S){if(this.h.isEqual(this.yb,S)||this.h.isEqual(this.wb,S)||this.h.isEqual(this.xb,S)||this.h.isEqual(this.zb,S)){const A=await this.db(S);return A&&t(JSON.parse(A),!0)}return null}async hasLocalData(){try{const{storage:S}=await this.Ab.getLocalGlobalState(this.syncResource.profile);if(Object.keys(S).length>1||S[`${n}.locale`]?.value!=="en")return!0}catch{}return!1}async Jb(S){const A=await this.Bb.readStorageData(this.syncResource.profile),T=[],q=[];for(const[G,Q]of A)Q.target===0?T.push(G):Q.target===1&&q.push(G);const M=[...T,...q],Y=S?.storage?Object.keys(S.storage).filter(G=>!G.startsWith(n)&&!M.includes(G)&&A.get(G)!==void 0):[];if(!P.$o){const G=[...c.$YSb.map(Q=>(0,c.$_Sb)(Q)),c.$$Sb];Y.push(...G),q.push(...G)}return{user:T,machine:q,unregistered:Y}}};e.$1kc=a,e.$1kc=a=Se([Z(2,i.$Zjc),Z(3,k.$wk),Z(4,c.$3Sb),Z(5,c.$4Sb),Z(6,c.$fTb),Z(7,C.$ci),Z(8,c.$aTb),Z(9,p.$Al),Z(10,m.$Bi),Z(11,g.$yp),Z(12,w.$7k),Z(13,r.$7h)],a);let y=class{constructor(S,A,T,q){this.a=S,this.b=A,this.c=T,this.d=q}async getLocalGlobalState(S){const A={};if(S.isDefault){const q=await this.f(),M=(0,j.$ln)(q);for(const Y of s)M[Y]!==void 0&&(A[`${n}${Y}`]={version:1,value:M[Y]})}const T=await this.c.readStorageData(S);for(const[q,M]of T)M.value&&M.target===0&&(A[q]={version:1,value:M.value});return{storage:A}}async f(){try{this.d.debug("GlobalStateSync#getLocalArgvContent",this.b.argvResource);const S=await this.a.readFile(this.b.argvResource);return this.d.debug("GlobalStateSync#getLocalArgvContent - Resolved",this.b.argvResource),S.value.toString()}catch(S){this.d.debug((0,N.$0)(S))}return"{}"}async writeLocalGlobalState({added:S,removed:A,updated:T},q){const M=(0,h.$Tkc)("globalState",q),Y={},G=new Map,Q=await this.c.readStorageData(q),F=(te,H)=>{for(const J of te){if(J.startsWith(n)){Y[J.substring(n.length)]=H?H[J].value:void 0;continue}if(H){const x=H[J];x.value!==Q.get(J)?.value&&G.set(J,x.value)}else Q.get(J)!==void 0&&G.set(J,void 0)}};if(F(Object.keys(S),S),F(Object.keys(T),T),F(A),Object.keys(Y).length){this.d.trace(`${M}: Updating locale...`);const te=await this.f();let H=te;for(const J of Object.keys(Y))H=(0,f.edit)(H,[J],Y[J],{});te!==H&&(this.d.trace(`${M}: Updating locale...`),await this.a.writeFile(this.b.argvResource,D.$ke.fromString(H)),this.d.info(`${M}: Updated locale.`)),this.d.info(`${M}: Updated locale`)}G.size&&(this.d.trace(`${M}: Updating global state...`),await this.c.updateStorageData(q,G,0),this.d.info(`${M}: Updated global state`,[...G.keys()]))}};e.$2kc=y,e.$2kc=y=Se([Z(0,k.$wk),Z(1,C.$ci),Z(2,i.$Zjc),Z(3,c.$fTb)],y);let $=class extends h.$Xkc{constructor(S,A,T,q,M,Y){super("globalState",T,q,M,A,S,Y)}async o(S){const A=S.syncData?JSON.parse(S.syncData.content):null;if(!A){this.j.info("Skipping initializing global state because remote global state does not exist.");return}const T={},q={};for(const M of Object.keys(A.storage))M.startsWith(n)?T[M.substring(n.length)]=A.storage[M].value:this.l.get(M,0)===void 0&&(q[M]=A.storage[M].value);if(Object.keys(T).length){let M="{}";try{M=(await this.k.readFile(this.h.argvResource)).value.toString()}catch{}for(const Y of Object.keys(T))M=(0,f.edit)(M,[Y],T[Y],{});await this.k.writeFile(this.h.argvResource,D.$ke.fromString(M))}if(Object.keys(q).length){const M=[];for(const Y of Object.keys(q))M.push({key:Y,value:q[Y],scope:0,target:0});this.l.storeAll(M,!0)}}};e.$3kc=$,e.$3kc=$=Se([Z(0,g.$yp),Z(1,k.$wk),Z(2,b.$9k),Z(3,C.$ci),Z(4,c.$fTb),Z(5,w.$7k)],$);let d=class{constructor(S,A,T,q,M){this.a=S,this.b=A,this.c=T,this.d=q,this.f=M}getSyncStoreType(S){return this.h(S)?.storage[c.$$Sb]?.value}async sync(S){const A=(0,c.$7Sb)((0,R.$sg)());try{return await this.g(S,A)}catch(T){if(T instanceof c.$8Sb)switch(T.code){case"PreconditionFailed":return this.f.info("Failed to synchronize UserDataSyncStoreType as there is a new remote version available. Synchronizing again..."),this.g(S,A)}throw T}}async g(S,A){const T=await this.a.readResource("globalState",null,void 0,A),q=this.h(T)||{storage:{}};q.storage[c.$$Sb]={value:S,version:o};const M=await(0,l.$Ep)(this.c,this.d,this.b),Y={version:o,machineId:M,content:t(q,!1)};await this.a.writeResource("globalState",JSON.stringify(Y),T.ref,void 0,A)}h({content:S}){if(!S)return null;const A=JSON.parse(S);if((0,h.$Skc)(A))return A?JSON.parse(A.content):null;throw new Error("Invalid remote data")}};e.$4kc=d,e.$4kc=d=Se([Z(1,g.$yp),Z(2,C.$ci),Z(3,k.$wk),Z(4,E.$qj)],d)}),define(ue[118],de([0,1,17,14,3,34,5,12,170,21,15,11,19,22,28,18,39,235,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$bMc=e.$aMc=e.$_Lc=void 0;function u(i,r,n){try{const s=JSON.parse(i);if(!r)return(0,P.$Rf)(s.all)?null:s.all;switch(I.OS){case 2:return(0,P.$Rf)(s.mac)?null:s.mac;case 3:return(0,P.$Rf)(s.linux)?null:s.linux;case 1:return(0,P.$Rf)(s.windows)?null:s.windows}}catch(s){return n.error(s),null}}e.$_Lc=u;let c=class extends w.$Wkc{constructor(r,n,s,t,o,a,y,$,d,v,S,A,T){super(r.keybindingsResource,{syncResource:"keybindings",profile:r},n,$,d,v,s,t,y,A,o,S,a,T),this.pb=2,this.Eb=this.h.joinPath(this.g,"keybindings.json"),this.Fb=this.Eb.with({scheme:f.$hTb,authority:"base"}),this.Gb=this.Eb.with({scheme:f.$hTb,authority:"local"}),this.Hb=this.Eb.with({scheme:f.$hTb,authority:"remote"}),this.Ib=this.Eb.with({scheme:f.$hTb,authority:"accepted"}),this.D(L.Event.filter(a.onDidChangeConfiguration,q=>q.affectsConfiguration("settingsSync.keybindingsPerPlatform"))(()=>this.Q()))}async qb(r,n,s,t){const o=r.syncData?u(r.syncData.content,t.keybindingsPerPlatform??this.Qb(),this.O):null;n=n===null&&s?r:n;const a=n?this.Ob(n):null,y=await this.vb(),$=await this.Cb();let d=null,v=!1,S=!1,A=!1;if(o){let M=y?y.value.toString():"[]";if(M=M||"[]",this.Ab(M,!0))throw new f.$8Sb((0,R.localize)(0,null),"LocalInvalidContent",this.resource);if(!a||a!==M||a!==o){this.O.trace(`${this.C}: Merging remote keybindings with local keybindings...`);const Y=await(0,h.$$Lc)(M,o,a,$,this.zb);Y.hasChanges&&(d=Y.mergeContent,A=Y.hasConflicts,v=A||Y.mergeContent!==M,S=A||Y.mergeContent!==o)}}else y&&(this.O.trace(`${this.C}: Remote keybindings does not exist. Synchronizing keybindings for the first time.`),d=y.value.toString(),S=!0);const T={content:A?a:d,localChange:v?y?2:1:0,remoteChange:S?2:0,hasConflicts:A},q=y?y.value.toString():null;return[{fileContent:y,baseResource:this.Fb,baseContent:a,localResource:this.Gb,localContent:q,localChange:T.localChange,remoteResource:this.Hb,remoteContent:o,remoteChange:T.remoteChange,previewResource:this.Eb,previewResult:T,acceptedResource:this.Ib}]}async ub(r){const n=this.Ob(r);if(n===null)return!0;const s=await this.vb(),t=s?s.value.toString():"",o=await this.Cb(),a=await(0,h.$$Lc)(t||"[]",n,n,o,this.zb);return a.hasConflicts||a.mergeContent!==n}async rb(r,n){return r.previewResult}async sb(r,n,s,t){if(this.h.isEqual(n,this.Gb))return{content:r.fileContent?r.fileContent.value.toString():null,localChange:0,remoteChange:2};if(this.h.isEqual(n,this.Hb))return{content:r.remoteContent,localChange:2,remoteChange:0};if(this.h.isEqual(n,this.Eb))return s===void 0?{content:r.previewResult.content,localChange:r.previewResult.localChange,remoteChange:r.previewResult.remoteChange}:{content:s,localChange:2,remoteChange:2};throw new Error(`Invalid Resource: ${n.toString()}`)}async tb(r,n,s,t){const{fileContent:o}=s[0][0];let{content:a,localChange:y,remoteChange:$}=s[0][1];if(y===0&&$===0&&this.O.info(`${this.C}: No changes found during synchronizing keybindings.`),a!==null&&(a=a.trim(),a=a||"[]",this.Ab(a,!0)))throw new f.$8Sb((0,R.localize)(1,null),"LocalInvalidContent",this.resource);if(y!==0&&(this.O.trace(`${this.C}: Updating local keybindings...`),o&&await this.nb(this.Pb(o.value.toString())),await this.wb(a||"[]",o,t),this.O.info(`${this.C}: Updated local keybindings`)),$!==0){this.O.trace(`${this.C}: Updating remote keybindings...`);const d=this.Pb(a||"[]",r.syncData?.content);r=await this.mb(d,t?null:r.ref),this.O.info(`${this.C}: Updated remote keybindings`)}try{await this.G.del(this.Eb)}catch{}n?.ref!==r.ref&&(this.O.trace(`${this.C}: Updating last synchronized keybindings...`),await this.fb(r,{platformSpecific:this.Qb()}),this.O.info(`${this.C}: Updated last synchronized keybindings`))}async hasLocalData(){try{const r=await this.vb();if(r){const n=(0,j.$ln)(r.value.toString());if((0,D.$Lb)(n))return!0}}catch(r){if(r.fileOperationResult!==1)return!0}return!1}async resolveContent(r){return this.h.isEqual(this.Hb,r)||this.h.isEqual(this.Fb,r)||this.h.isEqual(this.Gb,r)||this.h.isEqual(this.Ib,r)?this.db(r):null}Ob(r){return!r.syncData||r.platformSpecific!==void 0&&r.platformSpecific!==this.Qb()?null:u(r.syncData.content,this.Qb(),this.O)}Pb(r,n){let s={};try{s=JSON.parse(n||"{}")}catch(t){this.O.error(t)}switch(this.Qb()?delete s.all:s.all=r,I.OS){case 2:s.mac=r;break;case 3:s.linux=r;break;case 1:s.windows=r;break}return JSON.stringify(s)}Qb(){return!!this.P.getValue(f.$VSb)}};e.$aMc=c,e.$aMc=c=Se([Z(2,f.$3Sb),Z(3,f.$4Sb),Z(4,f.$fTb),Z(5,m.$Bi),Z(6,f.$aTb),Z(7,k.$wk),Z(8,C.$ci),Z(9,E.$yp),Z(10,f.$eTb),Z(11,l.$Al),Z(12,g.$7k)],c);let b=class extends w.$Xkc{constructor(r,n,s,t,o,a){super("keybindings",n,s,t,r,o,a)}async o(r){const n=r.syncData?this.p(r.syncData.content):null;if(!n){this.j.info("Skipping initializing keybindings because remote keybindings does not exist.");return}if(!await this.i()){this.j.info("Skipping initializing keybindings because local keybindings exist.");return}await this.k.writeFile(this.g.defaultProfile.keybindingsResource,N.$ke.fromString(n)),await this.n(r)}async i(){try{const r=await this.k.readFile(this.g.defaultProfile.settingsResource),n=(0,j.$ln)(r.value.toString());return!(0,D.$Lb)(n)}catch(r){return r.fileOperationResult===1}}p(r){try{return u(r,!0,this.j)}catch(n){return this.j.error(n),null}}};e.$bMc=b,e.$bMc=b=Se([Z(0,k.$wk),Z(1,p.$9k),Z(2,C.$ci),Z(3,f.$fTb),Z(4,E.$yp),Z(5,g.$7k)],b)}),define(ue[119],de([0,1,14,3,171,21,77,15,29,11,19,22,28,18,39,239,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$eMc=e.$dMc=e.$cMc=void 0;function h(b){return b&&b.settings&&typeof b.settings=="string"&&Object.keys(b).length===1}function f(b){const i=JSON.parse(b);return h(i)?i:{settings:b}}e.$cMc=f;let u=class extends g.$Wkc{constructor(i,r,n,s,t,o,a,y,$,d,v,S,A,T){super(i.settingsResource,{syncResource:"settings",profile:i},r,n,s,t,o,a,v,S,y,$,d,T),this.Eb=A,this.pb=2,this.previewResource=this.h.joinPath(this.g,"settings.json"),this.baseResource=this.previewResource.with({scheme:w.$hTb,authority:"base"}),this.localResource=this.previewResource.with({scheme:w.$hTb,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:w.$hTb,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:w.$hTb,authority:"accepted"}),this.Ob=void 0}async getRemoteUserDataSyncConfiguration(i){const r=await this.getLastSyncUserData(),n=await this.X(i,r),s=this.Lb(n),t=new I.$ao(w.$USb);return s?.settings&&t.parse(s.settings),t.configurationModel.getValue(w.$USb)||{}}async qb(i,r,n){const s=await this.vb(),t=await this.Cb(),o=this.Lb(i);r=r===null&&n?i:r;const a=r?this.Lb(r):null,y=await this.Pb();let $=null,d=!1,v=!1,S=!1;if(o){let M=s?s.value.toString().trim():"{}";M=M||"{}",this.Qb(M),this.O.trace(`${this.C}: Merging remote settings with local settings...`);const Y=(0,p.$Gjc)(M,o.settings,a?a.settings:null,y,[],t);$=Y.localContent||Y.remoteContent,d=Y.localContent!==null,v=Y.remoteContent!==null,S=Y.hasConflicts}else s&&(this.O.trace(`${this.C}: Remote settings does not exist. Synchronizing settings for the first time.`),$=s.value.toString().trim()||"{}",this.Qb($),v=!0);const A=s?s.value.toString():null,T=a?.settings??null,q={content:S?T:$,localChange:d?2:0,remoteChange:v?2:0,hasConflicts:S};return[{fileContent:s,baseResource:this.baseResource,baseContent:T,localResource:this.localResource,localContent:A,localChange:q.localChange,remoteResource:this.remoteResource,remoteContent:o?o.settings:null,remoteChange:q.remoteChange,previewResource:this.previewResource,previewResult:q,acceptedResource:this.acceptedResource}]}async ub(i){const r=this.Lb(i);if(r===null)return!0;const n=await this.vb(),s=n?n.value.toString().trim():"",t=await this.Pb(),o=await this.Cb();return(0,p.$Gjc)(s||"{}",r.settings,r.settings,t,[],o).remoteContent!==null}async rb(i,r){const n=await this.Cb(),s=await this.Pb();return{...i.previewResult,content:i.previewResult.content?(0,p.$Fjc)(i.previewResult.content,"{}",s,n):null}}async sb(i,r,n,s){const t=await this.Cb(),o=await this.Pb();if(this.h.isEqual(r,this.localResource))return{content:i.fileContent?(0,p.$Fjc)(i.fileContent.value.toString(),"{}",o,t):null,localChange:0,remoteChange:2};if(this.h.isEqual(r,this.remoteResource))return{content:i.remoteContent!==null?(0,p.$Fjc)(i.remoteContent,i.fileContent?i.fileContent.value.toString():"{}",o,t):null,localChange:2,remoteChange:0};if(this.h.isEqual(r,this.previewResource))return n===void 0?{content:i.previewResult.content,localChange:i.previewResult.localChange,remoteChange:i.previewResult.remoteChange}:{content:n!==null?(0,p.$Fjc)(n,i.fileContent?i.fileContent.value.toString():"{}",o,t):null,localChange:2,remoteChange:2};throw new Error(`Invalid Resource: ${r.toString()}`)}async tb(i,r,n,s){const{fileContent:t}=n[0][0];let{content:o,localChange:a,remoteChange:y}=n[0][1];if(a===0&&y===0&&this.O.info(`${this.C}: No changes found during synchronizing settings.`),o=o?o.trim():"{}",o=o||"{}",this.Qb(o),a!==0&&(this.O.trace(`${this.C}: Updating local settings...`),t&&await this.nb(JSON.stringify(this.Nb(t.value.toString()))),await this.wb(o,t,s),await this.P.reloadConfiguration(3),this.O.info(`${this.C}: Updated local settings`)),y!==0){const $=await this.Cb(),d=this.Lb(i),v=await this.Pb(o);o=(0,p.$Fjc)(o,d?d.settings:"{}",v,$),this.O.trace(`${this.C}: Updating remote settings...`),i=await this.mb(JSON.stringify(this.Nb(o)),s?null:i.ref),this.O.info(`${this.C}: Updated remote settings`)}try{await this.G.del(this.previewResource)}catch{}r?.ref!==i.ref&&(this.O.trace(`${this.C}: Updating last synchronized settings...`),await this.fb(i),this.O.info(`${this.C}: Updated last synchronized settings`))}async hasLocalData(){try{const i=await this.vb();if(i)return!(0,p.$Hjc)(i.value.toString())}catch(i){if(i.fileOperationResult!==1)return!0}return!1}async resolveContent(i){return this.h.isEqual(this.remoteResource,i)||this.h.isEqual(this.localResource,i)||this.h.isEqual(this.acceptedResource,i)||this.h.isEqual(this.baseResource,i)?this.db(i):null}async db(i){let r=await super.db(i);if(r){const n=await this.Cb(),s=await this.Pb();r=(0,p.$Fjc)(r,"{}",s,n)}return r}Lb(i){return i.syncData?this.Mb(i.syncData.content):null}Mb(i){try{return f(i)}catch(r){this.O.error(r)}return null}Nb(i){return{settings:i}}async Pb(i){if(!this.Ob){this.Ob=this.zb.resolveDefaultIgnoredSettings();const n=this.D(N.Event.any(N.Event.filter(this.Eb.onDidInstallExtensions,s=>s.some(({local:t})=>!!t)),N.Event.filter(this.Eb.onDidUninstallExtension,s=>!s.error))(()=>{n.dispose(),this.Ob=void 0}))}const r=await this.Ob;return(0,p.$Djc)(r,this.P,i)}Qb(i){if(this.Ab(i,!1))throw new w.$8Sb((0,L.localize)(0,null),"LocalInvalidContent",this.resource)}};e.$dMc=u,e.$dMc=u=Se([Z(2,m.$wk),Z(3,P.$ci),Z(4,C.$yp),Z(5,w.$3Sb),Z(6,w.$4Sb),Z(7,w.$fTb),Z(8,w.$eTb),Z(9,j.$Bi),Z(10,w.$aTb),Z(11,k.$Al),Z(12,R.$Mo),Z(13,E.$7k)],u);let c=class extends g.$Xkc{constructor(i,r,n,s,t,o){super("settings",r,n,s,i,t,o)}async o(i){const r=i.syncData?this.p(i.syncData.content):null;if(!r){this.j.info("Skipping initializing settings because remote settings does not exist.");return}if(!await this.i()){this.j.info("Skipping initializing settings because local settings exist.");return}await this.k.writeFile(this.g.defaultProfile.settingsResource,D.$ke.fromString(r.settings)),await this.n(i)}async i(){try{const i=await this.k.readFile(this.g.defaultProfile.settingsResource);return(0,p.$Hjc)(i.value.toString().trim())}catch(i){return i.fileOperationResult===1}}p(i){try{return f(i)}catch(r){this.j.error(r)}return null}};e.$eMc=c,e.$eMc=c=Se([Z(0,m.$wk),Z(1,l.$9k),Z(2,P.$ci),Z(3,w.$fTb),Z(4,C.$yp),Z(5,E.$7k)],c)}),define(ue[120],de([0,1,14,3,30,21,15,11,19,22,28,18,39,236,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$jMc=e.$iMc=e.$hMc=void 0;function p(f){return JSON.parse(f.content)}e.$hMc=p;let w=class extends E.$Ukc{constructor(u,c,b,i,r,n,s,t,o,a,y,$){super({syncResource:"snippets",profile:u},c,i,b,r,n,s,a,y,t,o,$),this.pb=1,this.vb=u.snippetsHome,this.D(this.G.watch(b.userRoamingDataHome)),this.D(this.G.watch(this.vb)),this.D(N.Event.filter(this.G.onDidFilesChange,d=>d.affects(this.vb))(()=>this.Q()))}async qb(u,c,b){const i=await this.Hb(),r=this.Gb(i),n=u.syncData?this.Fb(u.syncData):null;c=c===null&&b?u:c;const s=c&&c.syncData?this.Fb(c.syncData):null;n?this.O.trace(`${this.C}: Merging remote snippets with local snippets...`):this.O.trace(`${this.C}: Remote snippets does not exist. Synchronizing snippets for the first time.`);const t=(0,l.$fMc)(r,n,s);return this.Bb(t,i,n||{},s||{})}async ub(u){const c=u.syncData?this.Fb(u.syncData):null;if(c===null)return!0;const b=await this.Hb(),i=this.Gb(b),r=(0,l.$fMc)(i,c,c);return Object.keys(r.remote.added).length>0||Object.keys(r.remote.updated).length>0||r.remote.removed.length>0||r.conflicts.length>0}async rb(u,c){return u.previewResult}async sb(u,c,b,i){if(this.h.isEqualOrParent(c,this.g.with({scheme:g.$hTb,authority:"local"})))return{content:u.fileContent?u.fileContent.value.toString():null,localChange:0,remoteChange:u.fileContent?u.remoteContent!==null?2:1:3};if(this.h.isEqualOrParent(c,this.g.with({scheme:g.$hTb,authority:"remote"})))return{content:u.remoteContent,localChange:u.remoteContent!==null?u.fileContent?2:1:3,remoteChange:0};if(this.h.isEqualOrParent(c,this.g))return b===void 0?{content:u.previewResult.content,localChange:u.previewResult.localChange,remoteChange:u.previewResult.remoteChange}:{content:b,localChange:b===null?u.fileContent!==null?3:0:2,remoteChange:b===null?u.remoteContent!==null?3:0:2};throw new Error(`Invalid Resource: ${c.toString()}`)}async tb(u,c,b,i){const r=b.map(([n,s])=>({...n,acceptResult:s}));r.every(({localChange:n,remoteChange:s})=>n===0&&s===0)&&this.O.info(`${this.C}: No changes found during synchronizing snippets.`),r.some(({localChange:n})=>n!==0)&&(await this.Cb(r),await this.Db(r,i)),r.some(({remoteChange:n})=>n!==0)&&(u=await this.Eb(r,u,i)),c?.ref!==u.ref&&(this.O.trace(`${this.C}: Updating last synchronized snippets...`),await this.fb(u),this.O.info(`${this.C}: Updated last synchronized snippets`));for(const{previewResource:n}of r)try{await this.G.del(n)}catch{}}Bb(u,c,b,i){const r=new Map;for(const n of Object.keys(u.local.added)){const s={content:u.local.added[n],hasConflicts:!1,localChange:1,remoteChange:0};r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:null,fileContent:null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),localContent:null,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:b[n],previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}for(const n of Object.keys(u.local.updated)){const s={content:u.local.updated[n],hasConflicts:!1,localChange:2,remoteChange:0},t=c[n]?c[n].value.toString():null;r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:i[n]??null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),fileContent:c[n],localContent:t,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:b[n],previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}for(const n of u.local.removed){const s={content:null,hasConflicts:!1,localChange:3,remoteChange:0},t=c[n]?c[n].value.toString():null;r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:i[n]??null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),fileContent:c[n],localContent:t,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:null,previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}for(const n of Object.keys(u.remote.added)){const s={content:u.remote.added[n],hasConflicts:!1,localChange:0,remoteChange:1},t=c[n]?c[n].value.toString():null;r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:i[n]??null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),fileContent:c[n],localContent:t,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:null,previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}for(const n of Object.keys(u.remote.updated)){const s={content:u.remote.updated[n],hasConflicts:!1,localChange:0,remoteChange:2},t=c[n]?c[n].value.toString():null;r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:i[n]??null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),fileContent:c[n],localContent:t,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:b[n],previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}for(const n of u.remote.removed){const s={content:null,hasConflicts:!1,localChange:0,remoteChange:3};r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:i[n]??null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),fileContent:null,localContent:null,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:b[n],previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}for(const n of u.conflicts){const s={content:i[n]??null,hasConflicts:!0,localChange:c[n]?2:1,remoteChange:b[n]?2:1},t=c[n]?c[n].value.toString():null;r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:i[n]??null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),fileContent:c[n]||null,localContent:t,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:b[n]||null,previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}for(const n of Object.keys(c))if(!r.has(n)){const s={content:c[n]?c[n].value.toString():null,hasConflicts:!1,localChange:0,remoteChange:0},t=c[n]?c[n].value.toString():null;r.set(n,{baseResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"base"}),baseContent:i[n]??null,localResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"local"}),fileContent:c[n]||null,localContent:t,remoteResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"remote"}),remoteContent:b[n]||null,previewResource:this.h.joinPath(this.g,n),previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.h.joinPath(this.g,n).with({scheme:g.$hTb,authority:"accepted"})})}return[...r.values()]}async resolveContent(u){return this.h.isEqualOrParent(u,this.g.with({scheme:g.$hTb,authority:"remote"}))||this.h.isEqualOrParent(u,this.g.with({scheme:g.$hTb,authority:"local"}))||this.h.isEqualOrParent(u,this.g.with({scheme:g.$hTb,authority:"base"}))||this.h.isEqualOrParent(u,this.g.with({scheme:g.$hTb,authority:"accepted"}))?this.db(u):null}async hasLocalData(){try{const u=await this.Hb();if(Object.keys(u).length)return!0}catch{}return!1}async Cb(u){const c={};for(const b of u)b.fileContent&&(c[this.h.basename(b.localResource)]=b.fileContent);await this.nb(JSON.stringify(this.Gb(c)))}async Db(u,c){for(const{fileContent:b,acceptResult:i,localResource:r,remoteResource:n,localChange:s}of u)if(s!==0){const t=n?this.h.basename(n):this.h.basename(r),o=this.h.joinPath(this.vb,t);s===3?(this.O.trace(`${this.C}: Deleting snippet...`,this.h.basename(o)),await this.G.del(o),this.O.info(`${this.C}: Deleted snippet`,this.h.basename(o))):s===1?(this.O.trace(`${this.C}: Creating snippet...`,this.h.basename(o)),await this.G.createFile(o,D.$ke.fromString(i.content),{overwrite:c}),this.O.info(`${this.C}: Created snippet`,this.h.basename(o))):(this.O.trace(`${this.C}: Updating snippet...`,this.h.basename(o)),await this.G.writeFile(o,D.$ke.fromString(i.content),c?void 0:b),this.O.info(`${this.C}: Updated snippet`,this.h.basename(o)))}}async Eb(u,c,b){const i=c.syncData?this.Fb(c.syncData):{},r=(0,L.$En)(i);for(const{acceptResult:n,localResource:s,remoteResource:t,remoteChange:o}of u)if(o!==0){const a=s?this.h.basename(s):this.h.basename(t);o===3?delete r[a]:r[a]=n.content}return(0,l.$gMc)(i,r)||(this.O.trace(`${this.C}: Updating remote snippets...`),c=await this.mb(JSON.stringify(r),b?null:c.ref),this.O.info(`${this.C}: Updated remote snippets`)),c}Fb(u){return p(u)}Gb(u){const c={};for(const b of Object.keys(u))c[b]=u[b].value.toString();return c}async Hb(){const u={};let c;try{c=await this.G.resolve(this.vb)}catch(b){if(b instanceof P.$Rk&&b.fileOperationResult===1)return u;throw b}for(const b of c.children||[]){const i=b.resource,r=this.h.extname(i);if(r===".json"||r===".code-snippets"){const n=this.h.relativePath(this.vb,i),s=await this.G.readFile(i);u[n]=s}}return u}};e.$iMc=w,e.$iMc=w=Se([Z(2,I.$ci),Z(3,P.$wk),Z(4,R.$yp),Z(5,g.$3Sb),Z(6,g.$4Sb),Z(7,g.$fTb),Z(8,j.$Bi),Z(9,g.$aTb),Z(10,m.$Al),Z(11,C.$7k)],w);let h=class extends E.$Xkc{constructor(u,c,b,i,r,n){super("snippets",c,b,i,u,r,n)}async o(u){const c=u.syncData?JSON.parse(u.syncData.content):null;if(!c){this.j.info("Skipping initializing snippets because remote snippets does not exist.");return}if(!await this.i()){this.j.info("Skipping initializing snippets because local snippets exist.");return}for(const i of Object.keys(c)){const r=c[i];if(r){const n=this.d.joinPath(this.g.defaultProfile.snippetsHome,i);await this.k.createFile(n,D.$ke.fromString(r)),this.j.info("Created snippet",this.d.basename(n))}}await this.n(u)}async i(){try{return!(await this.k.resolve(this.g.defaultProfile.snippetsHome)).children?.length}catch(u){return u.fileOperationResult===1}}};e.$jMc=h,e.$jMc=h=Se([Z(0,P.$wk),Z(1,k.$9k),Z(2,I.$ci),Z(3,g.$fTb),Z(4,R.$yp),Z(5,C.$7k)],h)}),define(ue[121],de([0,1,14,21,15,11,19,22,28,18,39,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$mMc=e.$lMc=e.$kMc=void 0;function E(w,h){try{return JSON.parse(w).tasks??null}catch(f){return h.error(f),null}}e.$kMc=E;let l=class extends C.$Vkc{constructor(h,f,u,c,b,i,r,n,s,t,o,a){super(h.tasksResource,{syncResource:"tasks",profile:h},f,n,s,t,u,c,r,o,b,i,a),this.pb=1,this.Ab=this.h.joinPath(this.g,"tasks.json"),this.Bb=this.Ab.with({scheme:k.$hTb,authority:"base"}),this.Cb=this.Ab.with({scheme:k.$hTb,authority:"local"}),this.Db=this.Ab.with({scheme:k.$hTb,authority:"remote"}),this.Eb=this.Ab.with({scheme:k.$hTb,authority:"accepted"})}async qb(h,f,u,c){const b=h.syncData?E(h.syncData.content,this.O):null;f=f===null&&u?h:f;const i=f?.syncData?E(f.syncData.content,this.O):null,r=await this.vb();let n=null,s=!1,t=!1,o=!1;if(h.syncData){const $=r?r.value.toString():null;if(!i||i!==$||i!==b){this.O.trace(`${this.C}: Merging remote tasks with local tasks...`);const d=p($,b,i);n=d.content,o=d.hasConflicts,s=d.hasLocalChanged,t=d.hasRemoteChanged}}else r&&(this.O.trace(`${this.C}: Remote tasks does not exist. Synchronizing tasks for the first time.`),n=r.value.toString(),t=!0);const a={content:o?i:n,localChange:s?r?2:1:0,remoteChange:t?2:0,hasConflicts:o},y=r?r.value.toString():null;return[{fileContent:r,baseResource:this.Bb,baseContent:i,localResource:this.Cb,localContent:y,localChange:a.localChange,remoteResource:this.Db,remoteContent:b,remoteChange:a.remoteChange,previewResource:this.Ab,previewResult:a,acceptedResource:this.Eb}]}async ub(h){const f=h?.syncData?E(h.syncData.content,this.O):null;if(f===null)return!0;const u=await this.vb(),c=u?u.value.toString():null,b=p(c,f,f);return b.hasLocalChanged||b.hasRemoteChanged}async rb(h,f){return h.previewResult}async sb(h,f,u,c){if(this.h.isEqual(f,this.Cb))return{content:h.fileContent?h.fileContent.value.toString():null,localChange:0,remoteChange:2};if(this.h.isEqual(f,this.Db))return{content:h.remoteContent,localChange:2,remoteChange:0};if(this.h.isEqual(f,this.Ab))return u===void 0?{content:h.previewResult.content,localChange:h.previewResult.localChange,remoteChange:h.previewResult.remoteChange}:{content:u,localChange:2,remoteChange:2};throw new Error(`Invalid Resource: ${f.toString()}`)}async tb(h,f,u,c){const{fileContent:b}=u[0][0],{content:i,localChange:r,remoteChange:n}=u[0][1];if(r===0&&n===0&&this.O.info(`${this.C}: No changes found during synchronizing tasks.`),r!==0&&(this.O.trace(`${this.C}: Updating local tasks...`),b&&await this.nb(JSON.stringify(this.Kb(b.value.toString()))),i?await this.wb(i,b,c):await this.xb(),this.O.info(`${this.C}: Updated local tasks`)),n!==0){this.O.trace(`${this.C}: Updating remote tasks...`);const s=JSON.stringify(this.Kb(i));h=await this.mb(s,c?null:h.ref),this.O.info(`${this.C}: Updated remote tasks`)}try{await this.G.del(this.Ab)}catch{}f?.ref!==h.ref&&(this.O.trace(`${this.C}: Updating last synchronized tasks...`),await this.fb(h),this.O.info(`${this.C}: Updated last synchronized tasks`))}async hasLocalData(){return this.G.exists(this.r)}async resolveContent(h){return this.h.isEqual(this.Db,h)||this.h.isEqual(this.Bb,h)||this.h.isEqual(this.Cb,h)||this.h.isEqual(this.Eb,h)?this.db(h):null}Kb(h){return h?{tasks:h}:{}}};e.$lMc=l,e.$lMc=l=Se([Z(2,k.$3Sb),Z(3,k.$4Sb),Z(4,k.$fTb),Z(5,N.$Bi),Z(6,k.$aTb),Z(7,j.$wk),Z(8,L.$ci),Z(9,I.$yp),Z(10,P.$Al),Z(11,R.$7k)],l);let g=class extends C.$Xkc{constructor(h,f,u,c,b,i){super("tasks",f,u,c,h,b,i),this.c=this.g.defaultProfile.tasksResource}async o(h){const f=h.syncData?E(h.syncData.content,this.j):null;if(!f){this.j.info("Skipping initializing tasks because remote tasks does not exist.");return}if(!await this.p()){this.j.info("Skipping initializing tasks because local tasks exist.");return}await this.k.writeFile(this.c,D.$ke.fromString(f)),await this.n(h)}async p(){return this.k.exists(this.c)}};e.$mMc=g,e.$mMc=g=Se([Z(0,j.$wk),Z(1,m.$9k),Z(2,L.$ci),Z(3,k.$fTb),Z(4,I.$yp),Z(5,R.$7k)],g);function p(w,h,f){if(w===null&&h===null&&f===null)return{content:null,hasLocalChanged:!1,hasRemoteChanged:!1,hasConflicts:!1};if(w===h)return{content:null,hasLocalChanged:!1,hasRemoteChanged:!1,hasConflicts:!1};const u=f!==w,c=f!==h;return!u&&!c?{content:null,hasLocalChanged:!1,hasRemoteChanged:!1,hasConflicts:!1}:u&&!c?{content:w,hasRemoteChanged:!0,hasLocalChanged:!1,hasConflicts:!1}:c&&!u?{content:h,hasLocalChanged:!0,hasRemoteChanged:!1,hasConflicts:!1}:{content:w,hasLocalChanged:!0,hasRemoteChanged:!0,hasConflicts:!0}}}),define(ue[122],de([0,1,42,21,15,11,19,22,28,18,39,237,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6Nc=e.$5Nc=e.$4Nc=void 0;let l=class extends C.$Ukc{constructor(h,f,u,c,b,i,r,n,s,t,o,a,y){super({syncResource:"profiles",profile:h},f,c,b,i,r,n,o,a,s,t,y),this.vb=u,this.pb=2,this.previewResource=this.h.joinPath(this.g,"profiles.json"),this.baseResource=this.previewResource.with({scheme:E.$hTb,authority:"base"}),this.localResource=this.previewResource.with({scheme:E.$hTb,authority:"local"}),this.remoteResource=this.previewResource.with({scheme:E.$hTb,authority:"remote"}),this.acceptedResource=this.previewResource.with({scheme:E.$hTb,authority:"accepted"}),this.D(u.onDidChangeProfiles(()=>this.Q()))}async getLastSyncedProfiles(){const h=await this.getLastSyncUserData();return h?.syncData?p(h.syncData):null}async getRemoteSyncedProfiles(h){const f=await this.getLastSyncUserData(),u=await this.X(h,f);return u?.syncData?p(u.syncData):null}async qb(h,f,u){if(!this.vb.isEnabled())throw new E.$8Sb("Cannot sync profiles because they are disabled","LocalError");const c=h.syncData?p(h.syncData):null,b=f?.syncData?p(f.syncData):null,i=this.Db(),{local:r,remote:n}=(0,k.$3Nc)(i,c,b,[]),s={local:r,remote:n,content:b?this.Eb(b):null,localChange:r.added.length>0||r.removed.length>0||r.updated.length>0?2:0,remoteChange:n!==null?2:0},t=g(i,!1);return[{baseResource:this.baseResource,baseContent:b?this.Eb(b):null,localResource:this.localResource,localContent:t,remoteResource:this.remoteResource,remoteContent:c?this.Eb(c):null,remoteProfiles:c,previewResource:this.previewResource,previewResult:s,localChange:s.localChange,remoteChange:s.remoteChange,acceptedResource:this.acceptedResource}]}async ub(h){const f=h?.syncData?p(h.syncData):null,u=this.Db(),{remote:c}=(0,k.$3Nc)(u,f,f,[]);return!!c?.added.length||!!c?.removed.length||!!c?.updated.length}async rb(h,f){return{...h.previewResult,hasConflicts:!1}}async sb(h,f,u,c){if(this.h.isEqual(f,this.localResource))return this.Ab(h);if(this.h.isEqual(f,this.remoteResource))return this.Bb(h);if(this.h.isEqual(f,this.previewResource))return h.previewResult;throw new Error(`Invalid Resource: ${f.toString()}`)}async Ab(h){const f=this.Db(),u=(0,k.$3Nc)(f,null,null,[]),{local:c,remote:b}=u;return{content:h.localContent,local:c,remote:b,localChange:c.added.length>0||c.removed.length>0||c.updated.length>0?2:0,remoteChange:b!==null?2:0}}async Bb(h){const f=h.remoteContent?JSON.parse(h.remoteContent):null,u=[],c=[];for(const b of this.Db()){const i=f?.find(r=>r.id===b.id);i&&(u.push({id:b.id,name:b.name,collection:i.collection}),c.push(b))}if(f!==null){const b=(0,k.$3Nc)(c,f,u,[]),{local:i,remote:r}=b;return{content:h.remoteContent,local:i,remote:r,localChange:i.added.length>0||i.removed.length>0||i.updated.length>0?2:0,remoteChange:r!==null?2:0}}else return{content:h.remoteContent,local:{added:[],removed:[],updated:[]},remote:null,localChange:0,remoteChange:0}}async tb(h,f,u,c){const{local:b,remote:i,localChange:r,remoteChange:n}=u[0][1];r===0&&n===0&&this.O.info(`${this.C}: No changes found during synchronizing profiles.`);const s=u[0][0].remoteProfiles||[];if(s.length+(i?.added.length??0)-(i?.removed.length??0)>20)throw new E.$8Sb("Too many profiles to sync. Please remove some profiles and try again.","LocalTooManyProfiles");if(r!==0){await this.nb(g(this.Db(),!1));const t=[];for(const o of b.added)t.push((async()=>{this.O.trace(`${this.C}: Creating '${o.name}' profile...`),await this.vb.createProfile(o.id,o.name,{shortName:o.shortName,icon:o.icon,useDefaultFlags:o.useDefaultFlags}),this.O.info(`${this.C}: Created profile '${o.name}'.`)})());for(const o of b.removed)t.push((async()=>{this.O.trace(`${this.C}: Removing '${o.name}' profile...`),await this.vb.removeProfile(o),this.O.info(`${this.C}: Removed profile '${o.name}'.`)})());for(const o of b.updated){const a=this.vb.profiles.find(y=>y.id===o.id);a?t.push((async()=>{this.O.trace(`${this.C}: Updating '${o.name}' profile...`),await this.vb.updateProfile(a,{name:o.name,shortName:o.shortName,icon:o.icon,useDefaultFlags:o.useDefaultFlags}),this.O.info(`${this.C}: Updated profile '${o.name}'.`)})()):this.O.info(`${this.C}: Could not find profile with id '${o.id}' to update.`)}await Promise.all(t)}if(n!==0){this.O.trace(`${this.C}: Updating remote profiles...`);const t=[],o=s.length+(i?.added.length??0)<=20;if(o)for(const a of i?.added||[]){const y=await this.J.createCollection(this.F);t.push(y),s.push({id:a.id,name:a.name,collection:y,shortName:a.shortName,icon:a.icon,useDefaultFlags:a.useDefaultFlags})}else this.O.info(`${this.C}: Could not create remote profiles as there are too many profiles.`);for(const a of i?.removed||[])s.splice(s.findIndex(({id:y})=>a.id===y),1);for(const a of i?.updated||[]){const y=s.find(({id:$})=>a.id===$);y&&s.splice(s.indexOf(y),1,{...y,id:a.id,name:a.name,shortName:a.shortName,icon:a.icon,useDefaultFlags:a.useDefaultFlags})}try{h=await this.updateRemoteProfiles(s,c?null:h.ref),this.O.info(`${this.C}: Updated remote profiles.${o&&i?.added.length?` Added: ${JSON.stringify(i.added.map(a=>a.name))}.`:""}${i?.updated.length?` Updated: ${JSON.stringify(i.updated.map(a=>a.name))}.`:""}${i?.removed.length?` Removed: ${JSON.stringify(i.removed.map(a=>a.name))}.`:""}`)}catch(a){if(t.length){this.O.info(`${this.C}: Failed to update remote profiles. Cleaning up added collections...`);for(const y of t)await this.J.deleteCollection(y,this.F)}throw a}for(const a of i?.removed||[])await this.J.deleteCollection(a.collection,this.F)}f?.ref!==h.ref&&(this.O.trace(`${this.C}: Updating last synchronized profiles...`),await this.fb(h),this.O.info(`${this.C}: Updated last synchronized profiles.`))}async updateRemoteProfiles(h,f){return this.mb(this.Eb(h),f)}async hasLocalData(){return this.Db().length>0}async resolveContent(h){if(this.h.isEqual(this.remoteResource,h)||this.h.isEqual(this.baseResource,h)||this.h.isEqual(this.localResource,h)||this.h.isEqual(this.acceptedResource,h)){const f=await this.db(h);return f&&(0,D.$wn)(JSON.parse(f),{})}return null}Db(){return this.vb.profiles.filter(h=>!h.isDefault&&!h.isTransient)}Eb(h){return JSON.stringify([...h].sort((f,u)=>f.name.localeCompare(u.name)))}};e.$4Nc=l,e.$4Nc=l=Se([Z(2,m.$9k),Z(3,j.$wk),Z(4,L.$ci),Z(5,I.$yp),Z(6,E.$3Sb),Z(7,E.$4Sb),Z(8,E.$fTb),Z(9,N.$Bi),Z(10,E.$aTb),Z(11,P.$Al),Z(12,R.$7k)],l);function g(w,h){const f=[...w].sort((u,c)=>u.name.localeCompare(c.name)).map(u=>({id:u.id,name:u.name}));return h?(0,D.$wn)(f,{}):JSON.stringify(f)}e.$5Nc=g;function p(w){return JSON.parse(w.content)}e.$6Nc=p}),define(ue[253],de([0,1,3,2,5,15,19,22,24]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$QNc=void 0;const m="sync.enable";let C=class extends N.$Tc{constructor(E,l,g,p){super(),this.c=E,this.f=l,this.g=g,this.h=p,this.a=new D.$Wd,this.onDidChangeEnablement=this.a.event,this.b=new D.$Wd,this.onDidChangeResourceEnablement=this.b.event,this.D(E.onDidChangeValue(-1,void 0,this.D(new N.$Sc))(w=>this.m(w)))}isEnabled(){switch(this.g.sync){case"on":return!0;case"off":return!1}return this.c.getBoolean(m,-1,!1)}canToggleEnablement(){return this.h.userDataSyncStore!==void 0&&this.g.sync===void 0}setEnablement(E){E&&!this.canToggleEnablement()||(this.f.publicLog2(m,{enabled:E}),this.c.store(m,E,-1,1))}isResourceEnabled(E){return this.c.getBoolean((0,R.$_Sb)(E),-1,!0)}setResourceEnablement(E,l){if(this.isResourceEnabled(E)!==l){const g=(0,R.$_Sb)(E);this.j(g,l)}}getResourceSyncStateVersion(E){}j(E,l){this.c.store(E,l,-1,L.$o?0:1)}m(E){if(m===E.key){this.a.fire(this.isEnabled());return}const l=R.$YSb.filter(g=>(0,R.$_Sb)(g)===E.key)[0];if(l){this.b.fire([l,this.isResourceEnabled(l)]);return}}};e.$QNc=C,e.$QNc=C=Se([Z(0,I.$yp),Z(1,P.$Al),Z(2,j.$ci),Z(3,R.$2Sb)],C)}),define(ue[254],de([0,1,6,14,67,2,20,21,15,11,18,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$2Nc=void 0;let E=class extends j.$Tc{constructor(g,p,w,h,f){super(),this.a=g,this.b=p,this.c=w,this.f=h,this.g=f,this.h()}async h(){for(const p of this.g.profiles)for(const w of k.$YSb)try{await this.m(this.j(w,p.isDefault?void 0:p.id))}catch(h){this.f.error(h)}let g;try{g=await this.b.resolve(this.a.userDataSyncHome)}catch(p){(0,m.$Nk)(p)!==1&&this.f.error(p);return}if(g.children){for(const p of g.children)if(p.isDirectory&&!this.g.profiles.some(w=>w.id===p.name))try{this.f.info("Deleting non existing profile from backup",p.resource.path),await this.b.del(p.resource,{recursive:!0})}catch(w){this.f.error(w)}}}async getAllResourceRefs(g,p,w){const h=this.j(g,p,w);try{const f=await this.b.resolve(h);if(f.children)return f.children.filter(c=>c.isFile&&!c.name.startsWith("lastSync")).sort().reverse().map(c=>({ref:c.name,created:this.n(c)}))}catch(f){if((0,m.$Nk)(f)!==1)throw f}return[]}async resolveResourceContent(g,p,w,h){const f=this.j(g,w,h),u=(0,I.$Jg)(f,p);try{return(await this.b.readFile(u)).value.toString()}catch(c){return this.f.error(c),null}}async writeResource(g,p,w,h,f){const u=this.j(g,h,f),c=(0,I.$Jg)(u,`${(0,L.$Em)(w).replace(/-|:|\.\d+Z$/g,"")}.json`);try{await this.b.writeFile(c,N.$ke.fromString(p))}catch(b){this.f.error(b)}}j(g,p,w=this.a.userDataSyncHome){return(0,I.$Jg)(w,...p?[p,g]:[g])}async m(g){try{try{if(!await this.b.exists(g))return}catch{return}const p=await this.b.resolve(g);if(p.children){const w=p.children.filter(c=>c.isFile&&/^\d{8}T\d{6}(\.json)?$/.test(c.name)).sort(),h=1e3*60*60*24*(this.c.getValue("sync.localBackupDuration")||30);let f=w.filter(c=>Date.now()-this.n(c)>h);const u=w.length-f.length;u<10&&(f=f.slice(10-u)),await D.Promises.settled(f.map(async c=>{this.f.info("Deleting from backup",c.resource.path),await this.b.del(c.resource)}))}}catch(p){this.f.error(p)}}n(g){return new Date(parseInt(g.name.substring(0,4)),parseInt(g.name.substring(4,6))-1,parseInt(g.name.substring(6,8)),parseInt(g.name.substring(9,11)),parseInt(g.name.substring(11,13)),parseInt(g.name.substring(13,15))).getTime()}};e.$2Nc=E,e.$2Nc=E=Se([Z(0,R.$ci),Z(1,m.$wk),Z(2,P.$Bi),Z(3,k.$fTb),Z(4,C.$9k)],E)}),define(ue[85],de([0,1,3,2,5,27,175,15,11,4,23,43,19,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l){"use strict";var g;Object.defineProperty(e,"__esModule",{value:!0}),e.$RSb=e.$QSb=e.$PSb=void 0,e.$PSb=(0,m.$8h)("IUserDataSyncMachinesService");const p="sync.currentMachineName",w="Safari",h="Chrome",f="Edge",u="Firefox",c="Android";function b(n){switch(n){case w:case h:case f:case u:case c:case(0,L.$h)(0):return!0}return!1}e.$QSb=b;function i(){return L.$G?w:L.$E?h:L.$H?f:L.$F?u:L.$I?c:(0,L.$h)(L.$o?0:L.$u)}let r=class extends N.$Tc{static{g=this}static{this.a=1}static{this.b="machines"}constructor(s,t,o,a,y,$){super(),this.h=o,this.j=a,this.m=y,this.n=$,this.c=this.D(new D.$Wd),this.onDidChange=this.c.event,this.g=null,this.f=(0,k.$Ep)(s,t,o)}async getMachines(s){const t=await this.f;return(await this.r(s)).machines.map(a=>({...a,isCurrent:a.id===t}))}async addCurrentMachine(s){const t=await this.f,o=await this.r(s);o.machines.some(({id:a})=>a===t)||(o.machines.push({id:t,name:this.q(o.machines),platform:i()}),await this.s(o))}async removeCurrentMachine(s){const t=await this.f,o=await this.r(s),a=o.machines.filter(({id:y})=>y!==t);a.length!==o.machines.length&&(o.machines=a,await this.s(o))}async renameMachine(s,t,o){const a=await this.r(o),y=a.machines.find(({id:$})=>$===s);if(y){y.name=t,await this.s(a);const $=await this.f;s===$&&this.h.store(p,t,-1,1)}}async setEnablements(s){const t=await this.r();for(const[o,a]of s){const y=t.machines.find($=>$.id===o);y&&(y.disabled=a?void 0:!0)}await this.s(t)}q(s){const t=this.h.get(p,-1);if(t)return t;const o=`${this.n.embedderIdentifier?`${this.n.embedderIdentifier} - `:""}${i()} (${this.n.nameShort})`,a=new RegExp(`${(0,j.$Qe)(o)}\\s#(\\d+)`);let y=0;for(const $ of s){const d=a.exec($.name),v=d?parseInt(d[1]):0;y=v>y?v:y}return`${o} #${y+1}`}async r(s){this.g=await this.t(s);const t=this.u(this.g);if(t.version!==g.a)throw new Error((0,I.localize)(0,null,this.n.nameLong));return t}async s(s){const t=JSON.stringify(s),o=await this.j.writeResource(g.b,t,this.g?.ref||null);this.g={ref:o,content:t},this.c.fire()}async t(s){if(this.g){const t=s&&s.latest?s.latest[g.b]:void 0;if(this.g.ref===t)return this.g;if(t===void 0&&this.g.content===null)return this.g}return this.j.readResource(g.b,this.g)}u(s){if(s.content!==null)try{return JSON.parse(s.content)}catch(t){this.m.error(t)}return{version:g.a,machines:[]}}};e.$RSb=r,e.$RSb=r=g=Se([Z(0,P.$ci),Z(1,R.$wk),Z(2,E.$yp),Z(3,l.$3Sb),Z(4,l.$fTb),Z(5,C.$Ij)],r)}),define(ue[255],de([0,1,6,67,38,7,3,2,5,20,10,172,23,19,22,24,82,85]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$8Nc=void 0;const f="sync.disableMachineEventually",u="sync.sessionId",c="sync.storeUrl",b="sync.productQuality";let i=class extends P.$Tc{get n(){const s=this.H.get(c,-1);return s?C.URI.parse(s):void 0}set n(s){s?this.H.store(c,s.toString(),-1,1):this.H.remove(c,-1)}get r(){return this.H.get(b,-1)}set r(s){s?this.H.store(b,s,-1,1):this.H.remove(b,-1)}constructor(s,t,o,a,y,$,d,v,S,A){super(),this.s=t,this.u=o,this.w=a,this.y=y,this.z=$,this.C=d,this.F=v,this.G=S,this.H=A,this.a=this.D(new P.$Uc),this.b=0,this.c=void 0,this.g=!1,this.h=this.D(new I.$Wd),this.onError=this.h.event,this.S=[],this.f=this.D(new D.$6g(this.U())),this.j=this.n,this.n=t.userDataSyncStore?.url,this.q=this.r,this.r=s.quality,this.n&&(this.z.info("Using settings sync service",this.n.toString()),this.D(t.onDidChangeUserDataSyncStore(()=>{(0,m.$Cg)(this.n,t.userDataSyncStore?.url)||(this.j=this.n,this.n=t.userDataSyncStore?.url,this.n&&this.z.info("Using settings sync service",this.n.toString()))})),this.w.isEnabled()?this.z.info("Auto Sync is enabled."):this.z.info("Auto Sync is disabled."),this.I(),this.Q()&&this.P(),this.D(d.onDidChangeAccount(()=>this.I())),this.D(o.onDidChangeDonotMakeRequestsUntil(()=>this.I())),this.D(y.onDidChangeLocal(T=>this.triggerSync([T],!1,!1))),this.D(I.Event.filter(this.w.onDidChangeResourceEnablement,([,T])=>T)(()=>this.triggerSync(["resourceEnablement"],!1,!1))),this.D(this.s.onDidChangeUserDataSyncStore(()=>this.triggerSync(["userDataSyncStoreChanged"],!1,!1))))}I(){const{enabled:s,message:t}=this.L();s?this.a.value===void 0&&(this.a.value=new r(this.j,1e3*60*5,this.s,this.u,this.y,this.G,this.z,this.F,this.H),this.a.value.register(this.a.value.onDidStartSync(()=>this.c=new Date().getTime())),this.a.value.register(this.a.value.onDidFinishSync(o=>this.O(o))),this.J()&&this.a.value.start()):(this.f.cancel(),this.a.value!==void 0?(t&&this.z.info(t),this.a.clear()):t&&this.w.isEnabled()&&this.z.info(t))}J(){return!0}L(){return this.w.isEnabled()?this.C.account?this.u.donotMakeRequestsUntil?{enabled:!1,message:`Auto Sync: Suspended until ${(0,N.$Em)(this.u.donotMakeRequestsUntil)} because server is not accepting requests until then.`}:this.g?{enabled:!1,message:"Auto Sync: Suspended until restart."}:{enabled:!0}:{enabled:!1,message:"Auto Sync: Suspended until auth token is available."}:{enabled:!1,message:"Auto Sync: Disabled."}}async turnOn(){this.R(),this.j=this.n,this.M(!0)}async turnOff(s,t,o){try{this.C.account&&!o&&await this.G.removeCurrentMachine(),this.M(!1),this.H.remove(u,-1),s?(this.F.publicLog2("sync/turnOffEveryWhere"),await this.y.reset()):await this.y.resetLocal()}catch(a){if(this.z.error(a),t)this.M(!1);else throw a}}M(s){this.w.isEnabled()!==s&&(this.w.setEnablement(s),this.I())}N(){return!!this.q&&!!this.r&&this.q!==this.r}async O(s){if(!s){this.b=0;return}const t=p.$8Sb.toUserDataSyncError(s);t instanceof p.$0Sb&&this.F.publicLog2("autosync/error",{code:t.code,service:this.s.userDataSyncStore.url.toString()}),t.code==="SessionExpired"?(await this.turnOff(!1,!0),this.z.info("Auto Sync: Turned off sync because current session is expired")):t.code==="TurnedOff"?(await this.turnOff(!1,!0),this.z.info("Auto Sync: Turned off sync because sync is turned off in the cloud")):t.code==="LocalTooManyRequests"?(this.g=!0,this.z.info("Auto Sync: Suspended sync because of making too many requests to server"),this.I()):t.code==="RemoteTooManyRequests"?(await this.turnOff(!1,!0,!0),this.P(),this.z.info("Auto Sync: Turned off sync because of making too many requests to server")):t.code==="MethodNotFound"?(await this.turnOff(!1,!0),this.z.info("Auto Sync: Turned off sync because current client is making requests to server that are not supported")):t.code==="UpgradeRequired"||t.code==="Gone"?(await this.turnOff(!1,!0,!0),this.P(),this.z.info("Auto Sync: Turned off sync because current client is not compatible with server. Requires client upgrade.")):t.code==="IncompatibleLocalContent"?(await this.turnOff(!1,!0),this.z.info(`Auto Sync: Turned off sync because server has ${t.resource} content with newer version than of client. Requires client upgrade.`)):t.code==="IncompatibleRemoteContent"?(await this.turnOff(!1,!0),this.z.info(`Auto Sync: Turned off sync because server has ${t.resource} content with older version than of client. Requires server reset.`)):t.code==="ServiceChanged"||t.code==="DefaultServiceChanged"?R.$o&&t.code==="DefaultServiceChanged"&&!this.N()?(await this.turnOff(!1,!0),this.z.info("Auto Sync: Turned off sync because default sync service is changed.")):(await this.turnOff(!1,!0,!0),await this.turnOn(),this.z.info("Auto Sync: Sync Service changed. Turned off auto sync, reset local state and turned on auto sync.")):(this.z.error(t),this.b++),this.h.fire(t)}async P(){this.H.store(f,!0,-1,1),await(0,D.$9g)(1e3*60*10),this.Q()&&(this.R(),!this.w.isEnabled()&&this.C.account&&await this.G.removeCurrentMachine())}Q(){return this.H.getBoolean(f,-1,!1)}R(){this.H.remove(f,-1)}async triggerSync(s,t,o){if(this.a.value===void 0)return this.f.cancel();if(t&&this.c&&Math.round((new Date().getTime()-this.c)/1e3)<10){this.z.debug("Auto Sync: Skipped. Limited to once per 10 seconds.");return}return this.S.push(...s),this.f.trigger(async()=>{this.z.trace("activity sources",...this.S);const a=this.C.account?.authenticationProviderId||"";this.F.publicLog2("sync/triggered",{sources:this.S,providerId:a}),this.S=[],this.a.value&&await this.a.value.sync("Activity",o)},this.b?this.U()*1*Math.min(Math.pow(2,this.b),60):this.U())}U(){return 2e3}};e.$8Nc=i,e.$8Nc=i=Se([Z(0,E.$Ij),Z(1,p.$2Sb),Z(2,p.$3Sb),Z(3,p.$aTb),Z(4,p.$bTb),Z(5,p.$fTb),Z(6,w.$njc),Z(7,g.$Al),Z(8,h.$PSb),Z(9,l.$yp)],i);class r extends P.$Tc{static{this.a="Interval"}constructor(s,t,o,a,y,$,d,v,S){super(),this.m=s,this.n=t,this.q=o,this.r=a,this.s=y,this.u=$,this.w=d,this.y=v,this.z=S,this.b=this.D(new P.$Uc),this.c=this.D(new I.$Wd),this.onDidStartSync=this.c.event,this.f=this.D(new I.$Wd),this.onDidFinishSync=this.f.event,this.g=null}start(){this.D(this.onDidFinishSync(()=>this.C())),this.D((0,P.$Rc)(()=>{this.j&&(this.j.cancel(),this.w.info("Auto sync: Cancelled sync that is in progress"),this.j=void 0),this.h?.stop(),this.w.info("Auto Sync: Stopped")})),this.sync(r.a,!1)}C(){this.b.value=(0,D.$0g)(()=>{this.sync(r.a,!1),this.b.value=void 0},this.n)}sync(s,t){const o=(0,D.$Vg)(async a=>{if(this.j)try{this.w.debug("Auto Sync: Waiting until sync is finished."),await this.j}catch(y){if((0,j.$4)(y))return}return this.H(s,t,a)});return this.j=o,this.j.finally(()=>this.j=void 0),this.j}F(){return this.m!==void 0&&!(0,m.$Cg)(this.m,this.q.userDataSyncStore?.url)}async G(){const s=await this.q.getPreviousUserDataSyncStore(),t=this.q.userDataSyncStore;return!!t&&!!s&&(!(0,m.$Cg)(t.defaultUrl,s.defaultUrl)||!(0,m.$Cg)(t.insidersUrl,s.insidersUrl)||!(0,m.$Cg)(t.stableUrl,s.stableUrl))}async H(s,t,o){this.w.info(`Auto Sync: Triggered by ${s}`),this.c.fire();let a;try{await this.I(t,o)}catch(y){if(this.w.error(y),a=y,p.$8Sb.toUserDataSyncError(y).code==="MethodNotFound")try{this.w.info("Auto Sync: Client is making invalid requests. Cleaning up data..."),await this.s.cleanUpRemoteData(),this.w.info("Auto Sync: Retrying sync..."),await this.I(t,o),a=void 0}catch($){this.w.error($),a=$}}this.f.fire(a)}async I(s,t){if(this.h=await this.s.createSyncTask(this.g,s),t.isCancellationRequested)return;if(this.g=this.h.manifest,this.g===null&&await this.s.hasPreviouslySynced())throw this.F()?await this.G()?new p.$0Sb((0,k.localize)(0,null),"DefaultServiceChanged"):new p.$0Sb((0,k.localize)(1,null),"ServiceChanged"):new p.$0Sb((0,k.localize)(2,null),"TurnedOff");const o=this.z.get(u,-1);if(o&&this.g&&o!==this.g.session)throw this.F()?await this.G()?new p.$0Sb((0,k.localize)(3,null),"DefaultServiceChanged"):new p.$0Sb((0,k.localize)(4,null),"ServiceChanged"):new p.$0Sb((0,k.localize)(5,null),"SessionExpired");const a=await this.u.getMachines(this.g||void 0);if(t.isCancellationRequested)return;const y=a.find(d=>d.isCurrent);if(y?.disabled)throw new p.$0Sb((0,k.localize)(6,null),"TurnedOff");const $=new Date().getTime();if(await this.h.run(),this.y.publicLog2("settingsSync:sync",{duration:new Date().getTime()-$}),this.g===null)try{this.g=await this.r.manifest(null)}catch(d){throw new p.$0Sb((0,L.$Si)(d),d instanceof p.$8Sb?d.code:"Unknown")}this.g&&this.g.session!==o&&this.z.store(u,this.g.session,-1,1),!t.isCancellationRequested&&(y||await this.u.addCurrentMachine(this.g||void 0))}register(s){return super.D(s)}}}),define(ue[256],de([0,1,10,176,15,11,43,19,28,24,18,39,120,119,118,21,121,116,117,4,122,42,27]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.$DOc=void 0;let n=class{static{r=this}static{this.a="not-existing-resource"}static{this.b="remote-backup"}static{this.c="local-backup"}constructor(t,o,a,y,$,d,v,S,A,T){this.e=t,this.f=o,this.g=a,this.h=$,this.i=d,this.j=v,this.k=S,this.l=A,this.n=T,this.d=y.extUri}async getRemoteSyncedProfiles(){const t=await this.e.readResource("profiles",null,void 0);if(t.content){const o=this.L(t.content,"profiles");return(0,c.$6Nc)(o)}return[]}async getLocalSyncedProfiles(t){const o=await this.f.getAllResourceRefs("profiles",void 0,t);if(o.length){const a=await this.f.resolveResourceContent("profiles",o[0].ref,void 0,t);if(a){const y=this.L(a,"profiles");return(0,c.$6Nc)(y)}}return[]}async getLocalSyncedMachines(t){const o=await this.f.getAllResourceRefs("machines",void 0,t);if(o.length){const a=await this.f.resolveResourceContent("machines",o[0].ref,void 0,t);if(a)return JSON.parse(a).machines.map($=>({...$,isCurrent:!1}))}return[]}async getRemoteSyncResourceHandles(t,o){return(await this.e.getAllResourceRefs(t,o?.collection)).map(({created:y,ref:$})=>({created:y,uri:this.J({remote:!0,syncResource:t,profile:o?.id??this.k.defaultProfile.id,location:void 0,collection:o?.collection,ref:$,node:void 0})}))}async getLocalSyncResourceHandles(t,o,a){return(await this.f.getAllResourceRefs(t,o?.collection,a)).map(({created:$,ref:d})=>({created:$,uri:this.J({remote:!1,syncResource:t,profile:o?.id??this.k.defaultProfile.id,collection:o?.collection,ref:d,node:void 0,location:a})}))}resolveUserDataSyncResource({uri:t}){const o=this.K(t),a=o?this.k.profiles.find(y=>y.id===o.profile):void 0;return o&&a?{profile:a,syncResource:o?.syncResource}:void 0}async getAssociatedResources({uri:t}){const o=this.K(t);if(!o)return[];const a=this.k.profiles.find(y=>y.id===o.profile);switch(o.syncResource){case"settings":return this.s(t,a);case"keybindings":return this.u(t,a);case"tasks":return this.w(t,a);case"snippets":return this.y(t,a);case"globalState":return this.D(t,a);case"extensions":return this.A(t,a);case"profiles":return this.G(t,a);case"workspaceState":return[]}}async getMachineId({uri:t}){const o=this.K(t);if(o){if(o.remote){if(o.ref){const{content:a}=await this.M(o.syncResource,o.ref,o.collection);if(a)return this.L(a,o.syncResource)?.machineId}return}if(o.location){if(o.ref){const a=await this.f.resolveResourceContent(o.syncResource,o.ref,o.collection,o.location);if(a)return this.L(a,o.syncResource)?.machineId}return}return(0,I.$Ep)(this.h,this.j,this.i)}}async resolveContent(t){const o=this.K(t);if(!o||o.node===r.a)return null;if(o.ref){const a=await this.o(o.remote,o.syncResource,o.collection,o.ref,o.location);return o.node&&a?this.q(o.syncResource,a,o.node):a}return!o.remote&&!o.node?this.r(o.syncResource,o.profile):null}async o(t,o,a,y,$){if(t){const{content:d}=await this.M(o,y,a);return d}return this.f.resolveResourceContent(o,y,a,$)}q(t,o,a){const y=this.L(o,t);switch(t){case"settings":return this.t(y,a);case"keybindings":return this.v(y,a);case"tasks":return this.x(y,a);case"snippets":return this.z(y,a);case"globalState":return this.E(y,a);case"extensions":return this.B(y,a);case"profiles":return this.H(y,a);case"workspaceState":return null}}async r(t,o){const a=this.k.profiles.find(y=>y.id===o);if(!a)return null;switch(t){case"globalState":return this.F(a);case"extensions":return this.C(a);case"profiles":return this.I(a);case"settings":return null;case"keybindings":return null;case"tasks":return null;case"snippets":return null;case"workspaceState":return null}}s(t,o){const a=this.d.joinPath(t,"settings.json"),y=o?o.settingsResource:this.d.joinPath(t,r.a);return[{resource:a,comparableResource:y}]}t(t,o){switch(o){case"settings.json":return(0,l.$cMc)(t.content).settings}return null}u(t,o){const a=this.d.joinPath(t,"keybindings.json"),y=o?o.keybindingsResource:this.d.joinPath(t,r.a);return[{resource:a,comparableResource:y}]}v(t,o){switch(o){case"keybindings.json":return(0,g.$_Lc)(t.content,!!this.l.getValue(m.$VSb),this.g)}return null}w(t,o){const a=this.d.joinPath(t,"tasks.json"),y=o?o.tasksResource:this.d.joinPath(t,r.a);return[{resource:a,comparableResource:y}]}x(t,o){switch(o){case"tasks.json":return(0,w.$kMc)(t.content,this.g)}return null}async y(t,o){const a=await this.resolveContent(t);if(a){const y=this.L(a,"snippets");if(y){const $=(0,E.$hMc)(y),d=[];for(const v of Object.keys($)){const S=this.d.joinPath(t,v),A=o?this.d.joinPath(o.snippetsHome,v):this.d.joinPath(t,r.a);d.push({resource:S,comparableResource:A})}return d}}return[]}z(t,o){return(0,E.$hMc)(t)[o]||null}A(t,o){const a=this.d.joinPath(t,"extensions.json"),y=o?this.J({remote:!1,syncResource:"extensions",profile:o.id,location:void 0,collection:void 0,ref:void 0,node:void 0}):this.d.joinPath(t,r.a);return[{resource:a,comparableResource:y}]}B(t,o){switch(o){case"extensions.json":return(0,h.$7Lc)((0,h.$6Lc)(t),!0)}return null}async C(t){const{localExtensions:o}=await this.n.createInstance(h.$9Lc).getLocalExtensions(t);return(0,h.$7Lc)(o,!0)}D(t,o){const a=this.d.joinPath(t,"globalState.json"),y=o?this.J({remote:!1,syncResource:"globalState",profile:o.id,location:void 0,collection:void 0,ref:void 0,node:void 0}):this.d.joinPath(t,r.a);return[{resource:a,comparableResource:y}]}E(t,o){switch(o){case"globalState.json":return(0,f.$Zkc)(JSON.parse(t.content),!0)}return null}async F(t){const o=await this.n.createInstance(f.$2kc).getLocalGlobalState(t);return(0,f.$Zkc)(o,!0)}G(t,o){const a=this.d.joinPath(t,"profiles.json"),y=this.J({remote:!1,syncResource:"profiles",profile:this.k.defaultProfile.id,location:void 0,collection:void 0,ref:void 0,node:void 0});return[{resource:a,comparableResource:y}]}H(t,o){switch(o){case"profiles.json":return(0,b.$wn)(JSON.parse(t.content),{})}return null}async I(t){return(0,c.$5Nc)(this.k.profiles.filter(o=>!o.isDefault&&!o.isTransient),!0)}J(t){const o=t.remote?r.b:r.c,a=[];return t.location&&(a.push(`scheme:${t.location.scheme}`),a.push(`authority:${t.location.authority}`),a.push((0,i.$Ue)(t.location.path,"/"))),a.push(`syncResource:${t.syncResource}`),a.push(`profile:${t.profile}`),t.collection&&a.push(`collection:${t.collection}`),t.ref&&a.push(`ref:${t.ref}`),t.node&&a.push(t.node),this.d.joinPath(D.URI.from({scheme:m.$hTb,authority:o,path:"/",query:t.location?.query,fragment:t.location?.fragment}),...a)}K(t){if(t.scheme!==m.$hTb)return;const o=[];for(;t.path!=="/";)o.unshift(this.d.basename(t)),t=this.d.dirname(t);if(o.length<2)return;const a=t.authority===r.b;let y,$;const d=[];let v,S,A,T,q;for(;o.length;){const M=o.shift();M.startsWith("scheme:")?y=M.substring(7):M.startsWith("authority:")?$=M.substring(10):M.startsWith("syncResource:")?v=M.substring(13):M.startsWith("profile:")?S=M.substring(8):M.startsWith("collection:")?A=M.substring(11):M.startsWith("ref:")?T=M.substring(4):v?q=M:d.push(M)}return{remote:a,syncResource:v,profile:S,collection:A,ref:T,node:q,location:y&&$!==void 0?this.d.joinPath(D.URI.from({scheme:y,authority:$,query:t.query,fragment:t.fragment,path:"/"}),...d):void 0}}L(t,o){try{const a=JSON.parse(t);if((0,k.$Skc)(a))return a}catch(a){this.g.error(a)}throw new m.$8Sb((0,N.localize)(0,null),"IncompatibleRemoteContent",o)}async M(t,o,a){const y=await this.e.resolveResourceContent(t,o,a);return{ref:o,content:y}}};e.$DOc=n,e.$DOc=n=r=Se([Z(0,m.$3Sb),Z(1,m.$4Sb),Z(2,m.$fTb),Z(3,R.$7k),Z(4,L.$ci),Z(5,P.$yp),Z(6,j.$wk),Z(7,C.$9k),Z(8,p.$Bi),Z(9,u.$7h)],n)}),define(ue[257],de([0,1,17,6,26,38,3,2,20,12,31,21,29,11,4,19,22,18,116,117,118,119,120,121,122,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i,r,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$7Nc=void 0;const t="sync.lastSyncTime";let o=class extends P.$Tc{get status(){return this.f}get conflicts(){return this.j}get lastSyncTime(){return this.r}constructor(v,S,A,T,q,M,Y,G,Q,F,te){super(),this.z=v,this.C=S,this.F=A,this.G=T,this.H=q,this.I=M,this.J=Y,this.L=G,this.M=Q,this.N=F,this.O=te,this.f="uninitialized",this.g=this.D(new I.$Wd),this.onDidChangeStatus=this.g.event,this.h=this.D(new I.$Wd),this.onDidChangeLocal=this.h.event,this.j=[],this.m=this.D(new I.$Wd),this.onDidChangeConflicts=this.m.event,this.n=[],this.q=this.D(new I.$Wd),this.onSyncErrors=this.q.event,this.r=void 0,this.t=this.D(new I.$Wd),this.onDidChangeLastSyncTime=this.t.event,this.u=this.D(new I.$Wd),this.onDidResetLocal=this.u.event,this.w=this.D(new I.$Wd),this.onDidResetRemote=this.w.event,this.y=new Map,this.f=A.userDataSyncStore?"idle":"uninitialized",this.r=this.J.getNumber(t,-1,void 0),this.D((0,P.$Rc)(()=>this.bb()))}async createSyncTask(v,S){this.cb(),this.H.info("Sync started.");const A=new Date().getTime(),T=(0,C.$sg)();try{const G=(0,s.$7Sb)(T);S&&(G["Cache-Control"]="no-cache"),v=await this.C.manifest(v,G)}catch(G){const Q=s.$8Sb.toUserDataSyncError(G);throw $(Q,T,this.F,this.I),Q}const q=!1,M=this;let Y;return{manifest:v,async run(){if(q)throw new Error("Can run a task only once");Y=(0,N.$Vg)(G=>M.P(v,!1,T,G)),await Y.finally(()=>Y=void 0),M.H.info(`Sync done. Took ${new Date().getTime()-A}ms`),M.$()},stop(){return Y?.cancel(),M.U()}}}async createManualSyncTask(){if(this.cb(),this.L.isEnabled())throw new s.$8Sb("Cannot start manual sync when sync is enabled","LocalError");this.H.info("Sync started.");const v=new Date().getTime(),S=(0,C.$sg)(),A=(0,s.$7Sb)(S);let T;try{T=await this.C.manifest(null,A)}catch(Y){const G=s.$8Sb.toUserDataSyncError(Y);throw $(G,S,this.F,this.I),G}await this.resetLocal();const q=this,M=new L.$7d;return{id:S,async merge(){return q.P(T,!0,S,M.token)},async apply(){try{try{await q.R(T,S,M.token)}catch(Y){if(s.$8Sb.toUserDataSyncError(Y).code==="MethodNotFound")q.H.info("Client is making invalid requests. Cleaning up data..."),await q.cleanUpRemoteData(),q.H.info("Applying manual sync again..."),await q.R(T,S,M.token);else throw Y}}catch(Y){throw q.H.error(Y),Y}q.H.info(`Sync done. Took ${new Date().getTime()-v}ms`),q.$()},async stop(){M.cancel(),await q.U(),await q.resetLocal()}}}async P(v,S,A,T){this.n=[];try{this.status!=="hasConflicts"&&this.Y("syncing");const q=this.getOrCreateActiveProfileSynchronizer(this.M.defaultProfile,void 0);this.n.push(...await this.S(q,v,S,A,T));const M=q.enabled.find(Y=>Y.resource==="profiles");if(M){const Y=await M.getLastSyncedProfiles()||[];if(T.isCancellationRequested)return;await this.Q(Y,v,S,A,T)}}finally{this.status!=="hasConflicts"&&this.Y("idle"),this.q.fire(this.n)}}async Q(v,S,A,T,q){for(const M of v){if(q.isCancellationRequested)return;const Y=this.M.profiles.find(Q=>Q.id===M.id);if(!Y){this.H.error(`Profile with id:${M.id} and name: ${M.name} does not exist locally to sync.`);continue}this.H.info("Syncing profile.",M.name);const G=this.getOrCreateActiveProfileSynchronizer(Y,M);this.n.push(...await this.S(G,S,A,T,q))}for(const[M,Y]of this.y.entries())this.M.profiles.some(G=>G.id===Y[0].profile.id)||(Y[1].dispose(),this.y.delete(M))}async R(v,S,A){const T=this.ab();for(const Q of T){if(A.isCancellationRequested)return;await Q.apply(S,A)}const q=T.find(Q=>Q.profile.isDefault);if(!q)return;const M=q.enabled.find(Q=>Q.resource==="profiles");if(!M)return;const G=(await M.getRemoteSyncedProfiles(v?.latest??null)||[]).filter(Q=>T.every(F=>F.profile.id!==Q.id));G.length&&await this.Q(G,v,!1,S,A)}async S(v,S,A,T,q){return(await v.sync(S,A,T,q)).map(([Y,G])=>({profile:v.profile,syncResource:Y,error:G}))}async U(){this.status!=="idle"&&await Promise.allSettled(this.ab().map(v=>v.stop()))}async resolveContent(v){const S=await this.N.resolveContent(v);if(S)return S;for(const A of this.ab())for(const T of A.enabled){const q=await T.resolveContent(v);if(q)return q}return null}async replace(v){this.cb();const S=this.N.resolveUserDataSyncResource(v);if(!S)return;const A=await this.resolveContent(v.uri);A&&await this.W(S.profile,async T=>{if(S.syncResource===T.resource)return await T.replace(A),!0})}async accept(v,S,A,T){this.cb(),await this.W(v.profile,async q=>{if(v.syncResource===q.resource)return await q.accept(S,A),T&&await q.apply((0,m.$Qf)(T)?!1:T.force,(0,s.$7Sb)((0,C.$sg)())),!0})}async hasLocalData(){return!!await this.W(this.M.defaultProfile,async S=>{if(S.resource!=="globalState"&&await S.hasLocalData())return!0})}async hasPreviouslySynced(){return!!await this.W(this.M.defaultProfile,async S=>{if(await S.hasPreviouslySynced())return!0})}async reset(){this.cb(),await this.resetRemote(),await this.resetLocal()}async resetRemote(){this.cb();try{await this.C.clear(),this.H.info("Cleared data on server")}catch(v){this.H.error(v)}this.w.fire()}async resetLocal(){this.cb(),this.r=void 0,this.J.remove(t,-1);for(const[v]of this.y.values())try{await v.resetLocal()}catch(S){this.H.error(S)}this.bb(),this.u.fire(),this.H.info("Did reset the local sync state.")}async cleanUpRemoteData(){const v=await this.N.getRemoteSyncedProfiles(),S=v.map(M=>M.collection),A=await this.C.getAllCollections(),T=A.filter(M=>!S.includes(M));T.length&&(this.H.info(`Deleting ${T.length} redundant collections on server`),await Promise.allSettled(T.map(M=>this.C.deleteCollection(M))),this.H.info("Deleted redundant collections on server"));const q=v.filter(M=>A.includes(M.collection));if(q.length!==v.length){const M=this.G.createInstance(n.$4Nc,this.M.defaultProfile,void 0);try{this.H.info("Resetting the last synced state of profiles"),await M.resetLocal(),this.H.info("Did reset the last synced state of profiles"),this.H.info("Updating remote profiles with invalid collections on server"),await M.updateRemoteProfiles(q,null),this.H.info("Updated remote profiles on server")}finally{M.dispose()}}}async saveRemoteActivityData(v){this.cb();const S=await this.C.getActivityData();await this.z.writeFile(v,S)}async extractActivityData(v,S){const A=(await this.z.readFile(v)).value.toString(),T=JSON.parse(A);if(T.resources)for(const q in T.resources)for(const M of T.resources[q])await this.O.writeResource(q,M.content,new Date(M.created*1e3),void 0,S);if(T.collections)for(const q in T.collections)for(const M in T.collections[q].resources)for(const Y of T.collections[q].resources?.[M]??[])await this.O.writeResource(M,Y.content,new Date(Y.created*1e3),q,S)}async W(v,S){const A=new P.$Sc;try{const T=this.y.get(v.id);if(T){const Q=await this.X(T[0],S,A);return(0,m.$Rf)(Q)?null:Q}if(v.isDefault){const Q=A.add(this.G.createInstance(a,v,void 0)),F=await this.X(Q,S,A);return(0,m.$Rf)(F)?null:F}if(this.M.isEnabled())return null;const q=A.add(this.G.createInstance(n.$4Nc,v,void 0)),M=await this.C.manifest(null),G=(await q.getRemoteSyncedProfiles(M?.latest??null)||[]).find(Q=>Q.id===v.id);if(G){const Q=A.add(this.G.createInstance(a,v,G.collection)),F=await this.X(Q,S,A);return(0,m.$Rf)(F)?null:F}return null}finally{A.dispose()}}async X(v,S,A){const T=[...v.enabled,...v.disabled.reduce((q,M)=>(M!=="workspaceState"&&q.push(A.add(v.createSynchronizer(M))),q),[])];for(const q of T){const M=await S(q);if(!(0,m.$Rf)(M))return M}}Y(v){const S=this.f;this.f!==v&&(this.f=v,this.g.fire(v),S==="hasConflicts"&&this.$())}Z(){const v=this.ab().map(S=>S.conflicts).flat();(0,D.$ub)(this.j,v,(S,A)=>S.profile.id===A.profile.id&&S.syncResource===A.syncResource&&(0,D.$ub)(S.conflicts,A.conflicts,(T,q)=>(0,R.$Cg)(T.previewResource,q.previewResource)))||(this.j=v,this.m.fire(v))}$(){this.status==="idle"&&(this.r=new Date().getTime(),this.J.store(t,this.r,-1,1),this.t.fire(this.r))}getOrCreateActiveProfileSynchronizer(v,S){let A=this.y.get(v.id);if(A&&A[0].collection!==S?.collection&&(this.H.error("Profile synchronizer collection does not match with the remote sync profile collection"),A[1].dispose(),A=void 0,this.y.delete(v.id)),!A){const T=new P.$Sc,q=T.add(this.G.createInstance(a,v,S?.collection));T.add(q.onDidChangeStatus(M=>this.Y(M))),T.add(q.onDidChangeConflicts(M=>this.Z())),T.add(q.onDidChangeLocal(M=>this.h.fire(M))),this.y.set(v.id,A=[q,T])}return A[0]}ab(){const v=[];for(const[S]of this.y.values())v.push(S);return v}bb(){this.y.forEach(([,v])=>v.dispose()),this.y.clear()}cb(){if(!this.F.userDataSyncStore)throw new Error("Not enabled")}};e.$7Nc=o,e.$7Nc=o=Se([Z(0,l.$wk),Z(1,s.$3Sb),Z(2,s.$2Sb),Z(3,g.$7h),Z(4,s.$fTb),Z(5,w.$Al),Z(6,p.$yp),Z(7,s.$aTb),Z(8,h.$9k),Z(9,s.$cTb),Z(10,s.$4Sb)],o);let a=class extends P.$Tc{get enabled(){return this.f.sort((v,S)=>v[1]-S[1]).map(([v])=>v)}get disabled(){return s.$YSb.filter(v=>!this.q.isResourceEnabled(v))}get status(){return this.g}get conflicts(){return this.m}constructor(v,S,A,T,q,M,Y,G,Q,F){super(),this.profile=v,this.collection=S,this.q=A,this.r=T,this.t=q,this.u=M,this.w=Y,this.y=G,this.z=Q,this.C=F,this.f=[],this.g="idle",this.h=this.D(new I.$Wd),this.onDidChangeStatus=this.h.event,this.j=this.D(new I.$Wd),this.onDidChangeLocal=this.j.event,this.m=[],this.n=this.D(new I.$Wd),this.onDidChangeConflicts=this.n.event,this.D(A.onDidChangeResourceEnablement(([te,H])=>this.F(te,H))),this.D((0,P.$Rc)(()=>this.f.splice(0,this.f.length).forEach(([,,te])=>te.dispose())));for(const te of s.$YSb)A.isResourceEnabled(te)&&this.G(te)}F(v,S){S?this.G(v):this.H(v)}G(v){if(this.f.some(([q])=>q.resource===v))return;if(v==="extensions"&&!this.t.isEnabled()){this.y.info("Skipping extensions sync because gallery is not configured");return}if(v==="profiles"&&(!this.profile.isDefault||!this.z.isEnabled())||v==="workspaceState")return;if(v!=="profiles"&&this.profile.useDefaultFlags?.[v]){this.y.debug(`Skipping syncing ${v} in ${this.profile.name} because it is already synced by default profile`);return}const S=new P.$Sc,A=S.add(this.createSynchronizer(v));S.add(A.onDidChangeStatus(()=>this.L())),S.add(A.onDidChangeConflicts(()=>this.M())),S.add(A.onDidChangeLocal(()=>this.j.fire(v)));const T=this.N(v);this.f.push([A,T,S])}H(v){const S=this.f.findIndex(([A])=>A.resource===v);if(S!==-1){const[[A,,T]]=this.f.splice(S,1);T.dispose(),this.L(),Promise.allSettled([A.stop(),A.resetLocal()]).then(null,q=>this.y.error(q))}}createSynchronizer(v){switch(v){case"settings":return this.r.createInstance(b.$dMc,this.profile,this.collection);case"keybindings":return this.r.createInstance(c.$aMc,this.profile,this.collection);case"snippets":return this.r.createInstance(i.$iMc,this.profile,this.collection);case"tasks":return this.r.createInstance(r.$lMc,this.profile,this.collection);case"globalState":return this.r.createInstance(u.$1kc,this.profile,this.collection);case"extensions":return this.r.createInstance(f.$8Lc,this.profile,this.collection);case"profiles":return this.r.createInstance(n.$4Nc,this.profile,this.collection)}}async sync(v,S,A,T){if(T.isCancellationRequested)return[];const q=this.enabled;if(!q.length)return[];try{const M=[],Y=(0,s.$7Sb)(A),G=(this.collection?v?.collections?.[this.collection]?.latest:v?.latest)??null,Q=S?await this.I(G):{};for(const F of q){if(T.isCancellationRequested)return[];if(!this.q.isResourceEnabled(F.resource))return[];try{if(S){const te=await F.preview(G,Q,Y);if(te)for(const H of te.resourcePreviews)(H.localChange!==0||H.remoteChange!==0)&&H.mergeState==="preview"&&await F.merge(H.previewResource)}else await F.sync(G,Y)}catch(te){const H=s.$8Sb.toUserDataSyncError(te);if($(H,A,this.u,this.w),y(te))throw H;this.y.error(te),this.y.error(`${F.resource}: ${(0,j.$Si)(te)}`),M.push([F.resource,H])}}return M}finally{this.L()}}async apply(v,S){const A=(0,s.$7Sb)(v);for(const T of this.enabled){if(S.isCancellationRequested)return;try{await T.apply(!1,A)}catch(q){const M=s.$8Sb.toUserDataSyncError(q);if($(M,v,this.u,this.w),y(q))throw M;this.y.error(q),this.y.error(`${T.resource}: ${(0,j.$Si)(q)}`)}}}async stop(){for(const v of this.enabled)try{v.status!=="idle"&&await v.stop()}catch(S){this.y.error(S)}}async resetLocal(){for(const v of this.enabled)try{await v.resetLocal()}catch(S){this.y.error(`${v.resource}: ${(0,j.$Si)(S)}`),this.y.error(S)}}async I(v){if(!this.profile.isDefault)return{};const S=this.C.getValue(s.$USb),A=this.enabled.find(T=>T instanceof b.$dMc);if(A){const T=await A.getRemoteUserDataSyncConfiguration(v);return{...S,...T}}return S}J(v){this.g!==v&&(this.g=v,this.h.fire(v))}L(){return this.M(),this.enabled.some(v=>v.status==="hasConflicts")?this.J("hasConflicts"):this.enabled.some(v=>v.status==="syncing")?this.J("syncing"):this.J("idle")}M(){const v=this.enabled.filter(S=>S.status==="hasConflicts").filter(S=>S.conflicts.conflicts.length>0).map(S=>S.conflicts);(0,D.$ub)(this.m,v,(S,A)=>S.syncResource===A.syncResource&&(0,D.$ub)(S.conflicts,A.conflicts,(T,q)=>(0,R.$Cg)(T.previewResource,q.previewResource)))||(this.m=v,this.n.fire(v))}N(v){switch(v){case"settings":return 0;case"keybindings":return 1;case"snippets":return 2;case"tasks":return 3;case"globalState":return 4;case"extensions":return 5;case"profiles":return 6;case"workspaceState":return 7}}};a=Se([Z(2,s.$aTb),Z(3,g.$7h),Z(4,E.$Jo),Z(5,s.$2Sb),Z(6,w.$Al),Z(7,s.$fTb),Z(8,h.$9k),Z(9,k.$Bi)],a);function y(d){if(d instanceof s.$8Sb)switch(d.code){case"MethodNotFound":case"TooLarge":case"RemoteTooManyRequests":case"TooManyRequestsAndRetryAfter":case"LocalTooManyRequests":case"LocalTooManyProfiles":case"Gone":case"UpgradeRequired":case"IncompatibleRemoteContent":case"IncompatibleLocalContent":return!0}return!1}function $(d,v,S,A){A.publicLog2("sync/error",{code:d.code,serverCode:d instanceof s.$9Sb?String(d.serverCode):void 0,url:d instanceof s.$9Sb?d.url:void 0,resource:d.resource,executionId:v,service:S.userDataSyncStore.url.toString()})}}),define(ue[258],de([0,1,3,2,10,18,24]),function(oe,e,D,N,L,j,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$qRc=e.$pRc=void 0;function P(E,l){return{...E,profile:(0,j.$0k)(E.profile,l.profilesHome.scheme)}}function R(E){return{created:E.created,uri:L.URI.revive(E.uri)}}class m{constructor(l,g,p){this.c=l,this.d=g,this.f=p,this.a=new Map,this.b=new D.$Wd}listen(l,g){switch(g){case"onDidChangeStatus":return this.c.onDidChangeStatus;case"onDidChangeConflicts":return this.c.onDidChangeConflicts;case"onDidChangeLocal":return this.c.onDidChangeLocal;case"onDidChangeLastSyncTime":return this.c.onDidChangeLastSyncTime;case"onSyncErrors":return this.c.onSyncErrors;case"onDidResetLocal":return this.c.onDidResetLocal;case"onDidResetRemote":return this.c.onDidResetRemote;case"manualSync/onSynchronizeResources":return this.b.event}throw new Error(`Event not found: ${g}`)}async call(l,g,p){try{return await this.g(l,g,p)}catch(w){throw this.f.error(w),w}}async g(l,g,p){switch(g){case"_getInitialData":return Promise.resolve([this.c.status,this.c.conflicts,this.c.lastSyncTime]);case"reset":return this.c.reset();case"resetRemote":return this.c.resetRemote();case"resetLocal":return this.c.resetLocal();case"hasPreviouslySynced":return this.c.hasPreviouslySynced();case"hasLocalData":return this.c.hasLocalData();case"resolveContent":return this.c.resolveContent(L.URI.revive(p[0]));case"accept":return this.c.accept(P(p[0],this.d),L.URI.revive(p[1]),p[2],p[3]);case"replace":return this.c.replace(R(p[0]));case"cleanUpRemoteData":return this.c.cleanUpRemoteData();case"getRemoteActivityData":return this.c.saveRemoteActivityData(L.URI.revive(p[0]));case"extractActivityData":return this.c.extractActivityData(L.URI.revive(p[0]),L.URI.revive(p[1]));case"createManualSyncTask":return this.i()}if(g.startsWith("manualSync/")){const w=g.substring(11),h=p[0],f=this.h(h);switch(p=p.slice(1),w){case"merge":return f.merge();case"apply":return f.apply().then(()=>this.a.delete(this.j(f.id)));case"stop":return f.stop().finally(()=>this.a.delete(this.j(f.id)))}}throw new Error("Invalid call")}h(l){const g=this.a.get(this.j(l));if(!g)throw new Error(`Manual sync taks not found: ${l}`);return g}async i(){const l=await this.c.createManualSyncTask();return this.a.set(this.j(l.id),l),l.id}j(l){return`manualSyncTask-${l}`}}e.$pRc=m;let C=class extends N.$Tc{get status(){return this.b}get onDidChangeLocal(){return this.a.listen("onDidChangeLocal")}get conflicts(){return this.f}get lastSyncTime(){return this.h}get onDidResetLocal(){return this.a.listen("onDidResetLocal")}get onDidResetRemote(){return this.a.listen("onDidResetRemote")}constructor(l,g){super(),this.n=g,this.b="uninitialized",this.c=this.D(new D.$Wd),this.onDidChangeStatus=this.c.event,this.f=[],this.g=this.D(new D.$Wd),this.onDidChangeConflicts=this.g.event,this.h=void 0,this.j=this.D(new D.$Wd),this.onDidChangeLastSyncTime=this.j.event,this.m=this.D(new D.$Wd),this.onSyncErrors=this.m.event,this.a={call(p,w,h){return l.call(p,w,h).then(null,f=>{throw I.$8Sb.toUserDataSyncError(f)})},listen(p,w){return l.listen(p,w)}},this.a.call("_getInitialData").then(([p,w,h])=>{this.q(p),this.s(w),h&&this.t(h),this.D(this.a.listen("onDidChangeStatus")(f=>this.q(f))),this.D(this.a.listen("onDidChangeLastSyncTime")(f=>this.t(f)))}),this.D(this.a.listen("onDidChangeConflicts")(p=>this.s(p))),this.D(this.a.listen("onSyncErrors")(p=>this.m.fire(p.map(w=>({...w,error:I.$8Sb.toUserDataSyncError(w.error)})))))}createSyncTask(){throw new Error("not supported")}async createManualSyncTask(){const l=await this.a.call("createManualSyncTask"),g=this;return new k(l,{async call(w,h,f){return g.a.call(`manualSync/${w}`,[l,...Array.isArray(h)?h:[h]],f)},listen(){throw new Error("not supported")}})}reset(){return this.a.call("reset")}resetRemote(){return this.a.call("resetRemote")}resetLocal(){return this.a.call("resetLocal")}hasPreviouslySynced(){return this.a.call("hasPreviouslySynced")}hasLocalData(){return this.a.call("hasLocalData")}accept(l,g,p,w){return this.a.call("accept",[l,g,p,w])}resolveContent(l){return this.a.call("resolveContent",[l])}cleanUpRemoteData(){return this.a.call("cleanUpRemoteData")}replace(l){return this.a.call("replace",[l])}saveRemoteActivityData(l){return this.a.call("getRemoteActivityData",[l])}extractActivityData(l,g){return this.a.call("extractActivityData",[l,g])}async q(l){this.b=l,this.c.fire(l)}async s(l){this.f=l.map(g=>({syncResource:g.syncResource,profile:(0,j.$0k)(g.profile,this.n.profilesHome.scheme),conflicts:g.conflicts.map(p=>({...p,baseResource:L.URI.revive(p.baseResource),localResource:L.URI.revive(p.localResource),remoteResource:L.URI.revive(p.remoteResource),previewResource:L.URI.revive(p.previewResource)}))})),this.g.fire(this.f)}t(l){this.h!==l&&(this.h=l,this.j.fire(l))}};e.$qRc=C,e.$qRc=C=Se([Z(1,j.$9k)],C);class k extends N.$Tc{constructor(l,g){super(),this.id=l,this.a=g}async merge(){return this.a.call("merge")}async apply(){return this.a.call("apply")}stop(){return this.a.call("stop")}dispose(){this.a.call("dispose"),super.dispose()}}}),define(ue[123],de([0,1,6,26,7,3,2,140,5,20,12,10,31,21,15,11,23,61,43,19,24]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Qkc=e.$Pkc=e.$Okc=e.$Nkc=e.$Mkc=void 0;const b="configurationSync.store",i="sync.previous.store",r="sync.donot-make-requests-until",n="sync.user-session-id",s="sync.machine-session-id",t=100,o=1e3*60*5;let a=class extends I.$Tc{get userDataSyncStore(){return this.b}get c(){return this.h.get(c.$$Sb,-1)}set c(A){this.h.store(c.$$Sb,A,-1,R.$o?0:1)}constructor(A,T,q){super(),this.f=A,this.g=T,this.h=q,this.a=this.D(new j.$Wd),this.onDidChangeUserDataSyncStore=this.a.event,this.j();const M=this.D(new I.$Sc);this.D(j.Event.filter(q.onDidChangeValue(-1,c.$$Sb,M),()=>this.c!==this.userDataSyncStore?.type,M)(()=>this.j()))}j(){this.b=this.m(this.f[b]),this.a.fire()}m(A){if(A&&(A=R.$o&&A.web?{...A,...A.web}:A,(0,C.$Kf)(A.url)&&(0,C.$Mf)(A.authenticationProviders)&&Object.keys(A.authenticationProviders).every(T=>Array.isArray(A.authenticationProviders[T].scopes)))){const T=A,q=!!T.canSwitch,M=T.url===T.insidersUrl?"insiders":"stable",Y=(q?this.c:void 0)||M,G=Y==="insiders"?T.insidersUrl:Y==="stable"?T.stableUrl:T.url;return{url:k.URI.parse(G),type:Y,defaultType:M,defaultUrl:k.URI.parse(T.url),stableUrl:k.URI.parse(T.stableUrl),insidersUrl:k.URI.parse(T.insidersUrl),canSwitch:q,authenticationProviders:Object.keys(T.authenticationProviders).reduce((Q,F)=>(Q.push({id:F,scopes:T.authenticationProviders[F].scopes}),Q),[])}}}};e.$Mkc=a,e.$Mkc=a=Se([Z(0,w.$Ij),Z(1,l.$Bi),Z(2,u.$yp)],a);let y=class extends a{constructor(A,T,q){super(A,T,q);const M=this.h.get(i,-1);M&&(this.n=JSON.parse(M));const Y=this.f[b];Y?this.h.store(i,JSON.stringify(Y),-1,1):this.h.remove(i,-1)}async switch(A){A!==this.c&&(this.c=A,this.j())}async getPreviousUserDataSyncStore(){return this.m(this.n)}};e.$Nkc=y,e.$Nkc=y=Se([Z(0,w.$Ij),Z(1,l.$Bi),Z(2,u.$yp)],y);let $=class extends I.$Tc{get donotMakeRequestsUntil(){return this.j}constructor(A,T,q,M,Y,G,Q){super(),this.n=q,this.q=M,this.r=Q,this.g=this.D(new j.$Wd),this.onTokenFailed=this.g.event,this.h=this.D(new j.$Wd),this.onTokenSucceed=this.h.event,this.j=void 0,this.m=this.D(new j.$Wd),this.onDidChangeDonotMakeRequestsUntil=this.m.event,this.u=void 0,this.s(A),this.c=(0,f.$Ep)(Y,G,Q).then(F=>{const te={"X-Client-Name":`${T.applicationName}${R.$o?"-web":""}`,"X-Client-Version":T.version};return T.commit&&(te["X-Client-Commit"]=T.commit),te}),this.f=new v(t,o,this.n,this.q),this.t(),this.D((0,I.$Rc)(()=>{this.u&&(this.u.cancel(),this.u=void 0)}))}setAuthToken(A,T){this.b={token:A,type:T}}s(A){this.a=A?(0,m.$Jg)(A,"v1"):void 0}t(){const A=this.r.getNumber(r,-1);A&&Date.now()<A&&this.w(new Date(A))}w(A){this.j?.getTime()!==A?.getTime()&&(this.j=A,this.u&&(this.u.cancel(),this.u=void 0),this.j?(this.r.store(r,this.j.getTime(),-1,1),this.u=(0,D.$Vg)(T=>(0,D.$9g)(this.j.getTime()-Date.now(),T).then(()=>this.w(void 0))),this.u.then(null,T=>null)):this.r.remove(r,-1),this.m.fire())}async getAllCollections(A={}){if(!this.a)throw new Error("No settings sync store url configured.");const T=(0,m.$Jg)(this.a,"collection").toString();A={...A},A["Content-Type"]="application/json";const q=await this.C(T,{type:"GET",headers:A},[],N.CancellationToken.None);return(await(0,h.$Mp)(q))?.map(({id:M})=>M)||[]}async createCollection(A={}){if(!this.a)throw new Error("No settings sync store url configured.");const T=(0,m.$Jg)(this.a,"collection").toString();A={...A},A["Content-Type"]=P.$Bs.text;const q=await this.C(T,{type:"POST",headers:A},[],N.CancellationToken.None),M=await(0,h.$Lp)(q);if(!M)throw new c.$9Sb("Server did not return the collection id",T,"NoCollection",q.res.statusCode,q.res.headers[c.$5Sb]);return M}async deleteCollection(A,T={}){if(!this.a)throw new Error("No settings sync store url configured.");const q=A?(0,m.$Jg)(this.a,"collection",A).toString():(0,m.$Jg)(this.a,"collection").toString();T={...T},await this.C(q,{type:"DELETE",headers:T},[],N.CancellationToken.None)}async getAllResourceRefs(A,T){if(!this.a)throw new Error("No settings sync store url configured.");const q=this.y(this.a,T,A),M={},Y=await this.C(q.toString(),{type:"GET",headers:M},[],N.CancellationToken.None);return(await(0,h.$Mp)(Y)||[]).map(({url:Q,created:F})=>({ref:(0,m.$Lg)(q,q.with({path:Q})),created:F*1e3}))}async resolveResourceContent(A,T,q,M={}){if(!this.a)throw new Error("No settings sync store url configured.");const Y=(0,m.$Jg)(this.y(this.a,q,A),T).toString();M={...M},M["Cache-Control"]="no-cache";const G=await this.C(Y,{type:"GET",headers:M},[],N.CancellationToken.None);return await(0,h.$Lp)(G)}async deleteResource(A,T,q){if(!this.a)throw new Error("No settings sync store url configured.");const M=T!==null?(0,m.$Jg)(this.y(this.a,q,A),T).toString():this.y(this.a,q,A).toString(),Y={};await this.C(M,{type:"DELETE",headers:Y},[],N.CancellationToken.None)}async deleteResources(){if(!this.a)throw new Error("No settings sync store url configured.");const A=(0,m.$Jg)(this.a,"resource").toString(),T={"Content-Type":P.$Bs.text};await this.C(A,{type:"DELETE",headers:T},[],N.CancellationToken.None)}async readResource(A,T,q,M={}){if(!this.a)throw new Error("No settings sync store url configured.");const Y=(0,m.$Jg)(this.y(this.a,q,A),"latest").toString();M={...M},M["Cache-Control"]="no-cache",T&&(M["If-None-Match"]=T.ref);const G=await this.C(Y,{type:"GET",headers:M},[304],N.CancellationToken.None);let Q=null;if(G.res.statusCode===304&&(Q=T),Q===null){const F=G.res.headers.etag;if(!F)throw new c.$9Sb("Server did not return the ref",Y,"NoRef",G.res.statusCode,G.res.headers[c.$5Sb]);const te=await(0,h.$Lp)(G);if(!te&&G.res.statusCode===304)throw new c.$9Sb("Empty response",Y,"EmptyResponse",G.res.statusCode,G.res.headers[c.$5Sb]);Q={ref:F,content:te}}return Q}async writeResource(A,T,q,M,Y={}){if(!this.a)throw new Error("No settings sync store url configured.");const G=this.y(this.a,M,A).toString();Y={...Y},Y["Content-Type"]=P.$Bs.text,q&&(Y["If-Match"]=q);const Q=await this.C(G,{type:"POST",data:T,headers:Y},[],N.CancellationToken.None),F=Q.res.headers.etag;if(!F)throw new c.$9Sb("Server did not return the ref",G,"NoRef",Q.res.statusCode,Q.res.headers[c.$5Sb]);return F}async manifest(A,T={}){if(!this.a)throw new Error("No settings sync store url configured.");const q=(0,m.$Jg)(this.a,"manifest").toString();T={...T},T["Content-Type"]="application/json",A&&(T["If-None-Match"]=A.ref);const M=await this.C(q,{type:"GET",headers:T},[304],N.CancellationToken.None);let Y=null;if(M.res.statusCode===304&&(Y=A),!Y){const Q=M.res.headers.etag;if(!Q)throw new c.$9Sb("Server did not return the ref",q,"NoRef",M.res.statusCode,M.res.headers[c.$5Sb]);const F=await(0,h.$Lp)(M);if(!F&&M.res.statusCode===304)throw new c.$9Sb("Empty response",q,"EmptyResponse",M.res.statusCode,M.res.headers[c.$5Sb]);F&&(Y={...JSON.parse(F),ref:Q})}const G=this.r.get(n,-1);return G&&Y&&G!==Y.session&&this.z(),Y===null&&G&&this.z(),Y&&this.r.store(n,Y.session,-1,1),Y}async clear(){if(!this.a)throw new Error("No settings sync store url configured.");await this.deleteCollection(),await this.deleteResources(),this.z()}async getActivityData(){if(!this.a)throw new Error("No settings sync store url configured.");const A=(0,m.$Jg)(this.a,"download").toString(),T={},q=await this.C(A,{type:"GET",headers:T},[],N.CancellationToken.None);if(!(0,h.$Ip)(q))throw new c.$9Sb("Server returned "+q.res.statusCode,A,"EmptyResponse",q.res.statusCode,q.res.headers[c.$5Sb]);if((0,h.$Jp)(q))throw new c.$9Sb("Empty response",A,"EmptyResponse",q.res.statusCode,q.res.headers[c.$5Sb]);return q.stream}y(A,T,q){return T?(0,m.$Jg)(A,"collection",T,"resource",q):(0,m.$Jg)(A,"resource",q)}z(){this.r.remove(n,-1),this.r.remove(s,-1)}async C(A,T,q,M){if(!this.b)throw new c.$9Sb("No Auth Token Available",A,"Unauthorized",void 0,void 0);if(this.j&&Date.now()<this.j.getTime())throw new c.$9Sb(`${T.type} request '${A}' failed because of too many requests (429).`,A,"TooManyRequestsAndRetryAfter",void 0,void 0);this.w(void 0);const Y=await this.c;T.headers={...T.headers||{},...Y,"X-Account-Type":this.b.type,authorization:`Bearer ${this.b.token}`},this.F(T.headers),this.q.trace("Sending request to server",{url:A,type:T.type,headers:{...T.headers,authorization:void 0}});let G;try{G=await this.f.request(A,T,M)}catch(J){if(!(J instanceof c.$9Sb)){let x="RequestFailed";const se=(0,L.$0)(J).toLowerCase();se.includes("xhr timeout")?x="RequestTimeout":se.includes("protocol")&&se.includes("not supported")?x="RequestProtocolNotSupported":se.includes("request path contains unescaped characters")?x="RequestPathNotEscaped":se.includes("headers must be an object")?x="RequestHeadersNotObject":(0,L.$4)(J)&&(x="RequestCanceled"),J=new c.$9Sb(`Connection refused for the request '${A}'.`,A,x,void 0,void 0)}throw this.q.info("Request failed",A),J}const Q=G.res.headers[c.$5Sb],F={url:A,status:G.res.statusCode,"execution-id":T.headers[c.$6Sb],"operation-id":Q},te=(0,h.$Ip)(G)||G.res.statusCode&&q.includes(G.res.statusCode);let H="";if(te?this.q.trace("Request succeeded",F):(H=await(0,h.$Kp)(G)||"",this.q.info("Request failed",F,H)),G.res.statusCode===401||G.res.statusCode===403){if(this.b=void 0,G.res.statusCode===401)throw this.g.fire("Unauthorized"),new c.$9Sb(`${T.type} request '${A}' failed because of Unauthorized (401).`,A,"Unauthorized",G.res.statusCode,Q);if(G.res.statusCode===403)throw this.g.fire("Forbidden"),new c.$9Sb(`${T.type} request '${A}' failed because the access is forbidden (403).`,A,"Forbidden",G.res.statusCode,Q)}if(this.h.fire(),G.res.statusCode===404)throw new c.$9Sb(`${T.type} request '${A}' failed because the requested resource is not found (404).`,A,"NotFound",G.res.statusCode,Q);if(G.res.statusCode===405)throw new c.$9Sb(`${T.type} request '${A}' failed because the requested endpoint is not found (405). ${H}`,A,"MethodNotFound",G.res.statusCode,Q);if(G.res.statusCode===409)throw new c.$9Sb(`${T.type} request '${A}' failed because of Conflict (409). There is new data for this resource. Make the request again with latest data.`,A,"Conflict",G.res.statusCode,Q);if(G.res.statusCode===410)throw new c.$9Sb(`${T.type} request '${A}' failed because the requested resource is not longer available (410).`,A,"Gone",G.res.statusCode,Q);if(G.res.statusCode===412)throw new c.$9Sb(`${T.type} request '${A}' failed because of Precondition Failed (412). There is new data for this resource. Make the request again with latest data.`,A,"PreconditionFailed",G.res.statusCode,Q);if(G.res.statusCode===413)throw new c.$9Sb(`${T.type} request '${A}' failed because of too large payload (413).`,A,"TooLarge",G.res.statusCode,Q);if(G.res.statusCode===426)throw new c.$9Sb(`${T.type} request '${A}' failed with status Upgrade Required (426). Please upgrade the client and try again.`,A,"UpgradeRequired",G.res.statusCode,Q);if(G.res.statusCode===429){const J=G.res.headers["retry-after"];throw J?(this.w(new Date(Date.now()+parseInt(J)*1e3)),new c.$9Sb(`${T.type} request '${A}' failed because of too many requests (429).`,A,"TooManyRequestsAndRetryAfter",G.res.statusCode,Q)):new c.$9Sb(`${T.type} request '${A}' failed because of too many requests (429).`,A,"RemoteTooManyRequests",G.res.statusCode,Q)}if(!te)throw new c.$9Sb("Server returned "+G.res.statusCode,A,"Unknown",G.res.statusCode,Q);return G}F(A){let T=this.r.get(s,-1);T===void 0&&(T=(0,E.$sg)(),this.r.store(s,T,-1,1)),A["X-Machine-Session-Id"]=T;const q=this.r.get(n,-1);q!==void 0&&(A["X-User-Session-Id"]=q)}};e.$Okc=$,e.$Okc=$=Se([Z(1,w.$Ij),Z(2,h.$Gp),Z(3,c.$fTb),Z(4,g.$ci),Z(5,p.$wk),Z(6,u.$yp)],$);let d=class extends ${constructor(A,T,q,M,Y,G,Q){super(A.userDataSyncStore?.url,T,q,M,Y,G,Q),this.D(A.onDidChangeUserDataSyncStore(()=>this.s(A.userDataSyncStore?.url)))}};e.$Pkc=d,e.$Pkc=d=Se([Z(0,c.$2Sb),Z(1,w.$Ij),Z(2,h.$Gp),Z(3,c.$fTb),Z(4,g.$ci),Z(5,p.$wk),Z(6,u.$yp)],d);class v{constructor(A,T,q,M){this.c=A,this.d=T,this.f=q,this.g=M,this.a=[],this.b=void 0}request(A,T,q){if(this.h()&&this.i(),T.url=A,this.a.length>=this.c)throw this.g.info("Too many requests",...this.a),new c.$9Sb(`Too many requests. Only ${this.c} requests allowed in ${this.d/(1e3*60)} minutes.`,A,"LocalTooManyRequests",void 0,void 0);return this.b=this.b||new Date,this.a.push(A),this.f.request(T,q)}h(){return this.b!==void 0&&new Date().getTime()-this.b.getTime()>this.d}i(){this.a=[],this.b=void 0}}e.$Qkc=v}),define(ue[259],de([0,1,3,2,10,21,23,19,123]),function(oe,e,D,N,L,j,I,P,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$oRc=e.$nRc=e.$mRc=e.$lRc=void 0;class m{constructor(g){this.a=g}listen(g,p){switch(p){case"onDidChangeAccount":return this.a.onDidChangeAccount;case"onTokenFailed":return this.a.onTokenFailed}throw new Error(`Event not found: ${p}`)}call(g,p,w){switch(p){case"_getInitialData":return Promise.resolve(this.a.account);case"updateAccount":return this.a.updateAccount(w)}throw new Error("Invalid call")}}e.$lRc=m;class C extends N.$Tc{get account(){return this.a}get onTokenFailed(){return this.c.listen("onTokenFailed")}constructor(g){super(),this.c=g,this.b=this.D(new D.$Wd),this.onDidChangeAccount=this.b.event,this.c.call("_getInitialData").then(p=>{this.a=p,this.D(this.c.listen("onDidChangeAccount")(w=>{this.a=w,this.b.fire(w)}))})}updateAccount(g){return this.c.call("updateAccount",g)}}e.$mRc=C;class k{constructor(g){this.a=g}listen(g,p){switch(p){case"onDidChangeUserDataSyncStore":return this.a.onDidChangeUserDataSyncStore}throw new Error(`Event not found: ${p}`)}call(g,p,w){switch(p){case"switch":return this.a.switch(w[0]);case"getPreviousUserDataSyncStore":return this.a.getPreviousUserDataSyncStore()}throw new Error("Invalid call")}}e.$nRc=k;let E=class extends R.$Mkc{constructor(g,p,w,h){super(p,w,h),this.n=g,this.D(this.n.listen("onDidChangeUserDataSyncStore")(()=>this.j()))}async switch(g){return this.n.call("switch",[g])}async getPreviousUserDataSyncStore(){const g=await this.n.call("getPreviousUserDataSyncStore");return this.q(g)}q(g){return{url:L.URI.revive(g.url),type:g.type,defaultUrl:L.URI.revive(g.defaultUrl),insidersUrl:L.URI.revive(g.insidersUrl),stableUrl:L.URI.revive(g.stableUrl),canSwitch:g.canSwitch,authenticationProviders:g.authenticationProviders}}};e.$oRc=E,e.$oRc=E=Se([Z(1,I.$Ij),Z(2,j.$Bi),Z(3,P.$yp)],E)}),define(ue[260],de([0,1,3,58,23,19,22,255,24,82,85]),function(oe,e,D,N,L,j,I,P,R,m,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$KRc=void 0;let k=class extends P.$8Nc{constructor(l,g,p,w,h,f,u,c,b,i,r){super(l,g,p,w,h,u,c,b,i,r),this.D(D.Event.debounce(D.Event.any(D.Event.map(f.onDidFocusMainWindow,()=>"windowFocus"),D.Event.map(f.onDidOpenMainWindow,()=>"windowOpen")),(n,s)=>n?[...n,s]:[s],1e3)(n=>this.triggerSync(n,!0,!1)))}};e.$KRc=k,e.$KRc=k=Se([Z(0,L.$Ij),Z(1,R.$2Sb),Z(2,R.$3Sb),Z(3,R.$aTb),Z(4,R.$bTb),Z(5,N.$CPc),Z(6,R.$fTb),Z(7,m.$njc),Z(8,I.$Al),Z(9,C.$PSb),Z(10,j.$yp)],k)}),define(ue[261],de([0,1,74,25,5,20]),function(oe,e,D,N,L,j){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6Oc=e.$5Oc=e.$4Oc=e.$3Oc=void 0,e.$3Oc=128/4;function I(m){function C(){let k=m.scheme===N.Schemas.file?(0,j.$xg)(m):m.toString();return L.$k||(k=k.toLowerCase()),(0,D.createHash)("md5").update(k).digest("hex")}return{id:C(),configPath:m}}e.$4Oc=I;function P(m,C){function k(){if(m.scheme!==N.Schemas.file)return(0,D.createHash)("md5").update(m.toString()).digest("hex");if(!C)return;let l;return L.$k?l=C.ino:L.$j?l=C.birthtime.getTime():L.$i&&(typeof C.birthtimeMs=="number"?l=Math.floor(C.birthtimeMs):l=C.birthtime.getTime()),(0,D.createHash)("md5").update(m.fsPath).update(l?String(l):"").digest("hex")}const E=k();if(typeof E=="string")return{id:E,uri:m}}e.$5Oc=P;function R(){return{id:(Date.now()+Math.round(Math.random()*1e3)).toString()}}e.$6Oc=R}),define(ue[262],de([0,1,6,7,2,16,32,15,8,79,112,261,58,57,25]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$hRc=void 0;let p=class extends L.$Tc{constructor(h,f,u,c){super(),this.a=h,this.b=f,this.c=u,this.f=c,this.D(new D.$hh(()=>{this.g()},30*1e3)).schedule()}async g(){this.b.trace("[storage cleanup]: Starting to clean up workspace storage folders for unused empty workspaces.");try{const h=this.a.workspaceStorageHome.with({scheme:g.Schemas.file}).fsPath,f=await I.Promises.readdir(h),u=new m.$Yjc(this.f.getChannel("storage"));await Promise.all(f.map(async c=>{const b=(0,j.$jc)(h,c);c.length===k.$3Oc||c===C.$hi.id||(await this.c.getWindows({includeAuxiliaryWindows:!1})).some(n=>n.workspace?.id===c)||await u.isUsed(b)||(this.b.trace(`[storage cleanup]: Deleting workspace storage folder ${c} as it seems to be an unused empty workspace.`),await I.Promises.rm(b))}))}catch(h){(0,N.$1)(h)}}};e.$hRc=p,e.$hRc=p=Se([Z(0,P.$di),Z(1,R.$qj),Z(2,E.$CPc),Z(3,l.$QQc)],p)}),define(ue[124],de([0,1,74,66,36,272,14,7,3,2,16,5,31,40,69]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$4h=e.$3h=e.$2h=e.$1h=e.$Zh=e.$Yh=e.$Xh=e.$Wh=void 0;class p{traceSocketEvent(d,v){g.SocketDiagnostics.traceSocketEvent(this.socket,this.debugLabel,d,v)}constructor(d,v=""){this.f=!0,this.debugLabel=v,this.socket=d,this.traceSocketEvent("created",{type:"NodeSocket"}),this.a=S=>{if(this.traceSocketEvent("error",{code:S?.code,message:S?.message}),S){if(S.code==="EPIPE")return;(0,P.$1)(S)}},this.socket.on("error",this.a),this.b=S=>{this.traceSocketEvent("close",{hadError:S}),this.f=!1},this.socket.on("close",this.b),this.d=()=>{this.traceSocketEvent("nodeEndReceived"),this.f=!1},this.socket.on("end",this.d)}dispose(){this.socket.off("error",this.a),this.socket.off("close",this.b),this.socket.off("end",this.d),this.socket.destroy()}onData(d){const v=S=>{this.traceSocketEvent("read",S),d(I.$ke.wrap(S))};return this.socket.on("data",v),{dispose:()=>this.socket.off("data",v)}}onClose(d){const v=S=>{d({type:0,hadError:S,error:void 0})};return this.socket.on("close",v),{dispose:()=>this.socket.off("close",v)}}onEnd(d){const v=()=>{d()};return this.socket.on("end",v),{dispose:()=>this.socket.off("end",v)}}write(d){if(!(this.socket.destroyed||!this.f))try{this.traceSocketEvent("write",d),this.socket.write(d.buffer,v=>{if(v){if(v.code==="EPIPE")return;(0,P.$1)(v)}})}catch(v){if(v.code==="EPIPE")return;(0,P.$1)(v)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((d,v)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),d();return}const S=()=>{this.socket.off("close",S),this.socket.off("end",S),this.socket.off("error",S),this.socket.off("timeout",S),this.socket.off("drain",S),this.traceSocketEvent("nodeDrainEnd"),d()};this.socket.on("close",S),this.socket.on("end",S),this.socket.on("error",S),this.socket.on("timeout",S),this.socket.on("drain",S)})}}e.$Wh=p;var w;(function($){$[$.MinHeaderByteSize=2]="MinHeaderByteSize",$[$.MaxWebSocketMessageLength=262144]="MaxWebSocketMessageLength"})(w||(w={}));var h;(function($){$[$.PeekHeader=1]="PeekHeader",$[$.ReadHeader=2]="ReadHeader",$[$.ReadBody=3]="ReadBody",$[$.Fin=4]="Fin"})(h||(h={}));class f extends m.$Tc{get permessageDeflate(){return this.a.permessageDeflate}get recordedInflateBytes(){return this.a.recordedInflateBytes}traceSocketEvent(d,v){this.socket.traceSocketEvent(d,v)}constructor(d,v,S,A){super(),this.f=this.D(new R.$Wd),this.g=this.D(new R.$Wd),this.h=!1,this.j={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0,opcode:0},this.socket=d,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:v,inflateBytesLength:S?.byteLength||0,recordInflateBytes:A}),this.a=this.D(new u(this,v,S,A,this.f,(T,q)=>this.m(T,q))),this.D(this.a.onError(T=>{console.error(T),(0,P.$1)(T),this.g.fire({type:0,hadError:!0,error:T})})),this.b=new g.$Rh,this.D(this.socket.onData(T=>this.n(T))),this.D(this.socket.onClose(async T=>{this.a.isProcessingReadQueue()&&await R.Event.toPromise(this.a.onDidFinishProcessingReadQueue),this.g.fire(T)}))}dispose(){this.a.isProcessingWriteQueue()?this.D(this.a.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(d){return this.f.event(d)}onClose(d){return this.g.event(d)}onEnd(d){return this.socket.onEnd(d)}write(d){let v=0;for(;v<d.byteLength;)this.a.writeMessage(d.slice(v,Math.min(v+262144,d.byteLength)),{compressed:!0,opcode:2}),v+=262144}m(d,{compressed:v,opcode:S}){if(this.h)return;this.traceSocketEvent("webSocketNodeSocketWrite",d);let A=2;d.byteLength<126?A+=0:d.byteLength<2**16?A+=2:A+=8;const T=I.$ke.alloc(A),q=v?64:0,M=S&15;if(T.writeUInt8(128|q|M,0),d.byteLength<126)T.writeUInt8(d.byteLength,1);else if(d.byteLength<2**16){T.writeUInt8(126,1);let Y=1;T.writeUInt8(d.byteLength>>>8&255,++Y),T.writeUInt8(d.byteLength>>>0&255,++Y)}else{T.writeUInt8(127,1);let Y=1;T.writeUInt8(0,++Y),T.writeUInt8(0,++Y),T.writeUInt8(0,++Y),T.writeUInt8(0,++Y),T.writeUInt8(d.byteLength>>>24&255,++Y),T.writeUInt8(d.byteLength>>>16&255,++Y),T.writeUInt8(d.byteLength>>>8&255,++Y),T.writeUInt8(d.byteLength>>>0&255,++Y)}this.socket.write(I.$ke.concat([T,d]))}end(){this.h=!0,this.socket.end()}n(d){if(d.byteLength!==0){for(this.b.acceptChunk(d);this.b.byteLength>=this.j.readLen;)if(this.j.state===1){const v=this.b.peek(this.j.readLen),S=v.readUInt8(0),A=(S&128)>>>7,T=(S&64)>>>6,q=S&15,M=v.readUInt8(1),Y=(M&128)>>>7,G=M&127;this.j.state=2,this.j.readLen=2+(Y?4:0)+(G===126?2:0)+(G===127?8:0),this.j.fin=A,this.j.firstFrameOfMessage&&(this.j.compressed=!!T),this.j.firstFrameOfMessage=!!A,this.j.mask=0,this.j.opcode=q,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,opcode:this.j.opcode})}else if(this.j.state===2){const v=this.b.read(this.j.readLen),S=v.readUInt8(1),A=(S&128)>>>7;let T=S&127,q=1;T===126?T=v.readUInt8(++q)*2**8+v.readUInt8(++q):T===127&&(T=v.readUInt8(++q)*0+v.readUInt8(++q)*0+v.readUInt8(++q)*0+v.readUInt8(++q)*0+v.readUInt8(++q)*2**24+v.readUInt8(++q)*2**16+v.readUInt8(++q)*2**8+v.readUInt8(++q));let M=0;A&&(M=v.readUInt8(++q)*2**24+v.readUInt8(++q)*2**16+v.readUInt8(++q)*2**8+v.readUInt8(++q)),this.j.state=3,this.j.readLen=T,this.j.mask=M,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,mask:this.j.mask,opcode:this.j.opcode})}else if(this.j.state===3){const v=this.b.read(this.j.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",v),i(v,this.j.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",v),this.j.state=1,this.j.readLen=2,this.j.mask=0,this.j.opcode<=2?this.a.acceptFrame(v,this.j.compressed,!!this.j.fin):this.j.opcode===9&&this.a.writeMessage(v,{compressed:!1,opcode:10})}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this.a.isProcessingWriteQueue()&&await R.Event.toPromise(this.a.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}}e.$Xh=f;class u extends m.$Tc{get permessageDeflate(){return!!(this.b&&this.f)}get recordedInflateBytes(){return this.b?this.b.recordedInflateBytes:I.$ke.alloc(0)}constructor(d,v,S,A,T,q){super(),this.n=d,this.q=T,this.r=q,this.a=this.D(new R.$Wd),this.onError=this.a.event,this.g=[],this.h=[],this.j=this.D(new R.$Wd),this.onDidFinishProcessingReadQueue=this.j.event,this.m=this.D(new R.$Wd),this.onDidFinishProcessingWriteQueue=this.m.event,this.s=!1,this.w=!1,v?(this.b=this.D(new c(this.n,A,S,{windowBits:15})),this.f=this.D(new b(this.n,{windowBits:15})),this.D(this.b.onError(M=>this.a.fire(M))),this.D(this.f.onError(M=>this.a.fire(M)))):(this.b=null,this.f=null)}writeMessage(d,v){this.g.push({data:d,options:v}),this.t()}async t(){if(!this.s){for(this.s=!0;this.g.length>0;){const{data:d,options:v}=this.g.shift();if(this.f&&v.compressed){const S=await this.u(this.f,d);this.r(S,v)}else this.r(d,{...v,compressed:!1})}this.s=!1,this.m.fire()}}isProcessingWriteQueue(){return this.s}u(d,v){return new Promise((S,A)=>{d.write(v),d.flush(T=>S(T))})}acceptFrame(d,v,S){this.h.push({data:d,isCompressed:v,isLastFrameOfMessage:S}),this.y()}async y(){if(!this.w){for(this.w=!0;this.h.length>0;){const d=this.h.shift();if(this.b&&d.isCompressed){const v=await this.z(this.b,d.data,d.isLastFrameOfMessage);this.q.fire(v)}else this.q.fire(d.data)}this.w=!1,this.j.fire()}}isProcessingReadQueue(){return this.w}z(d,v,S){return new Promise((A,T)=>{d.write(v),S&&d.write(I.$ke.fromByteArray([0,0,255,255])),d.flush(q=>A(q))})}}class c extends m.$Tc{get recordedInflateBytes(){return this.j?I.$ke.concat(this.f):I.$ke.alloc(0)}constructor(d,v,S,A){super(),this.h=d,this.j=v,this.a=this.D(new R.$Wd),this.onError=this.a.event,this.f=[],this.g=[],this.b=(0,j.createInflateRaw)(A),this.b.on("error",T=>{this.h.traceSocketEvent("zlibInflateError",{message:T?.message,code:T?.code}),this.a.fire(T)}),this.b.on("data",T=>{this.h.traceSocketEvent("zlibInflateData",T),this.g.push(I.$ke.wrap(T))}),S&&(this.h.traceSocketEvent("zlibInflateInitialWrite",S.buffer),this.b.write(S.buffer),this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateInitialFlushFired"),this.g.length=0}))}write(d){this.j&&this.f.push(d.clone()),this.h.traceSocketEvent("zlibInflateWrite",d),this.b.write(d.buffer)}flush(d){this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateFlushFired");const v=I.$ke.concat(this.g);this.g.length=0,d(v)})}}class b extends m.$Tc{constructor(d,v){super(),this.g=d,this.a=this.D(new R.$Wd),this.onError=this.a.event,this.f=[],this.b=(0,j.createDeflateRaw)({windowBits:15}),this.b.on("error",S=>{this.g.traceSocketEvent("zlibDeflateError",{message:S?.message,code:S?.code}),this.a.fire(S)}),this.b.on("data",S=>{this.g.traceSocketEvent("zlibDeflateData",S),this.f.push(I.$ke.wrap(S))})}write(d){this.g.traceSocketEvent("zlibDeflateWrite",d.buffer),this.b.write(d.buffer)}flush(d){this.b.flush(2,()=>{this.g.traceSocketEvent("zlibDeflateFlushFired");let v=I.$ke.concat(this.f);this.f.length=0,v=v.slice(0,v.byteLength-4),d(v)})}}function i($,d){if(d===0)return;const v=$.byteLength>>>2;for(let Y=0;Y<v;Y++){const G=$.readUInt32BE(Y*4);$.writeUInt32BE(G^d,Y*4)}const S=v*4,A=$.byteLength-S,T=d>>>24&255,q=d>>>16&255,M=d>>>8&255;A>=1&&$.writeUInt8($.readUInt8(S)^T,S),A>=2&&$.writeUInt8($.readUInt8(S+1)^q,S+1),A>=3&&$.writeUInt8($.readUInt8(S+2)^M,S+2)}e.$Yh=process.env.XDG_RUNTIME_DIR;const r={[2]:107,[1]:103};function n(){const $=(0,E.$sg)();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${$}-sock`;const d=process.platform!=="darwin"&&e.$Yh?e.$Yh:(0,L.tmpdir)(),v=(0,C.$jc)(d,`vscode-ipc-${$}.sock`);return t(v),v}e.$Zh=n;function s($,d,v){const A=(0,D.createHash)("sha256").update($).digest("hex").substr(0,8);if(process.platform==="win32")return`\\\\.\\pipe\\${A}-${v}-${d}-sock`;const T=v.substr(0,4),q=d.substr(0,6);let M;return process.platform!=="darwin"&&e.$Yh&&!process.env.VSCODE_PORTABLE?M=(0,C.$jc)(e.$Yh,`vscode-${A}-${T}-${q}.sock`):M=(0,C.$jc)($,`${T}-${q}.sock`),t(M),M}e.$1h=s;function t($){const d=r[k.$u];typeof d=="number"&&$.length>=d&&console.warn(`WARNING: IPC handle "${$}" is longer than ${d} chars, try a shorter --user-data-dir`)}class o extends l.$Lh{static b(d){const v=R.Event.fromNodeEventEmitter(d,"connection");return R.Event.map(v,S=>({protocol:new g.$Sh(new p(S,"ipc-server-connection")),onDidClientDisconnect:R.Event.once(R.Event.fromNodeEventEmitter(S,"close"))}))}constructor(d){super(o.b(d)),this.d=d}dispose(){super.dispose(),this.d&&(this.d.close(),this.d=null)}}e.$2h=o;function a($){return new Promise((d,v)=>{const S=(0,N.createServer)();S.on("error",v),S.listen($,()=>{S.removeListener("error",v),d(new o(S))})})}e.$3h=a;function y($,d){return new Promise((v,S)=>{const A=(0,N.createConnection)($,()=>{A.removeListener("error",S),v(g.$Th.fromSocket(new p(A,`ipc-client${d}`),d))});A.once("error",S)})}e.$4h=y}),define(ue[263],de([0,1,66,124,211]),function(oe,e,D,N,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$NRc=void 0,e.$NRc=new class{supports(j){return!0}connect({host:j,port:I},P,R,m){return new Promise((C,k)=>{const E=D.createConnection({host:j,port:I},()=>{E.removeListener("error",k),E.write((0,L.$Qac)(P,R,m));const l=g=>{g.toString().indexOf(`\r
\r
`)>=0&&(E.off("data",l),C(new N.$Wh(E,m)))};E.on("data",l)});E.setNoDelay(!0),E.once("error",k)})}}}),define(ue[264],de([0,1,66,36,133,124,6,2,5,21,8,23,214,104,106,80,14]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$KQc=e.$JQc=e.$IQc=e.$HQc=void 0;async function h(i,r,n,s,t){let o;for(let a=3;a&&(o?.dispose(),o=await new f(i,r,n,s,t).waitForReady(),!(t&&L.$vg[t]||!L.$vg[o.tunnelLocalPort]));a--);return o}class f extends P.$Tc{constructor(r,n,s,t,o){super(),this.m=n,this.n=o,this.privacy=p.TunnelPrivacyId.Private,this.j=new Map,this.a=r,this.b=D.createServer(),this.c=new I.$7g,this.f=()=>this.c.open(),this.b.on("listening",this.f),this.g=a=>this.q(a),this.b.on("connection",this.g),this.h=()=>{},this.b.on("error",this.h),this.tunnelRemotePort=t,this.tunnelRemoteHost=s}async dispose(){super.dispose(),this.b.removeListener("listening",this.f),this.b.removeListener("connection",this.g),this.b.removeListener("error",this.h),this.b.close(),Array.from(this.j.values()).forEach(n=>{n()})}async waitForReady(){const r=this.n??this.tunnelRemotePort,n=(0,p.$RI)(this.m)?"0.0.0.0":"127.0.0.1";let s=await(0,L.$wg)(r,2,1e3,n),t=null;return this.b.listen(s,this.m),await this.c.wait(),t=this.b.address(),t||(s=0,this.b.listen(s,this.m),await this.c.wait(),t=this.b.address()),this.tunnelLocalPort=t.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${t.port}`,this}async q(r){r.pause();const n=(0,p.$PI)(this.tunnelRemoteHost)||(0,p.$RI)(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,s=await(0,E.$rl)(this.a,n,this.tunnelRemotePort),t=s.getSocket(),o=s.readEntireBuffer();s.dispose(),o.byteLength>0&&r.write(o.buffer),r.on("end",()=>{r.localAddress&&this.j.delete(r.localAddress),t.end()}),r.on("close",()=>t.end()),r.on("error",()=>{r.localAddress&&this.j.delete(r.localAddress),t instanceof j.$Wh?t.socket.destroy():t.end()}),t instanceof j.$Wh?this.s(r,t):this.r(r,t),r.localAddress&&this.j.set(r.localAddress,()=>{r.end(),t.end()})}r(r,n){n.onClose(()=>r.destroy()),n.onEnd(()=>r.end()),n.onData(s=>r.write(s.buffer)),r.on("data",s=>n.write(w.$ke.wrap(s))),r.resume()}s(r,n){const s=n.socket;s.on("end",()=>r.end()),s.on("close",()=>r.end()),s.on("error",()=>{r.destroy()}),s.pipe(r),r.pipe(s)}}e.$HQc=f;let u=class extends p.$UI{constructor(r,n,s,t,o){super(n,o),this.v=r,this.w=s,this.y=t}isPortPrivileged(r){return(0,p.$SI)(r,this.m,R.OS,N.release())}t(r,n,s,t,o,a,y,$){const d=this.s(n,s);if(d)return++d.refcount,d.value;if((0,p.$MI)(r))return this.u(r,n,s,o,a,y,$);{this.k.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${n}:${s} on local port ${o}.`);const v={commit:this.y.commit,quality:this.y.quality,addressProvider:r,remoteSocketFactoryService:this.v,signService:this.w,logService:this.k,ipcLogger:null},S=h(v,t,n,s,o);return this.k.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.q(n,s,S),S}}};e.$IQc=u,e.$IQc=u=Se([Z(0,l.$ll),Z(1,C.$qj),Z(2,g.$ol),Z(3,k.$Ij),Z(4,m.$Bi)],u);let c=class extends u{constructor(r,n,s,t,o){super(r,n,s,t,o)}};e.$JQc=c,e.$JQc=c=Se([Z(0,l.$ll),Z(1,C.$qj),Z(2,g.$ol),Z(3,k.$Ij),Z(4,m.$Bi)],c);let b=class extends P.$Tc{constructor(r,n,s,t,o){super(),this.b=r,this.c=n,this.f=s,this.g=t,this.h=o,this.a=new Map}async openTunnel(r,n,s,t,o,a,y,$,d){if(this.c.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${s}:${t} on local port ${a}.`),!this.a.has(r)){const v=new c(this.b,this.c,this.g,this.f,this.h);this.D(v),this.a.set(r,v),v.onTunnelClosed(async()=>{(await v.tunnels).length===0&&(v.dispose(),this.a.delete(r))})}return this.a.get(r).openTunnel(n,s,t,o,a,y,$,d)}};e.$KQc=b,e.$KQc=b=Se([Z(0,l.$ll),Z(1,C.$qj),Z(2,k.$Ij),Z(3,g.$ol),Z(4,m.$Bi)],b)}),define(ue[273],de([0,1,36,38,7,2,25,10,17,3,40,146,205,206,196,197,262,187,189,21,210,96,222,97,216,15,113,114,29,100,188,115,98,11,199,200,73,4,195,75,76,228,8,201,60,23,61,19,107,22,108,109,110,51,230,84,111,24,82,254,259,240,85,253,257,258,123,62,252,241,106,220,80,264,215,231,28,232,5,233,190,208,207,83,245,18,52,204,59,251,229,242,105,256,247,9,202,102,249,244,217,184,58,203,260,248,57,250,104,263,181,218]),function(oe,e,D,N,L,j,I,P,R,m,C,k,E,l,g,p,w,h,f,u,c,b,i,r,n,s,t,o,a,y,$,d,v,S,A,T,q,M,Y,G,Q,F,te,H,J,x,se,V,ne,K,z,U,O,W,B,_,ee,X,ie,ce,fe,be,le,re,me,ye,Re,Ce,he,$e,we,ke,Pe,Le,Oe,qe,je,Ne,Me,ae,ge,pe,ve,Ee,Ie,Ae,Te,Fe,Ve,Ue,We,He,Ye,et,vt,Et,St,dt,kt,Rt,Ct,Pt,It,Dt,Ot,jt,$t,Lt,gt,At,Nt,nt){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.main=void 0;class Tt extends j.$Tc{constructor(De){super(),this.f=De,this.a=this.D(new k.$Zdb(this)),this.b=void 0,this.c=this.D(new m.$Wd),this.g()}g(){let De=!1;const ze=()=>{De||(De=!0,this.b?.fireOnWillShutdown(),this.dispose())};process.once("exit",ze),(0,k.once)(process.parentPort,nt.$WPc.exit,ze)}async init(){const De=await this.h();(0,X.$WSb)(),De.invokeFunction(ze=>{const Qe=ze.get(te.$qj),Be=ze.get(K.$Al),Xe=ze.get(Ae.$9k);Qe.trace("sharedProcess configuration",JSON.stringify(this.f)),this.j(ze),this.m(Qe),this.n(Be,Xe),this.D(Xe.onDidChangeProfiles(()=>this.n(Be,Xe)))}),this.D((0,j.$Qc)(De.createInstance(E.$dRc,this.f.codeCachePath),De.createInstance(l.$eRc),De.createInstance(w.$hRc),De.createInstance(p.$gRc),De.createInstance(g.$fRc),De.createInstance(vt.$ERc),De.createInstance(He.$wRc)))}async h(){const De=new G.$6h,ze={_serviceBrand:void 0,...J.default};De.set(x.$Ij,ze);const Qe=new C.$Ph(Ge=>Ge==="main"),Be=new $t.$RQc(this.a,Qe);De.set($t.$QQc,Be);const Xe=this.f.policiesData?new Fe.$nQc(this.f.policiesData,Be.getChannel("policy")):new Ve.$Un;De.set(Ve.$Sn,Xe);const Je=new Nt.$Jm(this.f.args,ze);De.set(s.$di,Je);const _e=new H.$Wr(void 0,this.f.logLevel,Je.logsHome,this.f.loggers.map(Ge=>({...Ge,resource:P.URI.revive(Ge.resource)})),Be.getChannel("logger"));De.set(te.$rj,_e);const rt=this.D(_e.createLogger("sharedprocess",{name:(0,Et.localize)(0,null)})),lt=this.D(new te.$yj(rt.getLevel())),Ke=this.D(new St.$E4(rt,[lt]));De.set(te.$qj,Ke),this.b=this.D(new dt.$GRc(Ke)),De.set(dt.$FRc,this.b);const Ze=this.D(new A.$wq(Ke));De.set(S.$wk,Ze);const ht=this.D(new T.$Vq(Ke));Ze.registerProvider(I.Schemas.file,ht);const ot=new Ne.$ls(Ze);De.set(je.$7k,ot);const xe=this.D(new Ue.$L4(this.f.profiles.all,P.URI.revive(this.f.profiles.home).with({scheme:Je.userRoamingDataHome.scheme}),Be.getChannel("userDataProfiles")));De.set(Ae.$9k,xe);const ut=this.D(new ae.$PQc(I.Schemas.file,this.D(new ge.$n4(Be.getChannel(ge.$m4),{pathCaseSensitive:Me.$k})),I.Schemas.vscodeUserData,xe,ot,Ke));Ze.registerProvider(I.Schemas.vscodeUserData,ut);const tt=this.D(new c.$io(xe.defaultProfile.settingsResource,Ze,Xe,Ke));De.set(u.$Bi,tt);const ft=new Lt.$MRc(void 0,{defaultProfile:xe.defaultProfile,currentProfile:xe.defaultProfile},Be,Je);De.set(V.$yp,ft),this.D((0,j.$Rc)(()=>ft.flush())),await Promise.all([tt.initialize(),ft.initialize()]);const wt=new Ct.$Hr(Be.getChannel("request"));De.set(se.$Gp,wt),De.set(h.$iRc,new q.$5h(f.$jRc,void 0,!1)),De.set(ve.$fU,new q.$5h(pe.$vRc,void 0,!1));const bt=new Dt.$WQc(-1,Be);De.set(It.$CPc,bt),De.set(r.$mo,new q.$5h(n.$T4,void 0,!0));const qt=this.D(new $e.$kQc(bt)),Mt=new C.$Ph(Ge=>qt.getActiveClientId().then(ct=>Ge===ct));De.set(v.$XDc,new Pt.$IRc(this.a.getChannel("extensionRecommendationNotification",Mt)));let at;const it=[],pt=(0,W.$0o)(ze,tt);if((0,W.$4o)(ze,Je)){const Ge=new U.$mNc(Ke,_e,Je,ze);if(it.push(Ge),!(0,W.$5o)(ze,Je)&&ze.aiConfig?.ariaKey){const ct=new We.$s4(wt,pt,"monacoworkbench",null,ze.aiConfig.ariaKey);this.D((0,j.$Rc)(()=>ct.flush())),it.push(ct)}at=new O.$Lr({appenders:it,commonProperties:(0,ne.$Uo)((0,D.release)(),(0,D.hostname)(),process.arch,ze.commit,ze.version,this.f.machineId,this.f.sqmId,pt),sendErrorTelemetry:!0,piiPaths:(0,W.$$o)(Je)},tt,ze)}else{at=W.$Yo;const Ge=W.$3o;it.push(Ge)}this.a.registerChannel("telemetryAppender",new z.$2Pc(it)),De.set(K.$Al,at);const Ft=new B.$kRc(tt,at,Ke,_e,Je,ze);De.set(K.$Dl,Ft),De.set(Te.$dq,new q.$5h(Rt.$D4,void 0,!0)),De.set(Ee.$hq,new q.$5h(Ie.$oQc,void 0,!0)),De.set(y.$Zp,new q.$5h(y.$1p,void 0,!0)),De.set(d.$rq,new q.$5h(d.$sq,void 0,!0)),De.set(a.$Jo,new q.$5h(o.$Xp,void 0,!0)),De.set(a.$Qo,new q.$5h(jt.$LRc,void 0,!1)),De.set(Q.$Dr,new q.$5h(F.$Fr,void 0,!1)),De.set(b.$Qm,new q.$5h(i.$ss,void 0,!1)),De.set(ie.$njc,new q.$5h(ie.$ojc,void 0,!0)),De.set(X.$fTb,new q.$5h(be.$Dlc,void 0,!0)),De.set(X.$eTb,C.ProxyChannel.toService(this.a.getChannel("userDataSyncUtil",Ge=>Ge.ctx!=="main"))),De.set(a.$Po,new q.$5h(t.$ljc,void 0,!1)),De.set(ee.$Blc,new q.$5h(ee.$Clc,void 0,!0)),De.set(_.$wI,new q.$5h(_.$xI)),De.set(X.$2Sb,new q.$5h(Re.$Nkc,void 0,!0)),De.set(X.$3Sb,new q.$5h(Re.$Pkc,void 0,!0)),De.set(le.$PSb,new q.$5h(le.$RSb,void 0,!0)),De.set(X.$4Sb,new q.$5h(ce.$2Nc,void 0,!1)),De.set(X.$aTb,new q.$5h(re.$QNc,void 0,!0)),De.set(X.$bTb,new q.$5h(me.$7Nc,void 0,!1)),De.set(Ce.$Zjc,new q.$5h(he.$rRc,void 0,!0)),De.set(X.$cTb,new q.$5h(et.$DOc,void 0,!0)),De.set(we.$ol,new q.$5h(ke.$MQc,void 0,!1));const yt=new gt.$ml;return De.set(gt.$ll,yt),yt.register(0,At.$NRc),De.set(Pe.$LI,new q.$5h(Le.$KQc)),De.set(Oe.$sRc,new q.$5h(qe.$uRc)),De.set(Ye.$xRc,new q.$5h(kt.$HRc)),new Y.$Yq(De)}j(De){const ze=new $.$3p(De.get(a.$Mo),()=>null);this.a.registerChannel("extensions",ze);const Qe=C.ProxyChannel.fromService(De.get(Q.$Dr),this.B);this.a.registerChannel("languagePacks",Qe);const Be=C.ProxyChannel.fromService(De.get(b.$Qm),this.B);this.a.registerChannel("diagnostics",Be);const Xe=new $.$5p(De.get(a.$Qo));this.a.registerChannel("extensionTipsService",Xe);const Je=C.ProxyChannel.fromService(De.get(h.$iRc),this.B);this.a.registerChannel("checksum",Je);const _e=C.ProxyChannel.fromService(De.get(ve.$fU),this.B);this.a.registerChannel("v8InspectProfiling",_e);const rt=C.ProxyChannel.fromService(De.get(le.$PSb),this.B);this.a.registerChannel("userDataSyncMachines",rt);const lt=C.ProxyChannel.fromService(De.get(K.$Dl),this.B);this.a.registerChannel("customEndpointTelemetry",lt);const Ke=new fe.$lRc(De.get(ie.$njc));this.a.registerChannel("userDataSyncAccount",Ke);const Ze=new fe.$nRc(De.get(X.$2Sb));this.a.registerChannel("userDataSyncStoreManagement",Ze);const ht=new ye.$pRc(De.get(X.$bTb),De.get(Ae.$9k),De.get(te.$qj));this.a.registerChannel("userDataSync",ht);const ot=this.D(De.get(M.$7h).createInstance(Ot.$KRc));this.a.registerChannel("userDataAutoSync",C.ProxyChannel.fromService(ot,this.B)),this.a.registerChannel("IUserDataSyncResourceProviderService",C.ProxyChannel.fromService(De.get(X.$cTb),this.B));const xe=C.ProxyChannel.fromService(De.get(Oe.$sRc),this.B);this.a.registerChannel(Oe.$tRc,xe);const ut=C.ProxyChannel.fromService(De.get(Ye.$xRc),this.B);this.a.registerChannel("remoteTunnel",ut)}m(De){process.on("uncaughtException",ze=>(0,L.$1)(ze)),process.on("unhandledRejection",ze=>(0,L.$1)(ze)),(0,L.setUnexpectedErrorHandler)(ze=>{const Qe=(0,N.$Si)(ze,!0);Qe&&De.error(`[uncaught exception in sharedProcess]: ${Qe}`)})}n(De,ze){De.publicLog2("profilesInfo",{count:ze.profiles.length})}handledClientConnection(De){if(De.data!==nt.$YPc.response)return!1;const ze=(0,R.$Ob)(De.ports);return ze?(this.c.fire(ze),!0):!1}}async function mt(st){const De=new Tt(st);process.parentPort.postMessage(nt.$WPc.ipcReady),await De.init(),process.parentPort.postMessage(nt.$WPc.initDone)}e.main=mt,process.parentPort.once("message",st=>{mt(st.data)})})}).call(this);

//# sourceMappingURL=https://cursor-sourcemaps.s3.amazonaws.com/sourcemaps/fcd6e551d6f014d13071eac9bd4904e7e0346720/core/vs/code/node/sharedProcess/sharedProcessMain.js.map
